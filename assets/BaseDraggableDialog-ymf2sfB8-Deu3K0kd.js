
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{e as S,ac as _,J as N,E as V,z as F,ae as I,o as y,c as W,A as j,f as a,Y as d,u as A,r as E,g as J,O as B,n as R,bn as U,a9 as Z}from"./index-DXZKKOp8.js";import{s as q,y as G,u as K}from"./vue-data-ui-BN9YfUec.js";import"./alert-l5XlVwCh.js";const Q=["xmlns"],ee={class:"modal-title"},te={class:"draggable-dialog-actions"},ne={__name:"BaseDraggableDialog",props:{backgroundColor:{type:String},color:{type:String},headerBg:{type:String},headerColor:{type:String},fullscreenParent:{type:HTMLElement},isFullscreen:{type:Boolean,default:!1},withPadding:{type:Boolean,default:!1},forcedWidth:{type:Number,default:400}},emits:["close"],setup(r,{expose:H,emit:X}){const f=r,$=X,g=S(!1),L=S(!1),z=S(0);function w(){z.value+=1}const e=_({left:window.innerWidth/2-200,top:window.innerHeight/2-120,width:f.forcedWidth,height:400,dragging:!1,resizing:!1,dragOffsetX:0,dragOffsetY:0,pointerStartX:0,pointerStartY:0,resizeStartW:0,resizeStartH:0});function D(){g.value=!0,Z(()=>{L.value||(e.left=Math.max(0,window.innerWidth/2-e.width/2),e.top=Math.max(0,window.innerHeight/2-e.height/2),L.value=!0)})}function x(){g.value=!1,$("close")}H({open:D,close:x});const O=N(()=>({position:"fixed",left:"".concat(e.left,"px"),top:"".concat(e.top,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),padding:0,border:"none",background:f.backgroundColor,boxShadow:"0 4px 24px rgba(0,0,0,0.15)",zIndex:9999,overflow:"visible",borderRadius:"2px","--dlg-color":f.color}));function l(t){return t.touches&&t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:{x:t.clientX,y:t.clientY}}function M(t){var o;(o=t.preventDefault)==null||o.call(t),w(),e.dragging=!0;const n=l(t);e.dragOffsetX=n.x-e.left,e.dragOffsetY=n.y-e.top,document.addEventListener("mousemove",h),document.addEventListener("mouseup",u),document.addEventListener("touchmove",h,{passive:!1}),document.addEventListener("touchend",u)}function h(t){var i;if(!e.dragging)return;(i=t.preventDefault)==null||i.call(t);const n=l(t);let o=n.x-e.dragOffsetX,s=n.y-e.dragOffsetY;o=Math.max(0,Math.min(o,window.innerWidth-e.width)),s=Math.max(0,Math.min(s,window.innerHeight-e.height)),e.left=o,e.top=s}function u(){e.dragging=!1,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",u)}function k(t){var o;(o=t.preventDefault)==null||o.call(t),w(),e.resizing=!0;const n=l(t);e.pointerStartX=n.x,e.pointerStartY=n.y,e.resizeStartW=e.width,e.resizeStartH=e.height,document.addEventListener("mousemove",v),document.addEventListener("mouseup",c),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("touchend",c)}function v(t){var i;if(!e.resizing)return;(i=t.preventDefault)==null||i.call(t);const n=l(t);let o=n.x-e.pointerStartX,s=n.y-e.pointerStartY;e.width=Math.max(240,e.resizeStartW+o),e.height=Math.max(400,e.resizeStartH+s)}function c(){e.resizing=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",c),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",c)}function b(t){var o;(o=t.preventDefault)==null||o.call(t),w(),e.resizing=!0;const n=l(t);e.pointerStartX=n.x,e.pointerStartY=n.y,e.resizeStartW=e.width,e.resizeStartH=e.height,e.resizeStartLeft=e.left,e.resizeStartTop=e.top,document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",m)}function p(t){var Y;if(!e.resizing)return;(Y=t.preventDefault)==null||Y.call(t);const n=l(t);let o=n.x-e.pointerStartX,s=Math.min(Math.max(0,e.resizeStartLeft+o),e.resizeStartLeft+e.resizeStartW-240),i=e.resizeStartW-(s-e.resizeStartLeft),T=n.y-e.pointerStartY,P=Math.max(400,e.resizeStartH+T);e.left=s,e.width=i,e.height=P}function m(){e.resizing=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",m)}V(()=>{document.addEventListener("keydown",C)});function C(t){t.key&&t.key==="Escape"&&x()}return I(()=>{u(),c(),m(),document.removeEventListener("keydown",C)}),(t,n)=>(y(),F(U,{to:r.isFullscreen?r.fullscreenParent:"body",key:z.value},[g.value?(y(),W("div",{key:0,class:"modal vue-ui-draggable-dialog",style:B(O.value),onClick:n[0]||(n[0]=d(()=>{},["stop"]))},[a("div",{class:"modal-header",style:B({backgroundColor:r.headerBg,color:r.headerColor})},[a("span",{class:"drag-handle",onMousedown:d(M,["stop","prevent"]),onTouchstart:d(M,["stop","prevent"])},[(y(),W("svg",{xmlns:A(G),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[...n[1]||(n[1]=[a("path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),a("path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),a("path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),a("path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),a("path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1),a("path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},null,-1)])],8,Q))],32),a("span",ee,[E(t.$slots,"title",{},void 0,!0)]),a("div",te,[E(t.$slots,"actions",{},void 0,!0),a("button",{class:"close",onClick:x},[J(K,{name:"close",stroke:r.headerColor},null,8,["stroke"])])])],4),a("div",{class:R({"modal-body":!r.withPadding,"modal-body-pad":r.withPadding})},[E(t.$slots,"content",{},void 0,!0)],2),a("div",{class:"resize-handle",onMousedown:d(k,["stop","prevent"]),onTouchstart:d(k,["stop","prevent"])},null,32),a("div",{class:"resize-handle resize-handle-left",onMousedown:d(b,["stop","prevent"]),onTouchstart:d(b,["stop","prevent"])},null,32)],4)):j("",!0)],8,["to"]))}},se=q(ne,[["__scopeId","data-v-1be15e28"]]);export{se as default};
