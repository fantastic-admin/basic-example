
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{e as u,J as P,au as O,E as Y,aw as j,K as q,w as A,u as J,c as p,o as s,f as a,A as T,z as U,r as Z,g as F,j as G,k as H,O as i,Z as l,F as M,R as $,bq as Q,Y as W,aa as X}from"./index-CJB5jCfL.js";import{s as ee,m as oe,O as w}from"./vue-data-ui-8Gmf-dDN.js";import{i as te}from"./vClickOutside-C6WiFswA-B2BXHGcD.js";const ne=["onClick"],le={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},re=["value"],ae=["onClick"],ue={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},se=["value"],ie={__name:"ColorPicker",props:{value:{type:String,default:"#ffffff"},size:{type:String,default:"50px"},backgroundColor:{type:String,default:"#FFFFFF"},buttonBorderColor:{type:String,default:"#FFFFFF"},teleported:{type:Boolean,default:!1}},emits:["update:value"],setup(t,{emit:R}){const d=t,C=R,V=u(null),b=u(null),c=u(null),r=u(!1),y=u(!1),m=u({top:0,left:0}),K=P(()=>({backgroundColor:d.value,width:"100%",height:"100%",cursor:"pointer"})),v=P(()=>oe(d.value));function g(o){C("update:value",o),r.value=!1}function h(o){C("update:value",o.target.value)}function E(o){var e,n;(e=o==null?void 0:o.stopPropagation)==null||e.call(o),y.value=!0,(n=c.value)==null||n.click()}function D(){r.value=!1}function L(){!y.value&&r.value&&D()}async function N(){r.value=!r.value,r.value&&d.teleported&&(await X(),x())}function x(){if(!b.value)return;const o=b.value.getBoundingClientRect();m.value={top:o.top+36,left:o.right-48}}function f(){r.value&&d.teleported&&x()}function k(){setTimeout(()=>y.value=!1,0)}O(o=>{const e=c.value;if(!e)return;const n=()=>k(),_=()=>k(),I=()=>{};e.addEventListener("blur",n),e.addEventListener("change",_),e.addEventListener("input",I),o(()=>{e.removeEventListener("blur",n),e.removeEventListener("change",_),e.removeEventListener("input",I)})});function B(){k()}function z(){document.visibilityState==="visible"&&k()}Y(()=>{window.addEventListener("scroll",f,{passive:!0}),window.addEventListener("resize",f,{passive:!0}),window.addEventListener("focus",B),document.addEventListener("visibilitychange",z)}),j(()=>{window.removeEventListener("scroll",f),window.removeEventListener("resize",f),window.removeEventListener("focus",B),document.removeEventListener("visibilitychange",z)}),q(()=>d.value,o=>{c.value&&(c.value.value=o)});const S=u(["#000000","#FFFFFF","#FF5733","#33FF57","#3357FF","#FFC300","#800080","#FF1493","#00CED1"]);return(o,e)=>A((s(),p("div",{ref_key:"wrapperRef",ref:V,onKeydown:W(L,["esc"]),style:{height:"100%",width:"100%",position:"relative"}},[a("button",{ref_key:"buttonRef",ref:b,class:"icon",onClick:N,style:i(K.value),type:"button"},[Z(o.$slots,"annotator-action-color",G(H({color:v.value})),()=>[F(w,{name:"palette",stroke:v.value,size:22},null,8,["stroke"])],!0)],4),r.value&&!t.teleported?(s(),p("div",{key:0,tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:t.backgroundColor,position:"absolute",left:"calc(100% + 30px)",top:"50%",transform:"translateY(-18%)"}),onMousedown:e[2]||(e[2]=l(()=>{},["stop"])),onClick:e[3]||(e[3]=l(()=>{},["stop"])),onTouchstart:e[4]||(e[4]=l(()=>{},["stop"]))},[(s(!0),p(M,null,$(S.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:()=>g(n)},null,12,ne))),128)),a("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:t.value,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[0]||(e[0]=l(()=>{},["stop"])),onTouchstart:e[1]||(e[1]=l(()=>{},["stop"]))},[a("div",le,[F(w,{name:"colorPicker",stroke:v.value,size:22},null,8,["stroke"])]),a("input",{ref_key:"colorInput",ref:c,type:"color",value:t.value,class:"hidden-input",onInput:h},null,40,re)],36)],36)):T("",!0),r.value&&t.teleported?(s(),U(Q,{key:1,to:"body"},[a("div",{tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:t.backgroundColor,position:"fixed",top:m.value.top+"px",left:m.value.left+"px",zIndex:2147483647}),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onClick:e[8]||(e[8]=l(()=>{},["stop"])),onTouchstart:e[9]||(e[9]=l(()=>{},["stop"]))},[(s(!0),p(M,null,$(S.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:()=>g(n)},null,12,ae))),128)),a("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:t.value,outline:"1px solid ".concat(t.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[5]||(e[5]=l(()=>{},["stop"])),onTouchstart:e[6]||(e[6]=l(()=>{},["stop"]))},[a("div",ue,[F(w,{name:"colorPicker",stroke:v.value,size:22},null,8,["stroke"])]),a("input",{ref_key:"colorInput",ref:c,type:"color",value:t.value,class:"hidden-input",onInput:h},null,40,se)],36)],36)])):T("",!0)],32)),[[J(te),L]])}},ve=ee(ie,[["__scopeId","data-v-e6c0b73a"]]);export{ve as k};
