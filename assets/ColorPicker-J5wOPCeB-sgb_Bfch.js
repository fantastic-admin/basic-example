
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{e as a,J as T,at as Y,E as A,av as J,K as O,w as U,u as X,c as p,o as s,f as u,A as K,z as j,g as F,O as i,Y as l,F as M,R as P,bn as q,X as G,a9 as H}from"./index-DXZKKOp8.js";import{s as Q,K as W,u as C}from"./vue-data-ui-BN9YfUec.js";import{i as Z}from"./vClickOutside-C6WiFswA-B2BXHGcD.js";const ee=["onClick"],te={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},oe=["value"],ne=["onClick"],le={style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-46%)"}},re=["value"],ue={__name:"ColorPicker",props:{value:{type:String,default:"#ffffff"},size:{type:String,default:"50px"},backgroundColor:{type:String,default:"#FFFFFF"},buttonBorderColor:{type:String,default:"#FFFFFF"},teleported:{type:Boolean,default:!1}},emits:["update:value"],setup(o,{emit:$}){const v=o,w=$,R=a(null),k=a(null),c=a(null),r=a(!1),b=a(!1),y=a({top:0,left:0}),V=T(()=>({backgroundColor:v.value,width:"100%",height:"100%",cursor:"pointer"})),m=T(()=>W(v.value));function g(t){w("update:value",t),r.value=!1}function h(t){w("update:value",t.target.value)}function E(t){var e,n;(e=t==null?void 0:t.stopPropagation)==null||e.call(t),b.value=!0,(n=c.value)==null||n.click()}function D(){r.value=!1}function L(){!b.value&&r.value&&D()}async function N(){r.value=!r.value,r.value&&v.teleported&&(await H(),x())}function x(){if(!k.value)return;const t=k.value.getBoundingClientRect();y.value={top:t.top+36,left:t.right-48}}function d(){r.value&&v.teleported&&x()}function f(){setTimeout(()=>b.value=!1,0)}Y(t=>{const e=c.value;if(!e)return;const n=()=>f(),I=()=>f(),S=()=>{};e.addEventListener("blur",n),e.addEventListener("change",I),e.addEventListener("input",S),t(()=>{e.removeEventListener("blur",n),e.removeEventListener("change",I),e.removeEventListener("input",S)})});function B(){f()}function z(){document.visibilityState==="visible"&&f()}A(()=>{window.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",d,{passive:!0}),window.addEventListener("focus",B),document.addEventListener("visibilitychange",z)}),J(()=>{window.removeEventListener("scroll",d),window.removeEventListener("resize",d),window.removeEventListener("focus",B),document.removeEventListener("visibilitychange",z)}),O(()=>v.value,t=>{c.value&&(c.value.value=t)});const _=a(["#000000","#FFFFFF","#FF5733","#33FF57","#3357FF","#FFC300","#800080","#FF1493","#00CED1"]);return(t,e)=>U((s(),p("div",{ref_key:"wrapperRef",ref:R,onKeydown:G(L,["esc"]),style:{height:"100%",width:"100%",position:"relative"}},[u("button",{ref_key:"buttonRef",ref:k,class:"icon",onClick:N,style:i(V.value),type:"button"},[F(C,{name:"palette",stroke:m.value,size:22},null,8,["stroke"])],4),r.value&&!o.teleported?(s(),p("div",{key:0,tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:o.backgroundColor,position:"absolute",left:"calc(100% + 30px)",top:"50%",transform:"translateY(-18%)"}),onMousedown:e[2]||(e[2]=l(()=>{},["stop"])),onClick:e[3]||(e[3]=l(()=>{},["stop"])),onTouchstart:e[4]||(e[4]=l(()=>{},["stop"]))},[(s(!0),p(M,null,P(_.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:()=>g(n)},null,12,ee))),128)),u("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:o.value,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[0]||(e[0]=l(()=>{},["stop"])),onTouchstart:e[1]||(e[1]=l(()=>{},["stop"]))},[u("div",te,[F(C,{name:"colorPicker",stroke:m.value,size:22},null,8,["stroke"])]),u("input",{ref_key:"colorInput",ref:c,type:"color",value:o.value,class:"hidden-input",onInput:h},null,40,oe)],36)],36)):K("",!0),r.value&&o.teleported?(s(),j(q,{key:1,to:"body"},[u("div",{tabindex:"0",class:"vue-ui-color-picker",style:i({backgroundColor:o.backgroundColor,position:"fixed",top:y.value.top+"px",left:y.value.left+"px",zIndex:2147483647}),onMousedown:e[7]||(e[7]=l(()=>{},["stop"])),onClick:e[8]||(e[8]=l(()=>{},["stop"])),onTouchstart:e[9]||(e[9]=l(()=>{},["stop"]))},[(s(!0),p(M,null,P(_.value,n=>(s(),p("button",{key:n,class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:n,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:()=>g(n)},null,12,ne))),128)),u("button",{class:"vue-ui-color-picker-option",type:"button",style:i({backgroundColor:o.value,outline:"1px solid ".concat(o.buttonBorderColor)}),onClick:l(E,["stop"]),onMousedown:e[5]||(e[5]=l(()=>{},["stop"])),onTouchstart:e[6]||(e[6]=l(()=>{},["stop"]))},[u("div",le,[F(C,{name:"colorPicker",stroke:m.value,size:22},null,8,["stroke"])]),u("input",{ref_key:"colorInput",ref:c,type:"color",value:o.value,class:"hidden-input",onInput:h},null,40,re)],36)],36)])):K("",!0)],32)),[[X(Z),L]])}},ce=Q(ue,[["__scopeId","data-v-22a32b57"]]);export{ce as v};
