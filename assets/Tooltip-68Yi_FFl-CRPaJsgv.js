
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{O as F}from"./vue-data-ui-BN9YfUec.js";import{e as f,K as b,a9 as B,ae as k,J as h,z as C,o as g,c as w,A as O,r as y,f as N,O as Y,n as $,bn as T,E as z}from"./index-DXZKKOp8.js";import"./alert-l5XlVwCh.js";function M({tooltip:a,chart:e,clientPosition:o,positionPreference:p="center",defaultOffsetY:c=24,blockShiftY:r=!1}){const t=f(0),i=f(c);if(a&&e){const{width:n,height:v}=a.getBoundingClientRect(),{right:u,left:d,bottom:m}=e.getBoundingClientRect();p==="center"&&(o.x+n/2>u?t.value=-n+(u-o.x):o.x-n/2<d?t.value=-n+(n-(o.x-d)):t.value=-n/2),p==="right"&&(o.x+n>u?t.value=-n+(u-o.x):t.value=0),p==="left"&&(o.x<d+n?t.value=-n+(n-(o.x-d)):t.value=-n),o.y+v>m&&!r&&(i.value=-v-c)}return{top:o.y+i.value,left:o.x+t.value}}function E(a,e,o){z(()=>a.addEventListener(e,o)),k(()=>a.removeEventListener(e,o))}function R(){const a=f(0),e=f(0);return E(window,"mousemove",o=>{a.value=o.clientX,e.value=o.clientY}),{x:a,y:e}}const A=["aria-hidden"],L=["innerHTML"],_={__name:"Tooltip",props:{backgroundColor:{type:String,default:"#FFFFFF"},color:{type:String,default:"#000000"},content:String,maxWidth:{type:String,default:"300px"},parent:{type:Object},show:{type:Boolean,default:!1},isCustom:{type:Boolean,default:!1},fontSize:{type:[Number,String],default:14},borderRadius:{type:Number,default:4},borderColor:{type:String,default:"#e1e5e8"},borderWidth:{type:Number,default:1},backgroundOpacity:{type:Number,default:100},position:{type:String,default:"center"},offsetY:{type:Number,default:24},blockShiftY:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},smooth:{type:Boolean,default:!0},backdropFilter:{type:Boolean,default:!0},smoothForce:{type:Number,default:.18},smoothSnapThreshold:{type:Number,default:.25}},setup(a){const e=a,o=f(null),{x:p,y:c}=R(e.parent),r=f({x:0,y:0}),t=f({x:0,y:0});let i=null;function n(){if(!e.show){u();return}if(!e.smooth){t.value.x=r.value.x,t.value.y=r.value.y,u();return}const l=r.value.x-t.value.x,s=r.value.y-t.value.y;if(Math.abs(l)<=e.smoothSnapThreshold&&Math.abs(s)<=e.smoothSnapThreshold){t.value.x=r.value.x,t.value.y=r.value.y,u();return}t.value.x+=l*e.smoothForce,t.value.y+=s*e.smoothForce,i=requestAnimationFrame(n)}function v(){i==null&&e.show&&e.smooth&&(i=requestAnimationFrame(n))}function u(){i!=null&&(cancelAnimationFrame(i),i=null)}b([p,c],([l,s])=>{r.value.x=l,r.value.y=s,e.smooth?v():(t.value.x=l,t.value.y=s)}),b(()=>e.show,async l=>{if(l){const s=p.value,x=c.value;r.value.x=s,r.value.y=x,t.value.x=s,t.value.y=x,await B(),v()}else u()}),k(()=>{u()});const d=h(()=>{const l=M({tooltip:o.value,chart:e.parent,clientPosition:t.value,positionPreference:e.position,defaultOffsetY:e.offsetY,blockShiftY:e.blockShiftY});return{top:Math.round(l.top),left:Math.round(l.left)}}),m=h(()=>F(e.backgroundColor,e.backgroundOpacity)),S=h(()=>{const l={pointerEvents:"none",position:"fixed",top:"0px",left:"0px",transform:"translate3d(".concat(d.value.left,"px, ").concat(d.value.top,"px, 0)"),borderRadius:"".concat(e.borderRadius,"px"),border:"".concat(e.borderWidth,"px solid ").concat(e.borderColor),zIndex:2147483647};return e.isCustom||Object.assign(l,{background:m.value,color:e.color,maxWidth:e.maxWidth,fontSize:"".concat(e.fontSize,"px")}),l});return(l,s)=>(g(),C(T,{to:a.isFullscreen?a.parent:"body"},[a.show?(g(),w("div",{key:0,ref_key:"tooltip",ref:o,role:"tooltip","aria-hidden":!a.show,"aria-live":"polite",class:$({"vue-data-ui-custom-tooltip":a.isCustom,"vue-data-ui-tooltip":!a.isCustom,"vue-data-ui-tooltip-backdrop":a.backdropFilter}),style:Y(S.value)},[y(l.$slots,"tooltip-before"),y(l.$slots,"default"),N("div",{innerHTML:a.content},null,8,L),y(l.$slots,"tooltip-after")],14,A)):O("",!0)],8,["to"]))}};export{_ as default};
