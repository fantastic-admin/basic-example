
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{e as g,au as C,u as v,K as L,bV as N,J as A,bW as oe,bX as le,af as ue,at as ae,ad as ce,i as fe,a8 as de,bY as Y,d as he,c as ve,o as me,g as _,h as S,p as pe,l as R,G as ge,f as P,Q as be,t as k,P as we,C as J}from"./index-CJB5jCfL.js";import _e from"./alert-I_0TAljB.js";import{_ as Pe}from"./command.vue_vue_type_script_setup_true_lang-R3ZD5J4P.js";import"./index.vue_vue_type_script_setup_true_lang-CP_Tumhm.js";const te=(t,{manual:e,ready:n=!0,refreshDeps:i=[],refreshDepsAction:r})=>{const u=g(!1);return C(()=>{!e&&t.options.refreshDeps!==!0&&(u.value=v(n))}),i instanceof Array?L([u,...i],([s])=>{s&&!e&&s&&(r?r():t.refresh())},{deep:!0,immediate:!1}):L(u,s=>{!e&&s&&(r?r():t.refresh())}),{name:"autoRunPlugin",onBefore:()=>{if(!v(n))return{stopNow:!0}}}};te.onInit=({ready:t=!0,manual:e})=>({loading:!e&&v(t)});const B=new Map,Ee=(t,e,n)=>{const i=B.get(t);i!=null&&i.timer&&clearTimeout(i.timer);let r;e>-1&&(r=setTimeout(()=>{B.delete(t)},e)),B.set(t,{...n,timer:r})},Se=t=>B.get(t),U=new Map,Fe=t=>U.get(t),Re=(t,e)=>{U.set(t,e),e.then(n=>(U.delete(t),n)).catch(n=>{throw U.delete(t),n})},F={},Ce=[],Oe=(t,e)=>{F[t]&&(F[t].forEach(n=>n(e)),Ce.forEach(n=>n({type:t,data:e})))},I=(t,e)=>(F[t]||(F[t]=[]),F[t].push(e),function(){const i=F[t].indexOf(e);F[t].splice(i,1)}),xe=(t,{cacheKey:e,cacheTime:n=300*1e3,staleTime:i=0,setCache:r,getCache:u})=>{const s=g(),l=g(),o=(a,d)=>{r?r(d):Ee(a,n,d),Oe(a,d.data)},f=(a,d=[])=>u?u(d):Se(a);return C(()=>{if(!e)return;const a=f(e);a&&Object.hasOwnProperty.call(a,"data")&&(t.state.data=a.data,t.state.params=a.params,(i===-1||new Date().getTime()-a.time<=i)&&(t.state.loading=!1)),s.value=I(e,d=>{t.setState({data:d})})}),N(()=>{var a;(a=s.value)==null||a.call(s)}),e?{name:"cachePlugin",onBefore:a=>{const d=f(e,a);return!d||!Object.hasOwnProperty.call(d,"data")?{}:i===-1||new Date().getTime()-d.time<=i?{loading:!1,data:d==null?void 0:d.data,returnNow:!0}:{data:d==null?void 0:d.data}},onRequest:(a,d)=>{let c=Fe(e);return c&&c!==l.value?{servicePromise:c}:(c=a(...d),l.value=c,Re(e,c),{servicePromise:c})},onSuccess:(a,d)=>{var c;e&&((c=s.value)==null||c.call(s),o(e,{data:a,params:d,time:new Date().getTime()}),s.value=I(e,h=>{t.setState({data:h})}))},onMutate:a=>{var d;e&&((d=s.value)==null||d.call(s),o(e,{data:a,params:t.state.params,time:new Date().getTime()}),s.value=I(e,c=>{t.setState({data:c})}))}}:{}},De=(t,{debounceWait:e,debounceLeading:n,debounceTrailing:i,debounceMaxWait:r})=>{const u=g(),s=A(()=>{const l={},o=v(n),f=v(i),a=v(r);return o!==void 0&&(l.leading=o),f!==void 0&&(l.trailing=f),a!==void 0&&(l.maxWait=a),l});return C(l=>{if(v(e)){const o=t.runAsync.bind(t);u.value=oe(f=>{f()},v(e),s.value),t.runAsync=(...f)=>new Promise((a,d)=>{var c;(c=u.value)==null||c.call(u,()=>{o(...f).then(a).catch(d)})}),l(()=>{var f;(f=u.value)==null||f.cancel(),t.runAsync=o})}}),v(e)?{name:"debouncePlugin",onCancel:()=>{var l;(l=u.value)==null||l.cancel()}}:{}};var Ae=Object.defineProperty,Te=(t,e,n)=>e in t?Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,X=(t,e,n)=>(Te(t,typeof e!="symbol"?e+"":e,n),n);class qe{constructor(){X(this,"table",{}),X(this,"hashTable",{})}insert(e){const n=Symbol(e);return this.table[e]=!0,this.hashTable[n]=e,n}find(e){return this.hashTable[e]}}new qe;var Be=Object.defineProperty,Ue=(t,e,n)=>e in t?Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z=(t,e,n)=>(Ue(t,typeof e!="symbol"?e+"":e,n),n);class ye{constructor(){Z(this,"requestInstances",new Map),Z(this,"listeners",[])}emit(e){this.listeners.forEach(n=>n(e))}subscribe(e){return this.listeners.push(e),()=>{const n=this.listeners.indexOf(e);this.listeners.splice(n,1)}}insert(e,n){this.requestInstances.set(e,{...n}),this.emit({key:e,...n})}update(e,n){this.has(e)&&this.requestInstances.set(e,{...this.requestInstances.get(e),...n})}has(e){return this.requestInstances.has(e)}reset(e){if(this.requestInstances.has(e)){const n=this.requestInstances.get(e);this.requestInstances.clear(),this.insert(e,n)}else this.requestInstances.clear()}getAll(){return this.requestInstances}}new ye;const $e=(t,{loadingDelay:e})=>{const n=g(),i=()=>{n.value&&(clearTimeout(v(n.value)),n.value=void 0)};return{name:"loadingDelayPlugin",onFinally:()=>{i();const r=v(e);r&&(t.setState({loading:!0}),n.value=setTimeout(()=>{t.setState({loading:!1})},r))},onError:()=>{i()}}};function V(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}const Ie=!!(typeof window<"u"&&window.document&&window.document.createElement);function j(){return V()?document.visibilityState!=="hidden":!0}const x=[];function He(t){return x.push(t),function(){const n=x.indexOf(t);x.splice(n,1)}}if(V()){const t=()=>{if(j())for(let e=0;e<x.length;e++){const n=x[e];n()}};window.addEventListener("visibilitychange",t,!1)}const Le=(t,{pollingInterval:e,pollingWhenHidden:n=!0,pollingErrorRetryCount:i=-1})=>{let r;const u=g(),s=g(0),l=()=>{var o;r&&clearTimeout(r),(o=u.value)==null||o.call(u)};return C(()=>{v(e)||l()}),v(e)?{name:"pollingPlugin",onBefore:()=>{l()},onError:()=>{s.value+=1},onSuccess:()=>{s.value=0},onFinally:()=>{i===-1||i!==-1&&s.value<=i?r=setTimeout(()=>{!n&&!j()?u.value=He(()=>{t.refresh()}):t.refresh()},v(e)):s.value=0},onCancel:()=>{l()}}:{}};function Me(t,e){let n=!1;return(...i)=>{n||(n=!0,t(...i),setTimeout(()=>{n=!1},e))}}function Ne(){return V()&&typeof navigator.onLine<"u"?navigator.onLine:!0}const D=[];function Ve(t){return D.push(t),function(){const n=D.indexOf(t);n>-1&&D.splice(n,1)}}if(Ie){const t=()=>{if(!(!j()||!Ne()))for(let e=0;e<D.length;e++){const n=D[e];n()}};window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1)}const je=(t,{refreshOnWindowFocus:e,focusTimespan:n=5e3})=>{const i=g(),r=()=>{var u;(u=i.value)==null||u.call(i)};return C(u=>{if(v(e)){const s=Me(t.refresh.bind(t),v(n));i.value=Ve(()=>{s()})}u(()=>{r()})}),N(()=>{r()}),{name:"refreshOnWindowFocusPlugin"}},ze=(t,{retryInterval:e,retryCount:n})=>{const i=g(),r=g(0),u=g(!1);return n?{name:"retryPlugin",onBefore:()=>{u.value||(r.value=0),u.value=!1,i.value&&clearTimeout(i.value)},onSuccess:()=>{r.value=0},onError:()=>{if(r.value+=1,n===-1||r.value<=n){const s=e!=null?e:Math.min(1e3*2**r.value,3e4);i.value=setTimeout(()=>{u.value=!0,t.refresh()},s)}else r.value=0},onCancel:()=>{r.value=0,i.value&&clearTimeout(i.value)}}:{}},Ge=(t,{throttleWait:e,throttleLeading:n,throttleTrailing:i})=>{let r=null;const u=A(()=>{const f={};return v(n)!==void 0&&(f.leading=v(n)),v(i)!==void 0&&(f.trailing=v(i)),f}),s=t.runAsync.bind(t),l=g(),o=A(()=>v(e));return L([o,u],f=>{r&&(r.cancel(),t.runAsync=s);const[a,d]=f,c=le(h=>{h()},v(a),d);r=c,l.value=c,t.runAsync=(...h)=>new Promise((w,m)=>{var b;(b=l.value)==null||b.call(l,()=>{s(...h).then(w).catch(m)})})},{immediate:!0}),v(e)?(ue(()=>{var f;(f=l.value)==null||f.cancel()}),{name:"throttlePlugin",onCancel:()=>{var f;(f=l.value)==null||f.cancel()}}):{}},K=t=>typeof t=="function",We=t=>typeof t=="boolean";var Qe=Object.defineProperty,Ye=(t,e,n)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e,n)=>(Ye(t,typeof e!="symbol"?e+"":e,n),n);class ke{constructor(e,n,i,r={}){T(this,"pluginImpls"),T(this,"count",0),T(this,"state",{loading:!1,params:void 0,data:void 0,error:void 0}),T(this,"previousValidData"),this.serviceRef=e,this.options=n,this.setUpdateData=i,this.initState=r,this.state={...this.state,loading:!n.manual,...r}}setState(e={}){this.state={...this.state,...e},this.setUpdateData(this.state)}setData(e,n){console.warn("Please use 'setFetchState' instead of 'setData'"),n instanceof Array?n.forEach(i=>{this.state[i]=e,this.setUpdateData(e,i)}):(this.state[n]=e,this.setUpdateData(e,n))}setFetchState(e,n){n instanceof Array?n.forEach(i=>{this.state[i]=e,this.setUpdateData(e,i)}):(this.state[n]=e,this.setUpdateData(e,n))}runPluginHandler(e,...n){var i,r,u;const s=(u=(r=(i=this.pluginImpls)==null?void 0:i.map(l=>{var o;return(o=l[e])==null?void 0:o.call(l,...n)}))!=null?r:[])==null?void 0:u.filter(Boolean);return Object.assign({},...s)}async runAsync(...e){var n,i,r,u,s,l,o,f,a,d,c;this.count+=1;const h=this.count,{stopNow:w=!1,returnNow:m=!1,...b}=this.runPluginHandler("onBefore",e);if(w)return new Promise(()=>{});if(this.setState({loading:!0,params:e,...b}),m)return Promise.resolve(b.data);try{(i=(n=this.options).onBefore)==null||i.call(n,e)}catch(p){return this.setState({error:p,loading:!1}),(u=(r=this.options).onError)==null||u.call(r,p,e),this.runPluginHandler("onError",p,e),new Promise(()=>{})}try{let{servicePromise:p}=this.runPluginHandler("onRequest",this.serviceRef.value,e);const se=$=>{var z,G,W,Q;if(!this.options.concurrent&&h!==this.count)return new Promise(()=>{});const E=this.options.formatResult?this.options.formatResult($):$,re={data:$};return this.setState({data:E,error:void 0,loading:!1}),(G=(z=this.options).onSuccess)==null||G.call(z,E,e),this.runPluginHandler("onSuccess",E,e,re),this.previousValidData=E,(Q=(W=this.options).onFinally)==null||Q.call(W,e,E,void 0),(this.options.concurrent||h===this.count)&&this.runPluginHandler("onFinally",e,E,void 0),E};p||(p=this.serviceRef.value(...e));const ie=await p;return se(ie)}catch(p){if(!this.options.concurrent&&h!==this.count)return new Promise(()=>{});throw this.setState({error:p,loading:!1}),(l=(s=this.options).onError)==null||l.call(s,p,e),this.runPluginHandler("onError",p,e),(K((o=this.options)==null?void 0:o.rollbackOnError)&&((f=this.options)!=null&&f.rollbackOnError(e))||We((a=this.options)==null?void 0:a.rollbackOnError)&&this.options.rollbackOnError)&&this.setState({data:this.previousValidData}),(c=(d=this.options).onFinally)==null||c.call(d,e,void 0,p),(this.options.concurrent||h===this.count)&&this.runPluginHandler("onFinally",e,void 0,p),p}}run(...e){this.runAsync(...e).catch(n=>{this.options.onError||console.error(n)})}cancel(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")}refresh(){this.run(...this.state.params||[])}refreshAsync(){return this.runAsync(...this.state.params||[])}mutate(e){const n=K(e)?e(this.state.data):e;this.runPluginHandler("onMutate",n),this.setState({data:n})}}const Je=Symbol("USEREQUEST_GLOBAL_OPTIONS_PROVIDE_KEY");function Xe(t){return Object.keys(t).filter(n=>["data","loading","params","error"].includes(n)).length===4}function Ze(t,e={},n=[]){const i=ae(Je,{}),{initialData:r=void 0,manual:u=!1,ready:s=!0,...l}={...i!=null?i:{},...e!=null?e:{}},o={manual:u,ready:s,initialData:r,...l},f=g(t),a=ce({data:r,loading:!1,params:void 0,error:void 0}),d=(m,b)=>{b?a[b]=m:Xe(m)&&(a.data=m.data,a.loading=m.loading,a.error=m.error,a.params=m.params)},c=n.map(m=>{var b;return(b=m==null?void 0:m.onInit)==null?void 0:b.call(m,o)}).filter(Boolean),h=new ke(f,o,d,Object.assign({},...c,a));h.options=o,h.pluginImpls=n.map(m=>m(h,o));const w=A(()=>fe(s)?s.value:s);if(C(()=>{if(!u){const m=h.state.params||e.defaultParams||[];w.value&&h.options.refreshDeps===!0&&f.value&&h.run(...m)}}),!u&&h.options.refreshDeps!==!0){const m=h.state.params||e.defaultParams||[];v(s)&&h.run(...m)}return N(()=>{h.cancel()}),{...de(a),cancel:h.cancel.bind(h),refresh:h.refresh.bind(h),refreshAsync:h.refreshAsync.bind(h),run:h.run.bind(h),runAsync:h.runAsync.bind(h),mutate:h.mutate.bind(h)}}const Ke=(t,e)=>function(i,r={},u=[]){let s=t;const l=e||[];for(let o=l.length;o--;)s=l[o](s);return s(i,r,u)};function et(t,e,n){var i;const r=(i=[null,De,$e,Le,je,Ge,te,xe,ze])==null?void 0:i.filter(Boolean);return Ke(Ze,e==null?void 0:e.use)(t,e,[...r])}function q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var tt={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function M(t,e){function n(r,u,s){if(!(typeof document>"u")){s=q({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var o in s)s[o]&&(l+="; "+o,s[o]!==!0&&(l+="="+s[o].split(";")[0]));return document.cookie=r+"="+t.write(u,r)+l}}function i(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var u=document.cookie?document.cookie.split("; "):[],s={},l=0;l<u.length;l++){var o=u[l].split("="),f=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(s[a]=t.read(f,a),r===a)break}catch(d){}}return r?s[r]:s}}return Object.create({set:n,get:i,remove:function(r,u){n(r,"",q({},u,{expires:-1}))},withAttributes:function(r){return M(this.converter,q({},this.attributes,r))},withConverter:function(r){return M(q({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}M(tt,{path:"/"});var nt=Object.defineProperty,st=(t,e,n)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e,n)=>(st(t,typeof e!="symbol"?e+"":e,n),n);const O=class{constructor(t){y(this,"subscriptions",new Map),y(this,"emitEffectCache",new Map),y(this,"isGlobal"),this.isGlobal=!!(t!=null&&t.global),this.clear()}static getInstance(){return O.instance||(O.instance=new O({global:!0})),O.instance}subscribe(t,e){this.subscriptions.has(t)||this.subscriptions.set(t,new Set);const n=this.subscriptions.get(t);return n.add(e),this.isGlobal||this.emitEffect(t),()=>{n.delete(e),n.size===0&&this.subscriptions.delete(t)}}emit(t,...e){if(typeof t=="string"||typeof t=="number"){const n=this.subscriptions.get(t);n==null||n.forEach(i=>{i==null||i({params:Y(e.length===1?e[0]:e),event:t})}),this.isGlobal||this.emitEffectCache.set(t,{params:Y(e.length===1?e[0]:e),event:t})}else throw new TypeError("event must be string or number!")}emitEffect(t){if(this.isGlobal)return;const e=this.emitEffectCache.get(t),n=this.subscriptions.get(t);e&&(n==null||n.forEach(i=>{i==null||i({...e})}))}removeListener(t,e){if(!e)this.subscriptions.delete(t);else{const n=this.subscriptions.get(t);n==null||n.delete(e),n&&n.size===0&&this.subscriptions.delete(t)}}clear(){this.subscriptions.clear(),this.emitEffectCache.clear()}};let ne=O;y(ne,"instance",null);ne.getInstance();var H={exports:{}};var ee;function it(){return ee||(ee=1,(function(t){(function(){var e=typeof window<"u"&&typeof window.document<"u"?window.document:{},n=t.exports,i=(function(){for(var s,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,f=l.length,a={};o<f;o++)if(s=l[o],s&&s[1]in e){for(o=0;o<s.length;o++)a[l[0][o]]=s[o];return a}return!1})(),r={change:i.fullscreenchange,error:i.fullscreenerror},u={request:function(s,l){return new Promise((function(o,f){var a=(function(){this.off("change",a),o()}).bind(this);this.on("change",a),s=s||e.documentElement;var d=s[i.requestFullscreen](l);d instanceof Promise&&d.then(a).catch(f)}).bind(this))},exit:function(){return new Promise((function(s,l){if(!this.isFullscreen){s();return}var o=(function(){this.off("change",o),s()}).bind(this);this.on("change",o);var f=e[i.exitFullscreen]();f instanceof Promise&&f.then(o).catch(l)}).bind(this))},toggle:function(s,l){return this.isFullscreen?this.exit():this.request(s,l)},onchange:function(s){this.on("change",s)},onerror:function(s){this.on("error",s)},on:function(s,l){var o=r[s];o&&e.addEventListener(o,l,!1)},off:function(s,l){var o=r[s];o&&e.removeEventListener(o,l,!1)},raw:i};if(!i){n?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(u,{isFullscreen:{get:function(){return!!e[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!e[i.fullscreenEnabled]}}}),n?t.exports=u:window.screenfull=u})()})(H)),H.exports}it();const rt={class:"space-y-2"},ot={class:"space-y-2"},lt={class:"space-x-2"},ut=he({__name:"hooks.plus",setup(t){function e(){return new Promise(d=>{setTimeout(()=>{d(String(Date.now()))},1e3)})}const n=g(900),i=A(()=>n.value+100),{data:r,run:u,loading:s,cancel:l}=et(()=>e(),{manual:!0,pollingInterval:i,pollingWhenHidden:!1});function o(){u()}function f(){n.value+=100}function a(d){window.open(d,"_blank")}return(d,c)=>{const h=ge,w=pe,m=be,b=we;return me(),ve("div",null,[_(_e),_(m,{title:"VueHooks Plus"},{description:S(()=>[P("div",rt,[c[5]||(c[5]=P("p",null,"提供基础和高级的 hook ，高性能逻辑的抽象封装，满足大量场景，更多 API 和例子请查看 VueHooks Plus 官网。",-1)),P("p",null,[c[4]||(c[4]=R(" 安装命令： ",-1)),_(Pe,{text:"pnpm add vue-hooks-plus"})])])]),default:S(()=>[_(w,{variant:"outline",onClick:c[0]||(c[0]=p=>a("https://github.com/InhiblabCore/vue-hooks-plus"))},{default:S(()=>[_(h,{name:"i-ep:link"}),c[6]||(c[6]=R(" 访问 VueHooks Plus ",-1))]),_:1})]),_:1}),_(b,{title:"轮询"},{default:S(()=>[P("div",ot,[P("div",null,[c[7]||(c[7]=R(" Data：",-1)),P("span",null,k(v(s)?"loading":v(r)),1)]),P("div",null," PollingInterval："+k(v(i))+"ms ",1),P("div",lt,[_(w,{onClick:c[1]||(c[1]=p=>o())},{default:S(()=>[...c[8]||(c[8]=[R(" Start ",-1)])]),_:1}),_(w,{onClick:c[2]||(c[2]=p=>f())},{default:S(()=>[...c[9]||(c[9]=[R(" time + 100ms ",-1)])]),_:1}),_(w,{onClick:c[3]||(c[3]=p=>v(l)())},{default:S(()=>[...c[10]||(c[10]=[R(" Stop ",-1)])]),_:1})])])]),_:1})])}}});typeof J=="function"&&J(ut);export{ut as default};
