
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-CwF9tzsY.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-CjMBlAhS.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-BJb9cEwK.js";import{d as U,s as Y,x as j,y as q,bh as Q,bi as X,J as tt,am as w,K as P,aa as at,an as N,e as et,E as st,aY as F,af as it,c as k,o as u,z as L,f as h,N as M,u as r,g as I,h as x,aZ as lt,F as ot,R as nt,n as ct,A as V,w as rt,l as dt,G as bt,t as T,Z as ft,v as ut,B as ht}from"./index-CJB5jCfL.js";import{u as E}from"./index-CpT5ntRw.js";import{u as pt}from"./useTabbar-BvV3luzR.js";import{u as vt}from"./useMainPage-rJfb_2VG.js";import"./useNonce-Cqh8g6Rc.js";import"./clamp-BstbYvQo.js";import"./useGraceArea-DlHm-kvF.js";import"./index.vue_vue_type_script_setup_true_lang-CVzIja2y.js";import"./eventBus-CGRXT3Tn.js";import"./index.vue_vue_type_script_setup_true_lang-B0k6bmIg.js";import"./index.vue_vue_type_script_setup_true_lang-D1Q62RWj.js";const _t={class:"tabbar"},mt={class:"tabbar-container"},gt=["data-index","onClick"],kt={class:"size-full"},It={class:"tab-content"},xt=["onClick"],yt={class:"text-sm"},St={class:"text-accent-foreground/50"},Ct=U({name:"Tabbar",__name:"index",setup(Tt){const z=Y(),_=j(),y=q(),l=Q(),n=pt(),D=vt(),$=X({reactive:!0}),d=tt(()=>n.getId()),v=w("tabsRef"),W=w("tabContainerRef"),m=w("tabRef");P(()=>z,a=>{y.settings.tabbar.enable&&(l.add(a),at(()=>{var i,s,o,p;const e=l.list.findIndex(t=>t.tabId===d.value);if(e!==-1){const t=(i=m.value)==null?void 0:i.find(b=>Number.parseInt(b.dataset.index)===e),c=(o=(s=v.value)==null?void 0:s.ref)==null?void 0:o.$el;if(t&&c){const b=t.offsetLeft,S=t.offsetWidth,f=c.clientWidth,C=b-(f-S)/2;(p=v.value)==null||p.scrollTo(C)}K()}}))},{immediate:!0,deep:!0});function K(){var a,e,i,s;if(((a=W.value)==null?void 0:a.$el.clientWidth)>((s=(i=(e=v.value)==null?void 0:e.ref)==null?void 0:i.$el.clientWidth)!=null?s:0)&&localStorage.getItem("tabbarScrollTip")===void 0){localStorage.setItem("tabbarScrollTip","");const o=N.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>N.dismiss(o)}})}}function A(a){return[[{label:"重新加载",icon:"i-ri:refresh-line",disabled:a.tabId!==d.value,handle:()=>D.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:l.list.length<=1,handle:()=>n.closeById(a.tabId)}],[{label:"关闭其他标签页",icon:"i-mdi:close",disabled:!n.checkCloseOtherSide(a.tabId),handle:()=>n.closeOtherSide(a.tabId)},{label:"关闭左侧标签页",icon:"i-mdi:arrow-expand-left",disabled:!n.checkCloseLeftSide(a.tabId),handle:()=>n.closeLeftSide(a.tabId)},{label:"关闭右侧标签页",icon:"i-mdi:arrow-expand-right",disabled:!n.checkCloseRightSide(a.tabId),handle:()=>n.closeRightSide(a.tabId)}]]}const g=et([]);function G(){var i,s,o,p,t,c,b,S;const a=(o=(s=(i=v.value)==null?void 0:i.ref)==null?void 0:s.$el.clientWidth)!=null?o:0,e=(S=(b=(c=(t=(p=v.value)==null?void 0:p.ref)==null?void 0:t.el)==null?void 0:c.viewportElement)==null?void 0:b.scrollLeft)!=null?S:0;if(g.value=[],m.value)for(let f=0;f<m.value.length;f++){const C=m.value[f],B=C.offsetLeft,O=B+C.offsetWidth;B<e+a&&O>e&&f>=0&&f<l.list.length&&g.value.push(f)}}function R(a){var e;return(e=g.value.findIndex(i=>i===a))!=null?e:-1}return P(()=>$.alt,a=>{a&&G()}),st(()=>{F("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(a,e)=>{var i;if(y.settings.tabbar.enable&&y.settings.tabbar.enableHotkeys)switch(a.preventDefault(),e.key){case"alt+left":if(l.list[0].tabId!==d.value){const s=l.list.findIndex(o=>o.tabId===d.value);_.push(l.list[s-1].fullPath)}break;case"alt+right":if(((i=l.list.at(-1))==null?void 0:i.tabId)!==d.value){const s=l.list.findIndex(o=>o.tabId===d.value);_.push(l.list[s+1].fullPath)}break;case"alt+w":n.closeById(d.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const s=Number(e.key.split("+")[1]);g.value[s-1]!==void 0&&_.push(l.list[g.value[s-1]].fullPath);break}case"alt+0":_.push(l.list[l.list.length-1].fullPath);break}})}),it(()=>{F.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(a,e)=>{const i=bt,s=J,o=H,p=Z;return u(),k("div",_t,[(u(),L(M(r(E)("tabbar-start")))),h("div",mt,[I(p,{ref_key:"tabsRef",ref:v,scrollbar:!1,mask:"",horizontal:"","gradient-color":"var(--g-tabbar-bg)",class:"tabs"},{default:x(()=>[I(lt,{ref_key:"tabContainerRef",ref:W,name:"tabbar",tag:"div",class:"tab-container"},{default:x(()=>[(u(!0),k(ot,null,nt(r(l).list,(t,c)=>(u(),k("div",{key:t.tabId,ref_for:!0,ref_key:"tabRef",ref:m,"data-index":c,class:ct(["tab",{actived:t.tabId===r(d)}]),onClick:b=>r(_).push(t.fullPath)},[I(o,{items:A(t)},{default:x(()=>[h("div",kt,[e[0]||(e[0]=h("div",{class:"tab-dividers"},null,-1)),e[1]||(e[1]=h("div",{class:"tab-background"},null,-1)),I(s,{delay:1e3,side:"bottom"},{content:x(()=>[h("div",yt,T(typeof(t==null?void 0:t.title)=="function"?t.title():t.title),1),h("div",St,T(t.fullPath),1)]),default:x(()=>[h("div",It,[(u(),k("div",{key:t.tabId,class:"title"},[r(y).settings.tabbar.enableIcon&&t.icon?(u(),L(i,{key:0,name:t.icon,class:"icon"},null,8,["name"])):V("",!0),dt(" "+T(typeof(t==null?void 0:t.title)=="function"?t.title():t.title),1)])),r(l).list.length>1?(u(),k("div",{key:0,class:"action-icon",onClick:ft(b=>r(n).closeById(t.tabId),["stop"])},[I(i,{name:"i-ri:close-fill"})],8,xt)):V("",!0),rt(h("div",{class:"hotkey-number"},T(R(c)+1),513),[[ut,r($).alt&&R(c)>=0&&R(c)<9]])])]),_:2},1024)])]),_:2},1032,["items"])],10,gt))),128))]),_:1},512)]),_:1},512)]),(u(),L(M(r(E)("tabbar-end"))))])}}}),Kt=ht(Ct,[["__scopeId","data-v-11d65e41"]]);export{Kt as default};
