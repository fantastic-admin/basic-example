
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as Y,s as H,x as J,y as U,be as Z,bf as j,J as q,al as w,K as P,a9 as Q,am as N,e as X,E as tt,aZ as F,ae as at,c as k,o as u,z as L,f as h,N as M,u as r,g as I,aY as et,h as y,a_ as st,F as it,R as lt,n as ot,A as V,w as nt,l as ct,G as rt,t as T,Y as dt,v as bt,B as ft}from"./index-DXZKKOp8.js";import{_ as ut}from"./index.vue_vue_type_script_setup_true_lang-DO0RXIf8.js";import{_ as ht}from"./index.vue_vue_type_script_setup_true_lang-BPeH1Wqo.js";import{u as E}from"./index-YYXiZnoW.js";import{u as pt}from"./useTabbar-Du2ziEHZ.js";import{u as vt}from"./useMainPage-BN_sIl2v.js";import"./useGraceArea-D-2RXaNq.js";import"./index.vue_vue_type_script_setup_true_lang-AsNzxvIs.js";import"./eventBus-CGRXT3Tn.js";import"./index.vue_vue_type_script_setup_true_lang-r1ET3F6k.js";import"./index.vue_vue_type_script_setup_true_lang-wxV-RZ0d.js";const _t={class:"tabbar"},gt={class:"tabbar-container"},mt=["data-index","onClick"],kt={class:"size-full"},It={class:"tab-content"},yt=["onClick"],xt={class:"text-sm"},St={class:"text-accent-foreground/50"},Ct=Y({name:"Tabbar",__name:"index",setup(Tt){const z=H(),_=J(),x=U(),l=Z(),n=pt(),D=vt(),$=j({reactive:!0}),d=q(()=>n.getId()),v=w("tabsRef"),W=w("tabContainerRef"),g=w("tabRef");P(()=>z,a=>{x.settings.tabbar.enable&&(l.add(a),Q(()=>{var i,s,o,p;const e=l.list.findIndex(t=>t.tabId===d.value);if(e!==-1){const t=(i=g.value)==null?void 0:i.find(b=>Number.parseInt(b.dataset.index)===e),c=(o=(s=v.value)==null?void 0:s.ref)==null?void 0:o.$el;if(t&&c){const b=t.offsetLeft,S=t.offsetWidth,f=c.clientWidth,C=b-(f-S)/2;(p=v.value)==null||p.scrollTo(C)}A()}}))},{immediate:!0,deep:!0});function A(){var a,e,i,s;if(((a=W.value)==null?void 0:a.$el.clientWidth)>((s=(i=(e=v.value)==null?void 0:e.ref)==null?void 0:i.$el.clientWidth)!=null?s:0)&&localStorage.getItem("tabbarScrollTip")===void 0){localStorage.setItem("tabbarScrollTip","");const o=N.info("温馨提示",{description:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",position:"top-center",duration:1/0,action:{label:"知道了",onClick:()=>N.dismiss(o)}})}}function G(a){return[[{label:"重新加载",icon:"i-ri:refresh-line",disabled:a.tabId!==d.value,handle:()=>D.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:l.list.length<=1,handle:()=>n.closeById(a.tabId)}],[{label:"关闭其他标签页",icon:"i-mdi:close",disabled:!n.checkCloseOtherSide(a.tabId),handle:()=>n.closeOtherSide(a.tabId)},{label:"关闭左侧标签页",icon:"i-mdi:arrow-expand-left",disabled:!n.checkCloseLeftSide(a.tabId),handle:()=>n.closeLeftSide(a.tabId)},{label:"关闭右侧标签页",icon:"i-mdi:arrow-expand-right",disabled:!n.checkCloseRightSide(a.tabId),handle:()=>n.closeRightSide(a.tabId)}]]}const m=X([]);function K(){var i,s,o,p,t,c,b,S;const a=(o=(s=(i=v.value)==null?void 0:i.ref)==null?void 0:s.$el.clientWidth)!=null?o:0,e=(S=(b=(c=(t=(p=v.value)==null?void 0:p.ref)==null?void 0:t.el)==null?void 0:c.viewportElement)==null?void 0:b.scrollLeft)!=null?S:0;if(m.value=[],g.value)for(let f=0;f<g.value.length;f++){const C=g.value[f],B=C.offsetLeft,O=B+C.offsetWidth;B<e+a&&O>e&&f>=0&&f<l.list.length&&m.value.push(f)}}function R(a){var e;return(e=m.value.findIndex(i=>i===a))!=null?e:-1}return P(()=>$.alt,a=>{a&&K()}),tt(()=>{F("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(a,e)=>{var i;if(x.settings.tabbar.enable&&x.settings.tabbar.enableHotkeys)switch(a.preventDefault(),e.key){case"alt+left":if(l.list[0].tabId!==d.value){const s=l.list.findIndex(o=>o.tabId===d.value);_.push(l.list[s-1].fullPath)}break;case"alt+right":if(((i=l.list.at(-1))==null?void 0:i.tabId)!==d.value){const s=l.list.findIndex(o=>o.tabId===d.value);_.push(l.list[s+1].fullPath)}break;case"alt+w":n.closeById(d.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const s=Number(e.key.split("+")[1]);m.value[s-1]!==void 0&&_.push(l.list[m.value[s-1]].fullPath);break}case"alt+0":_.push(l.list[l.list.length-1].fullPath);break}})}),at(()=>{F.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(a,e)=>{const i=rt,s=ht,o=ut,p=et;return u(),k("div",_t,[(u(),L(M(r(E)("tabbar-start")))),h("div",gt,[I(p,{ref_key:"tabsRef",ref:v,scrollbar:!1,mask:"",horizontal:"","gradient-color":"var(--g-tabbar-bg)",class:"tabs"},{default:y(()=>[I(st,{ref_key:"tabContainerRef",ref:W,name:"tabbar",tag:"div",class:"tab-container"},{default:y(()=>[(u(!0),k(it,null,lt(r(l).list,(t,c)=>(u(),k("div",{key:t.tabId,ref_for:!0,ref_key:"tabRef",ref:g,"data-index":c,class:ot(["tab",{actived:t.tabId===r(d)}]),onClick:b=>r(_).push(t.fullPath)},[I(o,{items:G(t)},{default:y(()=>[h("div",kt,[e[0]||(e[0]=h("div",{class:"tab-dividers"},null,-1)),e[1]||(e[1]=h("div",{class:"tab-background"},null,-1)),I(s,{delay:1e3,side:"bottom"},{content:y(()=>[h("div",xt,T(typeof(t==null?void 0:t.title)=="function"?t.title():t.title),1),h("div",St,T(t.fullPath),1)]),default:y(()=>[h("div",It,[(u(),k("div",{key:t.tabId,class:"title"},[r(x).settings.tabbar.enableIcon&&t.icon?(u(),L(i,{key:0,name:t.icon,class:"icon"},null,8,["name"])):V("",!0),ct(" "+T(typeof(t==null?void 0:t.title)=="function"?t.title():t.title),1)])),r(l).list.length>1?(u(),k("div",{key:0,class:"action-icon",onClick:dt(b=>r(n).closeById(t.tabId),["stop"])},[I(i,{name:"i-ri:close-fill"})],8,yt)):V("",!0),nt(h("div",{class:"hotkey-number"},T(R(c)+1),513),[[bt,r($).alt&&R(c)>=0&&R(c)<9]])])]),_:2},1024)])]),_:2},1032,["items"])],10,mt))),128))]),_:1},512)]),_:1},512)]),(u(),L(M(r(E)("tabbar-end"))))])}}}),Et=ft(Ct,[["__scopeId","data-v-11d65e41"]]);export{Et as default};
