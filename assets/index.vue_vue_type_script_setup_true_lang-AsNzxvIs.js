
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{a1 as oe,d as z,a3 as se,z as c,o as n,u as t,b0 as ie,j as re,k as ce,h as r,r as b,a2 as Q,al as J,J as q,b1 as de,K as H,b2 as ue,g as p,T as fe,m as X,c as Y,A as h,O as me,n as g,a as y,b3 as pe,f as S,b4 as ge,b5 as ye,aC as ne,b6 as ve,b7 as xe,e as k,ac as he,E as be,at as Be,av as Ce,b8 as te,ab as _e,au as ke,a6 as we,a9 as ze,aH as ae,l as R,G as De,t as V,aY as Me,w as Oe,v as $e,p as Ee}from"./index-DXZKKOp8.js";/**
 * @license lucide-vue-next v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=oe("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-vue-next v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=oe("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),Fe=z({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:i}){const s=se(o,i);return(d,v)=>(n(),c(t(ie),re(ce(t(s))),{default:r(()=>[b(d.$slots,"default")]),_:3},16))}}),Ie=["data-modal-id"],Le={class:"absolute inset-e-4 top-4 flex-center gap-2"},Ae=z({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},modalId:{},open:{type:Boolean},zIndex:{},maximize:{type:Boolean},maximizable:{type:Boolean},closable:{type:Boolean},overlay:{type:Boolean},overlayBlur:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","toggleMaximize","animationEnd"],setup(o,{expose:i,emit:u}){const e=o,s=u,d=Q(e,"class"),v=se(d,s);function D(){s("toggleMaximize",!e.maximize)}const B=J("dialogContentRef");i({el:B});const x=q(()=>e.open&&e.overlay),f=de(document.body);return H(x,l=>{l?f.value=!0:f.value=!1}),(l,m)=>(n(),c(t(ue),null,{default:r(()=>[p(fe,X({enterActiveClass:"ease-in-out duration-300",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in-out duration-300",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},{appear:!0}),{default:r(()=>[t(x)?(n(),Y("div",{key:0,"data-modal-id":e.modalId,class:g(t(y)("fixed inset-0 data-[state=closed]:animate-out data-[state=open]:animate-in bg-black/50 data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",{"backdrop-blur-sm":e.overlayBlur})),style:me({zIndex:e.zIndex})},null,14,Ie)):h("",!0)]),_:1},16),p(t(pe),X({ref_key:"dialogContentRef",ref:B},t(v),{class:t(y)("fixed left-1/2 top-1/2 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-0 data-[state=closed]:slide-out-to-top-1/5 data-[state=open]:slide-in-from-left-0 data-[state=open]:slide-in-from-top-1/5 sm:rounded-lg",e.class),style:{zIndex:e.zIndex},onAnimationend:m[0]||(m[0]=C=>s("animationEnd"))}),{default:r(()=>[b(l.$slots,"default"),S("div",Le,[e.maximizable?(n(),Y("button",{key:0,class:"hidden rounded-sm bg-transparent opacity-70 ring-offset-background transition-opacity disabled:pointer-events-none sm:inline-block data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ring",onClick:D},[e.maximize?(n(),c(t(Te),{key:1,class:"h-4 w-4"})):(n(),c(t(Pe),{key:0,class:"h-4 w-4"}))])):h("",!0),o.closable?(n(),c(t(ge),{key:1,class:"rounded-sm bg-transparent opacity-70 ring-offset-background transition-opacity disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ring"},{default:r(()=>[p(t(ye),{class:"h-4 w-4"}),m[1]||(m[1]=S("span",{class:"sr-only"},"Close",-1))]),_:1})):h("",!0)])]),_:3},16,["class","style"])]),_:3}))}}),U=z({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const i=o,u=Q(i,"class"),e=ne(u);return(s,d)=>(n(),c(t(ve),X(t(e),{class:t(y)("text-sm text-muted-foreground",i.class)}),{default:r(()=>[b(s.$slots,"default")]),_:3},16,["class"]))}}),Re=z({__name:"DialogFooter",props:{class:{}},setup(o){const i=o;return(u,e)=>(n(),Y("div",{class:g(t(y)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",i.class))},[b(u.$slots,"default")],2))}}),Ve=z({__name:"DialogHeader",props:{class:{}},setup(o){const i=o;return(u,e)=>(n(),Y("div",{class:g(t(y)("flex flex-col gap-y-1.5 text-center sm:text-start",i.class))},[b(u.$slots,"default")],2))}}),G=z({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const i=o,u=Q(i,"class"),e=ne(u);return(s,d)=>(n(),c(t(xe),X(t(e),{class:t(y)("text-lg font-semibold leading-none tracking-tight",i.class)}),{default:r(()=>[b(s.$slots,"default")]),_:3},16,["class"]))}});function He(o,i,u,e){const s=k(!1),d=he({offsetX:0,offsetY:0}),v=f=>{const l=f.clientX,m=f.clientY,{offsetX:C,offsetY:w}=d,M=o.value.getBoundingClientRect(),T=M.left,O=M.top,F=M.width,j=M.height,$=document.documentElement.clientWidth,K=document.documentElement.clientHeight,N=-T+C,E=-O+w,I=$-T-F+C,W=K-O-j+w,L=P=>{let a=C+P.clientX-l,_=w+P.clientY-m;a=Math.min(Math.max(a,N),I),_=Math.min(Math.max(_,E),W),d.offsetX=a,d.offsetY=_,o.value&&(s.value=!0,o.value.style.transform="translate(".concat(a,"px, ").concat(_,"px)"))},A=()=>{s.value=!1,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",A)},D=()=>{const f=te(i);f&&o.value&&f.addEventListener("mousedown",v)},B=()=>{const f=te(i);f&&o.value&&f.removeEventListener("mousedown",v)},x=()=>{d.offsetX=0,d.offsetY=0,o.value&&(o.value.style.transform="none")};return be(()=>{Be(()=>{u.value?D():B()})}),Ce(()=>{B()}),{isDragging:s,transform:d,resetPosition:x}}const Xe={class:"absolute inset-0 z-1000 size-full flex-center bg-popover/75"},Se=z({name:"FaModal",__name:"index",props:{id:{},modelValue:{type:Boolean,default:!1},zIndex:{default:2e3},title:{},description:{},icon:{},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maximize:{type:Boolean,default:!1},maximizable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},alignCenter:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayBlur:{type:Boolean,default:!1},showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!1},confirmButtonText:{default:"确定"},cancelButtonText:{default:"取消"},confirmButtonDisabled:{type:Boolean,default:!1},confirmButtonLoading:{type:Boolean,default:!1},beforeClose:{},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!0},class:{},headerClass:{},contentClass:{},footerClass:{}},emits:["update:modelValue","open","opened","close","closed","confirm","cancel"],setup(o,{expose:i,emit:u}){var P;const e=o,s=u,d=_e(),v=J("dialogContentRef"),D=k(),B=J("dialogAreaRef"),x=k();i({areaRef:B});const f=ke((P=e.id)!=null?P:we()),l=k(e.modelValue),m=k(e.maximize);H(()=>e.modelValue,a=>{l.value=a});const C=k(!1),w=k(!0);H(l,a=>{s("update:modelValue",a),s(a?"open":"close"),w.value=!1,a&&!C.value&&(C.value=!0)},{immediate:!0});const M=q(()=>!e.destroyOnClose&&C.value),{isDragging:T,transform:O}=He(x,D,q(()=>e.draggable&&e.header&&!m.value));function F(){m.value?x.value.style.transform="none":x.value.style.transform="translate(".concat(O.offsetX,"px, ").concat(O.offsetY,"px)")}H(l,a=>{a&&ze(()=>{var _;v.value&&(x.value=(_=v.value.el)==null?void 0:_.$el,F())})});async function j(a){a?(l.value=a,s("open")):e.beforeClose?await e.beforeClose("close",()=>{l.value=a,s("close")}):(l.value=a,s("close"))}const $=k(!1);async function K(){e.beforeClose?($.value=!0,await e.beforeClose("confirm",()=>{l.value=!1,s("confirm")}),$.value=!1):(l.value=!1,s("confirm"))}async function N(){e.beforeClose?await e.beforeClose("cancel",()=>{l.value=!1,s("cancel")}):(l.value=!1,s("cancel"))}function E(a){a.preventDefault(),a.stopPropagation()}function I(a){(!e.closeOnClickOverlay||a.target.dataset.modalId!==f.value)&&(a.preventDefault(),a.stopPropagation())}function W(a){e.closeOnPressEscape||(a.preventDefault(),a.stopPropagation())}function L(a){m.value=a,F()}function A(){l.value?s("opened"):(s("closed"),w.value=!0)}return(a,_)=>{const Z=De,le=Me,ee=Ee;return n(),c(t(Fe),{modal:!1,open:t(l),"onUpdate:open":j},{default:r(()=>[p(t(Ae),{ref_key:"dialogContentRef",ref:v,"modal-id":t(f),open:t(l),"z-index":e.zIndex,closable:e.closable,overlay:e.overlay,"overlay-blur":e.overlayBlur,maximize:t(m),maximizable:e.maximizable,"force-mount":t(M),class:g(t(y)("left-0 right-0 top-0 md:top-[5vh] flex flex-col p-0 gap-0 mx-auto h-[calc-size(auto,size)] min-h-full md:min-h-auto max-h-full md:max-h-[90vh] translate-x-0 translate-y-0",e.class,{"md:top-0 size-full max-w-full max-h-full md:max-h-full":t(m),"md:top-1/2 md:-translate-y-1/2!":e.alignCenter,"duration-0":t(T),hidden:t(w)})),onOpenAutoFocus:E,onCloseAutoFocus:E,onFocusOutside:E,onPointerDownOutside:I,onInteractOutside:I,onEscapeKeyDown:W,onToggleMaximize:L,onAnimationEnd:A},{default:r(()=>[o.header?(n(),c(t(Ve),{key:0,ref_key:"dialogHeaderRef",ref:D,class:g(t(y)("p-4",e.headerClass,{"cursor-move select-none":e.draggable,"border-b":e.border}))},{default:r(()=>[d.header?(n(),c(t(ae),{key:0},{default:r(()=>[p(t(G)),p(t(U))]),_:1})):h("",!0),b(a.$slots,"header",{},()=>[p(t(G),{class:g(["flex-center gap-x-2 md:justify-start",{"md:justify-center":e.center}])},{default:r(()=>[e.icon?(n(),c(Z,{key:0,name:{info:"i-ant-design:info-circle-filled",success:"i-ant-design:check-circle-filled",warning:"i-ant-design:exclamation-circle-filled",error:"i-ant-design:close-circle-filled"}[e.icon],class:g(["size-6",{"text-blue-600 dark:text-blue-400":e.icon==="info","text-green-600 dark:text-green-400":e.icon==="success","text-yellow-600 dark:text-yellow-400":e.icon==="warning","text-red-600 dark:text-red-400":e.icon==="error"}])},null,8,["name","class"])):h("",!0),R(" "+V(o.title),1)]),_:1},8,["class"]),p(t(U),{class:g(["empty:hidden",{"text-center":e.center}])},{default:r(()=>[R(V(o.description),1)]),_:1},8,["class"])])]),_:3},8,["class"])):(n(),c(t(ae),{key:1},{default:r(()=>[p(t(G)),p(t(U))]),_:1})),d.default?(n(),c(le,{key:2,ref_key:"dialogAreaRef",ref:B,class:"flex-1"},{default:r(()=>[S("div",{class:g(t(y)("min-h-40 p-4",e.contentClass))},[b(a.$slots,"default")],2),Oe(S("div",Xe,[p(Z,{name:"i-line-md:loading-twotone-loop",class:"size-10"})],512),[[$e,e.loading]])]),_:3},512)):h("",!0),o.footer?(n(),c(t(Re),{key:3,class:g(t(y)("p-3 gap-y-2",e.footerClass,{"md:justify-center":e.center,"border-t":e.border}))},{default:r(()=>[b(a.$slots,"footer",{},()=>[o.showCancelButton?(n(),c(ee,{key:0,variant:"outline",onClick:N},{default:r(()=>[R(V(o.cancelButtonText),1)]),_:1})):h("",!0),o.showConfirmButton?(n(),c(ee,{key:1,disabled:o.confirmButtonDisabled,loading:o.confirmButtonLoading||t($),onClick:K},{default:r(()=>[R(V(o.confirmButtonText),1)]),_:1},8,["disabled","loading"])):h("",!0)])]),_:3},8,["class"])):h("",!0)]),_:3},8,["modal-id","open","z-index","closable","overlay","overlay-blur","maximize","maximizable","force-mount","class"])]),_:3},8,["open"])}}});export{Se as _};
