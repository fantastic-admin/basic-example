
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{a2 as te,d as D,a4 as ae,z as f,o as n,u as t,a$ as ne,j as le,k as ie,h as r,r as x,a3 as q,am as oe,J as G,b0 as de,K as R,b1 as re,g as m,T as ce,m as X,c as T,A as h,O as ue,n as g,a as y,b2 as fe,f as J,b3 as me,b4 as pe,aD as se,b5 as ge,b6 as ye,e as k,ad as ve,E as he,au as xe,aw as be,b7 as Z,ac as Be,av as Ce,a7 as we,aa as ke,w as _e,aH as ee,l as V,G as ze,t as H,v as De,p as Me}from"./index-CJB5jCfL.js";const Oe=te("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);const $e=te("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),Ee=D({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(o,{emit:l}){const c=ae(o,l);return(u,b)=>(n(),f(t(ne),le(ie(t(c))),{default:r(()=>[x(u.$slots,"default")]),_:3},16))}}),Pe=["data-modal-id"],Te={class:"absolute inset-e-4 top-4 flex-center gap-2"},Fe=D({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},modalId:{},open:{type:Boolean},zIndex:{},maximize:{type:Boolean},maximizable:{type:Boolean},closable:{type:Boolean},overlay:{type:Boolean},overlayBlur:{type:Boolean},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","toggleMaximize","animationEnd"],setup(o,{expose:l,emit:e}){const s=o,c=e,u=q(s,"class"),b=ae(u,c);function B(){c("toggleMaximize",!s.maximize)}const C=oe("dialogContentRef");l({el:C});const i=G(()=>s.open&&s.overlay),d=de(document.body);return R(i,v=>{v?d.value=!0:d.value=!1}),(v,p)=>(n(),f(t(re),null,{default:r(()=>[m(ce,X({enterActiveClass:"ease-in-out duration-300",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in-out duration-300",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},{appear:!0}),{default:r(()=>[t(i)?(n(),T("div",{key:0,"data-modal-id":s.modalId,class:g(t(y)("fixed inset-0 data-[state=closed]:animate-out data-[state=open]:animate-in bg-black/50 data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",{"backdrop-blur-sm":s.overlayBlur})),style:ue({zIndex:s.zIndex})},null,14,Pe)):h("",!0)]),_:1},16),m(t(fe),X({ref_key:"dialogContentRef",ref:C},t(b),{class:t(y)("fixed left-1/2 top-1/2 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-0 data-[state=closed]:slide-out-to-top-1/5 data-[state=open]:slide-in-from-left-0 data-[state=open]:slide-in-from-top-1/5 sm:rounded-lg",s.class),style:{zIndex:s.zIndex},onAnimationend:p[0]||(p[0]=M=>c("animationEnd"))}),{default:r(()=>[x(v.$slots,"default"),J("div",Te,[s.maximizable?(n(),T("button",{key:0,class:"hidden rounded-sm bg-transparent opacity-70 ring-offset-background transition-opacity disabled:pointer-events-none sm:inline-block data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ring",onClick:B},[s.maximize?(n(),f(t($e),{key:1,class:"h-4 w-4"})):(n(),f(t(Oe),{key:0,class:"h-4 w-4"}))])):h("",!0),o.closable?(n(),f(t(me),{key:1,class:"rounded-sm bg-transparent opacity-70 ring-offset-background transition-opacity disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ring"},{default:r(()=>[m(t(pe),{class:"h-4 w-4"}),p[1]||(p[1]=J("span",{class:"sr-only"},"Close",-1))]),_:1})):h("",!0)])]),_:3},16,["class","style"])]),_:3}))}}),W=D({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const l=o,e=q(l,"class"),s=se(e);return(c,u)=>(n(),f(t(ge),X(t(s),{class:t(y)("text-sm text-muted-foreground",l.class)}),{default:r(()=>[x(c.$slots,"default")]),_:3},16,["class"]))}}),Ie=D({__name:"DialogFooter",props:{class:{}},setup(o){const l=o;return(e,s)=>(n(),T("div",{class:g(t(y)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",l.class))},[x(e.$slots,"default")],2))}}),Le=D({__name:"DialogHeader",props:{class:{}},setup(o){const l=o;return(e,s)=>(n(),T("div",{class:g(t(y)("flex flex-col gap-y-1.5 text-center sm:text-start",l.class))},[x(e.$slots,"default")],2))}}),U=D({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const l=o,e=q(l,"class"),s=se(e);return(c,u)=>(n(),f(t(ye),X(t(s),{class:t(y)("text-lg font-semibold leading-none tracking-tight",l.class)}),{default:r(()=>[x(c.$slots,"default")]),_:3},16,["class"]))}});function Ae(o,l,e,s){const c=k(!1),u=ve({offsetX:0,offsetY:0}),b=d=>{const v=d.clientX,p=d.clientY,{offsetX:M,offsetY:O}=u,_=o.value.getBoundingClientRect(),$=_.left,F=_.top,E=_.width,Y=_.height,j=document.documentElement.clientWidth,S=document.documentElement.clientHeight,I=-$+M,L=-F+O,K=j-$-E+M,N=S-F-Y+O,A=a=>{let w=M+a.clientX-v,z=O+a.clientY-p;w=Math.min(Math.max(w,I),K),z=Math.min(Math.max(z,L),N),u.offsetX=w,u.offsetY=z,o.value&&(c.value=!0,o.value.style.transform="translate(".concat(w,"px, ").concat(z,"px)"))},P=()=>{c.value=!1,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",P)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",P)},B=()=>{const d=Z(l);d&&o.value&&d.addEventListener("mousedown",b)},C=()=>{const d=Z(l);d&&o.value&&d.removeEventListener("mousedown",b)},i=()=>{u.offsetX=0,u.offsetY=0,o.value&&(o.value.style.transform="none")};return he(()=>{xe(()=>{e.value?B():C()})}),be(()=>{C()}),{isDragging:c,transform:u,resetPosition:i}}const Ve={class:"absolute inset-0 z-1000 size-full flex-center bg-popover/75"},Re=D({name:"FaModal",__name:"index",props:{id:{},modelValue:{type:Boolean,default:!1},zIndex:{default:2e3},title:{},description:{},icon:{},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},maximize:{type:Boolean,default:!1},maximizable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},center:{type:Boolean,default:!1},border:{type:Boolean,default:!0},alignCenter:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayBlur:{type:Boolean,default:!1},showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!1},confirmButtonText:{default:"确定"},cancelButtonText:{default:"取消"},confirmButtonDisabled:{type:Boolean,default:!1},confirmButtonLoading:{type:Boolean,default:!1},beforeClose:{},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!0},openAutoFocus:{type:Boolean,default:!1},class:{},headerClass:{},contentClass:{},footerClass:{}},emits:["update:modelValue","open","opened","close","closed","confirm","cancel"],setup(o,{emit:l}){var P;const e=o,s=l,c=Be(),u=oe("dialogContentRef"),b=k(),B=k(),C=Ce((P=e.id)!=null?P:we()),i=k(e.modelValue),d=k(e.maximize);R(()=>e.modelValue,a=>{i.value=a});const v=k(!1),p=k(!0);R(i,a=>{s("update:modelValue",a),s(a?"open":"close"),p.value=!1,a&&!v.value&&(v.value=!0)},{immediate:!0});const M=G(()=>!e.destroyOnClose&&v.value),{isDragging:O,transform:_}=Ae(B,b,G(()=>e.draggable&&e.header&&!d.value));function $(){d.value?B.value.style.transform="none":B.value.style.transform="translate(".concat(_.offsetX,"px, ").concat(_.offsetY,"px)")}R(i,a=>{a&&ke(()=>{var w;u.value&&(B.value=(w=u.value.el)==null?void 0:w.$el,$())})});async function F(a){a?(i.value=a,s("open")):e.beforeClose?await e.beforeClose("close",()=>{i.value=a,s("close")}):(i.value=a,s("close"))}const E=k(!1);async function Y(){e.beforeClose?(E.value=!0,await e.beforeClose("confirm",()=>{i.value=!1,s("confirm")}),E.value=!1):(i.value=!1,s("confirm"))}async function j(){e.beforeClose?await e.beforeClose("cancel",()=>{i.value=!1,s("cancel")}):(i.value=!1,s("cancel"))}function S(a){e.openAutoFocus||(a.preventDefault(),a.stopPropagation())}function I(a){a.preventDefault(),a.stopPropagation()}function L(a){(!e.closeOnClickOverlay||a.target.dataset.modalId!==C.value)&&(a.preventDefault(),a.stopPropagation())}function K(a){e.closeOnPressEscape||(a.preventDefault(),a.stopPropagation())}function N(a){d.value=a,$()}function A(){i.value?s("opened"):(s("closed"),p.value=!0)}return(a,w)=>{const z=ze,Q=Me;return n(),f(t(Ee),{modal:!1,open:t(i),"onUpdate:open":F},{default:r(()=>[m(t(Fe),{ref_key:"dialogContentRef",ref:u,"modal-id":t(C),open:t(i),"z-index":e.zIndex,closable:e.closable,overlay:e.overlay,"overlay-blur":e.overlayBlur,maximize:t(d),maximizable:e.maximizable,"force-mount":t(M),class:g(t(y)("left-0 right-0 top-0 md:top-[5vh] flex flex-col p-0 gap-0 mx-auto h-[calc-size(auto,size)] min-h-full overflow-hidden md:min-h-auto max-h-full md:max-h-[90vh] translate-x-0 translate-y-0",e.class,{"md:top-0 size-full max-w-full max-h-full md:max-h-full":t(d),"md:top-1/2 md:-translate-y-1/2!":e.alignCenter,"duration-0":t(O),hidden:t(p)})),onOpenAutoFocus:S,onCloseAutoFocus:I,onFocusOutside:I,onPointerDownOutside:L,onInteractOutside:L,onEscapeKeyDown:K,onToggleMaximize:N,onAnimationEnd:A},{default:r(()=>[o.header?(n(),f(t(Le),{key:0,ref_key:"dialogHeaderRef",ref:b,class:g(t(y)("p-4",e.headerClass,{"cursor-move select-none":e.draggable,"border-b":e.border}))},{default:r(()=>[c.header?(n(),f(t(ee),{key:0},{default:r(()=>[m(t(U)),m(t(W))]),_:1})):h("",!0),x(a.$slots,"header",{},()=>[m(t(U),{class:g(["flex-center gap-x-2 md:justify-start",{"md:justify-center":e.center}])},{default:r(()=>[e.icon?(n(),f(z,{key:0,name:{info:"i-ant-design:info-circle-filled",success:"i-ant-design:check-circle-filled",warning:"i-ant-design:exclamation-circle-filled",error:"i-ant-design:close-circle-filled"}[e.icon],class:g(["size-6",{"text-blue-600 dark:text-blue-400":e.icon==="info","text-green-600 dark:text-green-400":e.icon==="success","text-yellow-600 dark:text-yellow-400":e.icon==="warning","text-red-600 dark:text-red-400":e.icon==="error"}])},null,8,["name","class"])):h("",!0),V(" "+H(o.title),1)]),_:1},8,["class"]),m(t(W),{class:g(["empty:hidden",{"text-center":e.center}])},{default:r(()=>[V(H(o.description),1)]),_:1},8,["class"])])]),_:3},8,["class"])):(n(),f(t(ee),{key:1},{default:r(()=>[m(t(U)),m(t(W))]),_:1})),c.default?(n(),T("div",{key:2,class:g(t(y)("relative flex-1 min-h-40 p-4 overflow-y-auto",e.contentClass))},[x(a.$slots,"default")],2)):h("",!0),_e(J("div",Ve,[m(z,{name:"i-line-md:loading-twotone-loop",class:"size-10"})],512),[[De,e.loading]]),o.footer?(n(),f(t(Ie),{key:3,class:g(t(y)("p-3 gap-y-2",e.footerClass,{"md:justify-center":e.center,"border-t":e.border}))},{default:r(()=>[x(a.$slots,"footer",{},()=>[o.showCancelButton?(n(),f(Q,{key:0,variant:"outline",onClick:j},{default:r(()=>[V(H(o.cancelButtonText),1)]),_:1})):h("",!0),o.showConfirmButton?(n(),f(Q,{key:1,disabled:o.confirmButtonDisabled,loading:o.confirmButtonLoading||t(E),onClick:Y},{default:r(()=>[V(H(o.confirmButtonText),1)]),_:1},8,["disabled","loading"])):h("",!0)])]),_:3},8,["class"])):h("",!0)]),_:3},8,["modal-id","open","z-index","closable","overlay","overlay-blur","maximize","maximizable","force-mount","class"])]),_:3},8,["open"])}}});export{Re as _};
