
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-CXwD3XiV.js";import{d as z,c as B,o as $,n as M,u as e,a as Q,r as W,b as Y,e as S,f as o,w as E,t as H,g as t,_ as tt,i as et,v as G,h as s,m as L,T as k,j as st,k as at,l as f,p as D,q as ot,s as lt,x as nt,y as it,z as O,A as X,F as rt,B as ct,C as Z}from"./index-DXZKKOp8.js";import{i as ut}from"./logo-A4CMGNjt.js";import{_ as dt}from"./login-banner-QOEVdAqA.js";import{_ as mt}from"./index.vue_vue_type_script_setup_true_lang-BT61AYHk.js";import{_ as q}from"./index-CxrP-iad.js";import{u as pt,a as U,t as j,o as A,b as ft,s as F,F as P,_ as R,c as h,d as V}from"./FormMessage.vue_vue_type_script_setup_true_lang-a_PtlD_8.js";import{_ as vt}from"./index.vue_vue_type_script_setup_true_lang-Cp45I8mK.js";import{_ as _t}from"./index.vue_vue_type_script_setup_true_lang-lQIae7Da.js";import{_ as gt}from"./index.vue_vue_type_script_setup_true_lang-Bq2bM_ms.js";import"./nullish-CHIgUVhi.js";import"./check-DaMgZD9G.js";import"./useFormControl-bzRiTzAl.js";import"./VisuallyHiddenInput-BOO5NC8j.js";import"./index.vue_vue_type_script_setup_true_lang-BPeH1Wqo.js";import"./useGraceArea-D-2RXaNq.js";const bt=["id"],xt=z({__name:"FormDescription",props:{class:{}},setup(C){const b=C,{formDescriptionId:x}=pt();return(p,_)=>($(),B("p",{id:e(x),class:M(e(Q)("text-sm text-muted-foreground",b.class))},[W(p.$slots,"default")],10,bt))}}),yt={class:"min-h-500px w-full flex-col-stretch-center p-12"},wt={class:"mb-4"},$t={class:"mb-4 flex-center-between"},Ft={class:"flex-center-start"},St={class:"mt-4 flex-center gap-2 text-sm"},kt={class:"mt-4 text-center -mb-4"},Pt={class:"space-x-2"},Rt="Fantastic-admin 基础版",ht=z({name:"LoginForm",__name:"LoginForm",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(C,{emit:b}){var n,y;const x=C,p=b,_=Y(),u=S(!1),i=S("default"),r=U({validationSchema:j(A({account:F().min(1,"请输入用户名"),password:F().min(1,"请输入密码"),remember:ft()})),initialValues:{account:(y=(n=x.account)!=null?n:localStorage.getItem("login_account"))!=null?y:"",password:"",remember:!!localStorage.getItem("login_account")}}),d=r.handleSubmit(l=>{u.value=!0,_.login(l).then(()=>{l.remember?localStorage.setItem("login_account",l.account):localStorage.removeItem("login_account"),p("onLogin",l.account)}).finally(()=>{u.value=!1})});function c(l){r.setFieldValue("account",l),r.setFieldValue("password","123456"),d()}return(l,a)=>{const w=tt,I=q,g=mt,v=D,N=ot;return $(),B("div",yt,[o("div",{class:"mb-6 space-y-2"},[a[6]||(a[6]=o("h3",{class:"text-4xl color-[var(--el-text-color-primary)] font-bold"}," 欢迎使用 👋🏻 ",-1)),o("p",{class:"text-sm text-muted-foreground lg:text-base"},H(Rt))]),o("div",wt,[t(w,{modelValue:e(i),"onUpdate:modelValue":a[0]||(a[0]=m=>et(i)?i.value=m:null),list:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}],class:"inline-flex"},null,8,["modelValue"])]),E(o("div",null,[o("form",{onSubmit:a[3]||(a[3]=(...m)=>e(d)&&e(d)(...m))},[t(e(P),{name:"account"},{default:s(({componentField:m,errors:T})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(I,L({type:"text",placeholder:"请输入用户名",class:["w-full",T.length&&"border-destructive"]},m),null,16,["class"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(P),{name:"password"},{default:s(({componentField:m,errors:T})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(I,L({type:"password",placeholder:"请输入密码",class:["w-full",T.length&&"border-destructive"]},m),null,16,["class"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),o("div",$t,[o("div",Ft,[t(e(P),{type:"checkbox",name:"remember"},{default:s(({componentField:m})=>[t(e(R),null,{default:s(()=>[t(e(h),null,{default:s(()=>[t(g,st(at(m)),{default:s(()=>[...a[7]||(a[7]=[f(" 记住我 ",-1)])]),_:1},16)]),_:2},1024)]),_:2},1024)]),_:1})]),t(v,{variant:"link",class:"h-auto p-0",type:"button",onClick:a[1]||(a[1]=m=>p("onResetPassword",e(r).values.account))},{default:s(()=>[...a[8]||(a[8]=[f(" 忘记密码了? ",-1)])]),_:1})]),t(v,{loading:e(u),size:"lg",class:"w-full",type:"submit"},{default:s(()=>[...a[9]||(a[9]=[f(" 登录 ",-1)])]),_:1},8,["loading"]),o("div",St,[a[11]||(a[11]=o("span",{class:"text-secondary-foreground op-50"},"还没有帐号?",-1)),t(v,{variant:"link",class:"h-auto p-0",type:"button",onClick:a[2]||(a[2]=m=>p("onRegister",e(r).values.account))},{default:s(()=>[...a[10]||(a[10]=[f(" 注册新帐号 ",-1)])]),_:1})])],32),o("div",kt,[t(N,null,{default:s(()=>[...a[12]||(a[12]=[f("演示账号一键登录",-1)])]),_:1}),o("div",Pt,[t(v,{variant:"default",size:"sm",plain:"",onClick:a[4]||(a[4]=m=>c("admin"))},{default:s(()=>[...a[13]||(a[13]=[f(" admin ",-1)])]),_:1}),t(v,{variant:"outline",size:"sm",plain:"",onClick:a[5]||(a[5]=m=>c("test"))},{default:s(()=>[...a[14]||(a[14]=[f(" test ",-1)])]),_:1})])])],512),[[G,e(i)==="default"]]),E(o("div",null,[...a[15]||(a[15]=[o("div",{class:"flex-col-center"},[o("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),o("div",{class:"mt-2 text-sm text-secondary-foreground op-50"}," 请使用微信扫码登录 ")],-1)])],512),[[G,e(i)==="qrcode"]])])}}}),Ct={class:"min-h-500px w-full flex-col-stretch-center p-12"},It={class:"mt-4 flex-center gap-2 text-sm"},Vt=z({name:"RegisterForm",__name:"RegisterForm",props:{account:{}},emits:["onLogin","onRegister"],setup(C,{emit:b}){var r;const x=C,p=b,_=S(!1),u=U({validationSchema:j(A({account:F().min(1,"请输入用户名"),captcha:F().min(6,"请输入验证码"),password:F().min(1,"请输入密码").min(6,"密码长度为6到18位").max(18,"密码长度为6到18位"),checkPassword:F().min(1,"请再次输入密码")}).refine(d=>d.password===d.checkPassword,{message:"两次输入的密码不一致",path:["checkPassword"]})),initialValues:{account:(r=x.account)!=null?r:"",captcha:"",password:"",checkPassword:""}}),i=u.handleSubmit(d=>{_.value=!0,p("onRegister",d.account)});return(d,c)=>{const n=q,y=vt,l=D;return $(),B("div",Ct,[o("form",{onSubmit:c[1]||(c[1]=(...a)=>e(i)&&e(i)(...a))},[c[5]||(c[5]=o("div",{class:"mb-8 space-y-2"},[o("h3",{class:"text-4xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始 🚀 "),o("p",{class:"text-sm text-muted-foreground lg:text-base"}," 演示系统未提供该功能 ")],-1)),t(e(P),{name:"account"},{default:s(({componentField:a,errors:w})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(n,L({type:"text",placeholder:"请输入用户名",class:["w-full",w.length&&"border-destructive"]},a),null,16,["class"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(P),{name:"password"},{default:s(({componentField:a,value:w,errors:I})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(n,L({type:"password",placeholder:"请输入密码",class:["w-full",I.length&&"border-destructive"]},a),null,16,["class"])]),_:2},1024),t(e(xt),null,{default:s(()=>[t(y,{password:w,class:"mt-2"},null,8,["password"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(e(P),{name:"checkPassword"},{default:s(({componentField:a,errors:w})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(n,L({type:"password",placeholder:"请再次输入密码",class:["w-full",w.length&&"border-destructive"]},a),null,16,["class"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(l,{loading:e(_),size:"lg",class:"mt-4 w-full",type:"submit"},{default:s(()=>[...c[2]||(c[2]=[f(" 注册 ",-1)])]),_:1},8,["loading"]),o("div",It,[c[4]||(c[4]=o("span",{class:"text-secondary-foreground op-50"},"已经有帐号?",-1)),t(l,{variant:"link",class:"h-auto p-0",onClick:c[0]||(c[0]=a=>p("onLogin",e(u).values.account))},{default:s(()=>[...c[3]||(c[3]=[f(" 去登录 ",-1)])]),_:1})])],32)])}}}),Lt={class:"min-h-500px w-full flex-col-stretch-center p-12"},zt={class:"flex-start-between gap-2"},Bt={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},Ot=z({name:"ResetPasswordForm",__name:"ResetPasswordForm",props:{account:{}},emits:["onLogin","onResetPassword"],setup(C,{emit:b}){var n;const x=C,p=b,_=S(!1),u=U({validationSchema:j(A({account:F().min(1,"请输入用户名"),captcha:F().min(6,"请输入验证码"),newPassword:F().min(1,"请输入新密码").min(6,"密码长度为6到18位").max(18,"密码长度为6到18位")})),initialValues:{account:(n=x.account)!=null?n:"",captcha:"",newPassword:""}}),i=u.handleSubmit(y=>{_.value=!0,p("onResetPassword",y.account)}),r=S(0),d=S(Number.NaN);function c(){r.value=60,d.value=window.setInterval(()=>{r.value--,r.value===0&&clearInterval(d.value)},1e3)}return(y,l)=>{const a=q,w=_t,I=D;return $(),B("div",Lt,[o("form",{onSubmit:l[1]||(l[1]=(...g)=>e(i)&&e(i)(...g))},[l[4]||(l[4]=o("div",{class:"mb-8 space-y-2"},[o("h3",{class:"text-4xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 "),o("p",{class:"text-sm text-muted-foreground lg:text-base"}," 演示系统未提供该功能 ")],-1)),t(e(P),{name:"account"},{default:s(({componentField:g,errors:v})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(a,L({type:"text",placeholder:"请输入用户名",class:["w-full",v.length&&"border-destructive"]},g),null,16,["class"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),o("div",zt,[t(e(P),{name:"captcha"},{default:s(({componentField:g,value:v,setValue:N})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(w,{"model-value":v,name:g.name,length:6,class:"border-destructive","onUpdate:modelValue":m=>N(m)},null,8,["model-value","name","onUpdate:modelValue"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(I,{variant:"outline",size:"lg",disabled:e(r)>0,class:"flex-1 px-4",onClick:c},{default:s(()=>[f(H(e(r)===0?"发送验证码":"".concat(e(r)," 秒后可重新发送")),1)]),_:1},8,["disabled"])]),t(e(P),{name:"newPassword"},{default:s(({componentField:g,errors:v})=>[t(e(R),{class:"relative pb-6 space-y-0"},{default:s(()=>[t(e(h),null,{default:s(()=>[t(a,L({type:"password",placeholder:"请输入新密码",class:["w-full",v.length&&"border-destructive"]},g),null,16,["class"])]),_:2},1024),t(k,{"enter-active-class":"transition-opacity","enter-from-class":"opacity-0","leave-active-class":"transition-opacity","leave-to-class":"opacity-0"},{default:s(()=>[t(e(V),{class:"absolute bottom-1 text-xs"})]),_:1})]),_:2},1024)]),_:1}),t(I,{loading:e(_),size:"lg",class:"mt-4 w-full",type:"submit"},{default:s(()=>[...l[2]||(l[2]=[f(" 确认 ",-1)])]),_:1},8,["loading"]),o("div",Bt,[t(I,{variant:"link",class:"h-auto p-0",onClick:l[0]||(l[0]=g=>p("onLogin",e(u).values.account))},{default:s(()=>[...l[3]||(l[3]=[f(" 去登录 ",-1)])]),_:1})])],32)])}}}),Nt={class:"absolute right-4 top-4 z-1 flex-center border rounded-lg bg-background p-1 text-base"},Tt={class:"login-box"},Dt={class:"login-form flex-col-center"},J=z({name:"Login",__name:"login",setup(C){var r,d;const b=lt(),x=nt(),p=it(),_=S((d=(r=b.query.redirect)==null?void 0:r.toString())!=null?d:p.settings.home.fullPath),u=S(),i=S("login");return(c,n)=>{const y=K;return $(),B(rt,null,[n[8]||(n[8]=o("div",{class:"bg-banner"},null,-1)),o("div",Nt,[e(p).settings.toolbar.colorScheme?($(),O(gt,{key:0})):X("",!0)]),o("div",Tt,[n[7]||(n[7]=o("div",{class:"login-banner"},[o("img",{src:ut,class:"absolute inset-s-4 inset-t-4 h-8 rounded"}),o("img",{src:dt,class:"banner"})],-1)),o("div",Dt,[t(k,{name:"fade",mode:"out-in"},{default:s(()=>[e(i)==="login"?($(),O(ht,{key:0,account:e(u),onOnLogin:n[0]||(n[0]=l=>e(x).push(e(_))),onOnRegister:n[1]||(n[1]=l=>{i.value="register",u.value=l}),onOnResetPassword:n[2]||(n[2]=l=>{i.value="resetPassword",u.value=l})},null,8,["account"])):e(i)==="register"?($(),O(Vt,{key:1,account:e(u),onOnRegister:n[3]||(n[3]=l=>{i.value="login",u.value=l}),onOnLogin:n[4]||(n[4]=l=>i.value="login")},null,8,["account"])):e(i)==="resetPassword"?($(),O(Ot,{key:2,account:e(u),onOnResetPassword:n[5]||(n[5]=l=>{i.value="login",u.value=l}),onOnLogin:n[6]||(n[6]=l=>i.value="login")},null,8,["account"])):X("",!0)]),_:1})])]),t(y,{class:"copyright"})],64)}}});typeof Z=="function"&&Z(J);const ee=ct(J,[["__scopeId","data-v-bb797091"]]);export{ee as default};
