
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{c4 as k}from"./index-CJB5jCfL.js";import{k as c}from"./dom-to-png-WXGPkYro-BQsfl1t5.js";import"./vue-data-ui-8Gmf-dDN.js";import"./alert-I_0TAljB.js";async function S({domElement:r,fileName:I,scale:h=2,orientation:P="auto",overflowTolerance:T=.2,aspectRatio:F=null}){if(!r)return Promise.reject("No domElement provided");const R=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let v;try{v=(await k(async()=>{const{default:e}=await import("./__vite-optional-peer-dep_jspdf_vue-data-ui_false-DOvOOyrI.js");return{default:e}},[],import.meta.url)).default}catch(e){return Promise.reject("jspdf is not installed. Run npm install jspdf")}const D={width:595.28,height:841.89},G={width:841.89,height:595.28},y=1e3;function H(e){if(e==null)return null;if(typeof e=="number"&&e>0)return{w:1,h:e};if(typeof e=="string"){const o=e.split("/").map(t=>t.trim());if(o.length===2){const t=Number(o[0]),n=Number(o[1]);if(t>0&&n>0)return{w:t,h:n}}else if(o.length===1){const t=Number(o[0]);if(t>0)return{w:1,h:t}}}return null}const a=H(F),f=a?{width:y,height:y*(a.h/a.w)}:null,M=a?{width:f.height,height:f.width}:null;if(R)try{await c({container:r,scale:h}),await c({container:r,scale:h}),await c({container:r,scale:h}),await c({container:r,scale:h})}catch(e){}const m=await c({container:r,scale:h});return await new Promise((e,o)=>{const t=new window.Image;t.onload=function(){const n=t.naturalWidth,s=t.naturalHeight,N=P==="auto"?s>=n?"p":"l":P,i=N==="l"?a?M:G:a?f:D,u=i.width/n,W=i.height/s,b=s*u;let j="single",l;b<=i.height+.5?l=u:b<=i.height*(1+T)?l=Math.min(u,W):(j="multi",l=u);const w=n*l,g=s*l,A=(i.width-w)/2,d=new v({orientation:N,unit:"pt",format:a?[i.width,i.height]:"a4"});if(j==="single"){const p=(i.height-g)/2;d.addImage(m,"PNG",A,p,w,g,"","FAST")}else{const p=i.height/l;let _=s,E=0;for(;_>.5;)d.addImage(m,"PNG",A,E,w,g,"","FAST"),_-=p,E-=i.height,_>.5&&d.addPage()}d.save("".concat(I,".pdf")),e()},t.onerror=n=>o("Failed to load image for PDF: "+n),t.src=m})}export{S as default};
