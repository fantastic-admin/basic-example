
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{ab as Se,e as B,J as _,K as I,E as Z,av as ee,z as _e,aw as y,o as j,N as ge,as as N,ad as Me,c as ne,r as we,O as ye,u as S,ai as ke,a9 as V,d as Re,g as m,h as c,p as Ee,l as k,G as Ne,f as be,Q as Be,P as Oe,B as Ce,C as X}from"./index-DXZKKOp8.js";import Le from"./alert-l5XlVwCh.js";import{_ as Y}from"./command.vue_vue_type_script_setup_true_lang-DwODSGaT.js";import"./index.vue_vue_type_script_setup_true_lang-D4ztVb3N.js";const G={__name:"splitpanes",props:{horizontal:{type:Boolean,default:!1},pushOtherPanes:{type:Boolean,default:!0},maximizePanes:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean,default:!1}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click","splitter-dblclick"],setup(A,{emit:R}){const f=R,o=A,E=Se(),s=B([]),g=_(()=>s.value.reduce((e,n)=>(e[~~n.id]=n)&&e,{})),z=_(()=>s.value.length),p=B(null),M=B(!1),v=B({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),P=B({splitter:null,timeoutId:null}),O=_(()=>({["splitpanes splitpanes--".concat(o.horizontal?"horizontal":"vertical")]:!0,"splitpanes--dragging":v.value.dragging})),C=()=>{document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",w),"ontouchstart"in window&&(document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",w))},L=()=>{document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",w),"ontouchstart"in window&&(document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",w))},D=(e,n)=>{const t=e.target.closest(".splitpanes__splitter");if(t){const{left:a,top:i}=t.getBoundingClientRect(),{clientX:l,clientY:d}="ontouchstart"in window&&e.touches?e.touches[0]:e;v.value.cursorOffset=o.horizontal?d-i:l-a}C(),v.value.mouseDown=!0,v.value.activeSplitter=n},r=e=>{v.value.mouseDown&&(e.preventDefault(),v.value.dragging=!0,requestAnimationFrame(()=>{se(ie(e)),h("resize",{event:e},!0)}))},w=e=>{v.value.dragging&&(window.getSelection().removeAllRanges(),h("resized",{event:e},!0)),v.value.mouseDown=!1,v.value.activeSplitter=null,setTimeout(()=>{v.value.dragging=!1,L()},100)},T=(e,n)=>{"ontouchstart"in window&&(e.preventDefault(),P.value.splitter===n?(clearTimeout(P.value.timeoutId),P.value.timeoutId=null,H(e,n),P.value.splitter=null):(P.value.splitter=n,P.value.timeoutId=setTimeout(()=>P.value.splitter=null,500))),v.value.dragging||h("splitter-click",{event:e,index:n},!0)},H=(e,n)=>{if(h("splitter-dblclick",{event:e,index:n},!0),o.maximizePanes){let t=0;s.value=s.value.map((a,i)=>(a.size=i===n?a.max:a.min,i!==n&&(t+=a.min),a)),s.value[n].size-=t,h("pane-maximize",{event:e,index:n,pane:s.value[n]}),h("resized",{event:e,index:n},!0)}},te=(e,n)=>{h("pane-click",{event:e,index:g.value[n].index,pane:g.value[n]})},ie=e=>{const n=p.value.getBoundingClientRect(),{clientX:t,clientY:a}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:t-(o.horizontal?0:v.value.cursorOffset)-n.left,y:a-(o.horizontal?v.value.cursorOffset:0)-n.top}},le=e=>{e=e[o.horizontal?"y":"x"];const n=p.value[o.horizontal?"clientHeight":"clientWidth"];return o.rtl&&!o.horizontal&&(e=n-e),e*100/n},se=e=>{const n=v.value.activeSplitter;let t={prevPanesSize:J(n),nextPanesSize:$(n),prevReachedMinPanes:0,nextReachedMinPanes:0};const a=0+(o.pushOtherPanes?0:t.prevPanesSize),i=100-(o.pushOtherPanes?0:t.nextPanesSize),l=Math.max(Math.min(le(e),i),a);let d=[n,n+1],u=s.value[d[0]]||null,x=s.value[d[1]]||null;const Q=u.max<100&&l>=u.max+t.prevPanesSize,Pe=x.max<100&&l<=100-(x.max+$(n+1));if(Q||Pe){Q?(u.size=u.max,x.size=Math.max(100-u.max-t.prevPanesSize-t.nextPanesSize,0)):(u.size=Math.max(100-x.max-t.prevPanesSize-$(n+1),0),x.size=x.max);return}if(o.pushOtherPanes){const W=oe(t,l);if(!W)return;({sums:t,panesToResize:d}=W),u=s.value[d[0]]||null,x=s.value[d[1]]||null}u!==null&&(u.size=Math.min(Math.max(l-t.prevPanesSize-t.prevReachedMinPanes,u.min),u.max)),x!==null&&(x.size=Math.min(Math.max(100-l-t.nextPanesSize-t.nextReachedMinPanes,x.min),x.max))},oe=(e,n)=>{const t=v.value.activeSplitter,a=[t,t+1];return n<e.prevPanesSize+s.value[a[0]].min&&(a[0]=ue(t).index,e.prevReachedMinPanes=0,a[0]<t&&s.value.forEach((i,l)=>{l>a[0]&&l<=t&&(i.size=i.min,e.prevReachedMinPanes+=i.min)}),e.prevPanesSize=J(a[0]),a[0]===void 0)?(e.prevReachedMinPanes=0,s.value[0].size=s.value[0].min,s.value.forEach((i,l)=>{l>0&&l<=t&&(i.size=i.min,e.prevReachedMinPanes+=i.min)}),s.value[a[1]].size=100-e.prevReachedMinPanes-s.value[0].min-e.prevPanesSize-e.nextPanesSize,null):n>100-e.nextPanesSize-s.value[a[1]].min&&(a[1]=re(t).index,e.nextReachedMinPanes=0,a[1]>t+1&&s.value.forEach((i,l)=>{l>t&&l<a[1]&&(i.size=i.min,e.nextReachedMinPanes+=i.min)}),e.nextPanesSize=$(a[1]-1),a[1]===void 0)?(e.nextReachedMinPanes=0,s.value.forEach((i,l)=>{l<z.value-1&&l>=t+1&&(i.size=i.min,e.nextReachedMinPanes+=i.min)}),s.value[a[0]].size=100-e.prevPanesSize-$(a[0]-1),null):{sums:e,panesToResize:a}},J=e=>s.value.reduce((n,t,a)=>n+(a<e?t.size:0),0),$=e=>s.value.reduce((n,t,a)=>n+(a>e+1?t.size:0),0),ue=e=>[...s.value].reverse().find(n=>n.index<e&&n.size>n.min)||{},re=e=>s.value.find(n=>n.index>e+1&&n.size>n.min)||{},de=()=>{var e;const n=Array.from(((e=p.value)==null?void 0:e.children)||[]);for(const t of n){const a=t.classList.contains("splitpanes__pane"),i=t.classList.contains("splitpanes__splitter");!a&&!i&&(t.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}},K=(e,n,t=!1)=>{const a=e-1,i=document.createElement("div");i.classList.add("splitpanes__splitter"),t||(i.onmousedown=l=>D(l,a),typeof window<"u"&&"ontouchstart"in window&&(i.ontouchstart=l=>D(l,a)),i.onclick=l=>T(l,a+1)),i.ondblclick=l=>H(l,a+1),n.parentNode.insertBefore(i,n)},ve=e=>{e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.remove()},F=()=>{var e;const n=Array.from(((e=p.value)==null?void 0:e.children)||[]);for(const a of n)a.className.includes("splitpanes__splitter")&&ve(a);let t=0;for(const a of n)a.className.includes("splitpanes__pane")&&(!t&&o.firstSplitter?K(t,a,!0):t&&K(t,a),t++)},me=({uid:e,...n})=>{const t=g.value[e];for(const[a,i]of Object.entries(n))t[a]=i},pe=e=>{var n;let t=-1;Array.from(((n=p.value)==null?void 0:n.children)||[]).some(a=>(a.className.includes("splitpanes__pane")&&t++,a.isSameNode(e.el))),s.value.splice(t,0,{...e,index:t}),s.value.forEach((a,i)=>a.index=i),M.value&&V(()=>{F(),q({addedPane:s.value[t]}),h("pane-add",{pane:s.value[t]})})},ce=e=>{const n=s.value.findIndex(a=>a.id===e);s.value[n].el=null;const t=s.value.splice(n,1)[0];s.value.forEach((a,i)=>a.index=i),V(()=>{F(),h("pane-remove",{pane:t}),q({removedPane:{...t}})})},q=(e={})=>{!e.addedPane&&!e.removedPane?ze():s.value.some(n=>n.givenSize!==null||n.min||n.max<100)?he(e):fe(),M.value&&h("resized")},fe=()=>{const e=100/z.value;let n=0;const t=[],a=[];for(const i of s.value)i.size=Math.max(Math.min(e,i.max),i.min),n-=i.size,i.size>=i.max&&t.push(i.id),i.size<=i.min&&a.push(i.id);n>.1&&U(n,t,a)},ze=()=>{let e=100;const n=[],t=[];let a=0;for(const l of s.value)e-=l.size,l.givenSize!==null&&a++,l.size>=l.max&&n.push(l.id),l.size<=l.min&&t.push(l.id);let i=100;if(e>.1){for(const l of s.value)l.givenSize===null&&(l.size=Math.max(Math.min(e/(z.value-a),l.max),l.min)),i-=l.size;i>.1&&U(i,n,t)}},he=({addedPane:e,removedPane:n}={})=>{var d;let t=100/z.value,a=0;const i=[],l=[];((d=e==null?void 0:e.givenSize)!=null?d:null)!==null&&(t=(100-e.givenSize)/(z.value-1));for(const u of s.value)a-=u.size,u.size>=u.max&&i.push(u.id),u.size<=u.min&&l.push(u.id);if(!(Math.abs(a)<.1)){for(const u of s.value)(e==null?void 0:e.givenSize)!==null&&(e==null?void 0:e.id)===u.id||(u.size=Math.max(Math.min(t,u.max),u.min)),a-=u.size,u.size>=u.max&&i.push(u.id),u.size<=u.min&&l.push(u.id);a>.1&&U(a,i,l)}},U=(e,n,t)=>{let a;e>0?a=e/(z.value-n.length):a=e/(z.value-t.length),s.value.forEach((i,l)=>{if(e>0&&!n.includes(i.id)){const d=Math.max(Math.min(i.size+a,i.max),i.min),u=d-i.size;e-=u,i.size=d}else if(!t.includes(i.id)){const d=Math.max(Math.min(i.size+a,i.max),i.min),u=d-i.size;e-=u,i.size=d}}),Math.abs(e)>.1&&V(()=>{M.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})},h=(e,n=void 0,t=!1)=>{var i,l;const a=(l=(i=n==null?void 0:n.index)!=null?i:v.value.activeSplitter)!=null?l:null;f(e,{...n,...a!==null&&{index:a},...t&&a!==null&&{prevPane:s.value[a-(o.firstSplitter?1:0)],nextPane:s.value[a+(o.firstSplitter?0:1)]},panes:s.value.map(d=>({min:d.min,max:d.max,size:d.size}))})};I(()=>o.firstSplitter,()=>F()),Z(()=>{de(),F(),q(),h("ready"),M.value=!0}),ee(()=>M.value=!1);const xe=()=>{var e;return ke("div",{ref:p,class:O.value},(e=E.default)==null?void 0:e.call(E))};return y("panes",s),y("indexedPanes",g),y("horizontal",_(()=>o.horizontal)),y("requestUpdate",me),y("onPaneAdd",pe),y("onPaneRemove",ce),y("onPaneClick",te),(e,n)=>(j(),_e(ge(xe)))}},b={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(A){var R;const f=A,o=N("requestUpdate"),E=N("onPaneAdd"),s=N("horizontal"),g=N("onPaneRemove"),z=N("onPaneClick"),p=(R=Me())==null?void 0:R.uid,M=N("indexedPanes"),v=_(()=>M.value[p]),P=B(null),O=_(()=>{const r=isNaN(f.size)||f.size===void 0?0:parseFloat(f.size);return Math.max(Math.min(r,L.value),C.value)}),C=_(()=>{const r=parseFloat(f.minSize);return isNaN(r)?0:r}),L=_(()=>{const r=parseFloat(f.maxSize);return isNaN(r)?100:r}),D=_(()=>{var r;return"".concat(s.value?"height":"width",": ").concat((r=v.value)==null?void 0:r.size,"%")});return I(()=>O.value,r=>o({uid:p,size:r})),I(()=>C.value,r=>o({uid:p,min:r})),I(()=>L.value,r=>o({uid:p,max:r})),Z(()=>{E({id:p,el:P.value,min:C.value,max:L.value,givenSize:f.size===void 0?null:O.value,size:O.value})}),ee(()=>g(p)),(r,w)=>(j(),ne("div",{ref_key:"paneEl",ref:P,class:"splitpanes__pane",onClick:w[0]||(w[0]=T=>S(z)(T,r._.uid)),style:ye(D.value)},[we(r.$slots,"default")],4))}},ae=Re({__name:"splitpanes",setup(A){function R(f){window.open(f,"_blank")}return(f,o)=>{const E=Ne,s=Ee,g=Be,z=Oe;return j(),ne("div",null,[m(Le),m(g,{title:"拆分面板"},{description:c(()=>[be("p",null,[o[1]||(o[1]=k(" 安装命令： ",-1)),m(Y,{text:"pnpm add splitpanes"}),m(Y,{text:"pnpm add @types/splitpanes -D"})])]),default:c(()=>[m(s,{variant:"outline",onClick:o[0]||(o[0]=p=>R("https://github.com/antoniandre/splitpanes"))},{default:c(()=>[m(E,{name:"i-ep:link"}),o[2]||(o[2]=k(" 访问 splitpanes ",-1))]),_:1})]),_:1}),m(z,null,{default:c(()=>[m(S(G),{class:"default-theme",style:{height:"400px"}},{default:c(()=>[m(S(b),{"min-size":"20"},{default:c(()=>[...o[3]||(o[3]=[k(" 1 ",-1)])]),_:1}),m(S(b),null,{default:c(()=>[m(S(G),{horizontal:""},{default:c(()=>[m(S(b),null,{default:c(()=>[...o[4]||(o[4]=[k("2",-1)])]),_:1}),m(S(b),null,{default:c(()=>[...o[5]||(o[5]=[k("3",-1)])]),_:1}),m(S(b),null,{default:c(()=>[...o[6]||(o[6]=[k("4",-1)])]),_:1})]),_:1})]),_:1}),m(S(b),null,{default:c(()=>[...o[7]||(o[7]=[k(" 5 ",-1)])]),_:1})]),_:1})]),_:1})])}}});typeof X=="function"&&X(ae);const Ie=Ce(ae,[["__scopeId","data-v-c03c9536"]]);export{Ie as default};
