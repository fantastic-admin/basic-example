
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{aO as m,e as A,at as g,aP as k}from"./index-DXZKKOp8.js";function M(t,r){const e=m(!1,300),n=A(null),s=k();function a(){n.value=null,e.value=!1}function c(u,l){const h=u.currentTarget,o={x:u.clientX,y:u.clientY},i=p(o,h.getBoundingClientRect()),f=L(o,i),y=T(l.getBoundingClientRect()),x=G([...f,...y]);n.value=x,e.value=!0}return g(u=>{if(t.value&&r.value){const l=o=>c(o,r.value),h=o=>c(o,t.value);t.value.addEventListener("pointerleave",l),r.value.addEventListener("pointerleave",h),u(()=>{var o,i;(o=t.value)==null||o.removeEventListener("pointerleave",l),(i=r.value)==null||i.removeEventListener("pointerleave",h)})}}),g(u=>{var l;if(n.value){const h=o=>{var v,b;if(!n.value||!(o.target instanceof Element))return;const i=o.target,f={x:o.clientX,y:o.clientY},y=((v=t.value)==null?void 0:v.contains(i))||((b=r.value)==null?void 0:b.contains(i)),x=!E(f,n.value),w=!!i.closest("[data-grace-area-trigger]");y?a():(x||w)&&(a(),s.trigger())};(l=t.value)==null||l.ownerDocument.addEventListener("pointermove",h),u(()=>{var o;return(o=t.value)==null?void 0:o.ownerDocument.removeEventListener("pointermove",h)})}}),{isPointerInTransit:e,onPointerExit:s.on}}function p(t,r){const e=Math.abs(r.top-t.y),n=Math.abs(r.bottom-t.y),s=Math.abs(r.right-t.x),a=Math.abs(r.left-t.x);switch(Math.min(e,n,s,a)){case a:return"left";case s:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function L(t,r,e=5){const n=[];switch(r){case"top":n.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":n.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":n.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":n.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return n}function T(t){const{top:r,right:e,bottom:n,left:s}=t;return[{x:s,y:r},{x:e,y:r},{x:e,y:n},{x:s,y:n}]}function E(t,r){const{x:e,y:n}=t;let s=!1;for(let a=0,c=r.length-1;a<r.length;c=a++){const u=r[a].x,l=r[a].y,h=r[c].x,o=r[c].y;l>n!=o>n&&e<(h-u)*(n-l)/(o-l)+u&&(s=!s)}return s}function G(t){const r=t.slice();return r.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),R(r)}function R(t){if(t.length<=1)return t.slice();const r=[];for(let n=0;n<t.length;n++){const s=t[n];for(;r.length>=2;){const a=r[r.length-1],c=r[r.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))r.pop();else break}r.push(s)}r.pop();const e=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}return e.pop(),r.length===1&&e.length===1&&r[0].x===e[0].x&&r[0].y===e[0].y?r:r.concat(e)}export{M as u};
