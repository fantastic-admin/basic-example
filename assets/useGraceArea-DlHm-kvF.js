
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{aN as p,aO as m,e as A,au as g,aP as k}from"./index-CJB5jCfL.js";function C(t,r){const e=p(!1,300);m(()=>{e.value=!1});const s=A(null),n=k();function a(){s.value=null,e.value=!1}function c(u,l){const h=u.currentTarget,o={x:u.clientX,y:u.clientY},i=L(o,h.getBoundingClientRect()),f=T(o,i),y=E(l.getBoundingClientRect()),x=R([...f,...y]);s.value=x,e.value=!0}return g(u=>{if(t.value&&r.value){const l=o=>c(o,r.value),h=o=>c(o,t.value);t.value.addEventListener("pointerleave",l),r.value.addEventListener("pointerleave",h),u(()=>{var o,i;(o=t.value)==null||o.removeEventListener("pointerleave",l),(i=r.value)==null||i.removeEventListener("pointerleave",h)})}}),g(u=>{var l;if(s.value){const h=o=>{var v,b;if(!s.value||!(o.target instanceof Element))return;const i=o.target,f={x:o.clientX,y:o.clientY},y=((v=t.value)==null?void 0:v.contains(i))||((b=r.value)==null?void 0:b.contains(i)),x=!G(f,s.value),w=!!i.closest("[data-grace-area-trigger]");y?a():(x||w)&&(a(),n.trigger())};(l=t.value)==null||l.ownerDocument.addEventListener("pointermove",h),u(()=>{var o;return(o=t.value)==null?void 0:o.ownerDocument.removeEventListener("pointermove",h)})}}),{isPointerInTransit:e,onPointerExit:n.on}}function L(t,r){const e=Math.abs(r.top-t.y),s=Math.abs(r.bottom-t.y),n=Math.abs(r.right-t.x),a=Math.abs(r.left-t.x);switch(Math.min(e,s,n,a)){case a:return"left";case n:return"right";case e:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function T(t,r,e=5){const s=[];switch(r){case"top":s.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":s.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":s.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":s.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return s}function E(t){const{top:r,right:e,bottom:s,left:n}=t;return[{x:n,y:r},{x:e,y:r},{x:e,y:s},{x:n,y:s}]}function G(t,r){const{x:e,y:s}=t;let n=!1;for(let a=0,c=r.length-1;a<r.length;c=a++){const u=r[a].x,l=r[a].y,h=r[c].x,o=r[c].y;l>s!=o>s&&e<(h-u)*(s-l)/(o-l)+u&&(n=!n)}return n}function R(t){const r=t.slice();return r.sort((e,s)=>e.x<s.x?-1:e.x>s.x?1:e.y<s.y?-1:e.y>s.y?1:0),H(r)}function H(t){if(t.length<=1)return t.slice();const r=[];for(let s=0;s<t.length;s++){const n=t[s];for(;r.length>=2;){const a=r[r.length-1],c=r[r.length-2];if((a.x-c.x)*(n.y-c.y)>=(a.y-c.y)*(n.x-c.x))r.pop();else break}r.push(n)}r.pop();const e=[];for(let s=t.length-1;s>=0;s--){const n=t[s];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(n.y-c.y)>=(a.y-c.y)*(n.x-c.x))e.pop();else break}e.push(n)}return e.pop(),r.length===1&&e.length===1&&r[0].x===e[0].x&&r[0].y===e[0].y?r:r.concat(e)}export{C as u};
