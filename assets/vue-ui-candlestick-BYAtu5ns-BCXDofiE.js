
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vue-data-ui-BN9YfUec.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./Tooltip-68Yi_FFl-CRPaJsgv.js","./vue-ui-accordion-UpZ765hd-DndPzmcD.js","./useNestedProp-dJX_8vvZ-BzBW50KN.js","./DataTable-BT7VF2ua-Cw2NNXsE.js","./Shape-CNXKB8O0-BJGuTKHC.js","./PenAndPaper-DSvu9dwa-B6YjX2xm.js","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js","./PackageVersion-TgflyMpU-q2MkeeNq.js","./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"])))=>i.map(i=>d[i]);
import{J as y,e as c,a7 as $l,K as ue,au as kt,E as Cl,av as De,at as zl,a9 as wt,b_ as H,c as i,o as u,z as Y,A as h,f as p,g as Ee,u as m,c0 as At,h as w,r as A,j as J,k as K,O as ie,n as W,F as I,R as M,t as ne,m as $t,l as Ct,N as _l,c1 as j}from"./index-DXZKKOp8.js";import{s as Ll,Q as Fl,A as Il,L as pe,g as zt,p as Q,j as Sl,c as G,l as Tl,f as N,y as Ml,G as xe,O as Rl,R as _t,e as Ol,r as Dl,F as El,h as Pl}from"./vue-data-ui-BN9YfUec.js";import{E as Lt,M as Vl}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as Bl,o as Ft}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{m as Wl}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{S as Nl,T as Ul}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{F as It,V as Hl,O as jl}from"./useTimeLabels-BGFjWgrv-C_AB8TRS.js";import{O as Gl}from"./useSvgExport-DrjCWun4-CbW14PXm.js";import{a as Xl}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as ql}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import{S as Yl}from"./useTimeLabelCollider-CIsgDrl9-CjJy_OeC.js";import Jl from"./img-BecE5qXd-CsL1o-EN.js";import Kl from"./Title-BWp-37K_-BMUMQpSO.js";import{J as Ql}from"./themes-AUNCOb2G-RAhReTPj.js";import{u as Zl}from"./SlicerPreview-ij72TAs6-Cxp5eJgP.js";import"./alert-l5XlVwCh.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";const ea=["id"],ta=["xmlns","aria-label","viewBox"],la=["x","y","width","height"],aa={key:1},oa=["id"],sa=["stop-color"],ua=["stop-color"],ia=["stop-color"],na=["id"],ra=["stop-color"],va=["stop-color"],da=["stop-color"],ya={key:0},ca=["x1","x2","y1","y2","stroke","stroke-width"],ma=["x1","x2","y1","y2","stroke","stroke-width"],ha=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],pa=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],xa=["x1","x2","y1","y2","stroke","stroke-width"],ga=["x1","x2","y1","y2","stroke","stroke-width"],ba=["x","y","font-size","fill","font-weight"],fa=["transform","text-anchor","font-size","fill","font-weight"],ka=["transform","text-anchor","font-size","fill","font-weight"],wa=["x","y","width","height","fill","rx"],Aa={key:0},$a=["cx","cy","r","fill"],Ca=["cx","cy","r","fill"],za={key:1},_a=["x","y","width","height","rx","fill"],La=["x","y","width","height","fill","rx"],Fa=["x","y","height","width","fill","rx"],Ia=["x","y","height","width","fill","rx","stroke","stroke-width"],Sa=["d","stroke"],Ta=["x","y","height","width","fill","onMouseover","onMouseleave","onClick"],Ma=["data-start","data-end"],Ra={key:4,class:"vue-data-ui-watermark"},Oa=["d","stroke"],Da=["d","stroke","stroke-width"],Ea=["innerHTML"],Pa={__name:"vue-ui-candlestick",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}},selectedXIndex:{type:Number,default:void 0}},emits:["selectX"],setup(St,{expose:Tt,emit:Mt}){const Rt=H(()=>j(()=>import("./vue-data-ui-BN9YfUec.js").then(t=>t.aw),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),Ot=H(()=>j(()=>import("./Tooltip-68Yi_FFl-CRPaJsgv.js"),__vite__mapDeps([5,0,1,2,3,4]),import.meta.url)),Dt=H(()=>j(()=>import("./vue-ui-accordion-UpZ765hd-DndPzmcD.js"),__vite__mapDeps([6,1,2,0,3,4,7]),import.meta.url)),Et=H(()=>j(()=>import("./DataTable-BT7VF2ua-Cw2NNXsE.js"),__vite__mapDeps([8,1,2,9,0,3,4]),import.meta.url)),Pt=H(()=>j(()=>import("./PenAndPaper-DSvu9dwa-B6YjX2xm.js"),__vite__mapDeps([10,1,2,0,3,4,11,12]),import.meta.url)),Vt=H(()=>j(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([13,1,2,12,0,3,4,14,15]),import.meta.url)),Bt=H(()=>j(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([16,1,2]),import.meta.url)),Wt=H(()=>j(()=>import("./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"),__vite__mapDeps([17,1,2,0,3,4]),import.meta.url)),{vue_ui_candlestick:Nt}=Bl(),g=St,Pe=Mt,ge=y(()=>!!g.dataset&&g.dataset.length),D=c(!1),be=c(null),R=c(Fl()),fe=c(!1),ke=c(""),E=c(void 0),Ve=c(0),P=c(null),Be=c(null),We=c(null),ee=c(null),Ne=c(null),Ue=c(null),Ut=c(0),He=c(0),je=c(0),we=c(null),te=c(null),le=c(null),Ae=c(null),Ge=c(null),e=c(_e()),{loading:V,FINAL_DATASET:b,manualLoading:$e}=Nl({...$l(g),FINAL_CONFIG:e,prepareConfig:_e,callback:()=>{Promise.resolve().then(async()=>{await ce()})},skeletonDataset:[[17040672e5,10,20,2,10,30],[17067456e5,10,30,5,20,50],[17092512e5,20,50,10,30,80],[17119296e5,30,80,20,50,130],[17145216e5,50,130,30,100,210],[17172e8,80,210,50,150,340],[1719792e6,130,340,80,280,550],[17224704e5,210,550,130,450,890],[17251488e5,340,890,210,750,1440],[17277408e5,550,1440,340,1230,2330],[17304192e5,890,2330,550,1950,3770],[17330112e5,1440,3770,890,3200,5100]],skeletonConfig:Il({defaultConfig:e.value,userConfig:{useCssAnimation:!1,userOptions:{show:!1},table:{show:!1},style:{backgroundColor:"#99999930",layout:{candle:{colors:{bearish:"#BABABA",bullish:"#CACACA"}},grid:{stroke:"#6A6A6A",verticalLines:{stroke:"#6A6A6A"},horizontalLines:{stroke:"#6A6A6A"},yAxis:{dataLabels:{show:!1},scale:{min:null,max:null}}},wick:{stroke:"#6A6A6A",extremity:{color:"#6A6A6A"}}},tooltip:{show:!1},zoom:{show:!1,startIndex:null,endIndex:null}}}})}),{userOptionsVisible:Ce,setUserOptionsVisibility:Xe,keepUserOptionState:qe}=Xl({config:e.value}),{svgRef:ze}=ql({config:e.value.style.title});function Ht(){Xe(!0)}function jt(){Xe(!1),Pe("selectX",{seriesIndex:null,datapoint:null}),E.value=null}function _e(){const t=Ft({userConfig:g.config,defaultConfig:Nt});let a={};return t.theme?a={...Ft({userConfig:Ql.vue_ui_candlestick[t.theme]||g.config,defaultConfig:t})}:a=t,g.config&&pe(g.config,"style.zoom.startIndex")?a.style.zoom.startIndex=g.config.style.zoom.startIndex:a.style.zoom.startIndex=null,g.config&&pe(g.config,"style.zoom.endIndex")?a.style.zoom.endIndex=g.config.style.zoom.endIndex:a.style.zoom.endIndex=null,g.config&&pe(g.config,"style.layout.grid.yAxis.scale.min")?a.style.layout.grid.yAxis.scale.min=g.config.style.layout.grid.yAxis.scale.min:a.style.layout.grid.yAxis.scale.min=null,g.config&&pe(g.config,"style.layout.grid.yAxis.scale.max")?a.style.layout.grid.yAxis.scale.max=g.config.style.layout.grid.yAxis.scale.max:a.style.layout.grid.yAxis.scale.max=null,a}ue(()=>g.config,t=>{V.value||(e.value=_e()),Ce.value=!e.value.userOptions.showOnChartHover,Ye(),Ut.value+=1,je.value+=1,He.value+=1,S.value.showTable=e.value.table.show,S.value.showTooltip=e.value.style.tooltip.show,re()},{deep:!0}),ue(()=>g.dataset,t=>{Array.isArray(t)&&t.length>0&&($e.value=!1),vt()},{deep:!0});const x=c({height:e.value.style.height,width:e.value.style.width,xAxisFontSize:e.value.style.layout.grid.xAxis.dataLabels.fontSize,yAxisFontSize:e.value.style.layout.grid.yAxis.dataLabels.fontSize}),U=kt(null),Z=kt(null);Cl(()=>{Ye()});const X=y(()=>!!e.value.debug);function Ye(){if(zt(g.dataset)&&(Q({componentName:"VueUiCandlestick",type:"dataset",debug:X.value}),$e.value=!0),zt(g.dataset)||($e.value=e.value.loading),setTimeout(()=>{D.value=!0},10),e.value.responsive){const t=Lt(()=>{D.value=!1;const{width:a,height:l}=Vl({chart:P.value,title:e.value.style.title.text?Be.value:null,slicer:e.value.style.zoom.show&&C.value>6?ee.value.$el:null,legend:We.value,source:Ne.value,noTitle:Ue.value});requestAnimationFrame(()=>{x.value.width=a,x.value.height=l-12,e.value.responsiveProportionalSizing?(x.value.xAxisFontSize=_t({relator:Math.min(a,l),adjuster:e.value.style.width,source:e.value.style.layout.grid.xAxis.dataLabels.fontSize,threshold:6,fallback:6}),x.value.yAxisFontSize=_t({relator:Math.min(a,l),adjuster:e.value.style.width,source:e.value.style.layout.grid.yAxis.dataLabels.fontSize,threshold:6,fallback:6})):(x.value.xAxisFontSize=e.value.style.layout.grid.xAxis.dataLabels.fontSize,x.value.yAxisFontSize=e.value.style.layout.grid.yAxis.dataLabels.fontSize),be.value&&clearTimeout(be.value),be.value=setTimeout(()=>{D.value=!0},10)})});U.value&&(Z.value&&U.value.unobserve(Z.value),U.value.disconnect()),U.value=new ResizeObserver(t),Z.value=P.value.parentNode,U.value.observe(Z.value)}ce()}De(()=>{U.value&&(Z.value&&U.value.unobserve(Z.value),U.value.disconnect())});const{isPrinting:Je,isImaging:Ke,generatePdf:Qe,generateImage:Ze}=Wl({elementId:"vue-ui-candlestick_".concat(R.value),fileName:e.value.style.title.text||"vue-ui-candlestick",options:e.value.userOptions.print}),Gt=y(()=>e.value.userOptions.show&&!e.value.style.title.text),S=c({showTable:e.value.table.show,showTooltip:e.value.style.tooltip.show}),Le=c(0),Xt=Lt(t=>{Le.value=t},100);zl(t=>{const a=te.value;if(!a)return;const l=new ResizeObserver(o=>{Xt(o[0].contentRect.height)});l.observe(a),t(()=>l.disconnect())}),De(()=>{Le.value=0});const et=y(()=>{let t=0;return te.value&&(t=Le.value+x.value.xAxisFontSize),t});function qt(){let t=e.value.style.layout.grid.yAxis.dataLabels.offsetX;return we.value&&(t=Array.from(we.value.querySelectorAll("text")).reduce((a,l)=>{const o=l.getComputedTextLength();return o>a?o:a},0)),t+13}const n=y(()=>{const{top:t,right:a,bottom:l,left:o}=e.value.style.layout.padding,s=qt(),v=12;return{top:t+v,right:x.value.width-a,left:o+s,bottom:x.value.height-l-et.value,width:x.value.width-o-a-s,height:x.value.height-t-l-et.value-v}}),Yt=y(()=>{const{left:t,top:a,width:l,height:o}=n.value,s=r.value.start,v=r.value.end-s,f=l/v,_=$.value.start-s,L=$.value.end-s,k=Math.max(0,Math.min(v,_)),T=Math.max(0,Math.min(v,L));return{x:t+k*f,y:a,width:(T-k)*f,height:o,fill:e.value.style.zoom.preview.fill,stroke:e.value.style.zoom.preview.stroke,"stroke-width":e.value.style.zoom.preview.strokeWidth,"stroke-dasharray":e.value.style.zoom.preview.strokeDasharray,"stroke-linecap":"round","stroke-linejoin":"round",style:{pointerEvents:"none",transition:"none !important",animation:"none !important"}}}),C=y(()=>b.value.length),r=c({start:0,end:C.value}),$=c({start:0,end:C.value}),tt=y(()=>e.value.style.zoom.preview.enable&&($.value.start!==r.value.start||$.value.end!==r.value.end));function lt(t,a){$.value[t]=a}function re(){var l,o;let t=Math.max(0,Math.min((l=r.value.start)!=null?l:0,C.value-1)),a=Math.max(t+1,Math.min((o=r.value.end)!=null?o:C.value,C.value));(!Number.isFinite(t)||!Number.isFinite(a)||a<=t)&&(t=0,a=C.value),r.value.start=t,r.value.end=a,$.value.start=t,$.value.end=a,ee.value&&(ee.value.setStartValue(t),ee.value.setEndValue(a))}const at=y(()=>b.value.map((t,a)=>({...t,absoluteIndex:a}))),ot=y(()=>at.value.slice(r.value.start,r.value.end)),F=y(()=>(b.value.forEach((t,a)=>{[null,void 0].includes(t[0])&&Q({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"period (index 0)",index:a,debug:X.value}),[null,void 0].includes(t[1])&&Q({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"open (index 1)",index:a,debug:X.value}),[null,void 0].includes(t[2])&&Q({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"high (index 2)",index:a,debug:X.value}),[null,void 0].includes(t[3])&&Q({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"low (index 3)",index:a,debug:X.value}),[null,void 0].includes(t[4])&&Q({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"close (index 4)",index:a,debug:X.value}),[null,void 0].includes(t[5])&&Q({componentName:"VueUiCandlestick",type:"datasetAttribute",property:"volume (index 5)",index:a,debug:X.value})}),ot.value.map(t=>({absoluteIndex:t.absoluteIndex,period:t[0],open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5]})))),Jt=y(()=>at.value.map(t=>({absoluteIndex:t.absoluteIndex,period:t[0],open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5]}))),d=y(()=>n.value.width/ot.value.length),st=y(()=>{const t=e.value.style.layout.grid.yAxis.scale.max===null?Math.max(...F.value.map(l=>l.high)):e.value.style.layout.grid.yAxis.scale.max,a=e.value.style.layout.grid.yAxis.scale.min===null?0:e.value.style.layout.grid.yAxis.scale.min;return{max:t,min:a}}),O=y(()=>Sl(st.value.min,st.value.max,e.value.style.layout.grid.yAxis.dataLabels.steps));function ve(t,a,l=null,o=null){return{...t,x:G(n.value.left+a*d.value+d.value/2),y:G(n.value.top+(1-(t-O.value.min)/(O.value.max-O.value.min))*n.value.height),value:G(t),isMax:t===l,isMin:t===o}}const z=y(()=>{const t={o:Math.max(...F.value.map(s=>s.open)),h:Math.max(...F.value.map(s=>s.high)),l:Math.max(...F.value.map(s=>s.low)),c:Math.max(...F.value.map(s=>s.low))},a={o:Math.min(...F.value.map(s=>s.open)),h:Math.min(...F.value.map(s=>s.high)),l:Math.min(...F.value.map(s=>s.low)),c:Math.min(...F.value.map(s=>s.low))},l=Math.max(...F.value.map(s=>s.volume)),o=Math.min(...F.value.map(s=>s.volume));return F.value.map((s,v)=>{const f=ve(s.open,v,t.o,a.o),_=ve(s.high,v,t.h,a.h),L=ve(s.low,v,t.l,a.l),k=ve(s.close,v,t.c,a.c),T=s.close>s.open,gt=s.volume===l,Me=s.volume===o;return{period:s.period,open:f,high:_,low:L,close:k,volume:s.volume,isBullish:T,absoluteIndex:s.absoluteIndex,isMaxVolume:gt,isMinVolume:Me}})});function de({item:t,index:a,minimapH:l,unitW:o}){var f,_;const s=(f=e.value.style.layout.grid.yAxis.scale.min)!=null?f:0,v=(_=e.value.style.layout.grid.yAxis.scale.max)!=null?_:Math.max(...b.value.map(L=>L[2]));return{...t,x:G(a*o),y:G((1-(t-s)/(v-s))*l),value:G(t)}}const Kt=y(()=>({minimapH:t,unitW:a})=>Jt.value.map((l,o)=>{const s=de({item:l.open,index:o,minimapH:t,unitW:a}),v=de({item:l.high,index:o,minimapH:t,unitW:a}),f=de({item:l.low,index:o,minimapH:t,unitW:a}),_=de({item:l.close,index:o,minimapH:t,unitW:a}),L=l.close>l.open;return{period:l.period,open:s,high:v,low:f,close:_,volume:l.volume,isBullish:L,absoluteIndex:l.absoluteIndex}})),Qt=y(()=>e.value.style.zoom.minimap.show?[{name:"",series:b.value.map(t=>t[2]),color:"#000000",isVisible:!0}]:[]);function Zt(t){return G((t-O.value.min)/(O.value.max-O.value.min))}const ut=y(()=>O.value.ticks.map(t=>({y:n.value.bottom-n.value.height*Zt(t),value:G(t)}))),el=y(()=>F.value.map(t=>t.period)),B=y(()=>It({values:b.value.map(t=>t[0]),maxDatapoints:b.value.length,formatter:e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter,start:r.value.start,end:r.value.end})),it=y(()=>It({values:b.value.map(t=>t[0]),maxDatapoints:b.value.length,formatter:e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter,start:0,end:C.value})),tl=y(()=>{const t=e.value.style.layout.grid.xAxis.dataLabels.modulo;return B.value.length?Math.min(t,[...new Set(B.value.map(a=>a.text))].length):t}),nt=y(()=>{const t=e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter,a=Hl({useUTC:t.useUTC,locale:jl[t.locale]||{months:[],shortMonths:[],days:[],shortDays:[]},januaryAsYear:t.januaryAsYear});return(l,o)=>{var v;const s=(v=b.value.map(f=>f[0]))==null?void 0:v[l];return s==null?"":a.formatDate(new Date(s),o)}}),ll=y(()=>(b.value.map(t=>t[0])||[]).map((t,a)=>({text:nt.value(a,e.value.style.tooltip.timeFormat),absoluteIndex:a}))),al=y(()=>(b.value.map(t=>t[0])||[]).map((t,a)=>({text:nt.value(a,e.value.style.zoom.timeFormat),absoluteIndex:a}))),Fe=y(()=>{var L;const t=e.value.style.layout.grid.xAxis.dataLabels,a=B.value||[],l=it.value||[],o=(L=r.value.start)!=null?L:0,s=E.value,v=C.value,f=a.map(k=>{var T;return(T=k==null?void 0:k.text)!=null?T:""}),_=l.map(k=>{var T;return(T=k==null?void 0:k.text)!=null?T:""});return Tl(!!t.showOnlyFirstAndLast,!!t.showOnlyAtModulo,Math.max(1,tl.value||1),f,_,o,s,v)}),rt=y(()=>{var t,a,l,o;return e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable?{start:(a=(t=B.value.find(s=>s.absoluteIndex===r.value.start))==null?void 0:t.text)!=null?a:"",end:(o=(l=B.value.find(s=>s.absoluteIndex===r.value.end-1))==null?void 0:l.text)!=null?o:""}:{start:b.value[r.value.start]?b.value[r.value.start][0]:b.value[0][0],end:b.value[r.value.end-1]?b.value[r.value.end-1][0]:b.value.at(-1)[0]}}),Ie=c(null);function ol(t,a){e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:a,seriesIndex:t+r.value.start})}function sl(t,a){e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:a,seriesIndex:t+r.value.start}),E.value=void 0,fe.value=!1}ue(()=>g.selectedXIndex,t=>{if([null,void 0].includes(g.selectedXIndex)){E.value=null;return}const a=t-r.value.start;a<0||t>=r.value.end?E.value=null:E.value=a!=null?a:null},{immediate:!0});function ul(t,a){e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:a,seriesIndex:t+r.value.start}),E.value=t,Ie.value={datapoint:a,seriesIndex:t,series:z.value,config:e.value},gl({seriesIndex:t,datapoint:a});const l=e.value.style.tooltip.customFormat;if(El(l)&&Pl(()=>l({seriesIndex:t,datapoint:a,series:z.value,config:e.value})))ke.value=l({seriesIndex:t,datapoint:a,series:z.value,config:e.value});else if(e.value.style.tooltip.show){let o="";const{period:s,open:v,high:f,low:_,close:L,volume:k,isBullish:T}=z.value[t],{period:gt,open:Me,high:bl,low:fl,close:kl,volume:wl}=e.value.translations,Al=e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable?e.value.style.tooltip.useDefaultTimeFormat?B.value[t].text:ll.value[t].text:s;o+='<div><svg style="margin-right:6px" viewBox="0 0 12 12" height="12" width="12"><rect x="0" y="0" height="12" width="12" rx="'.concat(e.value.style.layout.candle.borderRadius*3,'" stroke="').concat(e.value.style.layout.candle.stroke,'" stroke-width="').concat(e.value.style.layout.candle.strokeWidth,'" \n                fill="').concat(e.value.style.layout.candle.gradient.show?T?"url(#bullish_gradient_".concat(R.value,")"):"url(#bearish_gradient_".concat(R.value,")"):T?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish,'"/></svg>').concat(Al,"</div>"),o+="".concat(wl," : <b>").concat(isNaN(k)?"-":Number(k.toFixed(e.value.style.tooltip.roundingValue)).toLocaleString(),"</b>"),o+='<div style="margin-top:6px;padding-top:6px;border-top:1px solid '.concat(e.value.style.tooltip.borderColor,'">');const Re=N({p:e.value.style.tooltip.prefix,v:v.value,s:e.value.style.tooltip.suffix,r:e.value.style.tooltip.roundingValue}),bt=N({p:e.value.style.tooltip.prefix,v:f.value,s:e.value.style.tooltip.suffix,r:e.value.style.tooltip.roundingValue}),ft=N({p:e.value.style.tooltip.prefix,v:_.value,s:e.value.style.tooltip.suffix,r:e.value.style.tooltip.roundingValue}),Oe=N({p:e.value.style.tooltip.prefix,v:L.value,s:e.value.style.tooltip.suffix,r:e.value.style.tooltip.roundingValue});e.value.style.tooltip.showChart?o+='<div style="width:100%;display:flex;align-items:center;justify-content:center;">\n                    <svg viewBox="0 0 100 100" width="100px" style="background: transparent; overflow: visible">\n                        <g>\n                            <line x1="50" x2="50" y1="20" y2="80" stroke="'.concat(a.isBullish?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish,'" stroke-width="2" stroke-linecap="round" />\n                            ').concat(a.isBullish?'\n                                <line x1="45" x2="50" y1="65" y2="65" stroke="'.concat(e.value.style.layout.candle.colors.bullish,'" stroke-width="1.5" stroke-linecap="round" />\n                                <line x1="50" x2="55" y1="35" y2="35" stroke="').concat(e.value.style.layout.candle.colors.bullish,'" stroke-width="1.5" stroke-linecap="round" />\n                                <text x="38" y="70" text-anchor="end" fill="').concat(e.value.style.tooltip.color,'">').concat(Re,'</text>\n                                <text x="62" y="40" text-anchor="start" fill="').concat(e.value.style.tooltip.color,'">').concat(Oe,"</text>\n                            "):'\n                                <line x1="45" x2="50" y1="35" y2="35" stroke="'.concat(e.value.style.layout.candle.colors.bearish,'" stroke-width="1.5" stroke-linecap="round" />\n                                <line x1="50" x2="55" y1="65" y2="65" stroke="').concat(e.value.style.layout.candle.colors.bearish,'" stroke-width="1.5" stroke-linecap="round" />\n                                <text x="40" y="40" text-anchor="end" fill="').concat(e.value.style.tooltip.color,'">').concat(Re,'</text>\n                                <text x="60" y="70" text-anchor="start" fill="').concat(e.value.style.tooltip.color,'">').concat(Oe,"</text>\n                            "),'\n                            <text x="50" y="13" text-anchor="middle" fill="').concat(e.value.style.tooltip.color,'">').concat(bt,'</text>\n                            <text x="50" y="97" text-anchor="middle" fill="').concat(e.value.style.tooltip.color,'">').concat(ft,"</text>\n                        <g>\n                    </svg>\n                    <div>\n                "):(o+="<div>".concat(Me,": <b>").concat(Re,"</b></div>"),o+="<div>".concat(bl,": <b>").concat(bt,"</b></div>"),o+="<div>".concat(fl,": <b>").concat(ft,"</b></div>"),o+="<div>".concat(kl,": <b>").concat(Oe,"</b></div>")),o+="</div>",ke.value='<div style="text-align:right">'.concat(o,"</div>")}fe.value=!0}const ae=c(null);function il(){return new Promise(t=>requestAnimationFrame(()=>requestAnimationFrame(()=>t())))}De(()=>{ae.value&&cancelAnimationFrame(ae.value)});async function vt(){ce(),await wt(),ae.value&&cancelAnimationFrame(ae.value),ae.value=requestAnimationFrame(async()=>{await il(),ce()})}const oe=c(!1),dt=c(!1),ye=c(!1);function ce(){if(!oe.value){oe.value=!0;try{const{startIndex:t,endIndex:a}=e.value.style.zoom,l=C.value,o=t!=null?t:0,s=a!=null?Math.min(yt(a+1),l):l;ye.value=!0,r.value.start=o,r.value.end=s,$.value.start=o,$.value.end=s,re(),dt.value=!0}finally{queueMicrotask(()=>{ye.value=!1}),oe.value=!1}}}function yt(t){const a=C.value;return t>a?a:t<0||t<r.value.start?e.value.style.zoom.startIndex!==null?e.value.style.zoom.startIndex+1:1:t}function Se(t=null){wt(()=>{const a=[e.value.translations.period,e.value.translations.open,e.value.translations.high,e.value.translations.low,e.value.translations.close,e.value.translations.volume],l=z.value.map((v,f)=>[e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable?B.value[f].text:v.period,v.open.value,v.high.value,v.low.value,v.close.value,v.volume]),o=[[e.value.style.title.text],[e.value.style.title.subtitle.text],[[""],[""],[""]]].concat([a]).concat(l),s=Ol(o);t?t(s):Dl({csvContent:s,title:e.value.style.title.text||"vue-ui-candlestick"})})}const me=y(()=>{const t=z.value.map((o,s)=>{const v=e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable?B.value[s].text:o.period,f=N({p:e.value.table.td.prefix,v:o.open.value,s:e.value.table.td.suffix,r:e.value.table.td.roundingValue}),_=N({p:e.value.table.td.prefix,v:o.high.value,s:e.value.table.td.suffix,r:e.value.table.td.roundingValue}),L=N({p:e.value.table.td.prefix,v:o.low.value,s:e.value.table.td.suffix,r:e.value.table.td.roundingValue}),k=N({p:e.value.table.td.prefix,v:o.close.value,s:e.value.table.td.suffix,r:e.value.table.td.roundingValue});return['<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" height="12" width="12" style="margin-right: 6px"><rect x="0" y="0" height="12" width="12" rx="'.concat(e.value.style.layout.candle.borderRadius*3,'" fill="').concat(e.value.style.layout.candle.gradient.show?o.isBullish?"url(#bullish_gradient_".concat(R.value):"url(#bearish_gradient_".concat(R.value,")"):o.isBullish?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish,'"/></svg> ').concat(v),f,_,L,k,"".concat(isNaN(o.volume)?"-":o.volume.toLocaleString())]}),a={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},l=[e.value.translations.period,e.value.translations.open,e.value.translations.high,e.value.translations.low,e.value.translations.last,e.value.translations.volume];return{head:l,body:t,config:a,colNames:l}}),q=c(!1);function ct(t){q.value=t,Ve.value+=1}function mt(){S.value.showTable=!S.value.showTable}function ht(){S.value.showTooltip=!S.value.showTooltip}const he=c(!1);function Te(){he.value=!he.value}async function nl({scale:t=2}={}){if(!P.value)return;const{width:a,height:l}=P.value.getBoundingClientRect(),o=a/l,{imageUri:s,base64:v}=await Jl({domElement:P.value,base64:!0,img:!0,scale:t});return{imageUri:s,base64:v,title:e.value.style.title.text,width:a,height:l,aspectRatio:o}}const rl=y(()=>x.value.width),vl=y(()=>x.value.height);Yl({timeLabelsEls:te,timeLabels:B,slicer:r,configRef:e,rotationPath:["style","layout","grid","xAxis","dataLabels","rotation"],autoRotatePath:["style","layout","grid","xAxis","dataLabels","autoRotate","enable"],isAutoSize:!1,rotation:e.value.style.layout.grid.xAxis.dataLabels.autoRotate.angle,width:rl,height:vl}),ue(e,()=>{S.value={showTable:e.value.table.show,showTooltip:e.value.style.tooltip.show}},{immediate:!0});const se=y(()=>{const t=e.value.table.useDialog&&!e.value.table.show,a=S.value.showTable;return{component:t?Wt:Dt,title:"".concat(e.value.style.title.text).concat(e.value.style.title.subtitle.text?": ".concat(e.value.style.title.subtitle.text):""),props:t?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:q.value,fullscreenParent:P.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:a,maxHeight:1e4,body:{backgroundColor:e.value.style.backgroundColor,color:e.value.style.color},head:{backgroundColor:e.value.style.backgroundColor,color:e.value.style.color}}}}});ue(()=>S.value.showTable,t=>{e.value.table.show||(t&&e.value.table.useDialog&&le.value?le.value.open():"close"in le.value&&le.value.close())});function pt(){S.value.showTable=!1,Ae.value&&Ae.value.setTableIconState(!1)}const dl=y(()=>e.value.style.backgroundColor),yl=y(()=>e.value.style.title),{exportSvg:cl,getSvg:ml}=Gl({svg:ze,title:yl,backgroundColor:dl});async function xt({isCb:t}){if(t){const{blob:a,url:l,text:o,dataUrl:s}=await ml();e.value.userOptions.callbacks.svg({blob:a,url:l,text:o,dataUrl:s})}else cl()}function hl(t){Ge.value=t}function pl(t){oe.value||ye.value||t!==r.value.start&&(r.value.start=t,$.value.start=t,re())}function xl(t){if(oe.value||ye.value)return;const a=yt(t);a!==r.value.end&&(r.value.end=a,$.value.end=a,re())}function gl({seriesIndex:t,datapoint:a}){const l=r.value.start+t;Pe("selectX",{dataset:a,index:l,indexLabel:""})}return Tt({getImage:nl,generatePdf:Qe,generateCsv:Se,generateImage:Ze,generateSvg:xt,toggleTable:mt,toggleTooltip:ht,toggleAnnotator:Te,toggleFullscreen:ct}),(t,a)=>(u(),i("div",{ref_key:"candlestickChart",ref:P,class:W("vue-data-ui-component vue-ui-candlestick ".concat(q.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(e.value.useCssAnimation?"":"vue-ui-dna")),style:ie("position:relative;font-family:".concat(e.value.style.fontFamily,"; text-align:center;background:").concat(e.value.style.backgroundColor,"; ").concat(e.value.responsive?"height: 100%":"")),id:"vue-ui-candlestick_".concat(R.value),onMouseenter:Ht,onMouseleave:jt},[e.value.userOptions.buttons.annotator?(u(),Y(m(Pt),{key:0,svgRef:m(ze),backgroundColor:e.value.style.backgroundColor,color:e.value.style.color,active:he.value,onClose:Te},null,8,["svgRef","backgroundColor","color","active"])):h("",!0),Gt.value?(u(),i("div",{key:1,ref_key:"noTitle",ref:Ue,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):h("",!0),e.value.style.title.text?(u(),i("div",{key:2,ref_key:"chartTitle",ref:Be,style:"width:100%;background:transparent"},[(u(),Y(Kl,{key:"title_".concat(je.value),config:{title:{cy:"candlestick-div-title",...e.value.style.title},subtitle:{cy:"candlestick-div-subtitle",...e.value.style.title.subtitle}}},null,8,["config"]))],512)):h("",!0),e.value.userOptions.show&&ge.value&&(m(qe)||m(Ce))?(u(),Y(m(Vt),{ref_key:"userOptionsRef",ref:Ae,key:"user_options_".concat(Ve.value),backgroundColor:e.value.style.backgroundColor,color:e.value.style.color,isImaging:m(Ke),isPrinting:m(Je),uid:R.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:q.value,isTooltip:S.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:P.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:he.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:ct,onGeneratePdf:m(Qe),onGenerateCsv:Se,onGenerateImage:m(Ze),onGenerateSvg:xt,onToggleTable:mt,onToggleTooltip:ht,onToggleAnnotator:Te,style:ie({visibility:m(qe)?m(Ce)?"visible":"hidden":"visible"})},At({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:w(({isOpen:l,color:o})=>[A(t.$slots,"menuIcon",J(K({isOpen:l,color:o})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionTooltip?{name:"optionTooltip",fn:w(()=>[A(t.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:w(()=>[A(t.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:w(()=>[A(t.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:w(()=>[A(t.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:w(()=>[A(t.$slots,"optionTable",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:w(({toggleFullscreen:l,isFullscreen:o})=>[A(t.$slots,"optionFullscreen",J(K({toggleFullscreen:l,isFullscreen:o})),void 0,!0)]),key:"6"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:w(({toggleAnnotator:l,isAnnotator:o})=>[A(t.$slots,"optionAnnotator",J(K({toggleAnnotator:l,isAnnotator:o})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isImaging","isPrinting","uid","hasTooltip","hasPdf","hasImg","hasSvg","hasXls","hasTable","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):h("",!0),(u(),i("svg",{ref_key:"svgRef",ref:ze,xmlns:m(Ml),"aria-label":e.value.style.title.text||"candlestick chart",class:W({"vue-data-ui-fullscreen--on":q.value,"vue-data-ui-fulscreen--off":!q.value}),viewBox:"0 0 ".concat(x.value.width<=0?10:x.value.width," ").concat(x.value.height<=0?10:x.value.height),style:ie("max-width:100%;overflow:visible;background:transparent;color:".concat(e.value.style.color))},[Ee(m(Bt)),t.$slots["chart-background"]?(u(),i("foreignObject",{key:0,x:n.value.left,y:n.value.top,width:Math.max(.1,n.value.width),height:Math.max(.1,n.value.height),style:{pointerEvents:"none"}},[A(t.$slots,"chart-background",{},void 0,!0)],8,la)):h("",!0),z.value.length>0?(u(),i("g",aa,[p("defs",null,[p("linearGradient",{id:"bearish_gradient_".concat(R.value),x2:"0%",y2:"100%"},[p("stop",{offset:"0%","stop-color":e.value.style.layout.candle.colors.bearish},null,8,sa),p("stop",{offset:"50%","stop-color":"".concat(m(xe)(e.value.style.layout.candle.colors.bearish,.02),"DE")},null,8,ua),p("stop",{offset:"100%","stop-color":"".concat(m(xe)(e.value.style.layout.candle.colors.bearish,.05),"66")},null,8,ia)],8,oa),p("linearGradient",{id:"bullish_gradient_".concat(R.value),x2:"0%",y2:"100%"},[p("stop",{offset:"0%","stop-color":e.value.style.layout.candle.colors.bullish},null,8,ra),p("stop",{offset:"50%","stop-color":"".concat(m(xe)(e.value.style.layout.candle.colors.bullish,.02),"DE")},null,8,va),p("stop",{offset:"100%","stop-color":"".concat(m(xe)(e.value.style.layout.candle.colors.bullish,.05),"66")},null,8,da)],8,na)]),e.value.style.layout.grid.show?(u(),i("g",ya,[p("line",{x1:n.value.left,x2:n.value.left,y1:n.value.top,y2:n.value.bottom,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,ca),p("line",{x1:n.value.left,x2:n.value.right,y1:n.value.bottom,y2:n.value.bottom,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,ma),e.value.style.layout.grid.horizontalLines.show?(u(!0),i(I,{key:0},M(ut.value,l=>(u(),i("line",{x1:n.value.left,x2:n.value.right,y1:l.y,y2:l.y,stroke:e.value.style.layout.grid.horizontalLines.stroke,"stroke-width":e.value.style.layout.grid.horizontalLines.strokeWidth,"stroke-dasharray":e.value.style.layout.grid.horizontalLines.strokeDasharray,"stroke-linecap":"round"},null,8,ha))),256)):h("",!0),e.value.style.layout.grid.verticalLines.show?(u(!0),i(I,{key:1},M(Fe.value,(l,o)=>(u(),i("g",null,[l.text?(u(),i("line",{key:0,x1:n.value.left+d.value*o+d.value/2,x2:n.value.left+d.value*o+d.value/2,y1:n.value.top,y2:n.value.bottom,stroke:e.value.style.layout.grid.verticalLines.stroke,"stroke-width":e.value.style.layout.grid.verticalLines.strokeWidth,"stroke-dasharray":e.value.style.layout.grid.verticalLines.strokeDasharray,"stroke-linecap":"round"},null,8,pa)):h("",!0)]))),256)):h("",!0),e.value.style.layout.grid.xAxis.ticks.show?(u(!0),i(I,{key:2},M(Fe.value,(l,o)=>(u(),i("g",null,[l.text?(u(),i("line",{key:0,x1:n.value.left+d.value*o+d.value/2,x2:n.value.left+d.value*o+d.value/2,y1:n.value.bottom,y2:n.value.bottom+3,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,xa)):h("",!0)]))),256)):h("",!0)])):h("",!0),e.value.style.layout.grid.yAxis.dataLabels.show?(u(),i("g",{key:1,ref_key:"scaleLabels",ref:we},[(u(!0),i(I,null,M(ut.value,(l,o)=>(u(),i("g",null,[l.value>=O.value.min&&l.value<=O.value.max?(u(),i("line",{key:0,x1:n.value.left,x2:n.value.left-5,y1:l.y,y2:l.y,stroke:e.value.style.layout.grid.stroke,"stroke-width":e.value.style.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,ga)):h("",!0),l.value>=O.value.min&&l.value<=O.value.max?(u(),i("text",{key:1,x:n.value.left-8+e.value.style.layout.grid.yAxis.dataLabels.offsetX,y:l.y+x.value.yAxisFontSize/3,"font-size":x.value.yAxisFontSize,"text-anchor":"end",fill:e.value.style.layout.grid.yAxis.dataLabels.color,"font-weight":e.value.style.layout.grid.yAxis.dataLabels.bold?"bold":"normal"},ne(m(N)({p:e.value.style.layout.grid.yAxis.dataLabels.prefix,v:l.value,s:e.value.style.layout.grid.yAxis.dataLabels.suffix,r:e.value.style.layout.grid.yAxis.dataLabels.roundingValue})),9,ba)):h("",!0)]))),256))],512)):h("",!0),e.value.style.layout.grid.xAxis.dataLabels.show&&!e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable?(u(),i("g",{key:2,ref_key:"timeLabelsEls",ref:te},[(u(!0),i(I,null,M(el.value,(l,o)=>(u(),i("g",null,[p("text",{class:"vue-data-ui-time-label",transform:"translate(".concat(n.value.left+d.value*o+d.value/2,", ").concat(n.value.bottom+x.value.xAxisFontSize*1.5,"), rotate(").concat(e.value.style.layout.grid.xAxis.dataLabels.rotation,")"),"text-anchor":e.value.style.layout.grid.xAxis.dataLabels.rotation>0?"start":e.value.style.layout.grid.xAxis.dataLabels.rotation<0?"end":"middle","font-size":x.value.xAxisFontSize,fill:e.value.style.layout.grid.xAxis.dataLabels.color,"font-weight":e.value.style.layout.grid.xAxis.dataLabels.bold?"bold":"normal"},ne(l),9,fa)]))),256))],512)):h("",!0),e.value.style.layout.grid.xAxis.dataLabels.show&&e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable?(u(),i("g",{key:3,ref_key:"timeLabelsEls",ref:te},[(u(!0),i(I,null,M(Fe.value,(l,o)=>(u(),i("g",null,[p("text",{class:"vue-data-ui-time-label",transform:"translate(".concat(n.value.left+d.value*o+d.value/2,", ").concat(n.value.bottom+x.value.xAxisFontSize*1.5,"), rotate(").concat(e.value.style.layout.grid.xAxis.dataLabels.rotation,")"),"text-anchor":e.value.style.layout.grid.xAxis.dataLabels.rotation>0?"start":e.value.style.layout.grid.xAxis.dataLabels.rotation<0?"end":"middle","font-size":x.value.xAxisFontSize,fill:e.value.style.layout.grid.xAxis.dataLabels.color,"font-weight":e.value.style.layout.grid.xAxis.dataLabels.bold?"bold":"normal"},ne(l.text),9,ka)]))),256))],512)):h("",!0),e.value.type==="candlestick"?(u(),i(I,{key:4},[p("g",null,[(u(!0),i(I,null,M(z.value,(l,o)=>(u(),i("g",null,[p("rect",{x:l.open.x-e.value.style.layout.wick.strokeWidth/2,y:l.high.y,width:e.value.style.layout.wick.strokeWidth,height:Math.abs(l.high.y-l.low.y),fill:e.value.style.layout.wick.stroke,stroke:"none",rx:e.value.style.layout.wick.strokeWidth/2,class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,wa),e.value.style.layout.wick.extremity.shape==="circle"?(u(),i("g",Aa,[p("circle",{cx:l.high.x,cy:l.high.y,r:e.value.style.layout.wick.extremity.size==="auto"?d.value/20:e.value.style.layout.wick.extremity.size,fill:e.value.style.layout.wick.extremity.color,class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,$a),p("circle",{cx:l.low.x,cy:l.low.y,r:e.value.style.layout.wick.extremity.size==="auto"?d.value/20:e.value.style.layout.wick.extremity.size,fill:e.value.style.layout.wick.extremity.color,class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,Ca)])):h("",!0),e.value.style.layout.wick.extremity.shape==="line"?(u(),i("g",za,[p("rect",{x:l.high.x-(e.value.style.layout.wick.extremity.size==="auto"?d.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2,y:l.high.y-e.value.style.layout.wick.strokeWidth/2,width:Math.abs(l.high.x-(e.value.style.layout.wick.extremity.size==="auto"?d.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2-(l.high.x+(e.value.style.layout.wick.extremity.size==="auto"?d.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2)),height:e.value.style.layout.wick.strokeWidth,rx:e.value.style.layout.wick.strokeWidth/2,fill:e.value.style.layout.wick.extremity.color,stroke:"none",class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,_a),p("rect",{x:l.low.x-(e.value.style.layout.wick.extremity.size==="auto"?d.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2,y:l.low.y-e.value.style.layout.wick.strokeWidth/2,width:Math.abs(l.low.x-(e.value.style.layout.wick.extremity.size==="auto"?d.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2-(l.low.x+(e.value.style.layout.wick.extremity.size==="auto"?d.value*e.value.style.layout.candle.widthRatio:e.value.style.layout.wick.extremity.size)/2)),height:e.value.style.layout.wick.strokeWidth,fill:e.value.style.layout.wick.extremity.color,stroke:"none",rx:e.value.style.layout.wick.strokeWidth/2,class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,La)])):h("",!0)]))),256))]),p("g",null,[(u(!0),i(I,null,M(z.value,(l,o)=>(u(),i("rect",{x:l.open.x-d.value/2+d.value*(1-e.value.style.layout.candle.widthRatio)/2,y:l.isBullish?l.close.y:l.open.y,height:Math.abs(l.close.y-l.open.y)<=0?1e-4:Math.abs(l.close.y-l.open.y),width:d.value*e.value.style.layout.candle.widthRatio<=0?1e-4:d.value*e.value.style.layout.candle.widthRatio,fill:e.value.style.layout.candle.gradient.underlayer,rx:e.value.style.layout.candle.borderRadius,stroke:"none",class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,Fa))),256)),(u(!0),i(I,null,M(z.value,(l,o)=>(u(),i("rect",{x:l.open.x-d.value/2+d.value*(1-e.value.style.layout.candle.widthRatio)/2,y:l.isBullish?l.close.y:l.open.y,height:Math.abs(l.close.y-l.open.y)<=0?1e-4:Math.abs(l.close.y-l.open.y),width:d.value*e.value.style.layout.candle.widthRatio<=0?1e-4:d.value*e.value.style.layout.candle.widthRatio,fill:l.isBullish?e.value.style.layout.candle.gradient.show?"url(#bullish_gradient_".concat(R.value,")"):e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.gradient.show?"url(#bearish_gradient_".concat(R.value,")"):e.value.style.layout.candle.colors.bearish,rx:e.value.style.layout.candle.borderRadius,stroke:e.value.style.layout.candle.stroke,"stroke-width":e.value.style.layout.candle.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:W({"vue-data-ui-transition":D.value&&!m(V)})},null,10,Ia))),256))])],64)):h("",!0),e.value.type==="ohlc"?(u(!0),i(I,{key:5},M(z.value,(l,o)=>(u(),i("g",null,[p("path",{d:"M ".concat(l.high.x,",").concat(l.high.y," ").concat(l.low.x,",").concat(l.low.y," M").concat(l.open.x-Math.min(6,d.value/3),",").concat(l.open.y," ").concat(l.open.x,",").concat(l.open.y," M").concat(l.close.x,",").concat(l.close.y," ").concat(l.close.x+Math.min(6,d.value/3),",").concat(l.close.y),stroke:l.isBullish?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish,"stroke-width":1},null,8,Sa)]))),256)):h("",!0),p("g",null,[(u(!0),i(I,null,M(z.value,(l,o)=>(u(),i("rect",{x:n.value.left+o*d.value,y:n.value.top,height:n.value.height<=0?1e-4:n.value.height,width:d.value<=0?1e-4:d.value,fill:E.value===o||Ge.value===o?m(Rl)(e.value.style.layout.selector.color,e.value.style.layout.selector.opacity):"transparent",onMouseover:()=>ul(o,l),onMouseleave:()=>sl(o,l),onClick:()=>ol(o,l)},null,40,Ta))),256))])])):h("",!0),tt.value?(u(),i("rect",$t({key:2},Yt.value,{"data-start":r.value.start,"data-end":r.value.end}),null,16,Ma)):h("",!0),A(t.$slots,"svg",{svg:{...x.value,data:z.value,drawingArea:n.value}},void 0,!0)],14,ta)),t.$slots.watermark?(u(),i("div",Ra,[A(t.$slots,"watermark",J(K({isPrinting:m(Je)||m(Ke)})),void 0,!0)])):h("",!0),e.value.style.zoom.show&&C.value>6&&ge.value&&dt.value?(u(),Y(Zl,{key:5,ref_key:"chartSlicer",ref:ee,allMinimaps:Qt.value,background:e.value.style.zoom.color,borderColor:e.value.style.backgroundColor,customFormat:e.value.style.zoom.customFormat,cutNullValues:!1,enableRangeHandles:e.value.style.zoom.enableRangeHandles,enableSelectionDrag:e.value.style.zoom.enableSelectionDrag,end:r.value.end,focusOnDrag:e.value.style.zoom.focusOnDrag,focusRangeRatio:e.value.style.zoom.focusRangeRatio,fontSize:e.value.style.zoom.fontSize,immediate:!e.value.style.zoom.preview.enable,inputColor:e.value.style.zoom.color,isPreview:tt.value,labelLeft:rt.value.start||"",labelRight:rt.value.end||"",max:C.value,min:0,minimap:e.value.style.zoom.minimap.show?m(b).map(l=>l[2]):[],minimapCompact:e.value.style.zoom.minimap.compact,minimapFrameColor:e.value.style.zoom.minimap.frameColor,minimapIndicatorColor:e.value.style.zoom.minimap.indicatorColor,minimapMerged:!1,minimapSelectedColor:e.value.style.zoom.minimap.selectedColor,minimapSelectedColorOpacity:e.value.style.zoom.minimap.selectedColorOpacity,minimapSelectedIndex:E.value,minimapSelectionRadius:1,preciseLabels:al.value,refreshEndPoint:e.value.style.zoom.endIndex!==null?e.value.style.zoom.endIndex+1:C.value,refreshStartPoint:e.value.style.zoom.startIndex!==null?e.value.style.zoom.startIndex:0,selectColor:e.value.style.zoom.highlightColor,selectedSeries:m(b),smoothMinimap:!1,start:r.value.start,textColor:e.value.style.color,timeLabels:it.value,usePreciseLabels:e.value.style.layout.grid.xAxis.dataLabels.datetimeFormatter.enable&&!e.value.style.zoom.useDefaultFormat,useResetSlot:e.value.style.zoom.useResetSlot,valueEnd:r.value.end,valueStart:r.value.start,verticalHandles:e.value.style.zoom.minimap.verticalHandles,"onUpdate:end":xl,"onUpdate:start":pl,onTrapMouse:hl,onReset:vt,onFutureEnd:a[0]||(a[0]=l=>lt("end",l)),onFutureStart:a[1]||(a[1]=l=>lt("start",l))},{"reset-action":w(({reset:l})=>[A(t.$slots,"reset-action",J(K({reset:l})),void 0,!0)]),slotMap:w(({height:l,unitW:o})=>[(u(!0),i(I,null,M(Kt.value({minimapH:l,unitW:o}),(s,v)=>(u(),i("g",null,[p("path",{d:"M ".concat(s.high.x,",").concat(s.high.y," ").concat(s.low.x,",").concat(s.low.y),stroke:s.isBullish?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish,"stroke-width":1,style:ie({opacity:v>=$.value.start&&v<=$.value.end?1:.6})},null,12,Oa),p("path",{d:"M ".concat(s.open.x,",").concat(s.open.y," ").concat(s.close.x,",").concat(s.close.y),stroke:s.isBullish?e.value.style.layout.candle.colors.bullish:e.value.style.layout.candle.colors.bearish,"stroke-width":Math.min(6,o/1.5),style:ie({opacity:v>=$.value.start&&v<=$.value.end?1:.6})},null,12,Da)]))),256))]),_:3},8,["allMinimaps","background","borderColor","customFormat","enableRangeHandles","enableSelectionDrag","end","focusOnDrag","focusRangeRatio","fontSize","immediate","inputColor","isPreview","labelLeft","labelRight","max","minimap","minimapCompact","minimapFrameColor","minimapIndicatorColor","minimapSelectedColor","minimapSelectedColorOpacity","minimapSelectedIndex","preciseLabels","refreshEndPoint","refreshStartPoint","selectColor","selectedSeries","start","textColor","timeLabels","usePreciseLabels","useResetSlot","valueEnd","valueStart","verticalHandles"])):h("",!0),p("div",{ref_key:"chartLegend",ref:We},[A(t.$slots,"legend",{legend:z.value},void 0,!0)],512),t.$slots.source?(u(),i("div",{key:6,ref_key:"source",ref:Ne,dir:"auto"},[A(t.$slots,"source",{},void 0,!0)],512)):h("",!0),Ee(m(Ot),{show:S.value.showTooltip&&fe.value,backgroundColor:e.value.style.tooltip.backgroundColor,color:e.value.style.tooltip.color,borderRadius:e.value.style.tooltip.borderRadius,borderColor:e.value.style.tooltip.borderColor,borderWidth:e.value.style.tooltip.borderWidth,fontSize:e.value.style.tooltip.fontSize,backgroundOpacity:e.value.style.tooltip.backgroundOpacity,position:e.value.style.tooltip.position,offsetY:e.value.style.tooltip.offsetY,parent:P.value,content:ke.value,isFullscreen:q.value,isCustom:e.value.style.tooltip.customFormat&&typeof e.value.style.tooltip.customFormat=="function",smooth:e.value.style.tooltip.smooth,backdropFilter:e.value.style.tooltip.backdropFilter,smoothForce:e.value.style.tooltip.smoothForce,smoothSnapThreshold:e.value.style.tooltip.smoothSnapThreshold},{"tooltip-before":w(()=>[A(t.$slots,"tooltip-before",J(K({...Ie.value})),void 0,!0)]),"tooltip-after":w(()=>[A(t.$slots,"tooltip-after",J(K({...Ie.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),ge.value&&e.value.userOptions.buttons.table?(u(),Y(_l(se.value.component),$t({key:7},se.value.props,{ref_key:"tableUnit",ref:le,onClose:pt}),At({content:w(()=>[(u(),Y(m(Et),{key:"table_".concat(He.value),colNames:me.value.colNames,head:me.value.head,body:me.value.body,config:me.value.config,title:e.value.table.useDialog?"":se.value.title,withCloseButton:!e.value.table.useDialog,onClose:pt},{th:w(({th:l})=>[Ct(ne(l),1)]),td:w(({td:l})=>[p("div",{innerHTML:l},null,8,Ea)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:w(()=>[Ct(ne(se.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:w(()=>[p("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:a[2]||(a[2]=l=>Se(e.value.userOptions.callbacks.csv))},[Ee(m(Rt),{name:"excel",stroke:se.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):h("",!0),m(V)?(u(),Y(Ul,{key:8})):h("",!0)],46,ea))}},lo=Ll(Pa,[["__scopeId","data-v-a3929371"]]);export{lo as default};
