
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vue-ui-skeleton-oFjhyDNo-GSnzbtcp.js","./vue-data-ui-BN9YfUec.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./useNestedProp-dJX_8vvZ-BzBW50KN.js","./PackageVersion-TgflyMpU-q2MkeeNq.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js"])))=>i.map(i=>d[i]);
import{e as l,ab as Be,E as C,J as P,K as V,av as U,au as Ee,a9 as pe,c as v,o as r,f as L,A as R,z as he,O as g,l as j,r as c,t as G,F as D,R as Q,m as ge,u,n as Se,b_ as me,c0 as Ve,h as O,j as be,k as ye,c1 as fe}from"./index-DXZKKOp8.js";import{t as Le,o as Me}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{s as He,Q as Ne,g as X,p as J,O as qe,e as Ue,r as je}from"./vue-data-ui-BN9YfUec.js";import{m as Ge}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{a as De}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import"./alert-l5XlVwCh.js";const Qe=["id"],Xe=["height"],Je=["data-cell","height"],Ke={key:2,ref:"source",dir:"auto"},We={__name:"vue-ui-carousel-table",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(k,{expose:xe}){const $e=me(()=>fe(()=>import("./vue-ui-skeleton-oFjhyDNo-GSnzbtcp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),ke=me(()=>fe(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([8,2,3,9,1,4,5,10,11]),import.meta.url)),{vue_ui_carousel_table:Ae}=Le(),i=k,M=l(Ne()),K=l(!1),_=l(!!i.dataset),Ce=Be();C(()=>{W()}),C(()=>{Ce["chart-background"]&&console.warn("VueUiCarouselTable does not support the #chart-background slot.")});function W(){X(i.dataset)?J({componentName:"VueUiCarouselTable",type:"dataset"}):((!i.dataset.head||X(i.dataset.head))&&(J({componentName:"VueUiCarouselTable",type:"datasetAttribute",property:"head"}),_.value=!1),(!i.dataset.body||X(i.dataset.body))&&(J({componentName:"VueUiCarouselTable",type:"datasetAttribute",property:"body"}),_.value=!1))}const e=P({get:()=>ee(),set:t=>t}),{userOptionsVisible:H,setUserOptionsVisibility:Y,keepUserOptionState:Z}=De({config:e.value});function ee(){return Me({userConfig:i.config,defaultConfig:Ae})}V(()=>i.config,t=>{e.value=ee(),H.value=!e.value.userOptions.showOnChartHover,W()},{deep:!0}),V(()=>i.dataset,t=>{N()},{deep:!0});const{isPrinting:te,isImaging:ae,generatePdf:Oe,generateImage:oe}=Ge({elementId:"carousel-table_".concat(M.value),fileName:e.value.caption.text||"vue-ui-carousel-table",options:e.value.userOptions.print}),m=l({showAnimation:e.value.animation.use}),n=l(null),le=l(null),w=l(null),I=l(null),T=l(0),z=l(0),B=l(!1),F=l(null),y=l(null),A=l(0);function N(){F.value&&(y.value={elements:F.value.getElementsByTagName("tr"),heights:Array.from(F.value.getElementsByTagName("tr")).map(t=>t.getBoundingClientRect().height)})}C(N);const _e=P(()=>!y.value||!y.value.heights.length?0:Math.max(...y.value.heights)+T.value+z.value),we=P(()=>i.dataset.body?e.value.tbody.tr.visible<=i.dataset.body.length?e.value.tbody.tr.visible:i.dataset.body.length:0),Ie=P(()=>(e.value.tbody.tr.height+e.value.tbody.tr.td.padding.top+e.value.tbody.tr.td.padding.bottom+e.value.tbody.tr.border.size*2)*we.value+T.value+z.value),p=l(0),f=l(null),d=l(0),x=l(!1),ne=l(0);C(()=>{w.value&&(T.value=w.value.getBoundingClientRect().height),I.value&&(z.value=I.value.getBoundingClientRect().height),m.value.showAnimation&&y.value&&ie()}),C(()=>{if(n.value){let t=function(){const s=a.getBoundingClientRect().bottom;o.forEach(h=>{h.getBoundingClientRect().top<s?h.style.visibility="hidden":h.style.visibility="visible"})};const a=n.value.querySelector("thead"),o=Array.from(F.value.querySelectorAll("tr"));n.value.addEventListener("scroll",t),t(),U(()=>{n.value.removeEventListener("scroll",t)})}});function Te(t){K.value=t,ne.value+=1}function ie(){!f.value&&!x.value&&(e.value.animation.type==="scroll"?f.value=requestAnimationFrame(se):f.value=requestAnimationFrame(ue))}function Fe(){if(!n.value)return!1;const{scrollTop:t,scrollHeight:a,clientHeight:o}=n.value;return t+o>=a}function se(t){x.value||(d.value||(d.value=t),t-d.value>=e.value.animation.speedMs&&(p.value+=y.value.heights[A.value],(Fe()||A.value>=y.value.heights.length)&&(p.value=0,A.value=-1),A.value+=1,n.value&&n.value.scrollTo({top:p.value,behavior:"smooth"}),d.value=t),f.value=requestAnimationFrame(se))}function ue(t){if(x.value)return;d.value||(d.value=t);const a=t-d.value,o=e.value.animation.speedMs/4/1e3;a>=o&&(p.value+=o,p.value>=n.value.scrollHeight-n.value.clientHeight&&(p.value=0),n.value&&n.value.scrollTo({top:p.value,behavior:"auto"}),d.value=t),f.value=requestAnimationFrame(ue)}function b(){x.value=!0,cancelAnimationFrame(f.value),f.value=null}U(b);function $(){!x.value||!m.value.showAnimation||(x.value=!1,d.value=0,ie())}function Pe(){e.value.animation.pauseOnHover&&b()}const q=l(null);function Re(){b(),clearTimeout(q.value)}function re(){clearTimeout(q.value),q.value=setTimeout($,1e3)}V(()=>e.value.animation.use,t=>{t?(m.value.showAnimation=!0,$()):(m.value.showAnimation=!1,b())}),V(()=>e.value.animation.type,t=>{b(),p.value=0,A.value=0,n.value.scrollTo({top:0,behavior:"auto"}),$()});const ze=P(()=>e.value.responsiveBreakpoint),E=Ee(null);C(()=>{E.value=new ResizeObserver(t=>{t.forEach(a=>{B.value=a.contentRect.width<ze.value}),T.value=w.value?w.value.getBoundingClientRect().height:0,z.value=I.value?I.value.getBoundingClientRect().height:0,A.value=0,pe(()=>{b(),d.value=0,p.value=0,N(),$()})}),n.value&&E.value.observe(n.value)}),U(()=>{E.value&&E.value.disconnect()});function de(){Oe()}function ve(){m.value.showAnimation=!m.value.showAnimation,m.value.showAnimation?$():b()}function ce(t=null){pe(()=>{const a=i.dataset.head.map((h,S)=>[[i.dataset.body[S]]]),o=[[e.value.caption.text],[i.dataset.head.map(h=>[h])]].concat(a),s=Ue(o);t?t(s):je({csvContent:s,title:e.value.caption.text||"vue-ui-carousel-table"})})}return xe({pauseAnimation:b,resumeAnimation:$,toggleAnimation:ve,generateCsv:ce,generatePdf:de,generateImage:oe}),(t,a)=>(r(),v("div",{class:"vue-data-ui-component vue-ui-carousel-table",style:{position:"relative",overflow:"visible"},ref_key:"chartContainer",ref:le,onMouseenter:a[5]||(a[5]=()=>u(Y)(!0)),onMouseleave:a[6]||(a[6]=()=>u(Y)(!1))},[L("div",{ref_key:"tableContainer",ref:n,id:"carousel-table_".concat(M.value),style:g({height:u(te)||u(ae)?"auto":"".concat(Math.max(Ie.value,_e.value),"px"),containerType:"inline-size",position:"relative",overflow:"auto",fontFamily:e.value.fontFamily}),class:Se({"vue-ui-responsive":B.value,"is-playing":e.value.scrollbar.hide||!x.value&&e.value.scrollbar.showOnlyOnHover}),onMouseover:a[0]||(a[0]=o=>Pe()),onMouseleave:a[1]||(a[1]=o=>$()),onTouchstart:a[2]||(a[2]=o=>Re()),onTouchend:a[3]||(a[3]=o=>re()),onTouchcancel:a[4]||(a[4]=o=>re())},[_.value?(r(),v("table",{key:0,class:"vue-data-ui-carousel-table",style:g({...e.value.style,border:"".concat(e.value.border.size,"px solid ").concat(e.value.border.color),width:"100%",borderCollapse:"collapse",backgroundColor:e.value.tbody.backgroundColor})},[L("caption",{ref_key:"caption",ref:w,class:"vue-data-ui-carousel-table-caption",style:g({...e.value.caption.style,fontFamily:"inherit",position:"sticky",top:0,zIndex:2,paddingTop:e.value.caption.padding.top+"px",paddingRight:e.value.caption.padding.right+"px",paddingBottom:e.value.caption.padding.bottom+"px",paddingLeft:e.value.caption.padding.left+"px",boxShadow:B.value?e.value.thead.tr.style.boxShadow:"none",minHeight:"36px",display:t.$slots.caption||e.value.caption.text||e.value.userOptions.show?"":"none"})},[j(G(e.value.caption.text&&!t.$slots.caption?e.value.caption.text:"")+" ",1),c(t.$slots,"caption",{},void 0,!0)],4),L("thead",{style:g({...e.value.thead.style,position:"sticky",top:"".concat(t.$slots.caption||e.value.caption.text||e.value.userOptions.show?T.value:0,"px"),zIndex:1})},[L("tr",{ref_key:"tableRow",ref:I,role:"row",style:g({...e.value.thead.tr.style,border:e.value.thead.tr.border.size?"".concat(e.value.thead.tr.border.size,"px solid ").concat(e.value.thead.tr.border.color):"none",boxShadow:B.value?"none":e.value.thead.tr.style.boxShadow}),height:"".concat(e.value.thead.tr.height,"px")},[(r(!0),v(D,null,Q(k.dataset.head,(o,s)=>(r(),v("th",{role:"cell",key:"th_".concat(s),style:g({...e.value.thead.tr.th.style,border:e.value.thead.tr.th.border.size?"".concat(e.value.thead.tr.th.border.size,"px solid ").concat(e.value.thead.tr.th.border.color):"none",paddingTop:e.value.thead.tr.th.padding.top+"px",paddingRight:e.value.thead.tr.th.padding.right+"px",paddingBottom:e.value.thead.tr.th.padding.bottom+"px",paddingLeft:e.value.thead.tr.th.padding.left+"px"})},[j(G(t.$slots.th?"":o)+" ",1),c(t.$slots,"th",ge({ref_for:!0},{th:o,colIndex:s}),void 0,!0)],4))),128))],12,Xe)],4),k.dataset.body&&k.dataset.head?(r(),v("tbody",{key:0,ref_key:"tbody",ref:F,style:{clipPath:"inset(0,0,0,0)"}},[(r(!0),v(D,null,Q(k.dataset.body,(o,s)=>(r(),v("tr",{style:g({...e.value.tbody.tr.style,border:"".concat(e.value.tbody.tr.border.size,"px solid ").concat(e.value.tbody.tr.border.color),verticalAlign:"middle"})},[(r(!0),v(D,null,Q(o,(h,S)=>(r(),v("td",{role:"cell","data-cell":k.dataset.head[S]||"",style:g({...e.value.tbody.tr.td.style,border:"".concat(e.value.tbody.tr.td.border.size,"px solid ").concat(e.value.tbody.tr.td.border.color),backgroundColor:u(qe)(e.value.tbody.tr.td.style.backgroundColor,s%2===0&&e.value.tbody.tr.td.alternateColor?e.value.tbody.tr.td.alternateOpacity*100:100),paddingTop:e.value.tbody.tr.td.padding.top+"px",paddingRight:e.value.tbody.tr.td.padding.right+"px",paddingBottom:e.value.tbody.tr.td.padding.bottom+"px",paddingLeft:e.value.tbody.tr.td.padding.left+"px",verticalAlign:"middle"}),height:"".concat(e.value.tbody.tr.height,"px")},[j(G(t.$slots.td?"":h)+" ",1),c(t.$slots,"td",ge({ref_for:!0},{td:h,rowIndex:s,colIndex:S}),void 0,!0)],12,Je))),256))],4))),256))],512)):R("",!0)],4)):R("",!0)],46,Qe),_.value?R("",!0):(r(),he(u($e),{key:0,config:{type:"table"}})),e.value.userOptions.show&&_.value&&(u(Z)||u(H))?(r(),he(u(ke),{ref:"details",key:"user_option_".concat(ne.value),backgroundColor:e.value.style.backgroundColor,color:e.value.style.color,isPrinting:u(te),isImaging:u(ae),uid:M.value,hasTooltip:!1,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:!1,hasLabel:!1,hasAnimation:e.value.userOptions.buttons.animation,isAnimation:!m.value.showAnimation,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:K.value,chartElement:le.value,position:e.value.userOptions.position,titles:{...e.value.userOptions.buttonTitles},zIndex:3,offsetX:12,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,onGeneratePdf:de,onGenerateCsv:ce,onGenerateImage:u(oe),onToggleAnimation:ve,onToggleFullscreen:Te,style:g({visibility:u(Z)?u(H)?"visible":"hidden":"visible"})},Ve({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:O(({isOpen:o,color:s})=>[c(t.$slots,"menuIcon",be(ye({isOpen:o,color:s})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:O(()=>[c(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:O(()=>[c(t.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:O(()=>[c(t.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionAnimation?{name:"optionAnimation",fn:O(()=>[c(t.$slots,"optionAnimation",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:O(({toggleFullscreen:o,isFullscreen:s})=>[c(t.$slots,"optionFullscreen",be(ye({toggleFullscreen:o,isFullscreen:s})),void 0,!0)]),key:"5"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasXls","hasAnimation","isAnimation","hasFullscreen","isFullscreen","chartElement","position","titles","callbacks","printScale","onGenerateImage","style"])):R("",!0),t.$slots.source?(r(),v("div",Ke,[c(t.$slots,"source",{},void 0,!0)],512)):R("",!0)],544))}},lt=He(We,[["__scopeId","data-v-bae4718a"]]);export{lt as default};
