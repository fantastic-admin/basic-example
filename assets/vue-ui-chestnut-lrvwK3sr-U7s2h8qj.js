
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vue-data-ui-8Gmf-dDN.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js","./useNestedProp-DaR1dBmj-yWXLkJlG.js","./PenAndPaper--ADXtx65-ugytqLuo.js","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"])))=>i.map(i=>d[i]);
import{c0 as St,J as g,e as S,a8 as Ft,K as pe,E as Nt,c1 as K,aa as ge,c as o,o as a,z as ue,A as h,r as _,h as A,j as V,k as P,u as r,c3 as Re,O as y,n as w,g as xe,f as n,t as c,F as x,R as m,l as ee,Y as Lt,m as Dt,N as It,c4 as Q}from"./index-CJB5jCfL.js";import{s as Bt,J as Et,x as Ot,v as Vt,o as E,$ as Pt,a as me,A as re,u as ke,E as Rt,L as M,F,d as jt,w as L,X as je,m as Me,H as Xe,n as Mt,V as te,W as O,e as Xt,f as Gt}from"./vue-data-ui-8Gmf-dDN.js";import{s as Ut,i as Ce}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as Wt,j as Yt}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{m as Ht}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{O as qt}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as Jt}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{w as Kt}from"./useTableResponsive-Cbx-ACcP-N4cIDcbC.js";import{a as Qt}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as Zt}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import el from"./img-CqYIrJ8I-E54QgU9o.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";const Ge={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",layout:{grandTotal:{color:"#CCCCCC"},roots:{stroke:"#1A1A1A",labels:{name:{color:"#CCCCCC"}}},verticalSeparator:{stroke:"#1A1A1A"},branches:{labels:{color:"#CCCCCC"}},nuts:{selected:{labels:{dataLabels:{color:"#CCCCCC"},core:{total:{color:"#CCCCCC"},value:{color:"#CCCCCC"}}}}},legend:{color:"#CCCCCC"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}}}}},table:{th:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},td:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}}},Ue={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",layout:{grandTotal:{color:"#424242"},roots:{stroke:"#FFF8E1",labels:{name:{color:"#424242"}}},verticalSeparator:{stroke:"#FFF8E1"},branches:{borderRadius:0,labels:{color:"#424242"}},nuts:{selected:{labels:{dataLabels:{color:"#424242"},core:{total:{color:"#424242"},value:{color:"#424242"}}}}},legend:{color:"#424242"},title:{color:"#424242",subtitle:{color:"#757575"}}}}},table:{th:{backgroundColor:"#FFF8E1",color:"#424242"},td:{backgroundColor:"#FFF8E1",color:"#424242"}}},We={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",layout:{grandTotal:{color:"#BDBDBD"},roots:{stroke:"#1E1E1E",labels:{name:{color:"#BDBDBD"}}},verticalSeparator:{stroke:"#1E1E1E"},branches:{borderRadius:0,labels:{color:"#BDBDBD"}},nuts:{selected:{labels:{dataLabels:{color:"#BDBDBD"},core:{total:{color:"#BDBDBD"},value:{color:"#BDBDBD"}}}}},legend:{color:"#BDBDBD"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}}}}},table:{th:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},td:{backgroundColor:"#1E1E1E",color:"#BDBDBD"}}},Ye={style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",layout:{grandTotal:{color:"#99CC99"},roots:{stroke:"#1A1A1A",labels:{name:{color:"#AACCAA"}}},verticalSeparator:{stroke:"#1A1A1A"},branches:{borderRadius:0,labels:{color:"#AACCAA"}},nuts:{selected:{labels:{dataLabels:{color:"#AACCAA"},core:{total:{color:"#99CC99"},value:{color:"#AACCAA"}}}}},legend:{color:"#99AA99"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}}}}},table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}}},He={style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",layout:{grandTotal:{color:"#A0AC94"},roots:{stroke:"#fbfafa",labels:{name:{color:"#A0AC94"}}},verticalSeparator:{stroke:"#fbfafa"},branches:{borderRadius:12,labels:{color:"#A0AC94"}},nuts:{selected:{labels:{dataLabels:{color:"#A0AC94"},core:{total:{color:"#8A9892"},value:{color:"#A0AC94"}}}}},legend:{color:"#99AA99"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}}}}},table:{th:{backgroundColor:"#fbfafa",color:"#8F837A"},td:{backgroundColor:"#fbfafa",color:"#8F837A"}}},qe={style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",layout:{grandTotal:{color:"#61747E"},roots:{stroke:"#f6f6fb",labels:{name:{color:"#8A9892"}}},verticalSeparator:{stroke:"#f6f6fb"},branches:{borderRadius:0,labels:{color:"#8A9892"}},nuts:{selected:{labels:{dataLabels:{color:"#8A9892"},core:{total:{color:"#8A9892"},value:{color:"#61747E"}}}}},legend:{color:"#61747E"},title:{color:"#50606C",subtitle:{color:"#61747E"}}}}}},Je={default:{},dark:Ge,celebration:Ue,celebrationNight:We,hack:Ye,zen:He,concrete:qe},wo=Object.freeze(Object.defineProperty({__proto__:null,celebration:Ue,celebrationNight:We,concrete:qe,dark:Ge,default:Je,hack:Ye,zen:He},Symbol.toStringTag,{value:"Module"})),tl=["id"],ll={key:1,ref:"noTitle",class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},al=["xmlns","viewBox"],ol=["width","height"],ul={key:1},rl=["fill","font-weight","font-size","x","y"],nl=["fill","font-weight","font-size","x","y"],sl=["id"],il=["stop-color"],cl=["stop-color"],dl=["id"],vl=["stop-color"],yl=["stop-color"],hl=["id"],bl=["stop-color"],fl=["stop-color"],pl=["stop-color"],gl=["id"],xl=["stop-color"],ml=["stop-color"],kl=["stop-color"],Cl=["id"],_l=["stop-color"],Al=["stop-color"],wl=["stop-color"],$l={key:2},Tl=["x","y","font-size","font-weight","fill"],zl=["x","y","font-size","font-weight","fill"],Sl=["id"],Fl=["stop-color"],Nl=["stop-color"],Ll=["d","stroke","fill"],Dl=["cx","cy","r","fill"],Il=["cx","cy","r","fill","stroke","stroke-width","onClick"],Bl={key:3},El=["x","y","font-size","fill","onClick"],Ol={key:0},Vl=["x","y","fill","font-size","font-weight"],Pl=["x","y","height","width","fill","rx","onClick"],Rl=["x","y","height","width","fill","rx","stroke","stroke-width","onClick"],jl={key:4},Ml=["x","y","fill","font-size","onClick"],Xl=["d","stroke"],Gl=["fill","cx","cy","r","onClick"],Ul={key:5},Wl=["x","y","font-size","font-weight","fill"],Yl=["x1","x2","y1","y2","stroke","stroke-width"],Hl=["y","height","width"],ql={style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},Jl={style:{display:"flex","align-items":"center","justify-content":"center",gap:"12px","flex-wrap":"wrap","flex-direction":"row"}},Kl={viewBox:"0 0 20 20",height:"16",width:"16"},Ql=["fill"],Zl={key:7},ea=["y","height","width"],ta={style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},la={style:{display:"flex","align-items":"center","justify-content":"center",gap:"12px","flex-wrap":"wrap","flex-direction":"row"}},aa={viewBox:"0 0 20 20",height:"16",width:"16"},oa=["fill"],ua=["cx","cy","fill"],ra=["d","stroke"],na=["cx","cy","fill"],sa=["d","stroke"],ia=["cx","cy","fill"],ca=["cx","cy","fill"],da=["x","y","fill","font-size","font-weight"],va=["x","y","fill","font-size","font-weight"],ya=["x","text-anchor","y","fill","font-size"],ha=["x","text-anchor","y","fill","font-size"],ba=["x","text-anchor","y","fill","font-size"],fa=["x","text-anchor","y","fill","font-size"],pa=["x","text-anchor","y","fill","font-size"],ga=["x","y","font-size","fill"],xa=["x","y","font-size","fill"],ma=["x","y","font-size","fill"],ka={key:4,class:"vue-data-ui-watermark"},Ca={key:5,ref:"source",dir:"auto"},_a={class:"vue-ui-data-table"},Aa={key:0},wa=["data-cell"],$a={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Ta={key:0},za={key:1},Sa=["data-cell"],Fa={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Na={key:0},La={key:1},Da=["data-cell"],Ia={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Ba={key:0},Ea={key:1},Oa=["data-cell"],Va={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Pa={key:0},Ra={key:1},ja=["data-cell"],Ma={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Xa={key:0},Ga={key:1},Ua=["data-cell"],Wa={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Ya={key:0},Ha={key:1},qa=["data-cell"],Ja={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},Ka={key:0},Qa={key:1},Za=["data-cell"],eo={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},to=["data-cell"],lo={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},ao=["data-cell"],oo={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},uo=["data-cell"],ro={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},no=["data-cell"],so={style:{display:"flex","align-items":"center",gap:"5px","justify-content":"flex-end",width:"100%","padding-right":"3px"}},io={__name:"vue-ui-chestnut",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectRoot","selectBranch","selectNut"],setup(Ke,{expose:Qe,emit:Ze}){St(l=>({v2e18205a:l.tdo}));const _e=K(()=>Q(()=>import("./vue-data-ui-8Gmf-dDN.js").then(l=>l.aA),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),et=K(()=>Q(()=>import("./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js"),__vite__mapDeps([5,1,2,0,3,4,6]),import.meta.url)),tt=K(()=>Q(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([7,1,2,0,3,4,8,9]),import.meta.url)),lt=K(()=>Q(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([10,1,2,9,0,3,4,11,12]),import.meta.url)),at=K(()=>Q(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([13,1,2]),import.meta.url)),ot=K(()=>Q(()=>import("./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"),__vite__mapDeps([14,1,2,0,3,4]),import.meta.url)),{vue_ui_chestnut:ut}=Ut(),{isThemeValid:rt,warnInvalidTheme:nt}=Jt(),R=Ke,Ae=g(()=>!!R.dataset&&R.dataset.length),$=S(Et()),Y=S(null),we=S(0),Z=S(null),ne=S(null),e=S(de()),{loading:$e,FINAL_DATASET:se}=Wt({...Ft(R),FINAL_CONFIG:e,prepareConfig:de,skeletonDataset:[{name:"_",color:"#969696",branches:[{name:"_",value:32,breakdown:[{name:"_",value:16,color:"#CACACA"},{name:"_",value:16,color:"#6A6A6A"}]},{name:"_",value:16,breakdown:[{name:"_",value:8,color:"#CACACA"},{name:"_",value:8,color:"#6A6A6A"}]},{name:"_",value:8,breakdown:[{name:"_",value:4,color:"#CACACA"},{name:"_",value:4,color:"#6A6A6A"}]},{name:"_",value:4,breakdown:[{name:"_",value:2,color:"#CACACA"},{name:"_",value:2,color:"#6A6A6A"}]}]},{name:"_",color:"#C4C4C4",branches:[{name:"_",value:24,breakdown:[{name:"_",value:12,color:"#CACACA"},{name:"_",value:12,color:"#6A6A6A"}]},{name:"_",value:12,breakdown:[{name:"_",value:6,color:"#CACACA"},{name:"_",value:6,color:"#6A6A6A"}]},{name:"_",value:6,breakdown:[{name:"_",value:3,color:"#CACACA"},{name:"_",value:3,color:"#6A6A6A"}]},{name:"_",value:2,breakdown:[{name:"_",value:1,color:"#CACACA"},{name:"_",value:1,color:"#6A6A6A"}]}]}],skeletonConfig:Ot({defaultConfig:e.value,userConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:"#99999930",layout:{grandTotal:{show:!1},roots:{stroke:"#6A6A6A",labels:{show:!1}},verticalSeparator:{stroke:"transparent"},branches:{stroke:"#6A6A6A",underlayerColor:"#6A6A6A90",labels:{show:!1,dataLabels:{show:!1}}}}}}}})}),{userOptionsVisible:ie,setUserOptionsVisibility:Te,keepUserOptionState:ze}=Qt({config:e.value}),{svgRef:ce}=Zt({config:e.value.style.chart.layout.title});function de(){const l=Ce({userConfig:R.config,defaultConfig:ut}),s=l.theme;if(!s)return l;if(!rt.value(l))return nt(l),l;const t=Ce({userConfig:Je[s]||R.config,defaultConfig:l}),u=Ce({userConfig:R.config,defaultConfig:t});return{...u,customPalette:u.customPalette.length?u.customPalette:Vt[s]||E}}pe(()=>R.config,l=>{e.value=de(),ie.value=!e.value.userOptions.showOnChartHover,X.value.showTable=e.value.table.show,Ee()},{deep:!0});const{isPrinting:Se,isImaging:Fe,generatePdf:Ne,generateImage:Le}=Ht({elementId:"vue-ui-chestnut_".concat($.value),fileName:e.value.style.chart.layout.title.text||"vue-ui-chestnut",options:e.value.userOptions.print}),st=g(()=>e.value.userOptions.show),ve=g(()=>Pt(e.value.customPalette)),X=S({showTable:e.value.table.show});pe(e,()=>{X.value={showTable:e.value.table.show}},{immediate:!0});const De=S(null),it=g(()=>e.value.table.responsiveBreakpoint),i=S({gap:6,padding:{top:102,left:12,right:12,bottom:96},width:1024,height:0,branchSize:32,branchStart:128}),z=g(()=>({left:i.value.padding.left,top:i.value.padding.top,right:i.value.width-i.value.padding.right,bottom:i.value.height-i.value.padding.bottom,width:i.value.width-(i.value.padding.left+i.value.padding.right),height:i.value.height-(i.value.padding.top+i.value.padding.bottom),seedX:i.value.padding.left+64})),D=g(()=>se.value.flatMap(l=>(l.branches||[]).map(s=>s.value||0)).reduce((l,s)=>l+s,0)),N=g(()=>(se.value.forEach((l,s)=>{me({datasetObject:l,requiredAttributes:["name","branches"]}).forEach(t=>{re({componentName:"VueUiChestnut",type:"datasetSerieAttribute",property:t,index:s,debug:le.value})}),l.branches&&l.branches.forEach((t,u)=>{me({datasetObject:t,requiredAttributes:["name","value"]}).forEach(f=>{re({componentName:"VueUiChestnut",type:"datasetSerieAttribute",property:f,index:"".concat(s," - ").concat(u),debug:le.value})}),t.breakdown&&t.breakdown.forEach((f,p)=>{me({datasetObject:f,requiredAttributes:["name","value"]}).forEach(b=>{re({componentName:"VueUiChestnut",type:"datasetSerieAttribute",property:b,index:"".concat(s," - ").concat(u," - ").concat(p),debug:le.value})})})})}),se.value.map((l,s)=>{const t=(l.branches||[]).map(u=>u.value||0).reduce((u,f)=>u+f,0);return{...l,color:ke(l.color)||ve.value[s]||E[s]||E[s%E.length],id:l.id||"root_".concat(s,"_").concat($.value),type:"root",total:t,rootIndex:s,branches:(l.branches||[]).map((u,f)=>({...u,rootName:l.name,rootIndex:s,color:ke(l.color)||ve.value[s]||E[s]||E[s%E.length],value:u.value>=0?u.value:0,id:u.id||"branch_".concat(s,"_").concat(f,"_").concat($.value),proportionToRoot:u.value/t,type:"branch",breakdown:(u.breakdown||[]).map((p,b)=>({table:{rootName:l.name,rootValue:t,rootToTotal:t/D.value,branchName:u.name,branchValue:u.value,branchToTotal:u.value/D.value,branchToRoot:u.value/t,nutName:p.name,nutValue:p.value,nutToTotal:p.value/D.value,nutToRoot:p.value/t,nutToBranch:p.value/u.value},...p,type:"nut",branchName:u.name,rootName:l.name,branchTotal:u.value>=0?u.value:0,proportionToBranch:p.value/u.value,proportionToRoot:p.value/t,proportionToTree:p.value/D.value,rootIndex:s,id:p.id||"nut_".concat(s,"_").concat(f,"_").concat(b,"_").concat($.value),color:ke(p.color)||ve.value[b]||E[b]||E[b%E.length],value:p.value>=0?p.value:0}))}))}})));function ct(){return N.value}const H=Ze,dt=g(()=>N.value.flatMap(l=>l.branches).length),vt=g(()=>Math.max(...N.value.map(l=>l.branches.map(s=>s.value).reduce((s,t)=>s+t,0)))),yt=g(()=>Math.max(...N.value.flatMap(l=>l.branches.map(s=>s.value)))),Ie=g(()=>256+i.value.padding.left),G=g(()=>N.value.sort((l,s)=>s.total-l.total).map((l,s)=>{const t=z.value.height/N.value.length/2,u=l.total/vt.value*(t>64?64:t);return{...l,x:z.value.seedX,y:z.value.top+z.value.height/N.value.length*(s+1)-(z.value.height/N.value.length/2+i.value.gap/2),r:u<i.value.branchSize/2?i.value.branchSize/2:u}})),ht=g(()=>e.value.style.chart.layout.branches.widthRatio<=0?.1:e.value.style.chart.layout.branches.widthRatio>1.8?1.8:e.value.style.chart.layout.branches.widthRatio),bt=g(()=>G.value.flatMap(l=>l.branches)),U=g(()=>bt.value.sort((l,s)=>s.value-l.value).map((l,s)=>({...l,y1:s*i.value.branchSize+z.value.top+s*i.value.gap,y2:s*i.value.branchSize+i.value.branchSize,x1:Ie.value,x2:384*l.value/yt.value*ht.value+Ie.value})));function ft(l){const s=G.value.find(t=>t.rootIndex===l.rootIndex);return{x:s.x,y:s.y,r:s.r}}const d=S(null),j=S(null),k=S(null),I=S(null);function T(){d.value=null,k.value=null,I.value=null}function B(l){return I.value?I.value===null?!0:l.type==="root"?l.id===I.value.id:l.rootIndex===I.value.rootIndex:d.value===null&&k.value===null?!0:l.type==="nut"?d.value.id===l.id:l.type==="branch"?k.value.id===l.id:l.type==="root"?k.value&&k.value.rootIndex===l.rootIndex||d.value&&d.value.rootIndex===l.rootIndex:!1}function pt(l){T(),ge(()=>{d.value=l,k.value=l,j.value=Xe({series:l.breakdown},l.x2+24+e.value.style.chart.layout.nuts.offsetX,l.y1+i.value.branchSize/2,80,80),H("selectNut",l.breakdown)})}function W(){d.value=null,j.value=null,H("selectNut",null)}function ye(l){k.value&&k.value.id===l.id?(k.value=null,T(),H("selectBranch",null)):(T(),k.value=l,H("selectBranch",l))}function Be(l){I.value&&I.value.id===l.id?(T(),H("selectRoot",null)):(T(),I.value=l,H("selectRoot",l))}function gt(){return z.value.bottom-(d.value.y1+180)<0?0:z.value.bottom}function q(l){return l.proportion*100>e.value.style.chart.layout.nuts.selected.labels.dataLabels.hideUnderValue}Nt(()=>{Ee()});const le=g(()=>e.value.debug);function Ee(){Rt(R.dataset)&&re({componentName:"VueUiChestnut",type:"dataset",debug:le.value});const l=dt.value*(i.value.branchSize+i.value.gap)+i.value.padding.top+i.value.padding.bottom;i.value.height=l}const v=g(()=>{const l=[e.value.table.th.translations.rootName,e.value.table.th.translations.rootValue,e.value.table.th.translations.rootToTotal,e.value.table.th.translations.branchName,e.value.table.th.translations.branchValue,e.value.table.th.translations.branchToRoot,e.value.table.th.translations.branchToTotal,e.value.table.th.translations.nutName,e.value.table.th.translations.nutValue,e.value.table.th.translations.nutToBranch,e.value.table.th.translations.nutToRoot,e.value.table.th.translations.nutToTotal],s=N.value.flatMap((t,u)=>t.branches.flatMap((f,p)=>f.breakdown.flatMap((b,C)=>b.table)));return{head:l,body:s}});function he(l=null){ge(()=>{const s=[[e.value.style.chart.layout.title.text],[e.value.style.chart.layout.title.subtitle.text],[""],["Grand total",D.value],[""]],t=v.value.head,u=v.value.body.map((b,C)=>[v.value.body[C-1]&&v.value.body[C-1].rootName===b.rootName?"":b.rootName,v.value.body[C-1]&&v.value.body[C-1].rootName===b.rootName?"":b.rootValue,v.value.body[C-1]&&v.value.body[C-1].rootName===b.rootName?"":b.rootToTotal,v.value.body[C-1]&&v.value.body[C-1].branchName===b.branchName?"":b.branchName,v.value.body[C-1]&&v.value.body[C-1].branchName===b.branchName?"":b.branchValue,v.value.body[C-1]&&v.value.body[C-1].branchName===b.branchName?"":b.branchToRoot,v.value.body[C-1]&&v.value.body[C-1].branchName===b.branchName?"":b.branchToTotal,b.nutName,b.nutValue,b.nutToBranch,b.nutToRoot,b.nutToTotal]),f=s.concat([t]).concat(u),p=Xt(f);l?l(p):Gt({csvContent:p,title:e.value.style.chart.layout.title.text||"vue-ui-chestnut"})})}const J=S(!1);function Oe(l){J.value=l,we.value+=1}function Ve(){X.value.showTable=!X.value.showTable}const ae=S(!1);function be(){ae.value=!ae.value}async function xt({scale:l=2}={}){if(!Y.value)return;const{width:s,height:t}=Y.value.getBoundingClientRect(),u=s/t,{imageUri:f,base64:p}=await el({domElement:Y.value,base64:!0,img:!0,scale:l});return{imageUri:f,base64:p,title:e.value.style.chart.layout.title.text,width:s,height:t,aspectRatio:u}}function mt(l){const s=ft(l),t=l.x1,u=l.y1,f=i.value.branchSize,p=s.x+s.r/2,b=s.y,C=20;return["M ".concat(t,",").concat(u),"C ".concat(t-C,",").concat(u," ").concat(t-C,",").concat(u," ").concat(p,",").concat(b),"C ".concat(p,",").concat(b," ").concat(t-C,",").concat(u+f," ").concat(t,",").concat(u+f),"Z"].join(" ")}const oe=g(()=>{const l=e.value.table.useDialog&&!e.value.table.show,s=X.value.showTable;return{component:l?ot:et,title:"".concat(e.value.style.chart.layout.title.text).concat(e.value.style.chart.layout.title.subtitle.text?": ".concat(e.value.style.chart.layout.title.subtitle.text):""),props:l?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:J.value,fullscreenParent:Y.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:s,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});pe(()=>X.value.showTable,async l=>{e.value.table.show||(l&&e.value.table.useDialog&&Z.value?(await ge(),Z.value.open()):"close"in Z.value&&Z.value.close())});const{isResponsive:kt}=Kt(De,it);function fe(){X.value.showTable=!1,ne.value&&ne.value.setTableIconState(!1)}const Ct=g(()=>N.value.map((l,s)=>({...l,display:"".concat(l.name,": ").concat(M(e.value.style.chart.layout.roots.labels.formatter,l.total,F({p:e.value.style.chart.layout.legend.prefix,v:l.total,s:e.value.style.chart.layout.legend.suffix,r:e.value.style.chart.layout.legend.roundingValue}),{datapoint:l})," (").concat(F({v:l.total/D.value*100,s:"%",r:e.value.style.chart.layout.legend.roundingPercentage}),")")}))),_t=g(()=>Ct.value.map(l=>({color:l.color,name:l.display,shape:"circle"}))),At=g(()=>e.value.style.chart.backgroundColor),wt=g(()=>({...e.value.style.chart.layout.legend,textAlign:"center",show:!0,position:"bottom"})),$t=g(()=>e.value.style.chart.layout.title),{exportSvg:Tt,getSvg:zt}=qt({svg:ce,title:$t,legend:wt,legendItems:_t,backgroundColor:At,titleEmbedded:!0});async function Pe({isCb:l}){if(l){const{blob:s,url:t,text:u,dataUrl:f}=await zt();e.value.userOptions.callbacks.svg({blob:s,url:t,text:u,dataUrl:f})}else Tt()}return Qe({getData:ct,getImage:xt,generatePdf:Ne,generateCsv:he,generateImage:Le,generateSvg:Pe,toggleTable:Ve,toggleAnnotator:be,toggleFullscreen:Oe}),(l,s)=>(a(),o("div",{class:w("vue-data-ui-component vue-ui-chestnut ".concat(J.value?"vue-data-ui-wrapper-fullscreen":"")),ref_key:"chestnutChart",ref:Y,id:"vue-ui-chestnut_".concat($.value),style:y("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),onMouseenter:s[1]||(s[1]=()=>r(Te)(!0)),onMouseleave:s[2]||(s[2]=()=>r(Te)(!1))},[e.value.userOptions.buttons.annotator?(a(),ue(r(tt),{key:0,svgRef:r(ce),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:ae.value,onClose:be},{"annotator-action-close":A(()=>[_(l.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":A(({color:t})=>[_(l.$slots,"annotator-action-color",V(P({color:t})),void 0,!0)]),"annotator-action-draw":A(({mode:t})=>[_(l.$slots,"annotator-action-draw",V(P({mode:t})),void 0,!0)]),"annotator-action-undo":A(({disabled:t})=>[_(l.$slots,"annotator-action-undo",V(P({disabled:t})),void 0,!0)]),"annotator-action-redo":A(({disabled:t})=>[_(l.$slots,"annotator-action-redo",V(P({disabled:t})),void 0,!0)]),"annotator-action-delete":A(({disabled:t})=>[_(l.$slots,"annotator-action-delete",V(P({disabled:t})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):h("",!0),st.value?(a(),o("div",ll,null,512)):h("",!0),e.value.userOptions.show&&Ae.value&&(r(ze)||r(ie))?(a(),ue(r(lt),{ref_key:"userOptionsRef",ref:ne,key:"user_options_".concat(we.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isImaging:r(Fe),isPrinting:r(Se),uid:$.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:J.value,titles:{...e.value.userOptions.buttonTitles},chartElement:Y.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:ae.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:Oe,onGeneratePdf:r(Ne),onGenerateCsv:he,onGenerateImage:r(Le),onGenerateSvg:Pe,onToggleTable:Ve,onToggleAnnotator:be,style:y({visibility:r(ze)?r(ie)?"visible":"hidden":"visible"})},Re({_:2},[l.$slots.menuIcon?{name:"menuIcon",fn:A(({isOpen:t,color:u})=>[_(l.$slots,"menuIcon",V(P({isOpen:t,color:u})),void 0,!0)]),key:"0"}:void 0,l.$slots.optionPdf?{name:"optionPdf",fn:A(()=>[_(l.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,l.$slots.optionCsv?{name:"optionCsv",fn:A(()=>[_(l.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,l.$slots.optionImg?{name:"optionImg",fn:A(()=>[_(l.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,l.$slots.optionSvg?{name:"optionSvg",fn:A(()=>[_(l.$slots,"optionSvg",{},void 0,!0)]),key:"4"}:void 0,l.$slots.optionTable?{name:"optionTable",fn:A(()=>[_(l.$slots,"optionTable",{},void 0,!0)]),key:"5"}:void 0,l.$slots.optionFullscreen?{name:"optionFullscreen",fn:A(({toggleFullscreen:t,isFullscreen:u})=>[_(l.$slots,"optionFullscreen",V(P({toggleFullscreen:t,isFullscreen:u})),void 0,!0)]),key:"6"}:void 0,l.$slots.optionAnnotator?{name:"optionAnnotator",fn:A(({toggleAnnotator:t,isAnnotator:u})=>[_(l.$slots,"optionAnnotator",V(P({toggleAnnotator:t,isAnnotator:u})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isImaging","isPrinting","uid","hasPdf","hasImg","hasSvg","hasXls","hasTable","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):h("",!0),i.value.height>0?(a(),o("svg",{key:3,ref_key:"svgRef",ref:ce,xmlns:r(jt),class:w({"vue-data-ui-fullscreen--on":J.value,"vue-data-ui-fulscreen--off":!J.value}),viewBox:"0 0 ".concat(i.value.width<=0?10:i.value.width," ").concat(i.value.height<=0?10:i.value.height),style:y("overflow:visible;background:transparent;color:".concat(e.value.style.chart.color))},[xe(r(at)),l.$slots["chart-background"]?(a(),o("foreignObject",{key:0,x:0,y:0,width:i.value.width<=0?10:i.value.width,height:i.value.height<=0?10:i.value.height,style:{pointerEvents:"none"}},[_(l.$slots,"chart-background",{},void 0,!0)],8,ol)):h("",!0),d.value?h("",!0):(a(),o("g",ul,[e.value.style.chart.layout.title.text?(a(),o("text",{key:0,"text-anchor":"middle",fill:e.value.style.chart.layout.title.color,"font-weight":e.value.style.chart.layout.title.bold?"bold":"normal","font-size":e.value.style.chart.layout.title.fontSize,x:i.value.width/2,y:12+e.value.style.chart.layout.title.fontSize+e.value.style.chart.layout.title.offsetY,onClick:T},c(e.value.style.chart.layout.title.text),9,rl)):h("",!0),e.value.style.chart.layout.title.subtitle.text?(a(),o("text",{key:1,"text-anchor":"middle",fill:e.value.style.chart.layout.title.subtitle.color,"font-weight":e.value.style.chart.layout.title.subtitle.bold?"bold":"normal","font-size":e.value.style.chart.layout.title.subtitle.fontSize,x:i.value.width/2,y:48+e.value.style.chart.layout.title.subtitle.fontSize+e.value.style.chart.layout.title.subtitle.offsetY,onClick:T},c(e.value.style.chart.layout.title.subtitle.text),9,nl)):h("",!0)])),n("defs",null,[(a(!0),o(x,null,m(N.value,(t,u)=>(a(),o("radialGradient",{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",id:"root_gradient_".concat($.value,"_").concat(t.rootIndex)},[n("stop",{offset:"0%","stop-color":r(L)(r(je)(t.color,.05),100-e.value.style.chart.layout.roots.gradientIntensity)},null,8,il),n("stop",{offset:"100%","stop-color":t.color},null,8,cl)],8,sl))),256)),(a(!0),o(x,null,m(N.value,t=>(a(),o("linearGradient",{x1:"0%",y1:"0%",x2:"100%",y2:"0%",id:"branch_gradient_".concat($.value,"_").concat(t.rootIndex)},[n("stop",{offset:"0%","stop-color":t.color},null,8,vl),n("stop",{offset:"100%","stop-color":r(L)(r(je)(t.color,.02),100-e.value.style.chart.layout.branches.gradientIntensity)},null,8,yl)],8,dl))),256)),n("radialGradient",{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",id:"nutpick_".concat($.value)},[n("stop",{offset:"0%","stop-color":r(L)("#FFFFFF",0)},null,8,bl),n("stop",{offset:"80%","stop-color":r(L)("#FFFFFF",e.value.style.chart.layout.nuts.selected.gradientIntensity)},null,8,fl),n("stop",{offset:"100%","stop-color":r(L)("#FFFFFF",0)},null,8,pl)],8,hl),n("radialGradient",{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",id:"nut_".concat($.value)},[n("stop",{offset:"0%","stop-color":r(L)("#FFFFFF",0)},null,8,xl),n("stop",{offset:"80%","stop-color":r(L)("#FFFFFF",e.value.style.chart.layout.nuts.gradientIntensity)},null,8,ml),n("stop",{offset:"100%","stop-color":r(L)("#FFFFFF",0)},null,8,kl)],8,gl),n("radialGradient",{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",id:"nut_underlayer_".concat($.value)},[n("stop",{offset:"0%","stop-color":r(L)(e.value.style.chart.backgroundColor,100)},null,8,_l),n("stop",{offset:"80%","stop-color":r(L)(e.value.style.chart.backgroundColor,60)},null,8,Al),n("stop",{offset:"100%","stop-color":r(L)(e.value.style.chart.backgroundColor,0)},null,8,wl)],8,Cl)]),e.value.style.chart.layout.grandTotal.show?(a(),o("g",$l,[n("text",{x:z.value.seedX,y:32+e.value.style.chart.layout.grandTotal.offsetY,"font-size":e.value.style.chart.layout.grandTotal.fontSize,"font-weight":e.value.style.chart.layout.grandTotal.bold?"bold":"normal",fill:e.value.style.chart.layout.grandTotal.color,"text-anchor":"middle",onClick:T},c(e.value.style.chart.layout.grandTotal.text),9,Tl),n("text",{x:z.value.seedX,y:38+e.value.style.chart.layout.grandTotal.fontSize+e.value.style.chart.layout.grandTotal.offsetY,"font-size":e.value.style.chart.layout.grandTotal.fontSize,"font-weight":e.value.style.chart.layout.grandTotal.bold?"bold":"normal",fill:e.value.style.chart.layout.grandTotal.color,"text-anchor":"middle",onClick:T},c(r(M)(e.value.style.chart.layout.grandTotal.formatter,D.value,r(F)({p:e.value.style.chart.layout.grandTotal.prefix,v:D.value,s:e.value.style.chart.layout.grandTotal.suffix,r:e.value.style.chart.layout.grandTotal.roundingValue}))),9,zl)])):h("",!0),(a(!0),o(x,null,m(U.value,t=>(a(),o("g",null,[n("defs",null,[n("linearGradient",{id:"link_grad_".concat(t.id)},[n("stop",{offset:"0%","stop-color":t.color},null,8,Fl),n("stop",{offset:"100%","stop-color":r(L)(t.color,e.value.style.chart.layout.links.opacity)},null,8,Nl)],8,Sl)]),n("path",{d:mt(t),stroke:r(L)(t.color,e.value.style.chart.layout.links.opacity),fill:"url(#link_grad_".concat(t.id,")"),"stroke-linecap":"round","stroke-linejoin":"round",style:y("opacity:".concat(B(t)?1:0)),onClick:T},null,12,Ll)]))),256)),(a(!0),o(x,null,m(G.value,t=>(a(),o("circle",{cx:t.x,cy:t.y,r:t.r,fill:e.value.style.chart.layout.roots.underlayerColor,stroke:"none",style:y("cursor:pointer; opacity:".concat(B(t)?1:.05))},null,12,Dl))),256)),(a(!0),o(x,null,m(G.value,(t,u)=>(a(),o("circle",{cx:t.x,cy:t.y,r:t.r,fill:e.value.style.chart.layout.roots.useGradient?"url(#root_gradient_".concat($.value,"_").concat(t.rootIndex,")"):t.color,stroke:e.value.style.chart.layout.roots.stroke,"stroke-width":e.value.style.chart.layout.roots.strokeWidth,style:y("cursor:pointer; opacity:".concat(B(t)?1:.05)),onClick:f=>Be(t)},null,12,Il))),256)),e.value.style.chart.layout.roots.labels.show?(a(),o("g",Bl,[(a(!0),o(x,null,m(G.value,(t,u)=>(a(),o("text",{x:t.x,y:t.y+e.value.style.chart.layout.roots.labels.fontSize/2.6,"text-anchor":"middle","font-size":e.value.style.chart.layout.roots.labels.fontSize,fill:e.value.style.chart.layout.roots.labels.adaptColorToBackground?r(Me)(t.color):e.value.style.chart.layout.roots.labels.color,"font-weight":"bold",style:y("cursor:pointer; opacity:".concat(B(t)?1:.05)),onClick:f=>Be(t)},c(r(M)(e.value.style.chart.layout.roots.labels.formatter,t.total,r(F)({p:e.value.style.chart.layout.roots.labels.prefix,v:t.total,s:e.value.style.chart.layout.roots.labels.suffix,r:e.value.style.chart.layout.roots.labels.roundingValue}),{datapoint:t})),13,El))),256)),(a(!0),o(x,null,m(G.value,t=>(a(),o("g",null,[d.value&&t.rootIndex===d.value.rootIndex||k.value&&t.rootIndex===k.value.rootIndex||I.value&&t.rootIndex===I.value.rootIndex?(a(),o("g",Ol,[n("text",{x:t.x,y:t.y+t.r+24,"text-anchor":"middle",fill:e.value.style.chart.layout.roots.labels.name.color,"font-size":e.value.style.chart.layout.roots.labels.name.fontSize,"font-weight":e.value.style.chart.layout.roots.labels.name.bold?"bold":"normal",onClick:T},c(t.name),9,Vl)])):h("",!0)]))),256))])):h("",!0),(a(!0),o(x,null,m(U.value,t=>(a(),o("rect",{x:t.x1,y:t.y1,height:i.value.branchSize,width:t.x2-t.x1,fill:e.value.style.chart.layout.branches.underlayerColor,rx:e.value.style.chart.layout.branches.borderRadius,stroke:"none",style:y("opacity:".concat(B(t)?1:.05)),onClick:u=>ye(t)},null,12,Pl))),256)),(a(!0),o(x,null,m(U.value,(t,u)=>(a(),o("rect",{x:t.x1,y:t.y1,height:i.value.branchSize,width:t.x2-t.x1,fill:e.value.style.chart.layout.branches.useGradient?"url(#branch_gradient_".concat($.value,"_").concat(t.rootIndex,")"):t.color,rx:e.value.style.chart.layout.branches.borderRadius,stroke:e.value.style.chart.layout.branches.stroke,"stroke-width":e.value.style.chart.layout.branches.strokeWidth,style:y("cursor:pointer; opacity:".concat(B(t)?1:.05)),onClick:f=>ye(t)},null,12,Rl))),256)),e.value.style.chart.layout.branches.labels.dataLabels.show?(a(),o("g",jl,[(a(!0),o(x,null,m(U.value,t=>(a(),o("g",null,[t.proportionToRoot*100>e.value.style.chart.layout.branches.labels.dataLabels.hideUnderValue?(a(),o("text",{key:0,x:t.x1+6,y:t.y1+i.value.branchSize/1.5,"text-anchor":"start",fill:r(Me)(t.color),"font-size":e.value.style.chart.layout.branches.labels.dataLabels.fontSize,"font-weight":"bold",style:y("cursor:pointer; opacity:".concat(B(t)?1:.05)),onClick:u=>ye(t)},c(r(M)(e.value.style.chart.layout.branches.labels.dataLabels.formatter,t.value,r(F)({p:e.value.style.chart.layout.branches.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.branches.labels.dataLabels.suffix,r:e.value.style.chart.layout.branches.labels.dataLabels.roundingValue}),{datapoint:t})),13,Ml)):h("",!0)]))),256))])):h("",!0),(a(!0),o(x,null,m(U.value,(t,u)=>(a(),o("g",null,[(a(!0),o(x,null,m(r(Xe)({series:t.breakdown,base:1},t.x2+24+e.value.style.chart.layout.nuts.offsetX,t.y1+i.value.branchSize/2,i.value.branchSize/3,i.value.branchSize/3),(f,p)=>(a(),o("path",{d:f.path,stroke:f.color,"stroke-width":10,fill:"none",style:y("opacity:".concat(B(t)?1:.1))},null,12,Xl))),256)),n("circle",{fill:e.value.style.chart.layout.nuts.useGradient?"url(#nut_".concat($.value,")"):"transparent",cx:t.x2+24+e.value.style.chart.layout.nuts.offsetX,cy:t.y1+i.value.branchSize/2,r:i.value.branchSize/2+2,onClick:f=>pt(t),style:y("cursor:pointer;opacity:".concat(B(t)?1:.1))},null,12,Gl)]))),256)),e.value.style.chart.layout.branches.labels.show&&!k.value?(a(),o("g",Ul,[(a(!0),o(x,null,m(U.value,t=>(a(),o("text",{x:t.x2+i.value.branchSize+24+e.value.style.chart.layout.nuts.offsetX,y:t.y1+i.value.branchSize/2+5,"font-size":e.value.style.chart.layout.branches.labels.fontSize,"font-weight":e.value.style.chart.layout.branches.labels.bold?"bold":"normal",fill:e.value.style.chart.layout.branches.labels.color,"text-anchor":"start",style:y("opacity:".concat(B(t)?1:.1))},c(t.name),13,Wl))),256))])):h("",!0),n("line",{x1:256+i.value.padding.left,x2:256+i.value.padding.left,y1:z.value.top,y2:z.value.bottom,stroke:e.value.style.chart.layout.verticalSeparator.stroke,"stroke-width":e.value.style.chart.layout.verticalSeparator.strokeWidth},null,8,Yl),!d.value&&!k.value?(a(),o("foreignObject",{key:6,x:0,y:z.value.bottom,height:i.value.height-z.value.bottom,width:i.value.width,style:{overflow:"visible"},"data-no-svg-export":"",onClick:T},[n("div",ql,[n("div",Jl,[(a(!0),o(x,null,m(G.value,t=>(a(),o("div",{style:y("display:flex;align-items:center;gap:3px;flex-direction:row;font-size:".concat(e.value.style.chart.layout.legend.fontSize,"px;"))},[(a(),o("svg",Kl,[n("circle",{cx:"10",cy:"10",r:"10",fill:t.color,stroke:"none"},null,8,Ql)])),r($e)?h("",!0):(a(),o(x,{key:0},[n("span",null,c(t.name)+":",1),n("b",null,c(r(M)(e.value.style.chart.layout.roots.labels.formatter,t.total,r(F)({p:e.value.style.chart.layout.legend.prefix,v:t.total,s:e.value.style.chart.layout.legend.suffix,r:e.value.style.chart.layout.legend.roundingValue}),{datapoint:t})),1),ee(" ("+c(r(F)({v:t.total/D.value*100,s:"%",r:e.value.style.chart.layout.legend.roundingPercentage}))+") ",1)],64))],4))),256))])])],8,Hl)):h("",!0),d.value&&j.value?(a(),o("g",Zl,[(a(),o("foreignObject",{x:0,y:gt(),height:i.value.height-z.value.bottom,width:i.value.width,style:{overflow:"visible"},onClick:T},[n("div",ta,[n("b",null,c(d.value.name),1),n("div",la,[(a(!0),o(x,null,m(d.value.breakdown,(t,u)=>(a(),o("div",{style:y("display:flex;align-items:center;gap:6px;flex-direction:row;font-size:".concat(e.value.style.chart.layout.legend.fontSize,"px;"))},[(a(),o("svg",aa,[n("circle",{cx:"10",cy:"10",r:"10",fill:t.color,stroke:"none"},null,8,oa)])),n("span",null,[ee(c(t.name)+": ",1),n("b",null,c(e.value.style.chart.layout.legend.prefix)+" "+c(t.value.toFixed(e.value.style.chart.layout.nuts.selected.labels.roundingValue))+" "+c(e.value.style.chart.layout.legend.suffix),1),ee(" ("+c((t.proportionToBranch*100).toFixed(e.value.style.chart.layout.nuts.selected.labels.roundingPercentage))+"%)",1)])],4))),256))])])],8,ea)),n("circle",{cx:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,cy:d.value.y1+i.value.branchSize/2,r:256,fill:"url(#nut_underlayer_".concat($.value,")"),onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},null,10,ua),(a(!0),o(x,null,m(j.value,t=>(a(),o("g",null,[q(t)?(a(),o("path",{key:0,d:r(Mt)(t,{x:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,y:d.value.y1+i.value.branchSize/2},16,16,!1,!1,64),stroke:t.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},null,10,ra)):h("",!0)]))),256)),n("circle",{cx:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,cy:d.value.y1+i.value.branchSize/2,r:118,fill:e.value.style.chart.backgroundColor,onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},null,10,na),(a(!0),o(x,null,m(j.value,t=>(a(),o("path",{d:t.path,stroke:t.color,"stroke-width":64,fill:"none",onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},null,10,sa))),256)),n("circle",{cx:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,cy:d.value.y1+i.value.branchSize/2,r:110,fill:"url(#nutpick_".concat($.value,")"),onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},null,10,ia),n("circle",{cx:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,cy:d.value.y1+i.value.branchSize/2,r:64,fill:e.value.style.chart.backgroundColor,onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},null,10,ca),n("text",{x:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,y:d.value.y1+8,fill:e.value.style.chart.layout.nuts.selected.labels.core.total.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.core.total.fontSize,"font-weight":e.value.style.chart.layout.nuts.selected.labels.core.total.bold?"bold":"normal","text-anchor":"middle",onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},c(e.value.translations.total),11,da),n("text",{x:d.value.x2+24+e.value.style.chart.layout.nuts.offsetX,y:d.value.y1+36,fill:e.value.style.chart.layout.nuts.selected.labels.core.value.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.core.value.fontSize,"font-weight":e.value.style.chart.layout.nuts.selected.labels.core.value.bold?"bold":"normal","text-anchor":"middle",onClick:W,class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},c(r(M)(e.value.style.chart.layout.nuts.selected.labels.dataLabels.formatter,d.value.value,r(F)({p:e.value.style.chart.layout.nuts.selected.labels.core.value.prefix,v:d.value.value,s:e.value.style.chart.layout.nuts.selected.labels.core.value.suffix,r:e.value.style.chart.layout.nuts.selected.roundingValue}),{datapoint:d.value})),11,va),(a(!0),o(x,null,m(j.value,(t,u)=>(a(),o("g",null,[q(t)?(a(),o("text",{key:0,x:r(O)(t).x,"text-anchor":r(O)(t).anchor,y:r(te)(t)-e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize/6,fill:t.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize/2,style:y("font-weight:".concat(e.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?"bold":"")),class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")}," ⬤ ",14,ya)):h("",!0),q(t)?(a(),o("text",{key:1,x:r(O)(t,!0).x,"text-anchor":r(O)(t,!0).anchor,y:r(te)(t),fill:e.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:y("font-weight:".concat(e.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?"bold":"")),class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},c(d.value.breakdown[u].name),15,ha)):h("",!0)]))),256)),(a(!0),o(x,null,m(j.value,(t,u)=>(a(),o("g",null,[q(t)?(a(),o("text",{key:0,x:r(O)(t,!0).x,"text-anchor":r(O)(t).anchor,y:r(te)(t)+e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:y("font-weight:".concat(e.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?"bold":"")),class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},c(r(F)({v:d.value.breakdown[u].value/d.value.value*100,s:"%",r:e.value.style.chart.layout.nuts.selected.labels.roundingPercentage}))+" "+c(e.value.translations.of)+" "+c(d.value.breakdown[u].branchName)+" "+c(r(M)(e.value.style.chart.layout.nuts.selected.labels.dataLabels.formatter,d.value.breakdown[u].value,r(F)({p:e.value.style.chart.layout.nuts.selected.labels.dataLabels.prefix,v:d.value.breakdown[u].value,s:e.value.style.chart.layout.nuts.selected.labels.dataLabels.suffix,r:e.value.style.chart.layout.nuts.selected.roundingValue}),{datapoint:j.value,seriesIndex:u})),15,ba)):h("",!0),q(t)?(a(),o("text",{key:1,x:r(O)(t,!0).x,"text-anchor":r(O)(t).anchor,y:r(te)(t)+e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize*2,fill:e.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:y("font-weight:".concat(e.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?"bold":"")),class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},c(r(F)({v:d.value.breakdown[u].proportionToRoot*100,s:"%",r:e.value.style.chart.layout.nuts.selected.labels.roundingPercentage}))+" "+c(e.value.translations.of)+" "+c(d.value.breakdown[u].rootName),15,fa)):h("",!0),q(t)?(a(),o("text",{key:2,x:r(O)(t,!0).x,"text-anchor":r(O)(t).anchor,y:r(te)(t)+e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize*3,fill:e.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":e.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:y("font-weight:".concat(e.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?"bold":"")),class:w(e.value.style.chart.layout.nuts.selected.useMotion?"vue-ui-chestnut-animated":"")},c(r(F)({v:d.value.breakdown[u].proportionToTree*100,s:"%",r:e.value.style.chart.layout.nuts.selected.labels.roundingPercentage}))+" "+c(e.value.translations.proportionToTree),15,pa)):h("",!0)]))),256))])):h("",!0),(a(!0),o(x,null,m(U.value,t=>(a(),o("g",null,[k.value&&k.value.id===t.id&&!d.value?(a(),o("text",{key:0,x:t.x1+6,y:t.y1+i.value.branchSize+24,"font-weight":"bold","text-anchor":"start","font-size":e.value.style.chart.layout.branches.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.branches.labels.color,onClick:T},c(t.name)+": "+c(r(M)(e.value.style.chart.layout.branches.labels.dataLabels.formatter,t.value,r(F)({p:e.value.style.chart.layout.branches.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.branches.labels.dataLabels.suffix,r:e.value.style.chart.layout.branches.labels.dataLabels.roundingValue}),{datapoint:t})),9,ga)):h("",!0),k.value&&k.value.id===t.id&&!d.value?(a(),o("text",{key:1,x:t.x1+6,y:t.y1+i.value.branchSize+48,"text-anchor":"start","font-size":e.value.style.chart.layout.branches.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.branches.labels.color,onClick:T},c(r(F)({v:t.proportionToRoot*100,s:"%",r:e.value.style.chart.layout.branches.labels.dataLabels.roundingPercentage}))+" "+c(e.value.translations.of)+" "+c(t.rootName),9,xa)):h("",!0),k.value&&k.value.id===t.id&&!d.value?(a(),o("text",{key:2,x:t.x1+6,y:t.y1+i.value.branchSize+72,"text-anchor":"start","font-size":e.value.style.chart.layout.branches.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.branches.labels.color,onClick:T},c(r(F)({v:t.value/D.value*100,s:"%",r:e.value.style.chart.layout.branches.labels.dataLabels.roundingPercentage}))+" "+c(e.value.translations.proportionToTree),9,ma)):h("",!0)]))),256)),_(l.$slots,"svg",{svg:i.value},void 0,!0)],14,al)):h("",!0),l.$slots.watermark?(a(),o("div",ka,[_(l.$slots,"watermark",V(P({isPrinting:r(Se)||r(Fe)})),void 0,!0)])):h("",!0),_(l.$slots,"legend",{legend:N.value},void 0,!0),l.$slots.source?(a(),o("div",Ca,[_(l.$slots,"source",{},void 0,!0)],512)):h("",!0),Ae.value&&e.value.userOptions.buttons.table?(a(),ue(It(oe.value.component),Dt({key:6},oe.value.props,{ref_key:"tableUnit",ref:Z,onClose:fe}),Re({content:A(()=>[n("div",{ref_key:"tableContainer",ref:De,class:"vue-ui-chestnut-table",style:y("".concat(e.value.table.useDialog?"":"max-height: 300px;margin-top:24px"))},[n("div",{style:y("".concat(e.value.table.useDialog?"":"padding-top:36px;","position: relative"))},[e.value.table.useDialog?h("",!0):(a(),o("div",{key:0,role:"button",tabindex:"0",style:y("width:32px; position: absolute; top: 0; left:4px; padding: 0 0px; display: flex; align-items:center;justify-content:center;height: 36px; width: 32px; cursor:pointer; background:".concat(e.value.table.th.backgroundColor,";")),onClick:fe,onKeypress:Lt(fe,["enter"])},[xe(r(_e),{name:"close",stroke:e.value.table.th.color,"stroke-width":2},null,8,["stroke"])],36)),n("div",{style:{width:"100%"},class:w({"vue-ui-responsive":r(kt)})},[n("table",_a,[e.value.table.useDialog?h("",!0):(a(),o("caption",{key:0,style:y({backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline}),class:"vue-ui-data-table__caption"},[ee(c(e.value.style.chart.layout.title.text)+" ",1),e.value.style.chart.layout.title.subtitle.text?(a(),o("span",Aa,c(e.value.style.chart.layout.title.subtitle.text),1)):h("",!0)],4)),n("thead",null,[n("tr",{role:"row",style:y("background:".concat(e.value.table.th.backgroundColor,";color:").concat(e.value.table.th.color))},[(a(!0),o(x,null,m(v.value.head,t=>(a(),o("th",{style:y("outline:".concat(e.value.table.th.outline))},c(t),5))),256))],4)]),n("tbody",null,[(a(!0),o(x,null,m(v.value.body,(t,u)=>(a(),o("tr",{class:w({"vue-ui-data-table__tbody__row":!0,"vue-ui-data-table__tbody__row-even":u%2===0,"vue-ui-data-table__tbody__row-odd":u%2!==0}),style:y("background:".concat(e.value.table.td.backgroundColor,";color:").concat(e.value.table.td.color))},[n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[0]},[n("div",$a,[v.value.body[u-1]&&v.value.body[u-1].rootName===t.rootName?(a(),o("span",Ta)):(a(),o("span",za,c(t.rootName),1))])],12,wa),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[1]},[n("div",Fa,[v.value.body[u-1]&&v.value.body[u-1].rootName===t.rootName?(a(),o("span",Na)):(a(),o("span",La,c(t.rootValue.toFixed(e.value.table.td.roundingValue)),1))])],12,Sa),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[2]},[n("div",Ia,[v.value.body[u-1]&&v.value.body[u-1].rootName===t.rootName?(a(),o("span",Ba)):(a(),o("span",Ea,c((t.rootToTotal*100).toFixed(e.value.table.td.roundingPercentage))+"% ",1))])],12,Da),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[3]},[n("div",Va,[v.value.body[u-1]&&v.value.body[u-1].branchName===t.branchName?(a(),o("span",Pa)):(a(),o("span",Ra,c(t.branchName),1))])],12,Oa),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[4]},[n("div",Ma,[v.value.body[u-1]&&v.value.body[u-1].branchName===t.branchName?(a(),o("span",Xa)):(a(),o("span",Ga,c(t.branchValue.toFixed(e.value.table.td.roundingValue)),1))])],12,ja),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[5]},[n("div",Wa,[v.value.body[u-1]&&v.value.body[u-1].branchName===t.branchName?(a(),o("span",Ya)):(a(),o("span",Ha,c((t.branchToRoot*100).toFixed(e.value.table.td.roundingPercentage))+"% ",1))])],12,Ua),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[6]},[n("div",Ja,[v.value.body[u-1]&&v.value.body[u-1].branchName===t.branchName?(a(),o("span",Ka)):(a(),o("span",Qa,c((t.branchToTotal*100).toFixed(e.value.table.td.roundingPercentage))+"% ",1))])],12,qa),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[7]},[n("div",eo,c(t.nutName),1)],12,Za),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[8]},[n("div",lo,c(t.nutValue.toFixed(e.value.table.td.roundingValue)),1)],12,to),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[9]},[n("div",oo,c((t.nutToBranch*100).toFixed(e.value.table.td.roundingPercentage))+"% ",1)],12,ao),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[10]},[n("div",ro,c((t.nutToRoot*100).toFixed(e.value.table.td.roundingPercentage))+"% ",1)],12,uo),n("td",{class:"vue-ui-data-table__tbody__td",style:y("outline:".concat(e.value.table.td.outline)),"data-cell":v.value.head[11]},[n("div",so,c((t.nutToTotal*100).toFixed(e.value.table.td.roundingPercentage))+"% ",1)],12,no)],6))),256))])])],2)],4)],4)]),_:2},[e.value.table.useDialog?{name:"title",fn:A(()=>[ee(c(oe.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:A(()=>[n("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:s[0]||(s[0]=t=>he(e.value.userOptions.callbacks.csv))},[xe(r(_e),{name:"excel",stroke:oe.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):h("",!0),r($e)?(a(),ue(Yt,{key:7})):h("",!0)],46,tl))}},co=Bt(io,[["__scopeId","data-v-6e30b6b8"]]),$o=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"}));export{wo as a,$o as b,co as v};
