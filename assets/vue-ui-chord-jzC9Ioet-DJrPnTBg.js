
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vue-ui-accordion-UpZ765hd-DndPzmcD.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./vue-data-ui-BN9YfUec.js","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./useNestedProp-dJX_8vvZ-BzBW50KN.js","./DataTable-BT7VF2ua-Cw2NNXsE.js","./Shape-CNXKB8O0-BJGuTKHC.js","./PackageVersion-TgflyMpU-q2MkeeNq.js","./PenAndPaper-DSvu9dwa-B6YjX2xm.js","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js","./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"])))=>i.map(i=>d[i]);
import{c4 as ta,e as v,au as it,a7 as aa,K as Ie,J as p,E as vt,av as ct,b_ as G,c as u,o as n,z as Y,A as d,r as w,f as I,u as c,c0 as _e,h as M,j as he,k as ge,O as N,Y as dt,n as F,g as be,F as V,R as q,m as ht,t as Q,bn as la,l as gt,N as oa,a9 as bt,c1 as H}from"./index-DXZKKOp8.js";import{s as ra,Q as Pe,A as sa,v as na,m as fe,g as ua,p as ft,b as ia,C as va,a as ca,y as da,K as ha,f as Oe,B as ga,aq as ba,e as fa,r as pa,I as ma}from"./vue-data-ui-BN9YfUec.js";import{E as ya,M as ka}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as $a,o as pt}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{S as wa,T as xa}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{m as Ca}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{O as Ma}from"./useSvgExport-DrjCWun4-CbW14PXm.js";import{a as Aa}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as Ia}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import _a from"./img-BecE5qXd-CsL1o-EN.js";import{w as Pa}from"./Shape-CNXKB8O0-BJGuTKHC.js";import Oa from"./Title-BWp-37K_-BMUMQpSO.js";import{J as Ta}from"./themes-AUNCOb2G-RAhReTPj.js";import Ba from"./Legend-G6GMcdAc-7HaGLNN7.js";import"./alert-l5XlVwCh.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";const Ea=["id"],Sa=["id"],La=["xmlns","viewBox"],Da=["width","height"],Ra={key:1},Na=["id","d"],Fa={key:2},Va=["transform"],za=["d","fill","stroke","stroke-width","onMouseenter","onMouseleave","onClick"],Xa=["d","fill","stroke","stroke-width"],Ya=["d","fill"],ja=["d","fill","stroke","stroke-width","onMouseenter","onClick","onMouseleave"],Ua=["d","fill","stroke","stroke-width"],Wa=["d","fill","stroke","stroke-width"],Ga=["d","fill","stroke","stroke-width"],qa={key:0},Qa=["x1","y1","x2","y2","stroke","stroke-width"],Ha=["x1","y1","x2","y2","stroke","stroke-width"],Ja=["cx","cy","r","stroke","stroke-width","fill"],Ka=["transform","fill","text-anchor","font-size","font-weight"],Za={key:1},el=["font-size","font-weight","fill"],tl=["href"],al=["transform","text-anchor","font-size","font-weight","fill","innerHTML"],ll={key:4,class:"vue-data-ui-watermark"},ol=["id"],rl=["onClick"],sl={key:7,"data-dom-to-png-ignore":"",class:"reset-wrapper"},nl={style:{"text-align":"right",width:"100%"}},ul={__name:"vue-ui-chord",props:{dataset:{type:Object,default(){return{}}},config:{type:Object,default(){return{}}}},emits:["selectLegend","selectGroup","selectRibbon"],setup(mt,{expose:yt,emit:kt}){ta(t=>({dd6a513c:t.slicerColor}));const $t=G(()=>H(()=>import("./vue-ui-accordion-UpZ765hd-DndPzmcD.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),Te=G(()=>H(()=>import("./vue-data-ui-BN9YfUec.js").then(t=>t.aw),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),wt=G(()=>H(()=>import("./DataTable-BT7VF2ua-Cw2NNXsE.js"),__vite__mapDeps([7,1,2,8,3,4,5]),import.meta.url)),xt=G(()=>H(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([9,1,2]),import.meta.url)),Ct=G(()=>H(()=>import("./PenAndPaper-DSvu9dwa-B6YjX2xm.js"),__vite__mapDeps([10,1,2,3,4,5,11,12]),import.meta.url)),Mt=G(()=>H(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([13,1,2,12,3,4,5,14,15]),import.meta.url)),At=G(()=>H(()=>import("./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"),__vite__mapDeps([16,1,2,3,4,5]),import.meta.url)),{vue_ui_chord:It}=$a(),B=mt,se=kt,D=v(!!B.dataset&&Object.hasOwn(B.dataset,"matrix")),$=v(Pe()),x=v(null),m=v(null),h=v(null),Be=v(0),E=v(null),Ee=v(null),Se=v(null),Le=v(null),De=v(null),pe=v(0),me=v(0),ye=v(0),J=v(!1),z=it(null),K=it(null),Re=v(!1),ee=v(null),ke=v(null),e=v(we()),{loading:Ne,FINAL_DATASET:C,manualLoading:te}=wa({...aa(B),FINAL_CONFIG:e,prepareConfig:we,callback:()=>{Promise.resolve().then(async()=>{await bt(),j.value.showTable=e.value.table.show})},skeletonDataset:{matrix:[[12e3,6e3,9e3,3e3],[2e3,1e4,2e3,6001],[8e3,1600,8e3,8001],[1e3,1e3,1e3,7001]],labels:[],colors:["#DBDBDB","#C4C4C4","#ADADAD","#969696"]},skeletonConfig:sa({defaultConfig:e.value,userConfig:{useCssAnimation:!1,userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:"#99999930",legend:{backgroundColor:"transparent"},arcs:{stroke:"#6A6A6A",labels:{show:!1}},ribbons:{stroke:"#6A6A6A",underlayerOpacity:0,labels:{show:!1}}}}}})}),{userOptionsVisible:$e,setUserOptionsVisibility:Fe,keepUserOptionState:Ve}=Aa({config:e.value}),{svgRef:Z}=Ia({config:e.value.style.chart.title}),{isPrinting:ze,isImaging:Xe,generatePdf:Ye,generateImage:je}=Ca({elementId:"chord_".concat($.value),fileName:e.value.style.chart.title.text||"vue-ui-chord",options:e.value.userOptions.print}),j=v({showTable:e.value.table.show});function we(){const t=pt({userConfig:B.config,defaultConfig:It});return t.theme?{...pt({userConfig:Ta.vue_ui_chord[t.theme]||B.config,defaultConfig:t}),customPalette:na[t.theme]||fe}:t}Ie(()=>B.config,t=>{Ne.value||(e.value=we()),$e.value=!e.value.userOptions.showOnChartHover,xe(),pe.value+=1,me.value+=1,ye.value+=1,_.value=e.value.initialRotation,j.value.showTable=e.value.table.show},{deep:!0});const Ue=p(()=>e.value.debug);Ie(()=>B.dataset,()=>{We(),xe(),pe.value+=1,me.value+=1,ye.value+=1});function We(){if(ua(B.dataset)){ft({componentName:"VueUiChord",type:"dataset",debug:Ue.value}),D.value=!1,te.value=!0;return}const t=ia({datasetObject:B.dataset,requiredAttributes:["matrix"]});if(t.length){t.forEach(r=>{ft({componentName:"VueUiChord",type:"datasetAttribute",property:r,debug:Ue.value})}),D.value=!1,te.value=!0;return}const l=B.dataset.matrix;if(!Array.isArray(l)||l.length<2){console.warn("VueUiChord: dataset.matrix requires a minimum of 2 datapoints, for example:\n        \nmatrix:[\n    [1, 1],\n    [1, 1]\n]"),D.value=!1,te.value=!0;return}const a=l.length,o=l.findIndex(r=>!Array.isArray(r)||r.length!==a);if(o!==-1){console.warn("VueUiChord - Invalid matrix: dataset.matrix at index ".concat(o," has ").concat(Array.isArray(l[o])?l[o].length:"NaN"," elements instead of the required ").concat(a,"\n\ndataset.matrix[").concat(o,"] = [").concat(Array.isArray(l[o])?l[o].toString():"invalid","]")),D.value=!1,te.value=!0;return}D.value=!0,te.value=!1}function xe(){if(We(),e.value.responsive){const t=ya(()=>{const{width:l,height:a,heightNoTitle:o,heightSource:r,heightTitle:s,heightLegend:g}=ka({chart:E.value,title:e.value.style.chart.title.text?Ee.value:null,legend:e.value.style.chart.legend.show?Se.value:null,source:Le.value,noTitle:De.value}),b=s+g+r+o;l<a?E.value.style.width="100%":(E.value.style.height="100%",Z.value.style.height="calc(100% - ".concat(b,"px)"))},100);z.value&&(K.value&&z.value.unobserve(K.value),z.value.disconnect()),z.value=new ResizeObserver(t),K.value=E.value.parentNode,z.value.observe(K.value),t()}Ge.value=setTimeout(()=>{J.value=!0},500)}function _t(){if(!C.value||!Object.hasOwn(C.value,"matrix")||C.value.matrix.length<2){console.warn("VueUiChord: dataset.matrix requires a minimum of 2 datapoints, for example:\n\nmatrix:[\n  [1, 1],\n  [1, 1]\n]"),D.value=!1;return}C.value.matrix.forEach((t,l)=>{t.length!==C.value.matrix.length&&(console.warn("VueUiChord - Invalid matrix: dataset.matrix at index ".concat(l," has ").concat(t.length," elements instead of the required ").concat(C.value.matrix.length,"\n\ndataset.matrix[").concat(l,"] = [").concat(t.toString(),"] has a length of ").concat(t.length," but should have the same length as the matrix itself (").concat(C.value.matrix.length,")")),D.value=!1)})}const Ge=v(null);vt(()=>{Re.value=!0,xe()});const S=v({height:600,width:600}),Pt=p(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),Ot=p(()=>va(e.value.customPalette)),f=p(()=>({inner:S.value.width*.3*e.value.style.chart.arcs.innerRadiusRatio,outer:S.value.width*.34*e.value.style.chart.arcs.outerRadiusRatio})),Tt=p(()=>e.value.style.chart.arcs.padAngle/100),y=p(()=>{var t,l;return{matrix:(t=C.value.matrix)!=null?t:[[0]],labels:(l=C.value.labels)!=null?l:[""],colors:C.value.colors&&Array.isArray(C.value.colors)&&C.value.colors.length?C.value.colors.map(a=>ca(a)):C.value.matrix.map((a,o)=>Ot.value[o]||fe[o]||fe[o%fe.length])}});function Bt(t,l){const a=t.length,o=f.value.inner,r=new Array(a).fill(0);let s=0;for(let i=0;i<a;i+=1)for(let k=0;k<a;k+=1)r[i]+=t[i][k],s+=t[i][k];const g=(2*Math.PI-l*a)/s,b=[];let P=0;for(let i=0;i<a;i+=1){const k=P,T=k+r[i]*g;b.push({index:i,pattern:"pattern_".concat($.value,"_").concat(i),startAngle:k,endAngle:T,name:y.value.labels[i],id:Pe(),color:y.value.colors[i],proportion:r[i]/s}),P=T+l}const O=[];for(let i=0;i<a;i+=1){const k=t[i].map((L,X)=>({j:X,v:L}));k.sort((L,X)=>X.v-L.v);let T=b[i].startAngle;for(const{j:L,v:X}of k){const W=T,re=W+X*g;O.push({index:i,subIndex:L,pattern:"pattern_".concat($.value,"_").concat(i),startAngle:W,endAngle:re,value:X,groupName:y.value.labels[i],groupId:b[i].id,groupColor:y.value.colors[i],midAngle:(W+re)/2,midBaseX:Math.cos((W+re)/2-Math.PI/2)*o,midBaseY:Math.sin((W+re)/2-Math.PI/2)*o}),T=re}}const R=[];for(const i of O){const k=O.find(T=>T.index===i.subIndex&&T.subIndex===i.index);R.push({source:i,target:k,id:Pe()})}return{groups:b,chords:R}}const A=p(()=>{const t=Bt(y.value.matrix,Tt.value);return _t(),t.chords.sort((l,a)=>Math.max(a.source.value,a.target.value)-Math.max(l.source.value,l.target.value)),t}),Et=p(()=>{const t=f.value.outer+e.value.style.chart.ribbons.labels.offset+12,l=e.value.style.chart.ribbons.labels.fontSize*.6,a=[];if(m.value){const r=m.value;if(r.source.value){const s=String(r.source.value);a.push({id:r.id+"-src",theta:r.source.midAngle,w:s.length*l/t,midBaseX:r.source.midBaseX,midBaseY:r.source.midBaseY,groupColor:r.source.groupColor,value:r.source.value})}if(r.target&&r.target.value&&r.target.value!==r.source.value){const s=String(r.target.value);a.push({id:r.id+"-tgt",theta:r.target.midAngle,w:s.length*l/t,midBaseX:r.target.midBaseX,midBaseY:r.target.midBaseY,groupColor:r.target.groupColor,value:r.target.value})}return a}function o(r){A.value.chords.filter(s=>s.source.groupId===r&&s.source.value).forEach(s=>{{const g=String(s.source.value);a.push({id:s.id+"-src",theta:s.source.midAngle,w:g.length*l/t,midBaseX:s.source.midBaseX,midBaseY:s.source.midBaseY,groupColor:s.source.groupColor,value:s.source.value})}if(s.target&&s.target.value&&s.target.value!==s.source.value){const g=String(s.target.value);a.push({id:s.id+"-tgt",theta:s.target.midAngle,w:g.length*l/t,midBaseX:s.target.midBaseX,midBaseY:s.target.midBaseY,groupColor:s.target.groupColor,value:s.target.value})}})}return h.value&&o(h.value),x.value&&o(x.value.id),a}),St=p(()=>{const t=Et.value.map(r=>({...r})).sort((r,s)=>r.theta-s.theta),l=e.value.style.chart.ribbons.labels.minSeparationDeg*Math.PI/180;let a=!0,o=0;for(;a&&o++<10;){a=!1;for(let b=1;b<t.length;b+=1){const P=t[b-1],O=t[b],R=P.theta+P.w+l;O.theta<R&&(O.theta=R,a=!0)}const r=t[0],s=t[t.length-1],g=s.theta+s.w+l-2*Math.PI;r.theta<g&&(r.theta=g,a=!0)}return t});function qe(t,l,a,o){const r=t-Math.PI/2,s=l-Math.PI/2,g=Math.cos(r)*a,b=Math.sin(r)*a,P=Math.cos(s)*a,O=Math.sin(s)*a,R=Math.cos(s)*o,i=Math.sin(s)*o,k=Math.cos(r)*o,T=Math.sin(r)*o,L=l-t>Math.PI?1:0;return"M".concat(g,",").concat(b," A").concat(a,",").concat(a," 0 ").concat(L," 1 ").concat(P,",").concat(O," L").concat(R,",").concat(i," A").concat(o,",").concat(o," 0 ").concat(L," 0 ").concat(k,",").concat(T," Z")}function ne(t,l){const a=f.value.inner,o=t.startAngle-Math.PI/2,r=t.endAngle-Math.PI/2,s=l.startAngle-Math.PI/2,g=l.endAngle-Math.PI/2,b=Math.cos(o)*a,P=Math.sin(o)*a,O=Math.cos(r)*a,R=Math.sin(r)*a,i=Math.cos(s)*a,k=Math.sin(s)*a,T=Math.cos(g)*a,L=Math.sin(g)*a,X=t.endAngle-t.startAngle>Math.PI?1:0,W=l.endAngle-l.startAngle>Math.PI?1:0;return"M".concat(b,",").concat(P,"A").concat(a,",").concat(a," 0 ").concat(X," 1 ").concat(O,",").concat(R,"Q0,0 ").concat(i,",").concat(k,"A").concat(a,",").concat(a," 0 ").concat(W," 1 ").concat(T,",").concat(L,"Q0,0 ").concat(b,",").concat(P,"Z")}const Qe=p(()=>_.value*Math.PI/180);function Lt(t){return(t.startAngle+t.endAngle)/2}function Dt(t){return((Lt(t)+Qe.value)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)}function Rt(t){let l=t+Qe.value;return l=(l%(2*Math.PI)+2*Math.PI)%(2*Math.PI),l>Math.PI?"end":"start"}function Nt(t){const l=t-Math.PI/2,a=Math.cos(l)*(f.value.outer+e.value.style.chart.arcs.labels.offset+24),o=Math.sin(l)*(f.value.outer+e.value.style.chart.arcs.labels.offset+24);return"translate(".concat(a,",").concat(o,")")}function Ft(t,l,a){const o=t-Math.PI/2,r=l-Math.PI/2,s=Math.cos(o)*a,g=Math.sin(o)*a,b=Math.cos(r)*a,P=Math.sin(r)*a,O=l-t>Math.PI?1:0;return"M".concat(s,",").concat(g," A").concat(a,",").concat(a," 0 ").concat(O," 1 ").concat(b,",").concat(P)}const _=v(e.value.initialRotation),ae=v(!1);let He=0,Je=0;function Ke(t){var g,b;const l=Z.value.getBoundingClientRect(),a=l.left+l.width/2,o=l.top+l.height/2,r=(g=t.clientX)!=null?g:t.touches[0].clientX,s=(b=t.clientY)!=null?b:t.touches[0].clientY;return Math.atan2(s-o,r-a)}function Ze(t){!e.value.enableRotation||le.value||(t.preventDefault(),ae.value=!0,He=_.value,Je=Ke(t))}function ue(t){if(!ae.value)return;const l=Ke(t);_.value=He+(l-Je)*180/Math.PI}function ie(){ae.value=!1}function et(t){return ma(e.value.style.chart.ribbons.labels.formatter,t,Oe({p:e.value.style.chart.ribbons.labels.prefix,v:t,s:e.value.style.chart.ribbons.labels.suffix,r:e.value.style.chart.ribbons.labels.rounding}))}vt(()=>{window.addEventListener("mousemove",ue),window.addEventListener("mouseup",ie),window.addEventListener("touchmove",ue,{passive:!1}),window.addEventListener("touchend",ie)}),ct(()=>{window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",ie),window.removeEventListener("touchmove",ue),window.removeEventListener("touchend",ie),clearTimeout(Ge.value),z.value&&(K.value&&z.value.unobserve(K.value),z.value.disconnect())});const ve=v(!1);function tt(t){ve.value=t,Be.value+=1}function Vt(t,l){e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:t,seriesIndex:l}),!h.value&&(x.value=t)}function zt(t,l){x.value=null,e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:t,seriesIndex:l})}function Xt(t,l){se("selectGroup",t),e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:t,seriesIndex:l})}function Yt(t,l){e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:t,seriesIndex:l}),!h.value&&(m.value=t)}function jt(t,l){m.value=null,e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:t,seriesIndex:l})}function Ut(t,l){se("selectRibbon",t),e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:t,seriesIndex:l})}function at(t){var l;return!h.value&&!x.value&&!m.value?.8:(h.value?h.value===t.source.groupId:x.value?x.value.id===t.source.groupId:((l=m.value)==null?void 0:l.id)===t.id)?1:.1}function lt(t){var l,a;return!h.value&&!x.value&&!m.value||(h.value?h.value===t.id:x.value?x.value.id===t.id:[(l=m.value)==null?void 0:l.source.groupId,(a=m.value)==null?void 0:a.target.groupId].includes(t.id))?1:.3}const le=v(!1);function Ce(){le.value=!le.value}function ot(){j.value.showTable=!j.value.showTable}function Wt(){return A.value}const U=v(null);function rt(){const t=e.value.initialRotation;U.value!==null&&cancelAnimationFrame(U.value);const l=()=>{_.value+=(t-_.value)*.05,Math.abs(_.value-t)<.1?(_.value=t,U.value=null):U.value=requestAnimationFrame(l)};U.value=requestAnimationFrame(l)}ct(()=>{U.value!==null&&cancelAnimationFrame(U.value)});function st(t){t===h.value?(h.value=null,se("selectLegend",null)):(h.value=t,se("selectLegend",A.value.groups.find(l=>l.id===t)))}const Me=p(()=>A.value.groups.map((t,l)=>({name:t.name,color:t.color,shape:"circle",patternIndex:l,pattern:"pattern_".concat($.value,"_").concat(l),id:t.id,select:()=>st(t.id),opacity:h.value?h.value===t.id?1:.3:1}))),Gt=p(()=>({cy:"chord-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),ce=p(()=>{const t=A.value.groups.map((a,o)=>({name:a.name||o,color:a.color})),l=y.value.matrix;return{head:t,body:l}}),de=p(()=>{const t=[{name:"",color:null},...ce.value.head],l=ce.value.body.map((o,r)=>[ce.value.head[r],...ce.value.body[r]]),a={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:t,head:t,body:l,config:a}});function Ae(t=null){bt(()=>{const l=y.value.matrix.map((r,s)=>[[y.value.labels[s]||s],r]),a=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],...y.value.labels.map((r,s)=>[r||s])]].concat(l),o=fa(a);t?t(o):pa({csvContent:o,title:e.value.style.chart.title.text||"vue-ui-chord"})})}async function qt({scale:t=2}={}){if(!E.value)return;const{width:l,height:a}=E.value.getBoundingClientRect(),o=l/a,{imageUri:r,base64:s}=await _a({domElement:E.value,base64:!0,img:!0,scale:t});return{imageUri:r,base64:s,title:e.value.style.chart.title.text,width:l,height:a,aspectRatio:o}}function Qt(t,l){return"".concat(y.value.labels[l]).concat(e.value.style.chart.arcs.labels.showPercentage?Oe({p:" (",v:isNaN(t.proportion)?0:t.proportion*100,s:"%)",r:e.value.style.chart.arcs.labels.roundingPercentage}):"")}const oe=p(()=>{const t=e.value.table.useDialog&&!e.value.table.show,l=j.value.showTable;return{component:t?At:$t,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:t?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:ve.value,fullscreenParent:E.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:l,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});Ie(()=>j.value.showTable,t=>{e.value.table.show||(t&&e.value.table.useDialog&&ee.value?ee.value.open():"close"in ee.value&&ee.value.close())});function nt(){j.value.showTable=!1,ke.value&&ke.value.setTableIconState(!1)}const Ht=p(()=>e.value.style.chart.backgroundColor),Jt=p(()=>e.value.style.chart.legend),Kt=p(()=>e.value.style.chart.title),{exportSvg:Zt,getSvg:ea}=Ma({svg:Z,title:Kt,legend:Jt,legendItems:Me,backgroundColor:Ht});async function ut({isCb:t}){if(t){const{blob:l,url:a,text:o,dataUrl:r}=await ea();e.value.userOptions.callbacks.svg({blob:l,url:a,text:o,dataUrl:r})}else Zt()}return yt({getData:Wt,getImage:qt,generateCsv:Ae,generateImage:je,generateSvg:ut,generatePdf:Ye,toggleAnnotator:Ce,toggleTable:ot,toggleFullscreen:tt}),(t,l)=>(n(),u("div",{ref_key:"chordChart",ref:E,class:F({"vue-data-ui-component":!0,"vue-ui-chord":!0,"vue-data-ui-wrapper-fullscreen":ve.value,"vue-data-ui-responsive":e.value.responsive}),style:N("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),id:"chord_".concat($.value),onMouseenter:l[2]||(l[2]=()=>c(Fe)(!0)),onMouseleave:l[3]||(l[3]=()=>c(Fe)(!1))},[e.value.userOptions.buttons.annotator&&c(Z)?(n(),Y(c(Ct),{key:0,color:e.value.style.chart.color,backgroundColor:e.value.style.chart.backgroundColor,active:le.value,svgRef:c(Z),onClose:Ce},null,8,["color","backgroundColor","active","svgRef"])):d("",!0),w(t.$slots,"userConfig",{},void 0,!0),Pt.value?(n(),u("div",{key:1,ref_key:"noTitle",ref:De,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):d("",!0),e.value.style.chart.title.text?(n(),u("div",{key:2,ref_key:"chartTitle",ref:Ee,style:"width:100%;background:transparent;padding-bottom:24px"},[(n(),Y(Oa,{key:"title_".concat(pe.value),config:{title:{cy:"chord-div-title",...e.value.style.chart.title},subtitle:{cy:"chord-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):d("",!0),I("div",{id:"legend-top-".concat($.value)},null,8,Sa),e.value.userOptions.show&&D.value&&(c(Ve)||c($e))?(n(),Y(c(Mt),{ref_key:"userOptionsRef",ref:ke,key:"user_option_".concat(Be.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:c(ze),isImaging:c(Xe),uid:$.value,hasTooltip:!1,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasLabel:!1,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:ve.value,chartElement:E.value,position:e.value.userOptions.position,titles:{...e.value.userOptions.buttonTitles},hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:le.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:tt,onGeneratePdf:c(Ye),onGenerateCsv:Ae,onGenerateImage:c(je),onGenerateSvg:ut,onToggleTable:ot,onToggleAnnotator:Ce,style:N({visibility:c(Ve)?c($e)?"visible":"hidden":"visible"})},_e({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:M(({isOpen:a,color:o})=>[w(t.$slots,"menuIcon",he(ge({isOpen:a,color:o})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:M(()=>[w(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:M(()=>[w(t.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:M(()=>[w(t.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:M(()=>[w(t.$slots,"optionTable",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:M(({toggleFullscreen:a,isFullscreen:o})=>[w(t.$slots,"optionFullscreen",he(ge({toggleFullscreen:a,isFullscreen:o})),void 0,!0)]),key:"5"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:M(({toggleAnnotator:a,isAnnotator:o})=>[w(t.$slots,"optionAnnotator",he(ge({toggleAnnotator:a,isAnnotator:o})),void 0,!0)]),key:"6"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasSvg","hasXls","hasTable","hasFullscreen","isFullscreen","chartElement","position","titles","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):d("",!0),(n(),u("svg",{xmlns:c(da),ref_key:"svgRef",ref:Z,viewBox:"0 0 ".concat(S.value.width," ").concat(S.value.height),preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible"},class:F({"vue-ui-chord-rotating":ae.value,"vue-ui-chord-idle":!ae.value}),onMousedown:dt(Ze,["prevent"]),onTouchstart:dt(Ze,["prevent"])},[be(c(xt)),t.$slots["chart-background"]?(n(),u("foreignObject",{key:0,x:0,y:0,width:S.value.width<=0?10:S.value.width,height:S.value.height<=0?10:S.value.height,style:{pointerEvents:"none"}},[w(t.$slots,"chart-background",{},void 0,!0)],8,Da)):d("",!0),e.value.style.chart.arcs.labels.curved?(n(),u("defs",Ra,[(n(!0),u(V,null,q(A.value.groups,(a,o)=>(n(),u("path",{key:"labelPath-".concat(o),id:"labelPath-".concat(o,"_").concat($.value),d:Ft(a.startAngle,a.endAngle,(f.value.inner+f.value.outer)/2+e.value.style.chart.arcs.labels.offset),fill:"none"},null,8,Na))),128))])):d("",!0),t.$slots.pattern?(n(),u("g",Fa,[(n(!0),u(V,null,q(A.value.groups,(a,o)=>(n(),u("defs",null,[w(t.$slots,"pattern",ht({ref_for:!0},{seriesIndex:a.index,patternId:"pattern_".concat($.value,"_").concat(o)}),void 0,!0)]))),256))])):d("",!0),I("g",{transform:"translate(".concat(S.value.width/2,", ").concat(S.value.height/2,") rotate(").concat(_.value,")")},[(n(!0),u(V,null,q(A.value.groups,(a,o)=>(n(),u("g",null,[(n(),u("path",{class:F({"vue-ui-chord-arc":!0,"vue-ui-chord-arc-animated":e.value.useCssAnimation&&!J.value}),key:"arc-".concat(o),d:qe(a.startAngle,a.endAngle,f.value.outer,f.value.inner),fill:y.value.colors[o],stroke:e.value.style.chart.arcs.stroke,"stroke-width":e.value.style.chart.arcs.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",style:N({opacity:lt(a)}),onMouseenter:r=>Vt(a,o),onMouseleave:r=>zt(a,o),onClick:r=>Xt(a,o)},null,46,za)),t.$slots.pattern?(n(),u("path",{class:F({"vue-ui-chord-arc":!0,"vue-ui-chord-arc-animated":e.value.useCssAnimation&&!J.value}),key:"arc-".concat(o),d:qe(a.startAngle,a.endAngle,f.value.outer,f.value.inner),fill:"url(#".concat(a.pattern,")"),stroke:e.value.style.chart.arcs.stroke,"stroke-width":e.value.style.chart.arcs.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",style:N({opacity:lt(a),pointerEvents:"none"})},null,14,Xa)):d("",!0)]))),256)),I("g",null,[(n(!0),u(V,null,q(x.value?A.value.chords.filter(a=>a.source.groupId===x.value.id):h.value?A.value.chords.filter(a=>a.source.groupId===h.value):A.value.chords,(a,o)=>(n(),u(V,{key:"ribbon-".concat(a.id)},[a.source.value?(n(),u("path",{key:0,class:F({"vue-ui-chord-ribbon":!0,"vue-ui-chord-ribbon-animated":e.value.useCssAnimation&&!J.value}),d:ne(a.source,a.target),fill:e.value.style.chart.backgroundColor,style:N({opacity:e.value.style.chart.ribbons.underlayerOpacity})},null,14,Ya)):d("",!0),a.source.value?(n(),u("path",{key:1,class:F({"vue-ui-chord-ribbon":!0,"vue-ui-chord-ribbon-animated":e.value.useCssAnimation&&!J.value}),d:ne(a.source,a.target),fill:y.value.colors[a.source.index],stroke:e.value.style.chart.ribbons.stroke,"stroke-width":e.value.style.chart.ribbons.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",style:N({opacity:at(a)}),onMouseenter:r=>Yt({...a,path:ne(a.source,a.target),color:y.value.colors[a.source.index]},o),onClick:r=>Ut({...a,color:y.value.colors[a.source.index]},o),onMouseleave:r=>jt({...a,color:y.value.colors[a.source.index]},o)},null,46,ja)):d("",!0),a.source.value&&t.$slots.pattern?(n(),u("path",{key:2,class:F({"vue-ui-chord-ribbon":!0,"vue-ui-chord-ribbon-animated":e.value.useCssAnimation&&!J.value}),d:ne(a.source,a.target),fill:"url(#pattern_".concat($.value,"_").concat(a.source.index,")"),stroke:e.value.style.chart.ribbons.stroke,"stroke-width":e.value.style.chart.ribbons.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",style:N({opacity:at(a),pointerEvents:"none"})},null,14,Ua)):d("",!0)],64))),128)),m.value?(n(),u("path",{key:0,d:m.value.path,fill:m.value.color,stroke:e.value.style.chart.ribbons.stroke,"stroke-width":e.value.style.chart.ribbons.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:F({"vue-ui-chord-ribbon":!0}),style:{pointerEvents:"none"}},null,8,Wa)):d("",!0),m.value&&t.$slots.pattern?(n(),u("path",{key:1,d:m.value.path,fill:"url(#".concat(m.value.source.pattern,")"),stroke:e.value.style.chart.ribbons.stroke,"stroke-width":e.value.style.chart.ribbons.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:F({"vue-ui-chord-ribbon":!0}),style:{pointerEvents:"none"}},null,8,Ga)):d("",!0)]),(x.value||m.value||h.value)&&e.value.style.chart.ribbons.labels.show?(n(),u("g",qa,[(n(!0),u(V,null,q(St.value,a=>(n(),u(V,{key:a.id},[I("line",{x1:a.midBaseX,y1:a.midBaseY,x2:Math.cos(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+12),y2:Math.sin(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+12),stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.ribbons.labels.connector.strokeWidth*3,"pointer-events":"none"},null,8,Qa),I("line",{x1:a.midBaseX,y1:a.midBaseY,x2:Math.cos(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+12),y2:Math.sin(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+12),stroke:e.value.style.chart.ribbons.labels.connector.stroke,"stroke-width":e.value.style.chart.ribbons.labels.connector.strokeWidth,"pointer-events":"none"},null,8,Ha),e.value.style.chart.ribbons.labels.marker.show?(n(),u("circle",{key:0,cx:Math.cos(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+12),cy:Math.sin(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+12),r:e.value.style.chart.ribbons.labels.marker.radius,stroke:e.value.style.chart.ribbons.labels.marker.stroke,"stroke-width":e.value.style.chart.ribbons.labels.marker.strokeWidth,fill:a.groupColor,"pointer-events":"none"},null,8,Ja)):d("",!0),I("text",{transform:"\n                            translate(\n                                ".concat(Math.cos(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+24),",\n                                ").concat(Math.sin(a.theta-Math.PI/2)*(f.value.outer+e.value.style.chart.ribbons.labels.offset+24),"\n                            ) rotate(").concat(-_.value,")\n                            "),fill:e.value.style.chart.ribbons.labels.useSerieColor?a.groupColor:e.value.style.chart.ribbons.labels.color,"text-anchor":Rt(a.theta),"font-size":e.value.style.chart.ribbons.labels.fontSize,"font-weight":e.value.style.chart.ribbons.labels.bold?"bold":"normal",dy:".35em","pointer-events":"none"},Q(et(a.value)),9,Ka)],64))),128))])):d("",!0),e.value.style.chart.arcs.labels.show?(n(),u("g",Za,[e.value.style.chart.arcs.labels.curved?(n(!0),u(V,{key:0},q(A.value.groups,(a,o)=>(n(),u("text",{class:"vue-ui-chord-label-curved",key:"curved-label-".concat(o),"font-size":e.value.style.chart.arcs.labels.fontSize,"font-weight":e.value.style.chart.arcs.labels.bold?"bold":"normal",fill:e.value.style.chart.arcs.labels.adaptColorToBackground?c(ha)(y.value.colors[o]):e.value.style.chart.arcs.labels.color},[I("textPath",{href:"#labelPath-".concat(o,"_").concat($.value),startOffset:"50%","text-anchor":"middle"},Q(y.value.labels[o])+Q(e.value.style.chart.arcs.labels.showPercentage?c(Oe)({p:" (",v:isNaN(a.proportion)?0:a.proportion*100,s:"%)",r:e.value.style.chart.arcs.labels.roundingPercentage}):""),9,tl)],8,el))),128)):!x.value&&!m.value&&!h.value?(n(!0),u(V,{key:1},q(A.value.groups,(a,o)=>(n(),u("text",{class:"vue-ui-chord-label-straight",key:"label-".concat(o),transform:"\n                                ".concat(Nt((a.startAngle+a.endAngle)/2),"\n                                rotate(").concat(-_.value,")\n                            "),dy:".35em","text-anchor":Dt(a)>Math.PI?"end":"start","font-size":e.value.style.chart.arcs.labels.fontSize,"font-weight":e.value.style.chart.arcs.labels.bold?"bold":"normal",fill:e.value.style.chart.arcs.labels.color,innerHTML:c(ga)({content:c(ba)(Qt(a,o)),fontSize:e.value.style.chart.arcs.labels.fontSize,fill:e.value.style.chart.arcs.labels.color,x:0,y:0})},null,8,al))),128)):d("",!0)])):d("",!0)],8,Va),w(t.$slots,"svg",{svg:{height:600,width:600}},void 0,!0)],42,La)),t.$slots.watermark?(n(),u("div",ll,[w(t.$slots,"watermark",he(ge({isPrinting:c(ze)||c(Xe)})),void 0,!0)])):d("",!0),I("div",{id:"legend-bottom-".concat($.value)},null,8,ol),Re.value?(n(),Y(la,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat($.value):"#legend-bottom-".concat($.value)},[I("div",{ref_key:"chartLegend",ref:Se},[e.value.style.chart.legend.show?(n(),Y(Ba,{key:"legend_".concat(ye.value),legendSet:Me.value,config:Gt.value,onClickMarker:l[0]||(l[0]=({legend:a})=>st(a.id))},_e({item:M(({legend:a})=>[I("div",{style:N({opacity:h.value?h.value===a.id?1:.3:1}),onClick:o=>a.select()},Q(a.name),13,rl)]),_:2},[t.$slots.pattern?{name:"legend-pattern",fn:M(({legend:a,index:o})=>[be(Pa,{shape:a.shape,radius:30,stroke:"none",plot:{x:30,y:30},fill:"url(#pattern_".concat($.value,"_").concat(o,")")},null,8,["shape","fill"])]),key:"0"}:void 0]),1032,["legendSet","config"])):d("",!0),w(t.$slots,"legend",{legend:Me.value},void 0,!0)],512)],8,["to"])):d("",!0),t.$slots.source?(n(),u("div",{key:6,ref_key:"source",ref:Le,dir:"auto"},[w(t.$slots,"source",{},void 0,!0)],512)):d("",!0),_.value!==e.value.initialRotation?(n(),u("div",sl,[w(t.$slots,"reset-action",{reset:rt},()=>[I("button",{"data-cy-reset":"",tabindex:"0",role:"button",class:"vue-data-ui-refresh-button",style:N({background:e.value.style.chart.backgroundColor}),onClick:rt},[be(c(Te),{name:"refresh",stroke:e.value.style.chart.color},null,8,["stroke"])],4)],!0)])):d("",!0),D.value&&e.value.userOptions.buttons.table?(n(),Y(oa(oe.value.component),ht({key:8},oe.value.props,{ref_key:"tableUnit",ref:ee,onClose:nt}),_e({content:M(()=>[(n(),Y(c(wt),{key:"table_".concat(me.value),colNames:de.value.colNames,head:de.value.head,body:de.value.body,config:de.value.config,title:e.value.table.useDialog?"":oe.value.title,withCloseButton:!e.value.table.useDialog,onClose:nt},{th:M(({th:a})=>[gt(Q(a.name),1)]),td:M(({td:a})=>[I("div",nl,Q(a.name?a.name:et(a)),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:M(()=>[gt(Q(oe.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:M(()=>[I("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:l[1]||(l[1]=a=>Ae(e.value.userOptions.callbacks.csv))},[be(c(Te),{name:"excel",stroke:oe.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):d("",!0),c(Ne)?(n(),Y(xa,{key:9})):d("",!0)],46,Ea))}},Ml=ra(ul,[["__scopeId","data-v-84d34aa4"]]);export{Ml as default};
