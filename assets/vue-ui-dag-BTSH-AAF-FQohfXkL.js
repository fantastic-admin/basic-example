
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PenAndPaper--ADXtx65-ugytqLuo.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./vue-data-ui-8Gmf-dDN.js","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"])))=>i.map(i=>d[i]);
var hn=Object.defineProperty;var fn=(e,t,o)=>t in e?hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var R=(e,t,o)=>fn(e,typeof t!="symbol"?t+"":t,o);import{e as O,a8 as gn,J as Q,E as Ht,aa as Fe,K as De,aw as Jt,c as N,o as E,A as D,z as re,g as st,u as v,t as je,h as V,r as j,j as q,k as H,c1 as at,c3 as pn,O as he,n as Xt,f as te,F as fe,R as Ie,Z as Qt,m as it,l as vn,bq as Kt,T as eo,au as mn,c4 as lt}from"./index-CJB5jCfL.js";import{s as bn,J as vt,x as yn,E as wn,A as to,u as oo,d as kn,C as En,D as _n}from"./vue-data-ui-8Gmf-dDN.js";import{E as Cn,M as xn}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{R as On}from"./usePanZoom-CDF7rb3o-B2p6nSm_.js";import{s as Nn,i as ut}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as An,j as Mn}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{m as Sn}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{O as $n}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as Fn}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as Dn}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as jn}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import In from"./Title-D0nD-PMs-DAiwElB_.js";import{R as no}from"./BaseZoomControls-BQ2emGam-4GK2QSnM.js";import Rn from"./img-CqYIrJ8I-E54QgU9o.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";const Ln="\0",ge="\0",ro="";class se{constructor(t){R(this,"_isDirected",!0);R(this,"_isMultigraph",!1);R(this,"_isCompound",!1);R(this,"_label");R(this,"_defaultNodeLabelFn",()=>{});R(this,"_defaultEdgeLabelFn",()=>{});R(this,"_nodes",{});R(this,"_in",{});R(this,"_preds",{});R(this,"_out",{});R(this,"_sucs",{});R(this,"_edgeObjs",{});R(this,"_edgeLabels",{});R(this,"_nodeCount",0);R(this,"_edgeCount",0);R(this,"_parent");R(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[ge]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){const t=this;return this.nodes().filter(o=>Object.keys(t._in[o]).length===0)}sinks(){const t=this;return this.nodes().filter(o=>Object.keys(t._out[o]).length===0)}setNodes(t,o){const n=arguments,r=this;return t.forEach(a=>{n.length>1?r.setNode(a,o):r.setNode(a)}),this}setNode(t,o){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=o),this):(this._nodes[t]=arguments.length>1?o:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=ge,this._children[t]={},this._children[ge][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){const o=this;if(Object.hasOwn(this._nodes,t)){const n=r=>o.removeEdge(o._edgeObjs[r]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(r=>{o.setParent(r)}),delete this._children[t]),Object.keys(this._in[t]).forEach(n),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,o){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o===void 0)o=ge;else{o+="";for(let n=o;n!==void 0;n=this.parent(n))if(n===t)throw new Error("Setting "+o+" as parent of "+t+" would create a cycle");this.setNode(o)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=o,this._children[o][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){const o=this._parent[t];if(o!==ge)return o}}children(t=ge){if(this._isCompound){const o=this._children[t];if(o)return Object.keys(o)}else{if(t===ge)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){const o=this._preds[t];if(o)return Object.keys(o)}successors(t){const o=this._sucs[t];if(o)return Object.keys(o)}neighbors(t){const o=this.predecessors(t);if(o){const n=new Set(o);for(const r of this.successors(t))n.add(r);return Array.from(n.values())}}isLeaf(t){let o;return this.isDirected()?o=this.successors(t):o=this.neighbors(t),o.length===0}filterNodes(t){const o=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});o.setGraph(this.graph());const n=this;Object.entries(this._nodes).forEach(([s,i])=>{t(s)&&o.setNode(s,i)}),Object.values(this._edgeObjs).forEach(s=>{o.hasNode(s.v)&&o.hasNode(s.w)&&o.setEdge(s,n.edge(s))});const r={};function a(s){const i=n.parent(s);return i===void 0||o.hasNode(i)?(r[s]=i,i):i in r?r[i]:a(i)}return this._isCompound&&o.nodes().forEach(s=>o.setParent(s,a(s))),o}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,o){const n=this,r=arguments;return t.reduce((a,s)=>(r.length>1?n.setEdge(a,s,o):n.setEdge(a,s),s)),this}setEdge(){let t,o,n,r,a=!1;const s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(t=s.v,o=s.w,n=s.name,arguments.length===2&&(r=arguments[1],a=!0)):(t=s,o=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],a=!0)),t=""+t,o=""+o,n!==void 0&&(n=""+n);let i=Re(this._isDirected,t,o,n);if(Object.hasOwn(this._edgeLabels,i))return a&&(this._edgeLabels[i]=r),this;if(n!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(o),this._edgeLabels[i]=a?r:this._defaultEdgeLabelFn(t,o,n);const l=Tn(this._isDirected,t,o,n);return t=l.v,o=l.w,Object.freeze(l),this._edgeObjs[i]=l,so(this._preds[o],t),so(this._sucs[t],o),this._in[o][i]=l,this._out[t][i]=l,this._edgeCount++,this}edge(t,o,n){const r=arguments.length===1?ct(this._isDirected,arguments[0]):Re(this._isDirected,t,o,n);return this._edgeLabels[r]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,o,n){const r=arguments.length===1?ct(this._isDirected,arguments[0]):Re(this._isDirected,t,o,n);return Object.hasOwn(this._edgeLabels,r)}removeEdge(t,o,n){const r=arguments.length===1?ct(this._isDirected,arguments[0]):Re(this._isDirected,t,o,n),a=this._edgeObjs[r];return a&&(t=a.v,o=a.w,delete this._edgeLabels[r],delete this._edgeObjs[r],ao(this._preds[o],t),ao(this._sucs[t],o),delete this._in[o][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,o){const n=this._in[t];if(n){const r=Object.values(n);return o?r.filter(a=>a.v===o):r}}outEdges(t,o){const n=this._out[t];if(n){const r=Object.values(n);return o?r.filter(a=>a.w===o):r}}nodeEdges(t,o){const n=this.inEdges(t,o);if(n)return n.concat(this.outEdges(t,o))}}function so(e,t){e[t]?e[t]++:e[t]=1}function ao(e,t){--e[t]||delete e[t]}function Re(e,t,o,n){let r=""+t,a=""+o;if(!e&&r>a){const s=r;r=a,a=s}return r+ro+a+ro+(n===void 0?Ln:n)}function Tn(e,t,o,n){let r=""+t,a=""+o;if(!e&&r>a){const i=r;r=a,a=i}const s={v:r,w:a};return n&&(s.name=n),s}function ct(e,t){return Re(e,t.v,t.w,t.name)}class Pn{constructor(){const t={};t._next=t._prev=t,this._sentinel=t}dequeue(){const t=this._sentinel,o=t._prev;if(o!==t)return io(o),o}enqueue(t){const o=this._sentinel;t._prev&&t._next&&io(t),t._next=o._next,o._next._prev=t,o._next=t,t._prev=o}toString(){const t=[],o=this._sentinel;let n=o._prev;for(;n!==o;)t.push(JSON.stringify(n,zn)),n=n._prev;return"["+t.join(", ")+"]"}}function io(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function zn(e,t){if(e!=="_next"&&e!=="_prev")return t}const Bn=()=>1;function Vn(e,t){if(e.nodeCount()<=1)return[];const o=Wn(e,t||Bn);return Zn(o.graph,o.buckets,o.zeroIndex).flatMap(n=>e.outEdges(n.v,n.w))}function Zn(e,t,o){let n=[];const r=t[t.length-1],a=t[0];let s;for(;e.nodeCount();){for(;s=a.dequeue();)dt(e,t,o,s);for(;s=r.dequeue();)dt(e,t,o,s);if(e.nodeCount()){for(let i=t.length-2;i>0;--i)if(s=t[i].dequeue(),s){n=n.concat(dt(e,t,o,s,!0));break}}}return n}function dt(e,t,o,n,r){const a=r?[]:void 0;return e.inEdges(n.v).forEach(s=>{const i=e.edge(s),l=e.node(s.v);r&&a.push({v:s.v,w:s.w}),l.out-=i,mt(t,o,l)}),e.outEdges(n.v).forEach(s=>{const i=e.edge(s),l=e.node(s.w);l.in-=i,mt(t,o,l)}),e.removeNode(n.v),a}function Wn(e,t){const o=new se;let n=0,r=0;e.nodes().forEach(i=>{o.setNode(i,{v:i,in:0,out:0})}),e.edges().forEach(i=>{const l=o.edge(i.v,i.w)||0,c=t(i),h=l+c;o.setEdge(i.v,i.w,h),r=Math.max(r,o.node(i.v).out+=c),n=Math.max(n,o.node(i.w).in+=c)});const a=Gn(r+n+3).map(()=>new Pn),s=n+1;return o.nodes().forEach(i=>{mt(a,s,o.node(i))}),{graph:o,buckets:a,zeroIndex:s}}function mt(e,t,o){o.out?o.in?e[o.out-o.in+t].enqueue(o):e[e.length-1].enqueue(o):e[0].enqueue(o)}function Gn(e){const t=[];for(let o=0;o<e;o++)t.push(o);return t}function ke(e,t,o,n){let r=n;for(;e.hasNode(r);)r=Ge(n);return o.dummy=t,e.setNode(r,o),r}function yo(e){const t=new se().setGraph(e.graph());return e.nodes().forEach(o=>{t.setNode(o,e.node(o))}),e.edges().forEach(o=>{const n=t.edge(o.v,o.w)||{weight:0,minlen:1},r=e.edge(o);t.setEdge(o.v,o.w,{weight:n.weight+r.weight,minlen:Math.max(n.minlen,r.minlen)})}),t}function yt(e){const t=new se({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(o=>{e.children(o).length||t.setNode(o,e.node(o))}),e.edges().forEach(o=>{t.setEdge(o,e.edge(o))}),t}function Un(e){const t=e.nodes().map(o=>{const n={};return e.outEdges(o).forEach(r=>{n[r.w]=(n[r.w]||0)+e.edge(r).weight}),n});return Ue(e.nodes(),t)}function Yn(e){const t=e.nodes().map(o=>{const n={};return e.inEdges(o).forEach(r=>{n[r.v]=(n[r.v]||0)+e.edge(r).weight}),n});return Ue(e.nodes(),t)}function bt(e,t){let o=e.x,n=e.y;const r=t.x-o,a=t.y-n;let s=e.width/2,i=e.height/2;if(!r&&!a)throw new Error("Not possible to find intersection inside of the rectangle");let l,c;return Math.abs(a)*s>Math.abs(r)*i?(a<0&&(i=-i),l=i*r/a,c=i):(r<0&&(s=-s),l=s,c=s*a/r),{x:o+l,y:n+c}}function Te(e){const t=we(wt(e)+1).map(()=>[]);return e.nodes().forEach(o=>{const n=e.node(o),r=n.rank;r!==void 0&&(t[r][n.order]=o)}),t}function wo(e){const t=e.nodes().map(n=>{const r=e.node(n).rank;return r===void 0?Number.MAX_VALUE:r}),o=K(Math.min,t);e.nodes().forEach(n=>{const r=e.node(n);Object.hasOwn(r,"rank")&&(r.rank-=o)})}function ko(e){const t=e.nodes().map(s=>e.node(s).rank).filter(s=>s!==void 0),o=K(Math.min,t),n=[];e.nodes().forEach(s=>{const i=e.node(s).rank-o;n[i]||(n[i]=[]),n[i].push(s)});let r=0;const a=e.graph().nodeRankFactor;Array.from(n).forEach((s,i)=>{s===void 0&&i%a!==0?--r:s!==void 0&&r&&s.forEach(l=>{e.node(l).rank+=r})})}function qn(e,t,o,n){const r={width:0,height:0};return arguments.length>=4&&(r.rank=o,r.order=n),ke(e,"border",r,t)}const Eo=65535;function Hn(e,t=Eo){const o=[];for(let n=0;n<e.length;n+=t){const r=e.slice(n,n+t);o.push(r)}return o}function K(e,t){if(t.length>Eo){const o=Hn(t);return e.apply(null,o.map(n=>e.apply(null,n)))}else return e.apply(null,t)}function wt(e){const t=e.nodes().map(o=>{const n=e.node(o).rank;return n===void 0?Number.MIN_VALUE:n});return K(Math.max,t)}function _o(e,t){const o={lhs:[],rhs:[]};return e.forEach(n=>{t(n)?o.lhs.push(n):o.rhs.push(n)}),o}function Co(e,t){const o=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-o)+"ms")}}function xo(e,t){return t()}let Jn=0;function Ge(e){const t=++Jn;return e+String(t)}function we(e,t,o=1){t==null&&(t=e,e=0);let n=a=>a<t;o<0&&(n=a=>t<a);const r=[];for(let a=e;n(a);a+=o)r.push(a);return r}function Le(e,t){const o={};for(const n of t)e[n]!==void 0&&(o[n]=e[n]);return o}function Pe(e,t){let o=t;if(typeof t=="string"){const n=t;o=r=>r[n]}return Object.entries(e).reduce((n,[r,a])=>(n[r]=o(a,r),n),{})}function Ue(e,t){return e.reduce((o,n,r)=>(o[n]=t[r],o),{})}const We={addBorderNode:qn,addDummyNode:ke,applyWithChunking:K,asNonCompoundGraph:yt,buildLayerMatrix:Te,intersectRect:bt,mapValues:Pe,maxRank:wt,normalizeRanks:wo,notime:xo,partition:_o,pick:Le,predecessorWeights:Yn,range:we,removeEmptyRanks:ko,simplify:yo,successorWeights:Un,time:Co,uniqueId:Ge,zipObject:Ue};function Xn(e){(e.graph().acyclicer==="greedy"?Vn(e,t(e)):Kn(e)).forEach(o=>{const n=e.edge(o);e.removeEdge(o),n.forwardName=o.name,n.reversed=!0,e.setEdge(o.w,o.v,n,Ge("rev"))});function t(o){return n=>o.edge(n).weight}}function Qn(e){e.edges().forEach(t=>{const o=e.edge(t);if(o.reversed){e.removeEdge(t);const n=o.forwardName;delete o.reversed,delete o.forwardName,e.setEdge(t.w,t.v,o,n)}})}function Kn(e){const t=[],o={},n={};function r(a){Object.hasOwn(n,a)||(n[a]=!0,o[a]=!0,e.outEdges(a).forEach(s=>{Object.hasOwn(o,s.w)?t.push(s):r(s.w)}),delete o[a])}return e.nodes().forEach(r),t}function er(e){e.graph().dummyChains=[],e.edges().forEach(t=>tr(e,t))}function tr(e,t){let o=t.v,n=e.node(o).rank;const r=t.w,a=e.node(r).rank,s=t.name,i=e.edge(t),l=i.labelRank;if(a===n+1)return;e.removeEdge(t);let c,h,f;for(f=0,++n;n<a;++f,++n)i.points=[],h={width:0,height:0,edgeLabel:i,edgeObj:t,rank:n},c=ke(e,"edge",h,"_d"),n===l&&(h.width=i.width,h.height=i.height,h.dummy="edge-label",h.labelpos=i.labelpos),e.setEdge(o,c,{weight:i.weight},s),f===0&&e.graph().dummyChains.push(c),o=c;e.setEdge(o,r,{weight:i.weight},s)}function or(e){e.graph().dummyChains.forEach(t=>{let o=e.node(t);const n=o.edgeLabel;e.setEdge(o.edgeObj,n);let r;for(;o.dummy;)r=e.successors(t)[0],e.removeNode(t),n.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(n.x=o.x,n.y=o.y,n.width=o.width,n.height=o.height),t=r,o=e.node(t)})}function Oo(e){function t(o){const n=e.node(o);if(n&&Object.prototype.hasOwnProperty.call(n,"rank"))return n.rank;const r=e.outEdges(o)||[];if(!r.length)return n&&(n.rank=0),0;const a=r.map(i=>{if(!e.node(i.w))return Number.POSITIVE_INFINITY;const l=t(i.w),c=e.edge(i).minlen;return l-c});let s=K(Math.min,a);return s===Number.POSITIVE_INFINITY&&(s=0),n&&(n.rank=s),s}(e.sources()||[]).forEach(t)}function nr(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function rr(e){sr(e);const t=new se;e.nodes().forEach(a=>{t.setNode(a,{})});const o=e.nodes();if(!o.length)return t;const n=o[0],r=new Set([n]);for(;r.size<o.length;){const a=ar(e,r);if(!a){const h=o.find(f=>!r.has(f));r.add(h),t.setNode(h,{});continue}const{edgeObject:s,delta:i,attachFrom:l,attachTo:c}=a;ir(e,r,l,i),t.setEdge(s.v,s.w,{}),r.add(c)}return t}function sr(e){e.nodes().forEach(t=>{const o=e.node(t)||{};Object.prototype.hasOwnProperty.call(o,"rank")||(o.rank=0,e.setNode(t,o))})}function ar(e,t){let o=null;return e.edges().forEach(n=>{const r=t.has(n.v),a=t.has(n.w);if(r===a)return;const s=nr(e,n),i=Math.abs(s);if(!o||i<o.absoluteSlack){const l=r?n.v:n.w,c=r?n.w:n.v,h=r?s:-s;o={edgeObject:n,delta:h,attachFrom:l,attachTo:c,absoluteSlack:i}}}),o}function ir(e,t,o,n){n&&e.nodes().forEach(r=>{if(!t.has(r)){const a=e.node(r);a.rank+=n}})}function Ee(e){const t=yo(e);return Oo(t),t.nodes().forEach(o=>{const n=t.node(o),r=e.node(o)||{};r.rank=n.rank,e.setNode(o,r)}),e}function lr(e,t){}function ur(e,t){}function cr(e,t,o){return 0}function dr(e){return null}function hr(e,t){return null}Ee.initLowLimValues=lr;Ee.initCutValues=ur;Ee.calcCutValue=cr;Ee.leaveEdge=dr;Ee.enterEdge=hr;const No=Oo;function fr(e){const t=e.graph().ranker;if(t instanceof Function)return t(e);switch(e.graph().ranker){case"network-simplex":lo(e);break;case"tight-tree":pr(e);break;case"longest-path":gr(e);break;case"none":break;default:lo(e)}}const gr=No;function pr(e){No(e),rr(e)}function lo(e){Ee(e)}function vr(e){const t=br(e);e.graph().dummyChains.forEach(o=>{let n=e.node(o);const r=n.edgeObj,a=mr(e,t,r.v,r.w),s=a.path,i=a.lca;let l=0,c=s[l],h=!0,f=o;for(;f!==r.w;){if(n=e.node(f),h){for(;(c=s[l])!==i&&e.node(c).maxRank<n.rank;)l++;c===i&&(h=!1)}if(!h){for(;l<s.length-1&&e.node(c=s[l+1]).minRank<=n.rank;)l++;c=s[l]}e.setParent(f,c),f=e.successors(f)[0]}})}function mr(e,t,o,n){const r=[],a=[],s=Math.min(t[o].low,t[n].low),i=Math.max(t[o].lim,t[n].lim);let l,c;l=o;do l=e.parent(l),r.push(l);while(l&&(t[l].low>s||i>t[l].lim));for(c=l,l=n;(l=e.parent(l))!==c;)a.push(l);return{path:r.concat(a.reverse()),lca:c}}function br(e){const t={};let o=0;function n(r){const a=o;e.children(r).forEach(n),t[r]={low:a,lim:o++}}return e.children().forEach(n),t}function yr(e){const t=We.addDummyNode(e,"root",{},"_root"),o=wr(e),n=Object.values(o),r=We.applyWithChunking(Math.max,n)-1,a=2*r+1;e.graph().nestingRoot=t,e.edges().forEach(i=>{e.edge(i).minlen*=a});const s=kr(e)+1;e.children().forEach(i=>{Ao(e,t,a,s,r,o,i)}),e.graph().nodeRankFactor=a}function Ao(e,t,o,n,r,a,s){const i=e.children(s);if(!i.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:o});return}const l=We.addBorderNode(e,"_bt"),c=We.addBorderNode(e,"_bb"),h=e.node(s);e.setParent(l,s),h.borderTop=l,e.setParent(c,s),h.borderBottom=c,i.forEach(f=>{Ao(e,t,o,n,r,a,f);const p=e.node(f),b=p.borderTop?p.borderTop:f,S=p.borderBottom?p.borderBottom:f,A=p.borderTop?n:2*n,G=b!==S?1:r-a[s]+1;e.setEdge(l,b,{weight:A,minlen:G,nestingEdge:!0}),e.setEdge(S,c,{weight:A,minlen:G,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:r+a[s]})}function wr(e){const t={};function o(n,r){const a=e.children(n);a&&a.length&&a.forEach(s=>o(s,r+1)),t[n]=r}return e.children().forEach(n=>o(n,1)),t}function kr(e){return e.edges().reduce((t,o)=>t+e.edge(o).weight,0)}function Er(e){const t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(o=>{e.edge(o).nestingEdge&&e.removeEdge(o)})}function _r(e){function t(o){const n=e.children(o),r=e.node(o);if(n.length&&n.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let a=r.minRank,s=r.maxRank+1;a<s;++a)uo(e,"borderLeft","_bl",o,r,a),uo(e,"borderRight","_br",o,r,a)}}e.children().forEach(t)}function uo(e,t,o,n,r,a){const s={width:0,height:0,rank:a,borderType:t},i=r[t][a-1],l=ke(e,"border",s,o);r[t][a]=l,e.setParent(l,n),i&&e.setEdge(i,l,{weight:1})}function Cr(e){const t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Mo(e)}function xr(e){const t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Or(e),(t==="lr"||t==="rl")&&(Nr(e),Mo(e))}function Mo(e){e.nodes().forEach(t=>{co(e.node(t))}),e.edges().forEach(t=>{co(e.edge(t))})}function co(e){const t=e.width;e.width=e.height,e.height=t}function Or(e){e.nodes().forEach(t=>{ht(e.node(t))}),e.edges().forEach(t=>{const o=e.edge(t);o.points.forEach(ht),Object.hasOwn(o,"y")&&ht(o)})}function ht(e){e.y=-e.y}function Nr(e){e.nodes().forEach(t=>{ft(e.node(t))}),e.edges().forEach(t=>{const o=e.edge(t);o.points.forEach(ft),Object.hasOwn(o,"x")&&ft(o)})}function ft(e){const t=e.x;e.x=e.y,e.y=t}const ho={adjust:Cr,undo:xr};function Ar(e){const t={},o=e.nodes().filter(i=>e.children(i).length===0),n=o.map(i=>e.node(i).rank),r=K(Math.max,n),a=we(r+1).map(()=>[]);function s(i){if(t[i])return;t[i]=!0;const l=e.node(i);a[l.rank].push(i),e.successors(i).forEach(s)}return o.sort((i,l)=>e.node(i).rank-e.node(l).rank).forEach(s),a}function Mr(e,t){let o=0;for(let n=1;n<t.length;++n)o+=Sr(e,t[n-1],t[n]);return o}function Sr(e,t,o){const n=Ue(o,o.map((c,h)=>h)),r=t.flatMap(c=>e.outEdges(c).map(h=>({pos:n[h.w],weight:e.edge(h).weight})).sort((h,f)=>h.pos-f.pos));let a=1;for(;a<o.length;)a<<=1;const s=2*a-1;a-=1;const i=new Array(s).fill(0);let l=0;return r.forEach(c=>{let h=c.pos+a;i[h]+=c.weight;let f=0;for(;h>0;)h%2&&(f+=i[h+1]),h=h-1>>1,i[h]+=c.weight;l+=c.weight*f}),l}function $r(e,t=[]){return t.map(o=>{const n=e.inEdges(o);if(!n.length)return{v:o};const r=n.reduce((a,s)=>{const i=e.edge(s),l=e.node(s.v);return{sum:a.sum+i.weight*l.order,weight:a.weight+i.weight}},{sum:0,weight:0});return{v:o,barycenter:r.sum/r.weight,weight:r.weight}})}function Fr(e,t){const o={};e.forEach((r,a)=>{const s=o[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:a};r.barycenter!==void 0&&(s.barycenter=r.barycenter,s.weight=r.weight)}),t.edges().forEach(r=>{const a=o[r.v],s=o[r.w];a!==void 0&&s!==void 0&&(s.indegree++,a.out.push(s))});const n=Object.values(o).filter(r=>!r.indegree);return Dr(n)}function Dr(e){const t=[];function o(r){return a=>{a.merged||(a.barycenter===void 0||r.barycenter===void 0||a.barycenter>=r.barycenter)&&jr(r,a)}}function n(r){return a=>{a.in.push(r),--a.indegree===0&&e.push(a)}}for(;e.length;){const r=e.pop();t.push(r),r.in.reverse().forEach(o(r)),r.out.forEach(n(r))}return t.filter(r=>!r.merged).map(r=>Le(r,["vs","i","barycenter","weight"]))}function jr(e,t){let o=0,n=0;e.weight&&(o+=e.barycenter*e.weight,n+=e.weight),t.weight&&(o+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=o/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}function Ir(e,t){const o=_o(e,h=>Object.hasOwn(h,"barycenter")),n=o.lhs,r=o.rhs.sort((h,f)=>f.i-h.i),a=[];let s=0,i=0,l=0;n.sort(Rr(!!t)),l=fo(a,r,l),n.forEach(h=>{l+=h.vs.length,a.push(h.vs),s+=h.barycenter*h.weight,i+=h.weight,l=fo(a,r,l)});const c={vs:a.flat(!0)};return i&&(c.barycenter=s/i,c.weight=i),c}function fo(e,t,o){let n;for(;t.length&&(n=t[t.length-1]).i<=o;)t.pop(),e.push(n.vs),o++;return o}function Rr(e){return(t,o)=>t.barycenter<o.barycenter?-1:t.barycenter>o.barycenter?1:e?o.i-t.i:t.i-o.i}function So(e,t,o,n){let r=e.children(t);const a=e.node(t),s=a?a.borderLeft:void 0,i=a?a.borderRight:void 0,l={};s&&(r=r.filter(p=>p!==s&&p!==i));const c=$r(e,r);c.forEach(p=>{if(e.children(p.v).length){const b=So(e,p.v,o,n);l[p.v]=b,Object.hasOwn(b,"barycenter")&&Tr(p,b)}});let h=Fr(c,o);Lr(h,l);const f=Ir(h,n);if(s&&(f.vs=[s,f.vs,i].flat(!0),e.predecessors(s).length)){const p=e.node(e.predecessors(s)[0]),b=e.node(e.predecessors(i)[0]);Object.hasOwn(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+b.order)/(f.weight+2),f.weight+=2}return f}function Lr(e,t){e.forEach(o=>{o.vs=o.vs.flatMap(n=>t[n]?t[n].vs:n)})}function Tr(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}function Pr(e,t,o,n){n||(n=e.nodes());const r=zr(e),a=new se({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(s=>e.node(s));return n.forEach(s=>{const i=e.node(s),l=e.parent(s);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(a.setNode(s),a.setParent(s,l||r),e[o](s).forEach(c=>{const h=c.v===s?c.w:c.v,f=a.edge(h,s),p=f?f.weight:0;a.setEdge(h,s,{weight:e.edge(c).weight+p})}),Object.hasOwn(i,"minRank")&&a.setNode(s,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),a}function zr(e){let t;for(;e.hasNode(t=Ge("_root")););return t}function Br(e,t,o){let n={},r;o.forEach(a=>{let s=e.parent(a),i,l;for(;s;){if(i=e.parent(s),i?(l=n[i],n[i]=s):(l=r,r=s),l&&l!==s){t.setEdge(l,s);return}s=i}})}function $o(e,t={}){if(typeof t.customOrder=="function"){t.customOrder(e,$o);return}const o=wt(e),n=go(e,we(1,o+1),"inEdges"),r=go(e,we(o-1,-1,-1),"outEdges");let a=Ar(e);if(po(e,a),t.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,i;const l=t.constraints||[];for(let c=0,h=0;h<4;++c,++h){const f=c%2===0?n:r,p=c%4>=2;Vr(f,p,l),a=Te(e);const b=Mr(e,a);b<s?(s=b,h=0,i=structuredClone(a)):b===s&&(i=structuredClone(a))}po(e,i)}function go(e,t,o){const n=new Map;function r(a,s){n.has(a)||n.set(a,[]),n.get(a).push(s)}for(const a of e.nodes()){const s=e.node(a);if(typeof s.rank=="number"&&r(s.rank,a),typeof s.minRank=="number"&&typeof s.maxRank=="number")for(let i=s.minRank;i<=s.maxRank;i++)i!==s.rank&&r(i,a)}return t.map(a=>Pr(e,a,o,n.get(a)||[]))}function Vr(e,t,o){const n=new se;e.forEach(r=>{o.forEach(i=>n.setEdge(i.left,i.right));const a=r.graph().root,s=So(r,a,n,t);s.vs.forEach((i,l)=>{r.node(i).order=l}),Br(r,n,s.vs)})}function po(e,t){Object.values(t).forEach(o=>{o.forEach((n,r)=>{e.node(n).order=r})})}function Zr(e,t){const o={};function n(r,a){let s=0,i=0;const l=r.length,c=a[a.length-1];return a.forEach((h,f)=>{const p=Gr(e,h),b=p?e.node(p).order:l;(p||h===c)&&(a.slice(i,f+1).forEach(S=>{e.predecessors(S).forEach(A=>{const G=e.node(A),oe=G.order;(oe<s||b<oe)&&!(G.dummy&&e.node(S).dummy)&&Fo(o,A,S)})}),i=f+1,s=b)}),a}return t.length&&t.reduce(n),o}function Wr(e,t){const o={};function n(a,s,i,l,c){let h;we(s,i).forEach(f=>{h=a[f],e.node(h).dummy&&e.predecessors(h).forEach(p=>{const b=e.node(p);b.dummy&&(b.order<l||b.order>c)&&Fo(o,p,h)})})}function r(a,s){let i=-1,l,c=0;return s.forEach((h,f)=>{if(e.node(h).dummy==="border"){const p=e.predecessors(h);p.length&&(l=e.node(p[0]).order,n(s,c,f,i,l),c=f,i=l)}n(s,c,s.length,l,a.length)}),s}return t.length&&t.reduce(r),o}function Gr(e,t){if(e.node(t).dummy)return e.predecessors(t).find(o=>e.node(o).dummy)}function Fo(e,t,o){if(t>o){const r=t;t=o,o=r}let n=e[t];n||(e[t]=n={}),n[o]=!0}function Ur(e,t,o){if(t>o){const n=t;t=o,o=n}return!!e[t]&&Object.hasOwn(e[t],o)}function Yr(e,t,o,n){const r={},a={},s={};return t.forEach(i=>{i.forEach((l,c)=>{r[l]=l,a[l]=l,s[l]=c})}),t.forEach(i=>{let l=-1;i.forEach(c=>{let h=n(c);if(h.length){h=h.sort((p,b)=>s[p]-s[b]);const f=(h.length-1)/2;for(let p=Math.floor(f),b=Math.ceil(f);p<=b;++p){const S=h[p];a[c]===c&&l<s[S]&&!Ur(o,c,S)&&(a[S]=c,a[c]=r[c]=r[S],l=s[S])}}})}),{root:r,align:a}}function qr(e,t,o,n,r){const a={},s=Hr(e,t,o,r),i=r?"borderLeft":"borderRight";function l(f,p){const b=s.nodes().slice(),S={};let A=b.pop();for(;A;){if(S[A])f(A);else{S[A]=!0,b.push(A);for(const G of p(A))b.push(G)}A=b.pop()}}function c(f){a[f]=s.inEdges(f).reduce((p,b)=>Math.max(p,a[b.v]+s.edge(b)),0)}function h(f){const p=s.outEdges(f).reduce((S,A)=>Math.min(S,a[A.w]-s.edge(A)),Number.POSITIVE_INFINITY),b=e.node(f);p!==Number.POSITIVE_INFINITY&&b.borderType!==i&&(a[f]=Math.max(a[f],p))}return l(c,s.predecessors.bind(s)),l(h,s.successors.bind(s)),Object.keys(n).forEach(f=>{a[f]=a[o[f]]}),a}function Hr(e,t,o,n){const r=new e.constructor,a=e.graph(),s=es(a.nodesep,a.edgesep,n);return t.forEach(i=>{let l;i.forEach(c=>{const h=o[c];if(r.setNode(h),l){const f=o[l],p=r.edge(f,h);r.setEdge(f,h,Math.max(s(e,c,l),p||0))}l=c})}),r}function Jr(e,t){return Object.values(t).reduce((o,n)=>{let r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;Object.entries(n).forEach(([i,l])=>{const c=ts(e,i)/2;r=Math.max(l+c,r),a=Math.min(l-c,a)});const s=r-a;return s<o[0]&&(o=[s,n]),o},[Number.POSITIVE_INFINITY,null])[1]}function Xr(e,t){const o=Object.values(t),n=K(Math.min,o),r=K(Math.max,o);["u","d"].forEach(a=>{["l","r"].forEach(s=>{const i=a+s;let l=e[i];if(l===t)return;const c=Object.values(l);let h=n-K(Math.min,c);s!=="l"&&(h=r-K(Math.max,c)),h&&(l=Pe(l,f=>f+h),e[i]=l)})})}function Qr(e,t){return Pe(e.ul,(o,n)=>{if(t)return e[t.toLowerCase()][n];const r=Object.values(e).map(a=>a[n]).sort((a,s)=>a-s);return(r[1]+r[2])/2})}function Kr(e){const t=Te(e),o=Object.assign(Zr(e,t),Wr(e,t)),n={};let r;["u","d"].forEach(s=>{r=s==="u"?t:Object.values(t).reverse(),["l","r"].forEach(i=>{let l=r;i==="r"&&(l=l.map(p=>Object.values(p).reverse()));const c=(s==="u"?e.predecessors:e.successors).bind(e),h=Yr(e,l,o,c);let f=qr(e,l,h.root,h.align,i==="r");i==="r"&&(f=Pe(f,p=>-p)),n[s+i]=f})});const a=Jr(e,n);return Xr(n,a),Qr(n,e.graph().align)}function es(e,t,o){return(n,r,a)=>{const s=n.node(r),i=n.node(a);let l=0,c;if(l+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":c=-s.width/2;break;case"r":c=s.width/2;break}if(c&&(l+=o?c:-c),c=0,l+=(s.dummy?t:e)/2,l+=(i.dummy?t:e)/2,l+=i.width/2,Object.hasOwn(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":c=i.width/2;break;case"r":c=-i.width/2;break}return c&&(l+=o?c:-c),c=0,l}}function ts(e,t){return e.node(t).width}function os(e){const t=yt(e);ns(t);const o=Kr(t);Object.entries(o).forEach(([n,r])=>{e.node(n).x=r})}function ns(e){const t=Te(e),o=e.graph().ranksep;let n=0;t.forEach(r=>{const a=r.reduce((s,i)=>{const l=e.node(i).height;return s>l?s:l},0);r.forEach(s=>{e.node(s).y=n+a/2}),n+=a+o})}function rs(e,t={}){const o=t.debugTiming?Co:xo;return o("layout",()=>{const n=o("  buildLayoutGraph",()=>gs(e));return o("  runLayout",()=>ss(n,o,t)),o("  updateInputGraph",()=>as(e,n)),n})}function ss(e,t,o){t("    makeSpaceForEdgeLabels",()=>ps(e)),t("    removeSelfEdges",()=>Cs(e)),t("    acyclic",()=>Xn(e)),t("    nestingGraph.run",()=>yr(e)),t("    rank",()=>fr(yt(e))),t("    injectEdgeLabelProxies",()=>vs(e)),t("    removeEmptyRanks",()=>ko(e)),t("    nestingGraph.cleanup",()=>Er(e)),t("    normalizeRanks",()=>wo(e)),t("    assignRankMinMax",()=>ms(e)),t("    removeEdgeLabelProxies",()=>bs(e)),t("    normalize.run",()=>er(e)),t("    parentDummyChains",()=>vr(e)),t("    addBorderSegments",()=>_r(e)),t("    order",()=>$o(e,o)),t("    insertSelfEdges",()=>xs(e)),t("    adjustCoordinateSystem",()=>ho.adjust(e)),t("    position",()=>os(e)),t("    positionSelfEdges",()=>Os(e)),t("    removeBorderNodes",()=>_s(e)),t("    normalize.undo",()=>or(e)),t("    fixupEdgeLabelCoords",()=>ks(e)),t("    undoCoordinateSystem",()=>ho.undo(e)),t("    translateGraph",()=>ys(e)),t("    assignNodeIntersects",()=>ws(e)),t("    reversePoints",()=>Es(e)),t("    acyclic.undo",()=>Qn(e))}function as(e,t){e.nodes().forEach(r=>{const a=e.node(r),s=t.node(r);a&&(a.x=s.x,a.y=s.y,a.order=s.order,a.rank=s.rank,t.children(r).length&&(a.width=s.width,a.height=s.height))}),e.edges().forEach(r=>{const a=e.edge(r),s=t.edge(r);a.points=s.points,Object.hasOwn(s,"x")&&(a.x=s.x,a.y=s.y)});const o=t.graph(),n=e.graph();n.width=o.width,n.height=o.height}const is=["nodesep","edgesep","ranksep","marginx","marginy"],ls={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},us=["acyclicer","ranker","rankdir","align"],cs=["width","height","rank"],vo={width:0,height:0},ds=["minlen","weight","width","height","labeloffset"],hs={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},fs=["labelpos","arrowshape"];function gs(e){const t=pt(e.graph()),o={...ls,...gt(t,is),...Le(t,us)},n=new se({multigraph:!0,compound:!0});return n.setGraph(o),e.nodes().forEach(r=>{const a=pt(e.node(r)),s=gt(a,cs);Object.keys(vo).forEach(i=>{s[i]===void 0&&(s[i]=vo[i])}),n.setNode(r,s),n.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const a=pt(e.edge(r));n.setEdge(r,{...hs,...gt(a,ds),...Le(a,fs)})}),n}function ps(e){const t=e.graph();t.ranksep/=2,e.edges().forEach(o=>{const n=e.edge(o);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function vs(e){e.edges().forEach(t=>{const o=e.edge(t);if(o.width&&o.height){const n=e.node(t.v),r={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};ke(e,"edge-proxy",r,"_ep")}})}function ms(e){let t=0;e.nodes().forEach(o=>{const n=e.node(o);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Math.max(t,n.maxRank))}),e.graph().maxRank=t}function bs(e){e.nodes().forEach(t=>{const o=e.node(t);o.dummy==="edge-proxy"&&(e.edge(o.e).labelRank=o.rank,e.removeNode(t))})}function ys(e){let t=Number.POSITIVE_INFINITY,o=0,n=Number.POSITIVE_INFINITY,r=0;const a=e.graph(),s=a.marginx||0,i=a.marginy||0;function l(c){const h=c.x,f=c.y,p=c.width,b=c.height;t=Math.min(t,h-p/2),o=Math.max(o,h+p/2),n=Math.min(n,f-b/2),r=Math.max(r,f+b/2)}e.nodes().forEach(c=>l(e.node(c))),e.edges().forEach(c=>{const h=e.edge(c);Object.hasOwn(h,"x")&&l(h)}),t-=s,n-=i,e.nodes().forEach(c=>{const h=e.node(c);h.x-=t,h.y-=n}),e.edges().forEach(c=>{const h=e.edge(c);h.points.forEach(f=>{f.x-=t,f.y-=n}),Object.hasOwn(h,"x")&&(h.x-=t),Object.hasOwn(h,"y")&&(h.y-=n)}),a.width=o-t+s,a.height=r-n+i}function mo(e,t,o){if(!t)return e;const n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r);if(!a||a<=o)return e;const s=o/a;return{x:e.x+n*s,y:e.y+r*s}}function ws(e){e.edges().forEach(t=>{const o=e.edge(t),n=e.node(t.v),r=e.node(t.w);let a,s;!o.points||!o.points.length?(o.points=[],a=r,s=n):(a=o.points[0],s=o.points[o.points.length-1]);const i=bt(n,a),l=bt(r,s),c=o.points.length?o.points[0]:a,h=o.points.length?o.points[o.points.length-1]:s,f=o.arrowshape,p=f==="normal"||f==="vee",b=!!o.reversed;let S=i,A=l;p&&(b?S=mo(i,c,4):A=mo(l,h,4)),o.points.unshift(S),o.points.push(A)})}function ks(e){e.edges().forEach(t=>{const o=e.edge(t);if(Object.hasOwn(o,"x"))switch((o.labelpos==="l"||o.labelpos==="r")&&(o.width-=o.labeloffset),o.labelpos){case"l":o.x-=o.width/2+o.labeloffset;break;case"r":o.x+=o.width/2+o.labeloffset;break}})}function Es(e){e.edges().forEach(t=>{const o=e.edge(t);o.reversed&&o.points.reverse()})}function _s(e){e.nodes().forEach(t=>{if(e.children(t).length){const o=e.node(t),n=e.node(o.borderTop),r=e.node(o.borderBottom),a=e.node(o.borderLeft[o.borderLeft.length-1]),s=e.node(o.borderRight[o.borderRight.length-1]);o.width=Math.abs(s.x-a.x),o.height=Math.abs(r.y-n.y),o.x=a.x+o.width/2,o.y=n.y+o.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Cs(e){e.edges().forEach(t=>{if(t.v===t.w){const o=e.node(t.v);o.selfEdges||(o.selfEdges=[]),o.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function xs(e){Te(e).forEach(t=>{let o=0;t.forEach((n,r)=>{const a=e.node(n);a.order=r+o,(a.selfEdges||[]).forEach(s=>{ke(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:r+ ++o,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function Os(e){e.nodes().forEach(t=>{const o=e.node(t);if(o.dummy==="selfedge"){const n=e.node(o.e.v),r=n.x+n.width/2,a=n.y,s=o.x-r,i=n.height/2;e.setEdge(o.e,o.label),e.removeNode(t),o.label.points=[{x:r+2*s/3,y:a-i},{x:r+5*s/6,y:a-i},{x:r+s,y:a},{x:r+5*s/6,y:a+i},{x:r+2*s/3,y:a+i}],o.label.x=o.x,o.label.y=o.y}})}function gt(e,t){return Pe(Le(e,t),Number)}function pt(e){const t={};return e&&Object.entries(e).forEach(([o,n])=>{let r=o;typeof r=="string"&&(r=r.toLowerCase()),t[r]=n}),t}const Ns={rankDirection:"TB",nodeSeparation:50,rankSeparation:50,edgeSeparation:10,align:void 0,nodeWidth:100,nodeHeight:40,curvedEdges:!1,padding:20,arrowShape:"normal",arrowSize:10};function As(e){return e.length?e.map((t,o)=>"".concat(o===0?"M":"L"," ").concat(t.x," ").concat(t.y)).join(" "):""}function Ms(e){if(!e.length)return"";if(e.length===1){const r=e[0];return"M ".concat(r.x," ").concat(r.y)}if(e.length===2)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e[1].x," ").concat(e[1].y);const[t]=e;let o="M ".concat(t.x," ").concat(t.y);for(let r=1;r<e.length-1;r+=1){e[r-1];const a=e[r],s=e[r+1],i=a.x,l=a.y,c=(a.x+s.x)/2,h=(a.y+s.y)/2;o+=" Q ".concat(i," ").concat(l," ").concat(c," ").concat(h)}const n=e[e.length-1];return o+=" L ".concat(n.x," ").concat(n.y),o}function Ss(e){const{nodes:t,edges:o,configuration:n}=e,r=O(null),a=O(null),s="dag-arrow-".concat(vt());function i(l,c,h){a.value=null,r.value=null;const f={...Ns,...h},p=new se({multigraph:!0,compound:!0});p.setGraph({rankdir:f.rankDirection,nodesep:f.nodeSeparation,ranksep:f.rankSeparation,edgesep:f.edgeSeparation,align:f.align}),l.forEach(u=>{var L,Z;p.setNode(u.id,{label:u.label,width:(L=u.width)!=null?L:f.nodeWidth,height:(Z=u.height)!=null?Z:f.nodeHeight})}),c.forEach(u=>{var L,Z,ae;p.setEdge(u.from,u.to,{weight:(L=u.weight)!=null?L:1,minlen:(Z=u.minLength)!=null?Z:1,arrowShape:(ae=f.arrowShape)!=null?ae:"normal"})}),rs(p);const b=l.map(u=>{const L=p.node(u.id);return{id:u.id,label:u.label,x:L.x,y:L.y,width:L.width,height:L.height,original:u}}),S=p.edges().map(u=>{const L=p.edge(u),Z=L.points||[];if(!Z.length)return null;const ae=f.curvedEdges?Ms(Z):As(Z),U=f.arrowShape!=="undirected"?"url(#".concat(s,")"):null,ze=c.find(ee=>(ee==null?void 0:ee.from)===u.v&&(ee==null?void 0:ee.to)===u.w);return{id:"".concat(u.v,"->").concat(u.w,"->").concat(vt()),from:u.v,to:u.w,points:Z,pathData:ae,markerEnd:U,original:{...ze,...L}}}).filter(Boolean),A=f.padding;if(!b.length){r.value={nodes:[],edges:S,viewBox:"0 0 0 0",arrowShape:f.arrowShape,arrowSize:f.arrowSize};return}const G=b.flatMap(u=>[u.x-u.width/2,u.x+u.width/2]),oe=b.flatMap(u=>[u.y-u.height/2,u.y+u.height/2]),_e=Math.min(...G)-A,pe=Math.max(...G)+A,B=Math.min(...oe)-A,J=Math.max(...oe)+A;r.value={nodes:b,edges:S.map(u=>({...u,midpoint:u.pathData?_n(u.pathData):{x:0,y:0}})),viewBox:"".concat(_e," ").concat(B," ").concat(pe-_e," ").concat(J-B),arrowShape:f.arrowShape,arrowSize:f.arrowSize}}return mn(()=>{try{const l=v(t)||[],c=v(o)||[],h=v(n)||{};i(l,c,h)}catch(l){console.error("[useDag] layout error:",l),a.value=l,r.value=null}}),{layoutData:r,lastError:a,arrowMarkerIdentifier:s,recomputeLayout:()=>{const l=v(t)||[],c=v(o)||[],h=v(n)||{};i(l,c,h)}}}const Do={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",backgroundPattern:{dotColor:"#3A3A3A"},nodes:{stroke:"#6A6A6A",backgroundColor:"#2A2A2A",labels:{color:"#CCCCCC"},tooltip:{backgroundColor:"#3A3A3A",color:"#CCCCCC"}},edges:{stroke:"#6A6A6A"},midpoints:{stroke:"#6A6A6A",fill:"#1A1A1A",tooltip:{backgroundColor:"#3A3A3A",color:"#CCCCCC"}},controls:{backgroundColor:"#2A2A2A",buttonColor:"#2A2A2A",color:"#CCCCCC",border:"1px solid #4A4A4A"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}}}}},jo={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",backgroundPattern:{dotColor:"#edc7bb"},nodes:{stroke:"#5D4037",backgroundColor:"#fcf9f0",labels:{color:"#424242"},tooltip:{backgroundColor:"#5D4037",color:"#FFF8E1"}},edges:{stroke:"#5D4037"},midpoints:{stroke:"#5D4037",fill:"#FFF8E1",tooltip:{backgroundColor:"#5D4037",color:"#FFF8E1"}},controls:{backgroundColor:"#FFF8E1",buttonColor:"#FFF8E1",color:"#424242",border:"1px solid #d9bbb2"},title:{color:"#424242",subtitle:{color:"#757575"}}}}},Io={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",backgroundPattern:{dotColor:"#3E3E3E"},nodes:{stroke:"#965039",backgroundColor:"#2A2A2A",labels:{color:"#BDBDBD"},tooltip:{backgroundColor:"#3A3A3A",color:"#FFF8E1"}},edges:{stroke:"#965039"},midpoints:{stroke:"#965039",fill:"#1E1E1E",tooltip:{backgroundColor:"#3A3A3A",color:"#FFF8E1"}},controls:{backgroundColor:"#1E1E1E",buttonColor:"#1E1E1E",color:"#BDBDBD",border:"1px solid #3A3A3A"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}}}}},Ro={style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",backgroundPattern:{dotColor:"#2f3d2f"},nodes:{stroke:"#66CC66",backgroundColor:"#2A2A2A",labels:{color:"#99AA99"},tooltip:{backgroundColor:"#3A3A3A",color:"#99AA99"}},edges:{stroke:"#66CC66"},midpoints:{stroke:"#66CC66",fill:"#1A1A1A",tooltip:{backgroundColor:"#3A3A3A",color:"#99AA99"}},controls:{backgroundColor:"#1A1A1A",buttonColor:"#1A1A1A",color:"#99AA99",border:"1px solid #1e361e"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}}}}},Lo={style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",backgroundPattern:{dotColor:"#dbcfc5"},nodes:{stroke:"#8F837A",backgroundColor:"#ffffff",labels:{color:"#8A9892"},tooltip:{backgroundColor:"#8F837A",color:"#fbfafa"}},edges:{stroke:"#8F837A"},midpoints:{stroke:"#8F837A",fill:"#fbfafa",tooltip:{backgroundColor:"#8F837A",color:"#fbfafa"}},controls:{backgroundColor:"#fbfafa",buttonColor:"#fbfafa",color:"#99AA99",border:"1px solid #ebded3"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}}}}},To={style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",backgroundPattern:{dotColor:"#c3cfd9"},layout:{arrowShape:"normal",curvedEdges:!1},nodes:{stroke:"#50606C",backgroundColor:"#ffffff",borderRadius:0,labels:{color:"#50606C"},tooltip:{backgroundColor:"#50606C",color:"#f6f6fb"}},edges:{stroke:"#50606C"},midpoints:{stroke:"#50606C",fill:"#fbfafa",tooltip:{backgroundColor:"#50606C",color:"#f6f6fb"}},controls:{backgroundColor:"#f6f6fb",buttonColor:"#f6f6fb",color:"#50606C",border:"1px solid #98aab8",borderRadius:"0"},title:{color:"#50606C",subtitle:{color:"#718890"}}}}},Po={default:{},dark:Do,celebration:jo,celebrationNight:Io,hack:Ro,zen:Lo,concrete:To},Oa=Object.freeze(Object.defineProperty({__proto__:null,celebration:jo,celebrationNight:Io,concrete:To,dark:Do,default:Po,hack:Ro,zen:Lo},Symbol.toStringTag,{value:"Module"})),$s=["id"],Fs={key:0,class:"dag-chart-error"},Ds=["viewBox","xmlns"],js={key:0},Is=["id","width","height"],Rs=["cx","cy","r","fill"],Ls=["x","y","width","height","fill"],Ts={key:2},Ps=["id","markerWidth","markerHeight","refX","refY"],zs=["d","fill","stroke"],Bs=["d","fill","stroke"],Vs={class:"vue-ui-dag-edges"},Zs=["d","stroke","stroke-width"],Ws=["cx","cy","r","fill","stroke","stroke-width","onMouseenter"],Gs={class:"vue-ui-dag-nodes"},Us=["onClick","onMouseenter"],Ys=["x","y","width","height","rx","fill","stroke","stroke-width"],qs=["x","y","width","height"],Hs={class:"vue-ui-dag-edges"},Js=["d","stroke-width","marker-end"],Xs={class:"vue-ui-dag-node-labels"},Qs=["onClick","onMouseenter"],Ks=["x","y","font-size","fill","font-weight"],ea=["x","y","font-size","fill","font-weight","innerHTML"],ta={key:1},oa={key:6,class:"vue-data-ui-watermark"},na=["data-position"],ra={key:0},sa=["data-position"],aa={key:0},bo=1.5,ia={__name:"vue-ui-dag",props:{dataset:{type:Object,default(){return{nodes:[],edges:[]}}},config:{type:Object,default(){return{}}}},emits:["onNodeClick","onMidpointEnter","onMidpointLeave"],setup(e,{expose:t,emit:o}){const n=at(()=>lt(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),r=at(()=>lt(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([8,1,2,7,3,4,5,9,10]),import.meta.url)),a=at(()=>lt(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([11,1,2]),import.meta.url)),{vue_ui_dag:s}=Nn(),{isThemeValid:i,warnInvalidTheme:l}=Fn(),c=e,h=o,f=O(null),p=O(vt()),b=O(null),S=O(null),A=O(null),G=O(0),oe=O(0),_e=O(!1),pe=O(!1),B=O(null),J=O(null),u=O(Je()),L=O(u.value.style.chart.width),Z=O(u.value.style.chart.height),ae=O({x:0,y:0}),U=O(null),ze=O(null),ee=O({left:"0px",top:"0px"}),kt=O("top"),ie=O(!1),Et=O({x:0,y:0}),_t=O({x:0,y:0}),Ce=O(null),Ye=O(null),qe=O({left:"0px",top:"0px"}),Ct=O("top"),Be=O(!1),xe=O(!1),{svgRef:le}=jn({config:u.value.style.chart.title}),{userOptionsVisible:He,setUserOptionsVisibility:xt,keepUserOptionState:Ot}=Dn({config:u.value}),ne=O(u.value.style.chart.layout.rankDirection),{loading:Oe,FINAL_DATASET:Nt,manualLoading:At}=An({...gn(c),FINAL_CONFIG:u,prepareConfig:Je,skeletonDataset:{nodes:[{id:"A",label:""},{id:"B",label:""},{id:"C",label:""}],edges:[{from:"A",to:"B"},{from:"A",to:"C"}]},skeletonConfig:yn({defaultConfig:u.value,userConfig:{userOptions:{show:!1},style:{chart:{backgroundColor:"#99999930",nodes:{stroke:"#CCCCCC",backgroundColor:"#DDDDDD50"},edges:{stroke:"#CCCCCC"},midpoints:{stroke:"#CCCCCC",fill:"#CCCCCC"}}}}})});function Je(){const d=ut({userConfig:c.config,defaultConfig:s}),m=d.theme;if(!m)return d;if(!i.value(d))return l(d),d;const w=ut({userConfig:Po[m]||c.config,defaultConfig:d});return ut({userConfig:c.config,defaultConfig:w})}const Xe=Q(()=>!!u.value.debug);Ht(async()=>{wn(c.dataset)&&(to({componentName:"VueUiDag",type:"dataset",debug:Xe.value}),pe.value=!1,At.value=!0),c.dataset.nodes||(to({componentName:"VueUiDag",type:"datasetAttributeEmpty",property:"nodes",index:0,debug:Xe.value}),pe.value=!1,At.value=!0),pe.value=!0,await Fe(),Yt()}),De(()=>c.config,async d=>{Oe.value||(u.value=Je()),He.value=!u.value.userOptions.showOnChartHover,G.value+=1,ne.value=u.value.style.chart.layout.rankDirection,L.value=u.value.style.chart.width,Z.value=u.value.style.chart.height,ve.value=u.value.style.chart.zoom.active,await Fe(),Yt()},{deep:!0});const{isPrinting:Mt,isImaging:St,generatePdf:$t,generateImage:Ft}=Sn({elementId:"dag_".concat(p.value),fileName:u.value.style.chart.title.text||"vue-ui-dag",options:u.value.userOptions.print}),zo=Q(()=>u.value.style.chart.backgroundColor),Bo=Q(()=>u.value.style.chart.title),{exportSvg:Vo,getSvg:Zo}=$n({svg:le,title:Bo,legend:void 0,legendItems:void 0,backgroundColor:zo});async function Dt({isCb:d}){if(d){const{blob:m,url:w,text:_,dataUrl:M}=await Zo();u.value.userOptions.callbacks.svg({blob:m,url:w,text:_,dataUrl:M})}else Vo()}function Wo(){_e.value=!0,xt(!0)}function Go(){xt(!1),_e.value=!1}function jt({tooltipRef:d,isVisibleRef:m,anchorRef:w,styleRef:_,placementRef:M,offsetRef:k,margin:y=24}){return function(){var Ne,Ae,Me,Se;const F=d.value;if(!F||!m.value)return;const $=F.getBoundingClientRect(),T=window.innerWidth,g=window.innerHeight,C=w.value.x,P=w.value.y,z=(Ae=(Ne=k==null?void 0:k.value)==null?void 0:Ne.x)!=null?Ae:0,X=(Se=(Me=k==null?void 0:k.value)==null?void 0:Me.y)!=null?Se:0;let I=P-X-$.height-y,Y=C-$.width/2,W="top";if(I<y){const ye=P+X+y;ye+$.height<=g-y?(I=ye,W="bottom"):(I=P-$.height/2,I<y&&(I=y),I+$.height>g-y&&(I=g-$.height-y),W="center")}Y<y&&(Y=y),Y+$.width>T-y&&(Y=T-$.width-y);const be=Y<=y,Ze=Y+$.width>=T-y;if((be||Ze)&&W!=="center"){let ye,$e;const dn=C-z-y;T-(C+z)-y>=dn?(ye="right",$e=C+z+y):(ye="left",$e=C-z-y-$.width),$e>=y&&$e+$.width<=T-y&&(Y=$e,I=P-$.height/2,I<y&&(I=y),I+$.height>g-y&&(I=g-$.height-y),W=ye)}M.value=W,_.value={left:"".concat(Y,"px"),top:"".concat(I,"px")}}}const Uo=Q(()=>Nt.value.nodes.map(d=>({...d,backgroundColor:d.backgroundColor?oo(d.backgroundColor):u.value.style.chart.nodes.backgroundColor,color:d.color?oo(d.color):u.value.style.chart.nodes.labels.color}))),Yo=Q(()=>Nt.value.edges),qo=Q(()=>({...u.value.style.chart.layout,rankDirection:ne.value})),{layoutData:x,lastError:It,arrowMarkerIdentifier:Ho}=Ss({nodes:Uo,edges:Yo,configuration:qo});function Rt(d){return x.value?x.value.nodes.find(m=>m.id===d):null}const Jo=Q(()=>{if(!x.value)return[];const d=u.value.style.chart.edges.stroke,m=new Set;return x.value.edges.forEach(w=>{var _;m.add(((_=w.original)==null?void 0:_.color)||d)}),Array.from(m)});function Lt(d){return"".concat(Ho,"-").concat(String(d).replace(/[^a-zA-Z0-9_-]/g,"_"))}const Tt=Q(()=>{const d=L.value,m=Z.value,w=Number(d),_=Number(m),M=Number.isFinite(w)&&w>0,k=Number.isFinite(_)&&_>0;return!M&&!k?null:{width:M?w:null,height:k?_:null}}),ue=O(null),ve=O(u.value.style.chart.zoom.active),{viewBox:me,resetZoom:Ve,setInitialViewBox:Xo,scale:Pt,zoomByFactor:zt}=On(le,{x:0,y:0,width:100,height:100},1,ve,()=>{ie.value=!1});function Qo(){ve.value=!ve.value}function Bt(){const d=x.value&&x.value.viewBox;if(!d)return;const m=String(d).split(" ").map(Number);if(m.length!==4)return;const[w,_,M,k]=m;if(!Number.isFinite(w)||!Number.isFinite(_)||!Number.isFinite(M)||!Number.isFinite(k))return;let y=M,F=k,$=w,T=_;const g=Tt.value;g&&(g.width!==null&&(y=g.width),g.height!==null&&(F=g.height),$=w-(y-M)/2,T=_-(F-k)/2),Xo({x:$,y:T,width:y,height:F},{overwriteCurrentIfNotZoomed:!0})}De(()=>x.value&&x.value.viewBox,()=>{Bt()},{immediate:!0}),De(()=>Tt.value,()=>{Bt()}),De(()=>xe.value,d=>{ve.value=!d});const Ko=Q(()=>{const d=me.value;return d?"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height):"0 0 0 0"}),ce=O(!1);function Vt(d){ce.value=d,oe.value+=1}function Qe(){xe.value=!xe.value}function Ke(){zt(bo,!0)}function et(){zt(1/bo,!0)}const tt=["TB","RL","BT","LR"];function ot(){ne.value=tt[(tt.indexOf(ne.value)+1)%tt.length],Ve()}const en=jt({tooltipRef:ze,isVisibleRef:Be,anchorRef:ae,styleRef:ee,placementRef:kt}),tn=jt({tooltipRef:Ye,isVisibleRef:ie,anchorRef:Et,styleRef:qe,placementRef:Ct,offsetRef:_t});async function on(d){h("onMidpointEnter",d);const m=le.value;if(!m||!(d!=null&&d.midpoint))return;const w=m.createSVGPoint();w.x=d.midpoint.x,w.y=d.midpoint.y;const _=m.getScreenCTM();if(!_)return;const M=w.matrixTransform(_);ae.value={x:M.x,y:M.y},U.value=d,Be.value=!0,await Fe(),en()}function nn(){Be.value=!1,U.value=null,h("onMidpointLeave")}async function Zt(d){if(h("onNodeClick",d),!u.value.style.chart.nodes.tooltip.showOnClick)return;const m=le.value;if(!m)return;const w=m.createSVGPoint();w.x=d.x,w.y=d.y;const _=m.getScreenCTM();if(!_)return;const M=w.matrixTransform(_),k=u.value.style.chart.layout.nodeWidth,y=u.value.style.chart.layout.nodeHeight,F=_.a,$=_.d,T=k*F,g=y*$;_t.value={x:T/2,y:g/2},Et.value={x:M.x,y:M.y},Ce.value=d,ie.value=!0,await Fe(),tn()}function Wt(){ie.value=!1,Ce.value=null}function Gt(d){if(!ie.value)return;const m=Ye.value;if(m&&m.contains(d.target))return;const w=le.value;w&&w.contains(d.target)&&d.target.closest(".vue-ui-dag-node")||Wt()}function Ut(d){d.key==="Escape"&&ie.value&&Wt()}Ht(()=>{document.addEventListener("mousedown",Gt),document.addEventListener("keydown",Ut)}),Jt(()=>{document.removeEventListener("mousedown",Gt),document.removeEventListener("keydown",Ut),B.value&&(J.value&&B.value.unobserve(J.value),B.value.disconnect())});function Yt(){if(!u.value.responsive){B.value&&(J.value&&B.value.unobserve(J.value),B.value.disconnect(),B.value=null,J.value=null);return}const d=Cn(()=>{var _;if(!f.value)return;const{width:m,height:w}=xn({chart:f.value,title:u.value.style.chart.title.text?b.value:null,legend:u.value.style.chart.controls.show?(_=A.value)==null?void 0:_.$el:null,source:S.value});requestAnimationFrame(()=>{L.value=Math.max(.1,m),Z.value=Math.max(.1,w-12)})});B.value&&(J.value&&B.value.unobserve(J.value),B.value.disconnect()),B.value=new ResizeObserver(d),J.value=f.value?f.value.parentNode:null,J.value&&B.value.observe(J.value),d()}function rn(d,m={}){var z;const{direction:w=-1,mode:_="oneLapNearest",dasharray:M=null}=m;if(!d||typeof d.getTotalLength!="function")return Xe.value&&console.warn("VueUiDag @getIdealDashoffsetDelta: invalid path element",d),0;const k=d.getTotalLength(),y=(z=M!=null?M:d.getAttribute("stroke-dasharray"))!=null?z:typeof getComputedStyle=="function"?getComputedStyle(d).strokeDasharray:"",F=P(y);if(!Number.isFinite(F)||F<=0)return w*k;const $=Math.max(1,Math.round(k/F)),T=Math.max(1,Math.ceil(k/F)),g=Math.max(1,Math.floor(k/F));let C;return _==="pattern"?C=F:_==="oneLapCeil"?C=T*F:_==="oneLapFloor"?C=g*F:C=$*F,w*C;function P(X){if(!X||X==="none")return NaN;const I=String(X).replace(/,/g," ").trim().split(/\s+/).map(W=>Number.parseFloat(W)).filter(W=>Number.isFinite(W));if(!I.length)return NaN;const Y=I.reduce((W,be)=>W+be,0);return I.length%2===1?Y*2:Y}}const nt=O(new Map),rt=O(new Map);function sn(d){return function(m){m?nt.value.set(d,m):nt.value.delete(d)}}function qt(){rt.value.forEach(d=>{try{d.cancel()}catch(m){}}),rt.value.clear()}function an(){var _,M;qt();const d=(M=(_=x.value)==null?void 0:_.edges)!=null?M:[];if(!d.length)return;const m=u.value.style.chart.edges.animations,w=Number(m.referenceDistance)>0?Number(m.referenceDistance):24;d.forEach(k=>{var W,be,Ze,Ne,Ae,Me,Se;if(!((W=k==null?void 0:k.original)!=null&&W.animated))return;const y=nt.value.get(k.id);if(!y)return;const F=(Ze=(be=k==null?void 0:k.original)==null?void 0:be.dasharray)!=null?Ze:m.dasharray;y.style.strokeDasharray=String(F),y.style.strokeDashoffset="0";const $=![void 0,null].includes((Ne=k==null?void 0:k.original)==null?void 0:Ne.animationDirection),T=![void 0,null].includes(m.animationDirection),g=$?Number(k.original.animationDirection):T?Number(m.animationDirection):-1,C=rn(y,{direction:g,mode:"oneLapNearest",dasharray:String(F)}),P=(Se=(Me=(Ae=k==null?void 0:k.original)==null?void 0:Ae.animationDurationMs)!=null?Me:m.animationDurationMs)!=null?Se:1e3,z=Number(P),X=Number.isFinite(z)&&z>0?w/z:w/1e3,I=Math.max(1,Math.round(Math.abs(C)/Math.max(1e-9,X))),Y=y.animate([{strokeDashoffset:0},{strokeDashoffset:C}],{duration:I,iterations:1/0,easing:"linear"});rt.value.set(k.id,Y)})}De(()=>x.value&&x.value.edges,async()=>{await Fe(),an()},{deep:!0,immediate:!0}),Jt(()=>{qt()});async function ln({scale:d=2}={}){var y;if(!f.value)return;const{width:m,height:w}=f.value.getBoundingClientRect(),_=m/w,{imageUri:M,base64:k}=await Rn({domElement:f.value,base64:!0,img:!0,scale:d});return{imageUri:M,base64:k,title:(y=u.value.style.chart.title.text)!=null?y:"vue-ui-dag",width:m,height:w,aspectRatio:_}}const de=Q(()=>{const d=Number(u.value.style.chart.layout.nodeHeight);return Number.isFinite(d)&&d>0?d/u.value.style.chart.backgroundPattern.spacingRatio:12}),un=Q(()=>de.value*(u.value.style.chart.backgroundPattern.dotRadiusRatio/100));function cn(){return x.value}return t({getData:cn,getImage:ln,generatePdf:$t,generateSvg:Dt,generateImage:Ft,toggleAnnotator:Qe,toggleFullscreen:Vt,zoomIn:Ke,zoomOut:et,resetZoom:Ve,switchDirection:ot}),(d,m)=>{var w,_,M,k,y,F,$,T;return E(),N("div",{class:Xt("vue-data-ui-component vue-ui-dag ".concat(ce.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(u.value.responsive?"vue-ui-dag-responsive":"")),id:"dag_".concat(p.value),ref_key:"dagChart",ref:f,style:he({fontFamily:u.value.style.fontFamily,backgroundColor:u.value.style.chart.backgroundColor,padding:"0.5rem"}),onMouseenter:Wo,onMouseleave:Go},[v(It)?(E(),N("div",Fs,je(String(v(It))),1)):D("",!0),u.value.userOptions.buttons.annotator?(E(),re(v(n),{key:1,svgRef:v(le),backgroundColor:u.value.style.chart.backgroundColor,color:u.value.style.chart.color,active:xe.value,onClose:Qe},{"annotator-action-close":V(()=>[j(d.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":V(({color:g})=>[j(d.$slots,"annotator-action-color",q(H({color:g})),void 0,!0)]),"annotator-action-draw":V(({mode:g})=>[j(d.$slots,"annotator-action-draw",q(H({mode:g})),void 0,!0)]),"annotator-action-undo":V(({disabled:g})=>[j(d.$slots,"annotator-action-undo",q(H({disabled:g})),void 0,!0)]),"annotator-action-redo":V(({disabled:g})=>[j(d.$slots,"annotator-action-redo",q(H({disabled:g})),void 0,!0)]),"annotator-action-delete":V(({disabled:g})=>[j(d.$slots,"annotator-action-delete",q(H({disabled:g})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):D("",!0),u.value.userOptions.show&&pe.value&&(v(Ot)||v(He))?(E(),re(v(r),{ref:"userOptionsRef",key:"user_option_".concat(oe.value),backgroundColor:u.value.style.chart.backgroundColor,color:u.value.style.chart.color,isPrinting:v(Mt),isImaging:v(St),uid:p.value,hasTooltip:!1,hasTable:!1,hasXls:!1,hasLabel:!1,hasPdf:u.value.userOptions.buttons.pdf,hasImg:u.value.userOptions.buttons.img,hasSvg:u.value.userOptions.buttons.svg,hasFullscreen:u.value.userOptions.buttons.fullscreen,isFullscreen:ce.value,chartElement:f.value,position:u.value.userOptions.position,titles:{...u.value.userOptions.buttonTitles},hasAnnotator:u.value.userOptions.buttons.annotator,isAnnotation:xe.value,callbacks:u.value.userOptions.callbacks,printScale:u.value.userOptions.print.scale,hasZoom:u.value.userOptions.buttons.zoom,isZoom:ve.value,onToggleFullscreen:Vt,onGeneratePdf:v($t),onGenerateImage:v(Ft),onGenerateSvg:Dt,onToggleAnnotator:Qe,onToggleZoom:Qo,style:he({visibility:v(Ot)?v(He)?"visible":"hidden":"visible"})},pn({_:2},[d.$slots.menuIcon?{name:"menuIcon",fn:V(({isOpen:g,color:C})=>[j(d.$slots,"menuIcon",q(H({isOpen:g,color:C})),void 0,!0)]),key:"0"}:void 0,d.$slots.optionPdf?{name:"optionPdf",fn:V(()=>[j(d.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,d.$slots.optionImg?{name:"optionImg",fn:V(()=>[j(d.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,d.$slots.optionSvg?{name:"optionSvg",fn:V(()=>[j(d.$slots,"optionSvg",{},void 0,!0)]),key:"3"}:void 0,d.$slots.optionFullscreen?{name:"optionFullscreen",fn:V(({toggleFullscreen:g,isFullscreen:C})=>[j(d.$slots,"optionFullscreen",q(H({toggleFullscreen:g,isFullscreen:C})),void 0,!0)]),key:"4"}:void 0,d.$slots.optionAnnotator?{name:"optionAnnotator",fn:V(({toggleAnnotator:g,isAnnotator:C})=>[j(d.$slots,"optionAnnotator",q(H({toggleAnnotator:g,isAnnotator:C})),void 0,!0)]),key:"5"}:void 0,d.$slots.optionZoom?{name:"optionZoom",fn:V(({toggleZoom:g,isZoomLocked:C})=>[j(d.$slots,"optionZoom",q(H({toggleZoom:g,isZoomLocked:C})),void 0,!0)]),key:"6"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasSvg","hasFullscreen","isFullscreen","chartElement","position","titles","hasAnnotator","isAnnotation","callbacks","printScale","hasZoom","isZoom","onGeneratePdf","onGenerateImage","style"])):D("",!0),u.value.style.chart.title.text?(E(),N("div",{key:3,ref_key:"chartTitle",ref:b,style:"width:100%;background:transparent;"},[(E(),re(In,{key:"title_".concat(G.value),config:{title:{cy:"dag-title",...u.value.style.chart.title},subtitle:{cy:"dag-subtitle",...u.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):D("",!0),u.value.style.chart.controls.position==="top"&&!v(Oe)&&u.value.style.chart.controls.show?(E(),re(no,{key:4,ref_key:"zoomControls",ref:A,config:u.value,scale:v(Pt),isFullscreen:ce.value,withDirection:"",onZoomIn:Ke,onZoomOut:et,onResetZoom:m[0]||(m[0]=()=>v(Ve)(!0)),onSwitchDirection:ot},null,8,["config","scale","isFullscreen"])):D("",!0),v(x)?(E(),N("svg",{key:5,ref_key:"svgRef",ref:le,class:Xt({"vue-ui-dag-svg":!0,"vue-data-ui-loading":v(Oe)}),viewBox:Ko.value,xmlns:v(kn),style:he({backgroundColor:u.value.style.chart.backgroundColor,height:"100%",width:"100%"})},[st(v(a)),u.value.style.chart.backgroundPattern.show?(E(),N("defs",js,[te("pattern",{id:"dag_bg_pattern_".concat(p.value),patternUnits:"userSpaceOnUse",width:de.value,height:de.value},[j(d.$slots,"background-pattern",q(H({x:de.value/2,y:de.value/2,color:u.value.style.chart.backgroundPattern.dotColor})),()=>[te("circle",{cx:de.value/2,cy:de.value/2,r:un.value,fill:u.value.style.chart.backgroundPattern.dotColor},null,8,Rs)],!0)],8,Is)])):D("",!0),u.value.style.chart.backgroundPattern.show?(E(),N("rect",{key:1,x:(_=(w=v(me))==null?void 0:w.x)!=null?_:0,y:(k=(M=v(me))==null?void 0:M.y)!=null?k:0,width:(F=(y=v(me))==null?void 0:y.width)!=null?F:0,height:(T=($=v(me))==null?void 0:$.height)!=null?T:0,fill:"url(#dag_bg_pattern_".concat(p.value,")"),style:he({pointerEvents:"none",opacity:u.value.style.chart.backgroundPattern.opacity})},null,12,Ls)):D("",!0),v(x).arrowShape!=="undirected"?(E(),N("defs",Ts,[(E(!0),N(fe,null,Ie(Jo.value,g=>(E(),N("marker",{key:g,id:Lt(g),markerWidth:v(x).arrowSize,markerHeight:v(x).arrowSize,refX:v(x).arrowSize-3,refY:v(x).arrowSize/2,orient:"auto",markerUnits:"strokeWidth"},[v(x).arrowShape==="normal"?(E(),N("path",{key:0,d:"M 0 0 L ".concat(v(x).arrowSize," ").concat(v(x).arrowSize/2," L 0 ").concat(v(x).arrowSize," Z"),fill:g,stroke:g,"stroke-width":"0"},null,8,zs)):(E(),N("path",{key:1,d:"M 0 0 L ".concat(v(x).arrowSize," ").concat(v(x).arrowSize/2," L 0 ").concat(v(x).arrowSize," L ").concat(v(x).arrowSize/3," ").concat(v(x).arrowSize/2," Z"),fill:g,stroke:g,"stroke-width":"0"},null,8,Bs))],8,Ps))),128))])):D("",!0),te("g",Vs,[(E(!0),N(fe,null,Ie(v(x).edges,g=>{var C,P,z,X;return E(),N(fe,{key:g.id},[te("path",{"data-cy-edge":"",ref_for:!0,ref:sn(g.id),d:g.pathData,fill:"none",stroke:(C=g.original.color)!=null?C:u.value.style.chart.edges.stroke,"stroke-width":u.value.style.chart.edges.strokeWidth*(g.from===ue.value||g.id===((P=U.value)==null?void 0:P.id)?2:1),"stroke-linecap":"round","stroke-linejoin":"round",style:{"pointer-events":"none",transition:"stroke-width 0.2s ease-in-out"}},null,8,Zs),u.value.style.chart.midpoints.show?(E(),N("circle",{key:0,"data-cy-midpoint":"",class:"vue-ui-dag-edge-midpoint",cx:g.midpoint.x,cy:g.midpoint.y,r:u.value.style.chart.midpoints.radius,fill:u.value.style.chart.midpoints.fill,stroke:(z=g.original.color)!=null?z:u.value.style.chart.midpoints.stroke,"stroke-width":u.value.style.chart.midpoints.strokeWidth*(g.from===ue.value||g.id===((X=U.value)==null?void 0:X.id)?2:1),style:{transition:"stroke-width 0.2s ease-in-out"},onMouseenter:I=>on(g),onMouseleave:nn},null,40,Ws)):D("",!0)],64)}),128))]),te("g",Gs,[(E(!0),N(fe,null,Ie(v(x).nodes,g=>(E(),N("g",{key:g.id,class:"vue-ui-dag-node",onClick:Qt(C=>u.value.style.chart.nodes.tooltip.showOnClick&&Zt(g),["stop"]),onMouseenter:C=>ue.value=g.id,onMouseleave:m[1]||(m[1]=C=>ue.value=null)},[d.$slots.node?D("",!0):(E(),N("rect",{key:0,"data-cy-node":"",x:g.x-g.width/2,y:g.y-g.height/2,width:g.width,height:g.height,rx:u.value.style.chart.nodes.borderRadius,fill:g.original.backgroundColor,stroke:u.value.style.chart.nodes.stroke,"stroke-width":u.value.style.chart.nodes.strokeWidth,style:he({cursor:u.value.style.chart.nodes.tooltip.showOnClick?"pointer":"default"})},null,12,Ys)),d.$slots.node?(E(),N("foreignObject",{key:1,x:g.x-g.width/2,y:g.y-g.height/2,width:g.width,height:g.height},[j(d.$slots,"node",it({ref_for:!0},{node:g,orientation:ne.value}),void 0,!0)],8,qs)):D("",!0)],40,Us))),128))]),te("g",Hs,[(E(!0),N(fe,null,Ie(v(x).edges,g=>{var C,P;return E(),N("path",{key:g.id,d:g.pathData,fill:"none",stroke:"transparent","stroke-width":u.value.style.chart.edges.strokeWidth*(g.from===ue.value||g.id===((C=U.value)==null?void 0:C.id)?1.3:1),"stroke-linecap":"round","stroke-linejoin":"round","marker-end":v(x).arrowShape==="undirected"?null:"url(#".concat(Lt(((P=g.original)==null?void 0:P.color)||u.value.style.chart.edges.stroke),")"),style:{"pointer-events":"none",transition:"stroke-width 0.2s ease-in-out"}},null,8,Js)}),128))]),te("g",Xs,[(E(!0),N(fe,null,Ie(v(x).nodes,g=>(E(),N("g",{key:g.id,onClick:Qt(C=>u.value.style.chart.nodes.tooltip.showOnClick&&Zt(g),["stop"]),onMouseenter:C=>ue.value=g.id,onMouseleave:m[2]||(m[2]=C=>ue.value=null)},[d.$slots["free-node-label"]?D("",!0):(E(),N(fe,{key:0},[d.$slots["node-label"]?(E(),N("text",{key:0,x:g.x,y:g.y+u.value.style.chart.nodes.labels.fontSize/3,"text-anchor":"middle","font-size":u.value.style.chart.nodes.labels.fontSize,fill:g.original.color,"font-weight":u.value.style.chart.nodes.labels.bold?"bold":"normal"},[j(d.$slots,"node-label",it({ref_for:!0},{node:g,orientation:ne.value}),()=>[vn(je(g.label),1)],!0)],8,Ks)):!d.$slots["free-node-label"]&&!d.$slots.node?(E(),N("text",{key:1,"data-cy-node-label":"",x:g.x,y:g.y+u.value.style.chart.nodes.labels.fontSize/3,"text-anchor":"middle","font-size":u.value.style.chart.nodes.labels.fontSize,fill:g.original.color,"font-weight":u.value.style.chart.nodes.labels.bold?"bold":"normal",innerHTML:v(En)({content:g.label,fontSize:u.value.style.chart.nodes.labels.fontSize,fontWeight:u.value.style.chart.nodes.labels.bold?"bold":"normal",fill:g.original.color,x:g.x,y:g.y,autoOffset:!0})},null,8,ea)):D("",!0)],64)),d.$slots["free-node-label"]?(E(),N("g",ta,[j(d.$slots,"free-node-label",it({ref_for:!0},{node:g,layoutData:v(x),orientation:ne.value}),void 0,!0)])):D("",!0)],40,Qs))),128))]),j(d.$slots,"svg",{svg:{drawingArea:v(me),data:v(x),orientation:ne.value}},void 0,!0)],14,Ds)):D("",!0),d.$slots.watermark?(E(),N("div",oa,[j(d.$slots,"watermark",q(H({isPrinting:v(Mt)||v(St)})),void 0,!0)])):D("",!0),st(eo,{name:"fade"},{default:V(()=>[Be.value?(E(),re(Kt,{key:0,to:ce.value?f.value:"body"},[te("div",{"data-cy-tooltip-midpoint":"",ref_key:"tooltipRef",ref:ze,class:"vue-ui-dag-tooltip",style:he({...ee.value,maxWidth:u.value.style.chart.midpoints.tooltip.maxWidth,"--vue-data-ui-dag-tooltip-background":u.value.style.chart.midpoints.tooltip.backgroundColor,"--vue-data-ui-dag-tooltip-color":u.value.style.chart.midpoints.tooltip.color}),"data-position":kt.value},[j(d.$slots,"tooltip-midpoint",q(H({edge:U.value,layoutData:v(x)})),()=>{var g,C,P,z;return[U.value?(E(),N("div",ra,je((C=(g=Rt(U.value.from))==null?void 0:g.label)!=null?C:U.value.from)+" → "+je((z=(P=Rt(U.value.to))==null?void 0:P.label)!=null?z:U.value.to),1)):D("",!0)]},!0)],12,na)],8,["to"])):D("",!0)]),_:3}),st(eo,{name:"fade"},{default:V(()=>[ie.value?(E(),re(Kt,{key:0,to:ce.value?f.value:"body"},[te("div",{"data-cy-tooltip-node":"",ref_key:"nodeTooltipRef",ref:Ye,class:"vue-ui-dag-node-tooltip",style:he({maxWidth:u.value.style.chart.nodes.tooltip.maxWidth,left:qe.value.left,top:qe.value.top,"--vue-data-ui-dag-node-tooltip-background":u.value.style.chart.nodes.tooltip.backgroundColor,"--vue-data-ui-dag-node-tooltip-color":u.value.style.chart.nodes.tooltip.color}),"data-position":Ct.value},[j(d.$slots,"tooltip-node",q(H({node:Ce.value,layoutData:v(x)})),()=>[Ce.value?(E(),N("div",aa,je(Ce.value.label),1)):D("",!0)],!0)],12,sa)],8,["to"])):D("",!0)]),_:3}),u.value.style.chart.controls.position==="bottom"&&!v(Oe)&&u.value.style.chart.controls.show?(E(),re(no,{key:7,ref_key:"zoomControls",ref:A,config:u.value,scale:v(Pt),isFullscreen:ce.value,withDirection:"",onZoomIn:Ke,onZoomOut:et,onResetZoom:m[3]||(m[3]=()=>v(Ve)(!0)),onSwitchDirection:ot},null,8,["config","scale","isFullscreen"])):D("",!0),d.$slots.source?(E(),N("div",{key:8,ref_key:"source",ref:S,dir:"auto"},[j(d.$slots,"source",{},void 0,!0)],512)):D("",!0),v(Oe)?(E(),re(Mn,{key:9})):D("",!0)],46,$s)}}},la=bn(ia,[["__scopeId","data-v-5cf3932e"]]),Na=Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"}));export{Oa as a,Na as b,la as v};
