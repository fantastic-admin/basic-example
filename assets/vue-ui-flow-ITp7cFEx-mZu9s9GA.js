
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-68Yi_FFl-CRPaJsgv.js","./vue-data-ui-BN9YfUec.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./vue-ui-accordion-UpZ765hd-DndPzmcD.js","./useNestedProp-dJX_8vvZ-BzBW50KN.js","./DataTable-BT7VF2ua-Cw2NNXsE.js","./Shape-CNXKB8O0-BJGuTKHC.js","./PenAndPaper-DSvu9dwa-B6YjX2xm.js","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js","./PackageVersion-TgflyMpU-q2MkeeNq.js","./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"])))=>i.map(i=>d[i]);
import{e as v,J as h,E as rl,a7 as ul,K as Ae,b_ as V,c as g,o as c,z as Q,A as O,f as j,g as Te,u,c0 as $t,h as b,r as C,j as ee,k as te,O as G,n as xt,F as de,R as he,t as pe,bn as il,l as At,m as cl,N as vl,c1 as W,a9 as dl}from"./index-DXZKKOp8.js";import{s as hl,Q as We,A as pl,g as Tt,p as gl,v as fl,m as z,C as ml,c as E,a as yl,f as ge,y as bl,K as Ot,a4 as kl,I as Ue,e as Cl,r as wl,F as _l}from"./vue-data-ui-BN9YfUec.js";import{E as $l,M as xl}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as Al,o as Et}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{m as Tl}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{S as Ol,T as El}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{O as Il}from"./useSvgExport-DrjCWun4-CbW14PXm.js";import{a as Fl}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as Sl}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import{J as Pl}from"./themes-AUNCOb2G-RAhReTPj.js";import Ml from"./Legend-G6GMcdAc-7HaGLNN7.js";import Nl from"./Title-BWp-37K_-BMUMQpSO.js";import Dl from"./img-BecE5qXd-CsL1o-EN.js";import"./alert-l5XlVwCh.js";import"./Shape-CNXKB8O0-BJGuTKHC.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";const Rl=["id"],zl={key:1,ref:"noTitle",class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},Bl=["id"],Ll=["xmlns","viewBox"],Vl=["width","height"],jl=["id"],Gl=["stop-color"],Wl=["stop-color"],Ul=["d","fill","stroke","stroke-width"],Yl=["x","y","height","width","fill","stroke","stroke-width","onMouseenter","onMouseleave","onClick"],Hl={key:1},Kl=["x","y","font-size","fill"],ql=["x","y","font-size","fill"],Ql={key:4,class:"vue-data-ui-watermark"},Jl=["id"],Xl=["onClick"],Zl=["innerHTML"],eo={__name:"vue-ui-flow",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},setup(It,{expose:Ft}){const St=V(()=>W(()=>import("./Tooltip-68Yi_FFl-CRPaJsgv.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),Pt=V(()=>W(()=>import("./vue-data-ui-BN9YfUec.js").then(t=>t.aw),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),Mt=V(()=>W(()=>import("./vue-ui-accordion-UpZ765hd-DndPzmcD.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),Nt=V(()=>W(()=>import("./DataTable-BT7VF2ua-Cw2NNXsE.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),Dt=V(()=>W(()=>import("./PenAndPaper-DSvu9dwa-B6YjX2xm.js"),__vite__mapDeps([10,2,3,1,4,5,11,12]),import.meta.url)),Rt=V(()=>W(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([13,2,3,12,1,4,5,14,15]),import.meta.url)),zt=V(()=>W(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([16,2,3]),import.meta.url)),Bt=V(()=>W(()=>import("./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_flow:Lt}=Al(),P=It,U=v(We()),D=v(null),Ye=v(0),He=v(0),Oe=v(!1),Ee=v(""),Ke=v(null),qe=v(null),Qe=v(null),le=v(null),fe=v(null),Je=v(!1),oe=v(null),Ie=v(null),Xe=h(()=>!!P.dataset&&P.dataset.length);rl(()=>{Je.value=!0,et()});const Y=v(!1);function Ze(t){Y.value=t,Ye.value+=1}const e=v(Ne()),{loading:Fe,FINAL_DATASET:me,manualLoading:Se}=Ol({...ul(P),FINAL_CONFIG:e,prepareConfig:Ne,skeletonDataset:[["A","B",2,"#CACACA"],["B","C",1,"#CACACA"],["C","D",.5,"#CACACA"],["E","F",1,"#AAAAAA"],["F","G",.5,"#AAAAAA"],["G","H",.25,"#AAAAAA"]],skeletonConfig:pl({defaultConfig:e.value,userConfig:{userOptions:{show:!1},nodeCategories:{B:"A",C:"B"},nodeCategoryColors:{A:"#CACACA",B:"#AAAAAA"},table:{show:!1},style:{chart:{backgroundColor:"#99999930",legend:{backgroundColor:"transparent"},nodes:{labels:{show:!1},stroke:"#666666"},links:{stroke:"#666666"}}}}})}),Vt=h(()=>!!e.value.debug);function et(){if(Tt(P.dataset)&&(gl({componentName:"VueUiFlow",type:"dataset",debug:Vt.value}),Se.value=!0),Tt(P.dataset)||(Se.value=e.value.loading),e.value.responsive){const t=$l(()=>{const{width:o,height:l}=xl({chart:D.value,title:e.value.style.chart.title.text?qe.value:null,legend:e.value.style.chart.legend.show?Ke.value:null,source:Qe.value});requestAnimationFrame(()=>{ot.value=o,at.value=l})});le.value&&(fe.value&&le.value.unobserve(fe.value),le.value.disconnect()),le.value=new ResizeObserver(t),fe.value=D.value.parentNode,le.value.observe(fe.value)}}const{userOptionsVisible:Pe,setUserOptionsVisibility:tt,keepUserOptionState:lt}=Fl({config:e.value}),{svgRef:Me}=Sl({config:e.value.style.chart.title});function Ne(){const t=Et({userConfig:P.config,defaultConfig:Lt});let o=t;return t.theme?o={...Et({userConfig:Pl.vue_ui_flow[t.theme]||P.config,defaultConfig:t}),customPalette:fl[t.theme]||z}:o=t,o.nodeCategories=P.config.nodeCategories||{},o.nodeCategoryColors=P.config.nodeCategoryColors||{},o}const ot=v(e.value.style.chart.width),at=v(e.value.style.chart.height);Ae(()=>P.config,t=>{Fe.value||(e.value=Ne()),Pe.value=!e.value.userOptions.showOnChartHover,et(),He.value+=1,M.value.showTable=e.value.table.show},{deep:!0}),Ae(()=>P.dataset,t=>{Array.isArray(t)&&t.length>0&&(Se.value=!1)},{deep:!0});const{isPrinting:st,isImaging:nt,generatePdf:rt,generateImage:ut}=Tl({elementId:"flow_".concat(U.value),fileName:e.value.style.chart.title.text||"vue-ui-flow",options:e.value.userOptions.print}),jt=h(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),ye=h(()=>ml(e.value.customPalette)),be=h(()=>e.value.style.chart.nodes.width),M=v({showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show});Ae(e,()=>{M.value={showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}},{immediate:!0});const it=h(()=>!me.value||!me.value.length?[]:me.value.map((t,o)=>[t[0],t[1],E(t[2]),t[3]?yl(t[3]):ye.value[o]||ye.value[o%ye.value.length]||z[o]||z[o%z.length]]));function Gt(t){var Ct,wt;const o={},l={};function a(s,r){o[s]||(o[s]={level:null,inflow:0,outflow:0,children:[],color:null,uid:We()}),o[s].level===null&&(o[s].level=r),l[r]||(l[r]=[]),l[r].includes(s)||l[r].push(s)}t.forEach(([s,r,i])=>{var p,$;const f=($=(p=o[s])==null?void 0:p.level)!=null?$:0,_=f+1;a(s,f),a(r,_),o[s].children.push({target:r,value:i}),o[s].outflow+=i,o[r].inflow+=i});const n=new Set(t.map(([s])=>s)),x=new Set(t.map(([,s])=>s)),X=Array.from(n).filter(s=>!x.has(s)),ue={};X.forEach((s,r)=>{ue[s]=ye.value[r]||z[r%z.length]});const ie={};t.forEach(([s,r,i,f])=>{f&&(ie[s]=f,ie[r]=f)}),Object.keys(o).forEach((s,r)=>{var _,p;const i=(_=e.value.nodeCategories)==null?void 0:_[s],f=i?(p=e.value.nodeCategoryColors)==null?void 0:p[i]:null;o[s].color=ie[s]||f||(X.includes(s)?ue[s]:null)||z[r%z.length]}),Object.keys(o).forEach(s=>{o[s].value=Math.max(o[s].inflow,o[s].outflow)});const _e=ae.value,Le=dt.value.width,Z=dt.value.height,R=Object.keys(l).map(Number).sort((s,r)=>s-r),$e=R.length||1,Ve=$e>1?Le/($e-1):0,A=Number(be.value),N=Number((wt=(Ct=e.value.style.chart.nodes.gapPx)!=null?Ct:e.value.style.chart.nodes.gap)!=null?wt:8),ce=Number(e.value.style.chart.nodes.minHeight||0);function d(s){const r=l[s],i=r.length;if(!i)return 1/0;const f=Math.max(0,(i-1)*N),_=Math.max(0,Z-f),p=Math.min(ce,i?_/i:0);let $=0,T=r.map(y=>o[y].value||0),k=T.reduce((y,F)=>y+F,0);for(let y=0;y<12;y+=1){const F=k>0?(_-$)/k:0,B=[];for(let S=0;S<T.length;S+=1){const L=T[S];L<0||L*F<p&&B.push(S)}if(!B.length)return Math.max(0,F);for(const S of B)$+=p,k-=T[S],T[S]=-1;if(k<=0)return 0}return k>0?Math.max(0,(_-$)/k):0}const m=R.map(d),K=m.length?Math.min(...m):0,q={};R.forEach(s=>{const r=l[s],i=r.length,f=Math.max(0,(i-1)*N),_=Math.max(0,Z-f),p=Math.min(ce,i?_/i:0),$=r.map(y=>Math.max(p,(o[y].value||0)*K)),T=$.reduce((y,F)=>y+F,0)+f;let k=Math.max(0,(Z-T)/2);r.forEach((y,F)=>{const B=$[F],S=_e.left+s*Ve,L=k;q[y]={x:S,y:L,absoluteY:L,height:B,i:F,color:o[y].color,value:o[y].value},k+=B,F<i-1&&(k+=N)})});const kt=[],ve=_e.top,je={},Ge={};Object.keys(o).forEach(s=>{var r,i;je[s]=(i=(r=q[s])==null?void 0:r.y)!=null?i:0,Ge[s]=0});const ll=1e-6,ol=.25;return R.forEach(s=>{l[s].forEach(r=>{const i=o[r],f=q[r];if(!i.children||!i.children.length)return;let _=f.y;i.children.forEach(({target:p,value:$})=>{const T=q[p],k=o[p],y=i.outflow>0?$/i.outflow:0,F=k.inflow>0?$/k.inflow:0,B=E(_+ve),S=E(_+y*f.height+ve),L=je[p];let xe=L+F*T.height;Ge[p]+=$;const al=k.inflow>0&&Ge[p]>=k.inflow-ll,_t=T.y+T.height;(al||xe>_t-ol)&&(xe=_t);const sl=E(L+ve),nl=E(xe+ve);kt.push({id:We(),source:r,target:p,path:"M ".concat(E(f.x+A)," ").concat(B," L ").concat(E(f.x+A)," ").concat(S," L ").concat(E(T.x)," ").concat(nl," L ").concat(E(T.x)," ").concat(sl," Z"),value:$,sourceColor:i.color,targetColor:o[p].color}),_=S-ve,je[p]=xe})})}),{nodeCoordinates:q,links:kt}}const I=h(()=>{const t=Gt(me.value);return{nodes:Object.keys(t.nodeCoordinates).map((o,l)=>({...t.nodeCoordinates[o],name:o})),links:t.links}}),ct=h(()=>ot.value),vt=h(()=>at.value),ae=h(()=>e.value.style.chart.padding),dt=h(()=>({width:Math.max(0,ct.value-40-ae.value.right-ae.value.left),height:Math.max(0,vt.value-ae.value.top-ae.value.bottom)})),se=h(()=>({width:ct.value,height:vt.value}));function Wt(t){const o={},l={},a=new Set;return it.value.forEach(([n,x,X])=>{o[n]||(o[n]=[]),l[x]||(l[x]=[]),o[n].push(x),l[x].push(n)}),o[t]&&o[t].forEach(n=>a.add(n)),l[t]&&l[t].forEach(n=>a.add(n)),Array.from(a).concat(t)}const w=v(null),J=v(null),ne=v(null),ke=v(!1);function Ut(t,o){H.value=[],w.value=Wt(t.name),J.value=t.name;const l=t.name,a=it.value;let n=0,x=0,X=[],ue=[];const ie=new Set(a.map(([d])=>d)),_e=new Set(a.map(([,d])=>d)),Le=Array.from(ie).filter(d=>!_e.has(d)),Z=a.filter(([d])=>Le.includes(d)).reduce((d,[m,K,q])=>d+q,0),R={};I.value.nodes.forEach(d=>{R[d.name]=d.color}),a.forEach(([d,m,K])=>{m===l&&(n+=K,X.push({source:d,value:K,color:R[d]})),d===l&&(x+=K,ue.push({target:m,value:K,color:R[m]}))});const $e=Math.max(n,x),Ve=Z>0?$e/Z*100:0,A={name:l,inflow:n,outflow:x,from:X,to:ue,percentOfTotal:Ve,color:R[l]||"#000000"};e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:A,seriesIndex:o}),ne.value={datapoint:A},Oe.value=!0;let N="";const ce=e.value.style.chart.tooltip.customFormat;if(ke.value=!1,_l(ce))try{const d=ce({datapoint:A,series:I.value,config:e.value});typeof d=="string"&&(Ee.value=d,ke.value=!0)}catch(d){console.warn("Custom format cannot be applied.")}if(!ke.value){const d=e.value.style.chart.tooltip.showPercentage?"<div>".concat(ge({p:e.value.style.chart.tooltip.translations.percentOfTotal,v:A.percentOfTotal,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),"</div>"):"";N+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(e.value.style.chart.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;"><span style="margin-right:4px; color:').concat(A.color,'">⏹</span>').concat(A.name).concat(d,"</div>"),A.from.length&&(N+="<div>".concat(e.value.style.chart.tooltip.translations.from,"</div>"),A.from.forEach(m=>{N+='<div><span style="color:'.concat(m.color,'">⏹←</span> ').concat(m.source,": ").concat(Ue(e.value.style.chart.nodes.labels.formatter,m.value,ge({p:e.value.style.chart.nodes.labels.prefix,v:m.value,s:e.value.style.chart.nodes.labels.suffix,r:e.value.style.chart.nodes.labels.rounding})),"</div>")})),A.to.length&&(N+='<div style="margin-top:6px;">'.concat(e.value.style.chart.tooltip.translations.to,"</div>"),A.to.forEach(m=>{N+='<div><span style="color:'.concat(m.color,'">⏹→</span> ').concat(m.target,": ").concat(Ue(e.value.style.chart.nodes.labels.formatter,m.value,ge({p:e.value.style.chart.nodes.labels.prefix,v:m.value,s:e.value.style.chart.nodes.labels.suffix,r:e.value.style.chart.nodes.labels.rounding})),"</div>")})),Ee.value=N}}function ht(t){const o=ne.value;e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:o,seriesIndex:t}),w.value=null,J.value=null,Oe.value=!1}function Yt(t){const o=ne.value;e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:o,seriesIndex:t})}const pt=h(()=>I.value.links.map(({source:t,target:o,sourceColor:l,targetColor:a,value:n})=>({source:t,target:o,sourceColor:l,targetColor:a,value:n})));function De(t=null){dl(()=>{const o=pt.value.map((n,x)=>[[n.source],[n.target],[n.value]]),l=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[e.value.table.columnNames.source],[e.value.table.columnNames.target],[e.value.table.columnNames.value]]].concat(o),a=Cl(l);t?t(a):wl({csvContent:a,title:e.value.style.chart.title.text||"vue-ui-flow"})})}const Ce=h(()=>{const t=[e.value.table.columnNames.source,e.value.table.columnNames.target,e.value.table.columnNames.value],o=pt.value.map((a,n)=>[{color:a.sourceColor,name:a.source,shape:"square"},{color:a.targetColor,name:a.target,shape:"square"},ge({p:e.value.style.chart.nodes.labels.prefix,v:a.value,s:e.value.style.chart.nodes.labels.suffix,r:e.value.style.chart.nodes.labels.rounding})]),l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:[e.value.table.columnNames.source,e.value.table.columnNames.target,e.value.table.columnNames.value],head:t,body:o,config:l}});function Ht(){return I.value}function gt(){M.value.showTable=!M.value.showTable}const we=v(!1);function Re(){we.value=!we.value}function ft(){M.value.showTooltip=!M.value.showTooltip}const mt=h(()=>{const t=new Set(I.value.nodes.map(o=>e.value.nodeCategories[o.name]||"__uncategorized__"));return Array.from(t).map(o=>({name:o,color:e.value.nodeCategoryColors[o]||z[0],shape:"square",count:I.value.nodes.filter(l=>(e.value.nodeCategories[l.name]||"__uncategorized__")===o).length})).map((o,l)=>({...o,segregate:()=>Be({legend:o,i:l}),opacity:H.value.length?H.value.includes(l)?1:.5:1,display:"".concat(o.name," (").concat(o.count,")")}))}),ze=h(()=>mt.value.filter(t=>t.name!=="__uncategorized__")),H=v([]);function Be({legend:t,i:o}){var a;const l=t.name;if((a=w.value)!=null&&a.every(n=>e.value.nodeCategories[n]===l)){w.value=null,J.value=null,H.value=[];return}H.value=[o],w.value=I.value.nodes.filter(n=>e.value.nodeCategories[n.name]===l).map(n=>n.name),J.value=null}const Kt=h(()=>({cy:"flow-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:e.value.style.chart.legend.paddingBottom,fontWeight:e.value.style.chart.legend.bold?"bold":"normal"}));async function qt({scale:t=2}={}){if(!D.value)return;const{width:o,height:l}=D.value.getBoundingClientRect(),a=o/l,{imageUri:n,base64:x}=await Dl({domElement:D.value,base64:!0,img:!0,scale:t});return{imageUri:n,base64:x,title:e.value.style.chart.title.text,width:o,height:l,aspectRatio:a}}const re=h(()=>{const t=e.value.table.useDialog&&!e.value.table.show,o=M.value.showTable;return{component:t?Bt:Mt,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:t?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:Y.value,fullscreenParent:D.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:o,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});Ae(()=>M.value.showTable,t=>{e.value.table.show||(t&&e.value.table.useDialog&&oe.value?oe.value.open():"close"in oe.value&&oe.value.close())});function yt(){M.value.showTable=!1,Ie.value&&Ie.value.setTableIconState(!1)}const Qt=h(()=>ze.value.map(t=>({...t,name:t.display}))),Jt=h(()=>e.value.style.chart.backgroundColor),Xt=h(()=>e.value.style.chart.legend),Zt=h(()=>e.value.style.chart.title),{exportSvg:el,getSvg:tl}=Il({svg:Me,title:Zt,legend:Xt,legendItems:Qt,backgroundColor:Jt});async function bt({isCb:t}){if(t){const{blob:o,url:l,text:a,dataUrl:n}=await tl();e.value.userOptions.callbacks.svg({blob:o,url:l,text:a,dataUrl:n})}else el()}return Ft({getData:Ht,getImage:qt,generateCsv:De,generateImage:ut,generateSvg:bt,generatePdf:rt,toggleTable:gt,toggleAnnotator:Re,toggleTooltip:ft,drillCategory:Be,unselectNode:ht,toggleFullscreen:Ze}),(t,o)=>(c(),g("div",{ref_key:"flowChart",ref:D,class:xt("vue-data-ui-component vue-ui-flow ".concat(Y.value?"vue-data-ui-wrapper-fullscreen":"")),style:G("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),id:"flow_".concat(U.value),onMouseenter:o[2]||(o[2]=()=>u(tt)(!0)),onMouseleave:o[3]||(o[3]=()=>u(tt)(!1))},[e.value.userOptions.buttons.annotator?(c(),Q(u(Dt),{key:0,svgRef:u(Me),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:we.value,onClose:Re},null,8,["svgRef","backgroundColor","color","active"])):O("",!0),jt.value?(c(),g("div",zl,null,512)):O("",!0),e.value.style.chart.title.text?(c(),g("div",{key:2,ref_key:"chartTitle",ref:qe,style:"width:100%;background:transparent;padding-bottom:24px"},[(c(),Q(Nl,{key:"title_".concat(He.value),config:{title:{cy:"flow-title",...e.value.style.chart.title},subtitle:{cy:"flow-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):O("",!0),j("div",{id:"legend-top-".concat(U.value)},null,8,Bl),e.value.userOptions.show&&Xe.value&&(u(lt)||u(Pe))?(c(),Q(u(Rt),{ref_key:"userOptionsRef",ref:Ie,key:"user_option_".concat(Ye.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:u(st),isImaging:u(nt),uid:U.value,hasPdf:e.value.userOptions.buttons.pdf,hasXls:e.value.userOptions.buttons.csv,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasTable:e.value.userOptions.buttons.table,callbacks:e.value.userOptions.callbacks,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:Y.value,titles:{...e.value.userOptions.buttonTitles},chartElement:D.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,printScale:e.value.userOptions.print.scale,isAnnotation:we.value,hasTooltip:e.value.style.chart.tooltip.show&&e.value.userOptions.buttons.tooltip,isTooltip:M.value.showTooltip,tableDialog:e.value.table.useDialog,onToggleTooltip:ft,onToggleFullscreen:Ze,onGeneratePdf:u(rt),onGenerateCsv:De,onGenerateImage:u(ut),onGenerateSvg:bt,onToggleTable:gt,onToggleAnnotator:Re,style:G({visibility:u(lt)?u(Pe)?"visible":"hidden":"visible"})},$t({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:b(({isOpen:l,color:a})=>[C(t.$slots,"menuIcon",ee(te({isOpen:l,color:a})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionTooltip?{name:"optionTooltip",fn:b(()=>[C(t.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:b(()=>[C(t.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:b(()=>[C(t.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:b(()=>[C(t.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:b(()=>[C(t.$slots,"optionTable",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:b(({toggleFullscreen:l,isFullscreen:a})=>[C(t.$slots,"optionFullscreen",ee(te({toggleFullscreen:l,isFullscreen:a})),void 0,!0)]),key:"6"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:b(({toggleAnnotator:l,isAnnotator:a})=>[C(t.$slots,"optionAnnotator",ee(te({toggleAnnotator:l,isAnnotator:a})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasXls","hasImg","hasSvg","hasTable","callbacks","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","printScale","isAnnotation","hasTooltip","isTooltip","tableDialog","onGeneratePdf","onGenerateImage","style"])):O("",!0),(c(),g("svg",{ref_key:"svgRef",ref:Me,xmlns:u(bl),viewBox:"0 0 ".concat(se.value.width," ").concat(se.value.height),class:xt({"vue-data-ui-fullscreen--on":Y.value,"vue-data-ui-fulscreen--off":!Y.value}),style:G({maxWidth:"100%",overflow:"visible",background:"transparent",color:e.value.style.chart.color})},[Te(u(zt)),t.$slots["chart-background"]?(c(),g("foreignObject",{key:0,x:0,y:0,width:se.value.width,height:se.value.height,style:{pointerEvents:"none"}},[C(t.$slots,"chart-background",{},void 0,!0)],8,Vl)):O("",!0),j("defs",null,[(c(!0),g(de,null,he(I.value.links,(l,a)=>(c(),g("linearGradient",{id:l.id,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[j("stop",{offset:"0%","stop-color":l.sourceColor},null,8,Gl),j("stop",{offset:"100%","stop-color":l.targetColor},null,8,Wl)],8,jl))),256))]),(c(!0),g(de,null,he(I.value.links,l=>(c(),g("path",{class:"vue-ui-flow-link",d:l.path,"stroke-linejoin":"round","stroke-miterlimit":"1",fill:"url(#".concat(l.id,")"),stroke:e.value.style.chart.links.stroke,"stroke-width":e.value.style.chart.links.strokeWidth,style:G("\n                    opacity:".concat(w.value?w.value.includes(l.source)&&w.value.includes(l.target)?1:.3:J.value?[l.target,l.source].includes(J.value)?1:.3:e.value.style.chart.links.opacity,"\n                "))},null,12,Ul))),256)),(c(!0),g(de,null,he(I.value.nodes,(l,a)=>(c(),g("rect",{class:"vue-ui-flow-node",x:l.x,y:u(E)(l.absoluteY)+e.value.style.chart.padding.top,height:u(E)(l.height),width:be.value,fill:l.color,stroke:e.value.style.chart.nodes.stroke,"stroke-width":e.value.style.chart.nodes.strokeWidth,onMouseenter:n=>Ut(l,a),onMouseleave:n=>ht(a),style:G("opacity:".concat(w.value?w.value.includes(l.name)?1:.3:1)),onClick:n=>Yt(a)},null,44,Yl))),256)),e.value.style.chart.nodes.labels.show?(c(),g("g",Hl,[(c(!0),g(de,null,he(I.value.nodes,(l,a)=>(c(),g("text",{x:l.x+be.value/2,y:u(E)(l.absoluteY+l.height/2-e.value.style.chart.nodes.labels.fontSize/4)+e.value.style.chart.padding.top,"font-size":e.value.style.chart.nodes.labels.fontSize,fill:u(Ot)(l.color),"text-anchor":"middle",style:G("pointer-events: none; opacity:".concat(w.value?w.value.includes(l.name)?1:0:1))},pe(e.value.style.chart.nodes.labels.abbreviation.use?u(kl)({source:l.name,length:e.value.style.chart.nodes.labels.abbreviation.length}):l.name),13,Kl))),256)),(c(!0),g(de,null,he(I.value.nodes,(l,a)=>(c(),g("text",{x:l.x+be.value/2,y:u(E)(l.absoluteY+l.height/2+e.value.style.chart.nodes.labels.fontSize)+e.value.style.chart.padding.top,"font-size":e.value.style.chart.nodes.labels.fontSize,fill:u(Ot)(l.color),"text-anchor":"middle",style:G("pointer-events: none; opacity:".concat(w.value?w.value.includes(l.name)?1:0:1))},pe(u(Ue)(e.value.style.chart.nodes.labels.formatter,l.value,u(ge)({p:e.value.style.chart.nodes.labels.prefix,v:l.value,s:e.value.style.chart.nodes.labels.suffix,r:e.value.style.chart.nodes.labels.rounding}),{datapoint:l,seriesIndex:a})),13,ql))),256))])):O("",!0),C(t.$slots,"svg",{svg:se.value},void 0,!0)],14,Ll)),t.$slots.watermark?(c(),g("div",Ql,[C(t.$slots,"watermark",ee(te({isPrinting:u(st)||u(nt)})),void 0,!0)])):O("",!0),j("div",{id:"legend-bottom-".concat(U.value)},null,8,Jl),Je.value?(c(),Q(il,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(U.value):"#legend-bottom-".concat(U.value)},[j("div",{ref_key:"chartLegend",ref:Ke},[e.value.style.chart.legend.show&&ze.value.length?(c(),Q(Ml,{key:0,legendSet:ze.value,config:Kt.value,onClickMarker:o[0]||(o[0]=l=>Be(l))},{item:b(({legend:l,index:a})=>[u(Fe)?O("",!0):(c(),g("div",{key:0,onClick:n=>l.segregate(),style:G("opacity:".concat(H.value.length?H.value.includes(a)?1:.5:1))},pe(l.display),13,Xl))]),_:1},8,["legendSet","config"])):O("",!0),C(t.$slots,"legend",{legend:mt.value},void 0,!0)],512)],8,["to"])):O("",!0),t.$slots.source?(c(),g("div",{key:6,ref_key:"source",ref:Qe,dir:"auto"},[C(t.$slots,"source",{},void 0,!0)],512)):O("",!0),Te(u(St),{show:M.value.showTooltip&&Oe.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,fontSize:e.value.style.chart.tooltip.fontSize,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:D.value,content:Ee.value,isCustom:ke.value,isFullscreen:Y.value,smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":b(()=>[C(t.$slots,"tooltip-before",ee(te({...ne.value})),void 0,!0)]),"tooltip-after":b(()=>[C(t.$slots,"tooltip-after",ee(te({...ne.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isCustom","isFullscreen","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),Xe.value&&e.value.userOptions.buttons.table?(c(),Q(vl(re.value.component),cl({key:7},re.value.props,{ref_key:"tableUnit",ref:oe,onClose:yt}),$t({content:b(()=>[Te(u(Nt),{colNames:Ce.value.colNames,head:Ce.value.head,body:Ce.value.body,config:Ce.value.config,title:e.value.table.useDialog?"":re.value.title,withCloseButton:!e.value.table.useDialog,onClose:yt},{th:b(({th:l})=>[j("div",{innerHTML:l,style:{display:"flex","align-items":"center"}},null,8,Zl)]),td:b(({td:l})=>[At(pe(l.name||l),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"])]),_:2},[e.value.table.useDialog?{name:"title",fn:b(()=>[At(pe(re.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:b(()=>[j("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:o[1]||(o[1]=l=>De(e.value.userOptions.callbacks.csv))},[Te(u(Pt),{name:"excel",stroke:re.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):O("",!0),u(Fe)?(c(),Q(El,{key:8})):O("",!0)],46,Rl))}},yo=hl(eo,[["__scopeId","data-v-277f5344"]]);export{yo as default};
