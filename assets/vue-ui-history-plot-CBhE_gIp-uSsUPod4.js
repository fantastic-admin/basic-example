
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-68Yi_FFl-CRPaJsgv.js","./vue-data-ui-BN9YfUec.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./vue-ui-accordion-UpZ765hd-DndPzmcD.js","./useNestedProp-dJX_8vvZ-BzBW50KN.js","./DataTable-BT7VF2ua-Cw2NNXsE.js","./Shape-CNXKB8O0-BJGuTKHC.js","./PenAndPaper-DSvu9dwa-B6YjX2xm.js","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js","./PackageVersion-TgflyMpU-q2MkeeNq.js","./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"])))=>i.map(i=>d[i]);
import{e as c,au as je,J as h,E as Rt,av as Et,a7 as Dt,K as Q,at as Xt,b_ as O,c as r,o,r as f,z as N,A as d,f as C,g as pe,u as n,O as $,c0 as We,h as b,j as X,k as Y,F as m,R as g,t as S,n as R,bn as Yt,l as Ue,m as Bt,N as Vt,c1 as P,a9 as jt}from"./index-DXZKKOp8.js";import{s as Wt,Q as Ge,g as He,p as qe,b as Ut,A as Gt,C as Ht,a as qt,m as ee,j as Je,I as B,f as V,y as Jt,o as Kt,d as Zt,S as Qt,K as el,R as E,v as tl,L as te,e as ll,r as al,F as sl}from"./vue-data-ui-BN9YfUec.js";import{E as Ke,M as ol}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as rl,o as Ze}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{S as il,T as ul}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{m as nl}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{O as vl}from"./useSvgExport-DrjCWun4-CbW14PXm.js";import{a as cl}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as hl}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import{S as dl}from"./useTimeLabelCollider-CIsgDrl9-CjJy_OeC.js";import yl from"./img-BecE5qXd-CsL1o-EN.js";import xl from"./Title-BWp-37K_-BMUMQpSO.js";import{J as pl}from"./themes-AUNCOb2G-RAhReTPj.js";import fl from"./Legend-G6GMcdAc-7HaGLNN7.js";import"./alert-l5XlVwCh.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";import"./Shape-CNXKB8O0-BJGuTKHC.js";const bl=["id"],ml=["id"],gl=["xmlns","viewBox"],kl=["x","y","width","height"],wl={key:1},Al=["id"],Cl=["stop-color"],_l=["stop-color"],$l=["stop-color"],Ll={key:2},Il=["x1","x2","y1","y2","stroke","stroke-width"],Sl={key:3},Ml=["stroke","stroke-width","x1","x2","y1","y2"],Tl=["x","y","fill","font-size"],zl=["transform","font-size","fill","font-weight"],Ol={key:6},Nl=["x1","x2","y1","y2","stroke","stroke-width"],Pl={key:7},Fl=["stroke","stroke-width","x1","x2","y1","y2"],Rl=["transform","fill","font-size","text-anchor"],El=["x","y","font-size","fill","font-weight"],Dl=["x1","x2","y1","y2","stroke","stroke-width"],Xl=["x1","x2","y1","y2","stroke","stroke-width"],Yl=["d","stroke","stroke-width"],Bl=["d","stroke","stroke-width"],Vl=["cx","cy","fill","r"],jl=["cx","cy","fill","r","stroke","stroke-width"],Wl={key:1},Ul=["x","y","font-size","fill","font-weight"],Gl=["x","y","font-size","fill","font-weight","innerHTML"],Hl={key:2},ql=["x","y","font-size","font-weight","fill"],Jl=["cx","cy","r","onMouseenter","onMouseleave","onClick"],Kl={key:4,class:"vue-data-ui-watermark"},Zl=["id"],Ql=["onClick"],ea=["innerHTML"],ta={__name:"vue-ui-history-plot",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(Qe,{expose:et,emit:tt}){const lt=O(()=>P(()=>import("./Tooltip-68Yi_FFl-CRPaJsgv.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),at=O(()=>P(()=>import("./vue-data-ui-BN9YfUec.js").then(t=>t.aw),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),st=O(()=>P(()=>import("./vue-ui-accordion-UpZ765hd-DndPzmcD.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),ot=O(()=>P(()=>import("./DataTable-BT7VF2ua-Cw2NNXsE.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),rt=O(()=>P(()=>import("./PenAndPaper-DSvu9dwa-B6YjX2xm.js"),__vite__mapDeps([10,2,3,1,4,5,11,12]),import.meta.url)),it=O(()=>P(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([13,2,3,12,1,4,5,14,15]),import.meta.url)),ut=O(()=>P(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([16,2,3]),import.meta.url)),nt=O(()=>P(()=>import("./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_history_plot:vt}=rl(),y=Qe,L=c(null),fe=c(null),be=c(0),me=c(null),ge=c(0),ke=c(0),we=c(0),M=je(null),D=je(null),Ae=c(null),I=c(Ge()),le=c(!1),ae=c(""),k=c([]),j=c(!1),A=c(null),W=c(!1),Ce=c(null),_e=c(!1),U=c(null),se=c(null),oe=c(null),re=c(null),H=c(null),ie=c(null),q=h({get:()=>!!y.dataset&&y.dataset.length,set:t=>t}),$e=tt;Rt(()=>{_e.value=!0,Ie()});const Le=h(()=>!!e.value.debug);function Ie(){if(He(y.dataset)?(qe({componentName:"VueUiHistoryPlot",type:"dataset",debug:Le.value}),ne.value=!0):y.dataset.forEach((t,a)=>{Ut({datasetObject:t,requiredAttributes:["name","values"]}).forEach(l=>{q.value=!1,qe({componentName:"VueUiHistoryPlot",type:"datasetSerieAttribute",property:l,index:a,debug:Le.value})})}),He(y.dataset)||(ne.value=e.value.loading),e.value.responsive){const t=Ke(()=>{const{width:a,height:l}=ol({chart:L.value,title:e.value.style.chart.title.text?fe.value:null,noTitle:Ae.value,legend:e.value.style.chart.legend.show?me.value:null,source:Ce.value});requestAnimationFrame(()=>{x.value.width=a,x.value.height=l,e.value.responsiveProportionalSizing?(i.value.plots=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.plots.radius,threshold:3,fallback:3}),i.value.indexLabels=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.plots.indexLabels.fontSize,threshold:6,fallback:6}),i.value.labels=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.plots.labels.fontSize,threshold:6,fallback:6}),i.value.xAxisLabels=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.axes.x.labels.fontSize,threshold:6,fallback:6}),i.value.xAxisName=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.axes.x.name.fontSize,threshold:6,fallback:6}),i.value.yAxisLabels=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.axes.y.labels.fontSize,threshold:6,fallback:6}),i.value.yAxisName=E({relator:Math.min(a,l),adjuster:600,source:e.value.style.chart.axes.y.name.fontSize,threshold:6,fallback:6})):(i.value.plots=e.value.style.chart.plots.radius,i.value.indexLabels=e.value.style.chart.plots.indexLabels.fontSize,i.value.labels=e.value.style.chart.plots.labels.fontSize,i.value.xAxisLabels=e.value.style.chart.axes.x.labels.fontSize,i.value.xAxisName=e.value.style.chart.axes.x.name.fontSize,i.value.yAxisLabels=e.value.style.chart.axes.y.labels.fontSize,i.value.yAxisName=e.value.style.chart.axes.y.name.fontSize)})});M.value&&(D.value&&M.value.unobserve(D.value),M.value.disconnect()),M.value=new ResizeObserver(t),D.value=L.value.parentNode,M.value.observe(D.value)}}Et(()=>{M.value&&(D.value&&M.value.unobserve(D.value),M.value.disconnect())});function ue(){const t=Ze({userConfig:y.config,defaultConfig:vt});let a={};return t.theme?a={...Ze({userConfig:pl.vue_ui_history_plot[t.theme]||y.config,defaultConfig:t}),customPalette:tl[t.theme]||ee}:a=t,y.config&&te(y.config,"style.chart.axes.x.scaleMin")?a.style.chart.axes.x.scaleMin=y.config.style.chart.axes.x.scaleMin:a.style.chart.axes.x.scaleMin=null,y.config&&te(y.config,"style.chart.axes.x.scaleMax")?a.style.chart.axes.x.scaleMax=y.config.style.chart.axes.x.scaleMax:a.style.chart.axes.x.scaleMax=null,y.config&&te(y.config,"style.chart.axes.y.scaleMin")?a.style.chart.axes.y.scaleMin=y.config.style.chart.axes.y.scaleMin:a.style.chart.axes.y.scaleMin=null,y.config&&te(y.config,"style.chart.axes.y.scaleMax")?a.style.chart.axes.y.scaleMax=y.config.style.chart.axes.y.scaleMax:a.style.chart.axes.y.scaleMax=null,a}const e=c(ue()),{loading:T,FINAL_DATASET:ct,manualLoading:ne}=il({...Dt(y),FINAL_CONFIG:e,prepareConfig:ue,skeletonDataset:[{name:"",color:"#CACACA",values:[{label:"",x:1,y:9},{label:"",x:4,y:1},{label:"",x:7,y:9},{label:"",x:9,y:4}]}],skeletonConfig:Gt({defaultConfig:e.value,userConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:"#99999930",axes:{x:{scaleMin:0,scaleMax:10,labels:{show:!1},name:{text:""}},y:{scaleMin:0,scaleMax:10,labels:{show:!1},name:{text:""}}},grid:{xAxis:{stroke:"#6A6A6A"},horizontalLines:{stroke:"#6A6A6A50"},yAxis:{stroke:"#6A6A6A"},verticalLines:{stroke:"#6A6A6A50"}},legend:{backgroundColor:"transparent"},paths:{useSerieColor:!1,stroke:"#6A6A6A"},plots:{stroke:"#6A6A6A",indexLabels:{show:!1},labels:{show:!1}}}}}})}),{userOptionsVisible:ve,setUserOptionsVisibility:Se,keepUserOptionState:Me}=cl({config:e.value}),{svgRef:ce}=hl({config:e.value.style.chart.title});Q(()=>y.config,t=>{T.value||(e.value=ue()),ve.value=!e.value.userOptions.showOnChartHover,Ie(),be.value+=1,ke.value+=1,ge.value+=1,x.value.height=e.value.style.chart.height,x.value.width=e.value.style.chart.width,i.value.plots=e.value.style.chart.plots.radius,i.value.indexLabels=e.value.style.chart.plots.indexLabels.fontSize,i.value.labels=e.value.style.chart.plots.labels.fontSize,i.value.xAxisLabels=e.value.style.chart.axes.x.labels.fontSize,i.value.xAxisName=e.value.style.chart.axes.x.name.fontSize,i.value.yAxisLabels=e.value.style.chart.axes.y.labels.fontSize,i.value.yAxisName=e.value.style.chart.axes.y.name.fontSize,w.value.showTable=e.value.table.show,w.value.showTooltip=e.value.style.chart.tooltip.show},{deep:!0}),Q(()=>y.dataset,t=>{Array.isArray(t)&&t.length>0&&(ne.value=!1)},{deep:!0});const{isPrinting:Te,isImaging:ze,generatePdf:Oe,generateImage:Ne}=nl({elementId:"history_plot_".concat(I.value),fileName:e.value.style.chart.title.text||"vue-ui-history-plot",options:e.value.userOptions.print}),ht=h(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),dt=h(()=>Ht(e.value.customPalette)),w=c({showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show});Q(e,()=>{w.value={showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}},{immediate:!0});const x=c({height:e.value.style.chart.height,width:e.value.style.chart.width}),yt=h(()=>x.value.width),xt=h(()=>x.value.height);function pt(){let t=0;ie.value&&(t=Array.from(ie.value.querySelectorAll("text")).reduce((l,u)=>{const s=u.getComputedTextLength();return s>l?s:l},0));const a=re.value?re.value.getBoundingClientRect().width:0;return t+a+(a?24:0)}const Pe=c(0),ft=Ke(t=>{Pe.value=t});Xt(t=>{const a=H.value;if(!a)return;const l=new ResizeObserver(u=>{ft(u[0].contentRect.height)});l.observe(a),t(()=>l.disconnect())});const Fe=h(()=>{let t=0;oe.value&&(t=oe.value.getBBox().height+i.value.xAxisName/2);let a=0;return H.value&&(a=Pe.value),t+a}),v=h(()=>{const t=e.value.style.chart.padding.left,a=e.value.style.chart.padding.top,l=pt(),u=e.value.style.chart.plots.radius;return{left:t+l+e.value.style.chart.axes.y.name.offsetX,top:a+u,right:x.value.width-e.value.style.chart.padding.right-u-e.value.style.chart.axes.y.name.offsetX,bottom:x.value.height-e.value.style.chart.padding.bottom-Fe.value-u-e.value.style.chart.axes.x.name.offsetY,width:x.value.width-t-e.value.style.chart.padding.right-l-u-e.value.style.chart.axes.y.name.offsetX,height:x.value.height-a-e.value.style.chart.padding.bottom-Fe.value-u*2-e.value.style.chart.axes.x.name.offsetY}}),i=c({plots:e.value.style.chart.plots.radius,indexLabels:e.value.style.chart.plots.indexLabels.fontSize,labels:e.value.style.chart.plots.labels.fontSize,xAxisLabels:e.value.style.chart.axes.x.labels.fontSize,xAxisName:e.value.style.chart.axes.x.name.fontSize,yAxisLabels:e.value.style.chart.axes.y.labels.fontSize,yAxisName:e.value.style.chart.axes.y.name.fontSize}),z=h(()=>ct.value.map((t,a)=>({...t,color:t.color?qt(t.color):dt.value[a]||ee[a]||ee[a%ee.length],seriesIndex:a}))),bt=h(()=>Math.max(...z.value.filter(t=>!k.value.includes(t.seriesIndex)).flatMap(t=>t.values.map(a=>a.x)))),mt=h(()=>{const t=Math.min(...z.value.filter(a=>!k.value.includes(a.seriesIndex)).flatMap(a=>a.values.map(l=>l.x)));return t<0?t:0}),gt=h(()=>Math.max(...z.value.filter(t=>!k.value.includes(t.seriesIndex)).flatMap(t=>t.values.map(a=>a.y)))),kt=h(()=>{const t=Math.min(...z.value.filter(a=>!k.value.includes(a.seriesIndex)).flatMap(a=>a.values.map(l=>l.y)));return t<0?t:0}),p=h(()=>{const t=Je(e.value.style.chart.axes.x.scaleMin===null?mt.value:e.value.style.chart.axes.x.scaleMin,e.value.style.chart.axes.x.scaleMax===null?bt.value:e.value.style.chart.axes.x.scaleMax,e.value.style.chart.axes.x.ticks),a=Je(e.value.style.chart.axes.y.scaleMin===null?kt.value:e.value.style.chart.axes.y.scaleMin,e.value.style.chart.axes.y.scaleMax===null?gt.value:e.value.style.chart.axes.y.scaleMax,e.value.style.chart.axes.y.ticks);return{x:t,y:a,tickX:t.ticks.map(l=>({x:v.value.left+(l-t.min)/(t.max-t.min)*v.value.width,y1:v.value.top,y2:v.value.bottom,value:l})),tickY:a.ticks.map(l=>({y:v.value.bottom-(l-a.min)/(a.max-a.min)*v.value.height,x1:v.value.left,x2:v.value.right,value:l}))}});function wt(t){const a=p.value.x.min<0?Math.abs(p.value.x.min):p.value.x.min>0?-p.value.x.min:0;return v.value.left+((t||0)+a)/(p.value.x.max+a)*v.value.width}function At(t){const a=p.value.y.min<0?Math.abs(p.value.y.min):p.value.y.min>0?-p.value.y.min:0;return v.value.bottom-((t||0)+a)/(p.value.y.max+a)*v.value.height}const F=h(()=>z.value.filter(t=>!k.value.includes(t.seriesIndex)).map((t,a)=>{const l=t.values.map((s,_)=>({valueX:s.x,valueY:s.y,label:s.label,x:wt(s.x),y:At(s.y),color:t.color,seriesName:t.name,id:Ge()})),u=l.map(s=>"".concat(s.x,",").concat(s.y," ")).join("").trim();return{...t,plots:l,path:"M".concat(u)}}));function Re(t){k.value.includes(t)?k.value=k.value.filter(a=>a!==t):k.value.push(t)}const he=h(()=>z.value.map(t=>({...t,opacity:k.value.includes(t.seriesIndex)?.5:1,segregate:()=>Re(t.seriesIndex),isSegregated:k.value.includes(t.seriesIndex),shape:"circle"}))),Ct=h(()=>({cy:"history-plot-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""}));function _t({datapoint:t,plotIndex:a,seriesIndex:l}){e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:{...t,plotIndex:a,seriesIndex:l},seriesIndex:l}),$e("selectDatapoint",t)}function Ee(t){$e("selectLegend",{...t,isSegregated:!t.isSegregated,opacity:t.isSegregated?1:.5})}function De(t){j.value=t,we.value+=1}const de=c(null);function $t({datapoint:t,plotIndex:a,seriesIndex:l}){e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:{...t,plotIndex:a,seriesIndex:l},seriesIndex:l}),le.value=!1,A.value=null}function Lt({datapoint:t,plotIndex:a,seriesIndex:l}){e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:{...t,plotIndex:a,seriesIndex:l},seriesIndex:l}),de.value={datapoint:t,seriesIndex:l,plotIndex:a,config:e.value,series:z.value},A.value=t;const u=e.value.style.chart.tooltip.customFormat;if(W.value=!1,sl(u))try{const s=u({seriesIndex:l,datapoint:t,plotIndex:a,series:z.value,config:e.value});typeof s=="string"&&(ae.value=s,W.value=!0)}catch(s){console.warn("Custom format cannot be applied."),W.value=!1}if(!W.value){let s="";s+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;border-bottom:1px solid '.concat(e.value.style.chart.tooltip.borderColor,';margin-bottom:3px;padding-bottom:6px;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="').concat(t.color,'"/></svg><span>').concat(t.seriesName,"</span></div>"),s+="<div>".concat(t.label,"</div>"),s+="<div>".concat(e.value.style.chart.axes.x.name.text||"x",": ").concat(B(e.value.style.chart.axes.x.labels.formatter,t.valueX,V({p:e.value.style.chart.axes.x.labels.prefix,v:t.valueX,s:e.value.style.chart.axes.x.labels.suffix,r:e.value.style.chart.axes.x.labels.rounding})),"</div>"),s+="<div>".concat(e.value.style.chart.axes.y.name.text||"y",": ").concat(B(e.value.style.chart.axes.y.labels.formatter,t.valueY,V({p:e.value.style.chart.axes.y.labels.prefix,v:t.valueY,s:e.value.style.chart.axes.y.labels.suffix,r:e.value.style.chart.axes.y.labels.rounding})),"</div>"),ae.value="<div>".concat(s,"</div>")}le.value=!0}h(()=>({head:F.value.map(t=>({name:t.name,color:t.color}))}));const J=h(()=>{const t=[e.value.table.columnNames.series,e.value.table.columnNames.datapoint,e.value.table.columnNames.x,e.value.table.columnNames.y],a=F.value.flatMap(u=>u.plots.map(s=>[{color:s.color,name:s.seriesName},s.label,B(e.value.style.chart.axes.x.labels.formatter,s.valueX,V({p:e.value.style.chart.axes.x.labels.prefix,v:s.valueX,s:e.value.style.chart.axes.x.labels.suffix,r:e.value.style.chart.axes.x.labels.rounding})),B(e.value.style.chart.axes.y.labels.formatter,s.valueY,V({p:e.value.style.chart.axes.y.labels.prefix,v:s.valueY,s:e.value.style.chart.axes.y.labels.suffix,r:e.value.style.chart.axes.y.labels.rounding}))])),l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{head:t,body:a,config:l,colNames:t}});function ye(t=null){jt(()=>{const a=[[e.value.table.columnNames.series],[e.value.table.columnNames.datapoint],[e.value.table.columnNames.x],[e.value.table.columnNames.y]],l=F.value.flatMap(_=>_.plots.map(Z=>[[Z.seriesName],[Z.label],[Z.valueX],[Z.valueY]])),u=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],a].concat(l),s=ll(u);t?t(s):al({csvContent:s,title:e.value.style.chart.title.text||"vue-ui-history-plot"})})}const K=c(!1);function xe(){K.value=!K.value}function Xe(){w.value.showTable=!w.value.showTable}function Ye(){w.value.showTooltip=!w.value.showTooltip}function It(){return F.value}async function St({scale:t=2}={}){if(!L.value)return;const{width:a,height:l}=L.value.getBoundingClientRect(),u=a/l,{imageUri:s,base64:_}=await yl({domElement:L.value,base64:!0,img:!0,scale:t});return{imageUri:s,base64:_,title:e.value.style.chart.title.text,width:a,height:l,aspectRatio:u}}const Mt=h(()=>p.value.tickX),Tt=h(()=>({start:0,end:p.value.tickX.length}));dl({timeLabelsEls:H,timeLabels:Mt,slicer:Tt,configRef:e,rotationPath:["style","chart","axes","x","labels","rotation"],autoRotatePath:["style","chart","axes","x","labels","autoRotate","enable"],isAutoSize:!1,width:yt,height:xt,targetClass:".vue-ui-history-plot-x-axis-scale",rotation:e.value.style.chart.axes.x.labels.autoRotate.angle});const G=h(()=>{const t=e.value.table.useDialog&&!e.value.table.show,a=w.value.showTable;return{component:t?nt:st,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:t?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:j.value,fullscreenParent:L.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:a,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});Q(()=>w.value.showTable,t=>{e.value.table.show||(t&&e.value.table.useDialog&&U.value?U.value.open():"close"in U.value&&U.value.close())});function Be(){w.value.showTable=!1,se.value&&se.value.setTableIconState(!1)}const zt=h(()=>e.value.style.chart.backgroundColor),Ot=h(()=>e.value.style.chart.legend),Nt=h(()=>e.value.style.chart.title),{exportSvg:Pt,getSvg:Ft}=vl({svg:ce,title:Nt,legend:Ot,legendItems:he,backgroundColor:zt});async function Ve({isCb:t}){if(t){const{blob:a,url:l,text:u,dataUrl:s}=await Ft();e.value.userOptions.callbacks.svg({blob:a,url:l,text:u,dataUrl:s})}else Pt()}return et({getData:It,getImage:St,generatePdf:Oe,generateCsv:ye,generateImage:Ne,generateSvg:Ve,toggleTable:Xe,toggleTooltip:Ye,toggleAnnotator:xe,toggleFullscreen:De}),(t,a)=>(o(),r("div",{id:"history_plot_".concat(I.value),ref_key:"historyPlotChart",ref:L,class:R({"vue-data-ui-component":!0,"vue-ui-history-plot":!0,"vue-data-ui-wrapper-fullscreen":j.value}),style:$("background:".concat(e.value.style.chart.backgroundColor,";color:").concat(e.value.style.chart.color,";font-family:").concat(e.value.style.fontFamily,"; position: relative; ").concat(e.value.responsive?"height: 100%":"")),onMouseenter:a[2]||(a[2]=()=>n(Se)(!0)),onMouseleave:a[3]||(a[3]=()=>n(Se)(!1))},[f(t.$slots,"userConfig",{},void 0,!0),e.value.userOptions.buttons.annotator?(o(),N(n(rt),{key:0,svgRef:n(ce),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:K.value,onClose:xe},null,8,["svgRef","backgroundColor","color","active"])):d("",!0),ht.value?(o(),r("div",{key:1,ref_key:"noTitle",ref:Ae,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):d("",!0),e.value.style.chart.title.text?(o(),r("div",{key:2,ref_key:"chartTitle",ref:fe,class:"vue-ui-xy-title",style:$("font-family:".concat(e.value.style.fontFamily))},[(o(),N(xl,{key:"title_".concat(be.value),config:{title:{cy:"history-plot-div-title",...e.value.style.chart.title},subtitle:{cy:"history-plot-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],4)):d("",!0),C("div",{id:"legend-top-".concat(I.value)},null,8,ml),e.value.userOptions.show&&q.value&&(n(Me)||n(ve))?(o(),N(n(it),{ref_key:"userOptionsRef",ref:se,key:"user_option_".concat(we.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:n(Te),isImaging:n(ze),uid:I.value,hasTooltip:e.value.style.chart.tooltip.show&&e.value.userOptions.buttons.tooltip,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasLabel:!1,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:j.value,chartElement:L.value,position:e.value.userOptions.position,isTooltip:w.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:K.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:De,onGeneratePdf:n(Oe),onGenerateCsv:ye,onGenerateImage:n(Ne),onGenerateSvg:Ve,onToggleTable:Xe,onToggleTooltip:Ye,onToggleAnnotator:xe,style:$({visibility:n(Me)?n(ve)?"visible":"hidden":"visible"})},We({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:b(({isOpen:l,color:u})=>[f(t.$slots,"menuIcon",X(Y({isOpen:l,color:u})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionTooltip?{name:"optionTooltip",fn:b(()=>[f(t.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:b(()=>[f(t.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:b(()=>[f(t.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:b(()=>[f(t.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:b(()=>[f(t.$slots,"optionTable",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:b(({toggleFullscreen:l,isFullscreen:u})=>[f(t.$slots,"optionFullscreen",X(Y({toggleFullscreen:l,isFullscreen:u})),void 0,!0)]),key:"6"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:b(({toggleAnnotator:l,isAnnotator:u})=>[f(t.$slots,"optionAnnotator",X(Y({toggleAnnotator:l,isAnnotator:u})),void 0,!0)]),key:"7"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasImg","hasSvg","hasXls","hasTable","hasFullscreen","isFullscreen","chartElement","position","isTooltip","titles","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):d("",!0),(o(),r("svg",{ref_key:"svgRef",ref:ce,xmlns:n(Jt),viewBox:"0 0 ".concat(x.value.width<0?.1:x.value.width," ").concat(x.value.height<0?.1:x.value.height),style:$("max-width:100%;overflow:visible;background:transparent;color:".concat(e.value.style.chart.color))},[pe(n(ut)),t.$slots["chart-background"]?(o(),r("foreignObject",{key:0,x:v.value.left,y:v.value.top,width:v.value.width<=0?10:v.value.width,height:v.value.height<=0?10:v.value.height,style:{pointerEvents:"none"}},[f(t.$slots,"chart-background",{},void 0,!0)],8,kl)):d("",!0),e.value.style.chart.plots.gradient.show?(o(),r("defs",wl,[(o(!0),r(m,null,g(F.value,(l,u)=>(o(),r("radialGradient",{id:"gradient_".concat(u,"_").concat(I.value),fy:"30%"},[C("stop",{offset:"10%","stop-color":n(Kt)(l.color,e.value.style.chart.plots.gradient.intensity/100)},null,8,Cl),C("stop",{offset:"90%","stop-color":n(Zt)(l.color,.1)},null,8,_l),C("stop",{offset:"100%","stop-color":l.color},null,8,$l)],8,Al))),256))])):d("",!0),e.value.style.chart.grid.verticalLines.show?(o(),r("g",Ll,[(o(!0),r(m,null,g(p.value.tickX,l=>(o(),r("line",{x1:l.x,x2:l.x,y1:l.y1,y2:l.y2,stroke:e.value.style.chart.grid.verticalLines.stroke,"stroke-width":e.value.style.chart.grid.verticalLines.strokeWidth,"stroke-linecap":"round"},null,8,Il))),256))])):d("",!0),e.value.style.chart.axes.y.labels.show?(o(),r("g",Sl,[(o(!0),r(m,null,g(p.value.tickY,l=>(o(),r("line",{stroke:e.value.style.chart.grid.verticalLines.stroke,"stroke-width":e.value.style.chart.grid.verticalLines.strokeWidth,"stroke-linecap":"round",x1:v.value.left-5,x2:v.value.left,y1:l.y,y2:l.y},null,8,Ml))),256))])):d("",!0),e.value.style.chart.axes.y.labels.show?(o(),r("g",{key:4,ref_key:"yAxisScales",ref:ie},[(o(!0),r(m,null,g(p.value.tickY,l=>(o(),r("text",{x:v.value.left+e.value.style.chart.axes.y.labels.offsetX-4-e.value.style.chart.plots.radius,y:l.y+i.value.yAxisLabels/3,fill:e.value.style.chart.axes.y.labels.color,"font-size":i.value.yAxisLabels,"text-anchor":"end"},S(n(B)(e.value.style.chart.axes.y.labels.formatter,l.value,n(V)({p:e.value.style.chart.axes.y.labels.prefix,v:l.value,s:e.value.style.chart.axes.y.labels.suffix,r:e.value.style.chart.axes.y.labels.rounding}))),9,Tl))),256))],512)):d("",!0),e.value.style.chart.axes.y.name.text?(o(),r("text",{key:5,ref_key:"yAxisLabel",ref:re,transform:"translate(".concat(i.value.yAxisName,", ").concat(x.value.height/2+e.value.style.chart.axes.y.name.offsetY,"), rotate(-90)"),"font-size":i.value.yAxisName,fill:e.value.style.chart.axes.y.name.color,"font-weight":e.value.style.chart.axes.y.name.bold?"bold":"normal","text-anchor":"middle"},S(e.value.style.chart.axes.y.name.text),9,zl)):d("",!0),e.value.style.chart.grid.horizontalLines.show?(o(),r("g",Ol,[(o(!0),r(m,null,g(p.value.tickY,l=>(o(),r("line",{x1:l.x1,x2:l.x2,y1:l.y,y2:l.y,stroke:e.value.style.chart.grid.horizontalLines.stroke,"stroke-width":e.value.style.chart.grid.horizontalLines.strokeWidth,"stroke-linecap":"round"},null,8,Nl))),256))])):d("",!0),e.value.style.chart.axes.x.labels.show?(o(),r("g",Pl,[(o(!0),r(m,null,g(p.value.tickX,l=>(o(),r("line",{stroke:e.value.style.chart.grid.verticalLines.stroke,"stroke-width":e.value.style.chart.grid.verticalLines.strokeWidth,"stroke-linecap":"round",x1:l.x,x2:l.x,y1:v.value.bottom,y2:v.value.bottom+5},null,8,Fl))),256))])):d("",!0),e.value.style.chart.axes.x.labels.show?(o(),r("g",{key:8,ref_key:"xAxisScales",ref:H},[(o(!0),r(m,null,g(p.value.tickX,l=>(o(),r("text",{class:"vue-ui-history-plot-x-axis-scale",transform:"translate(".concat(l.x,", ").concat(v.value.bottom+e.value.style.chart.axes.x.labels.offsetY+i.value.xAxisLabels+e.value.style.chart.plots.radius,"), rotate(").concat(e.value.style.chart.axes.x.labels.rotation,")"),fill:e.value.style.chart.axes.x.labels.color,"font-size":i.value.xAxisLabels,"text-anchor":e.value.style.chart.axes.x.labels.rotation>0?"start":e.value.style.chart.axes.x.labels.rotation<0?"end":"middle"},S(n(B)(e.value.style.chart.axes.x.labels.formatter,l.value,n(V)({p:e.value.style.chart.axes.x.labels.prefix,v:l.value,s:e.value.style.chart.axes.x.labels.suffix,r:e.value.style.chart.axes.x.labels.rounding}))),9,Rl))),256))],512)):d("",!0),e.value.style.chart.axes.x.name.text?(o(),r("text",{key:9,ref_key:"xAxisLabel",ref:oe,x:x.value.width/2+e.value.style.chart.axes.x.name.offsetX,y:x.value.height,"font-size":i.value.xAxisName,fill:e.value.style.chart.axes.x.name.color,"font-weight":e.value.style.chart.axes.x.name.bold?"bold":"normal","text-anchor":"middle"},S(e.value.style.chart.axes.x.name.text),9,El)):d("",!0),e.value.style.chart.grid.xAxis.show?(o(),r("line",{key:10,x1:v.value.left,x2:v.value.left+v.value.width,y1:v.value.bottom,y2:v.value.bottom,stroke:e.value.style.chart.grid.xAxis.stroke,"stroke-width":e.value.style.chart.grid.xAxis.strokeWidth,"stroke-linecap":"round"},null,8,Dl)):d("",!0),e.value.style.chart.grid.yAxis.show?(o(),r("line",{key:11,x1:v.value.left,x2:v.value.left,y1:v.value.top,y2:v.value.bottom,stroke:e.value.style.chart.grid.yAxis.stroke,"stroke-width":e.value.style.chart.grid.yAxis.strokeWidth,"stroke-linecap":"round"},null,8,Xl)):d("",!0),(o(!0),r(m,null,g(F.value,(l,u)=>(o(),r("g",null,[e.value.style.chart.paths.show?(o(),r("g",{key:0,style:$({opacity:A.value===null?1:.3})},[C("path",{d:l.path,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.paths.strokeWidth+4,fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:R({animated:e.value.useCssAnimation&&!n(T)})},null,10,Yl),C("path",{d:l.path,stroke:e.value.style.chart.paths.useSerieColor?l.color:e.value.style.chart.paths.stroke,"stroke-width":e.value.style.chart.paths.strokeWidth,fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:R({animated:e.value.useCssAnimation&&!n(T)})},null,10,Bl)],4)):d("",!0),(o(!0),r(m,null,g(l.plots,s=>(o(),r("circle",{cx:s.x,cy:s.y,fill:e.value.style.chart.backgroundColor,r:i.value.plots,stroke:"none"},null,8,Vl))),256)),(o(!0),r(m,null,g(l.plots,s=>(o(),r("circle",{cx:s.x,cy:s.y,fill:e.value.style.chart.plots.gradient.show?"url(#gradient_".concat(u,"_").concat(I.value,")"):s.color,r:i.value.plots,stroke:e.value.style.chart.plots.stroke,"stroke-width":e.value.style.chart.plots.strokeWidth,class:R({animated:e.value.useCssAnimation&&!n(T)}),style:$({opacity:A.value===null||A.value.id===s.id?1:.3,transition:"opacity 0.2s ease-in-out"})},null,14,jl))),256)),e.value.style.chart.plots.labels.show?(o(),r("g",Wl,[(o(!0),r(m,null,g(l.plots,s=>(o(),r("g",null,[String(s.label).includes("\n")?(o(),r("text",{key:1,x:s.x+e.value.style.chart.plots.labels.offsetX,y:s.y+e.value.style.chart.plots.labels.offsetY+i.value.plots+i.value.labels,"font-size":i.value.labels,fill:e.value.style.chart.plots.labels.color,"font-weight":e.value.style.chart.plots.labels.bold?"bold":"normal","text-anchor":"middle",class:R({animated:e.value.useCssAnimation&&!n(T)}),style:$({opacity:A.value===null||A.value.id===s.id?1:.3,transition:"opacity 0.2s ease-in-out"}),innerHTML:n(Qt)({content:String(s.label),fontSize:i.value.labels,fill:e.value.style.chart.plots.labels.color,x:s.x+e.value.style.chart.plots.labels.offsetX,y:s.y+e.value.style.chart.plots.labels.offsetY+i.value.plots+i.value.labels})},null,14,Gl)):(o(),r("text",{key:0,x:s.x+e.value.style.chart.plots.labels.offsetX,y:s.y+e.value.style.chart.plots.labels.offsetY+i.value.plots+i.value.labels,"font-size":i.value.labels,fill:e.value.style.chart.plots.labels.color,"font-weight":e.value.style.chart.plots.labels.bold?"bold":"normal","text-anchor":"middle",class:R({animated:e.value.useCssAnimation&&!n(T)}),style:$({opacity:A.value===null||A.value.id===s.id?1:.3,transition:"opacity 0.2s ease-in-out"})},S(s.label),15,Ul))]))),256))])):d("",!0),e.value.style.chart.plots.indexLabels.show?(o(),r("g",Hl,[(o(!0),r(m,null,g(l.plots,(s,_)=>(o(),r("text",{x:s.x+e.value.style.chart.plots.indexLabels.offsetX,y:s.y+e.value.style.chart.plots.indexLabels.offsetY+i.value.indexLabels/3,"font-size":i.value.indexLabels,"font-weight":e.value.style.chart.plots.indexLabels.bold?"bold":"normal",fill:e.value.style.chart.plots.indexLabels.adaptColorToBackground?n(el)(l.color):e.value.style.chart.plots.indexLabels.color,"text-anchor":"middle",class:R({animated:e.value.useCssAnimation&&!n(T)}),style:$({opacity:A.value===null||A.value.id===s.id?1:.3,transition:"opacity 0.2s ease-in-out"})},S(e.value.style.chart.plots.indexLabels.startAtZero?_:_+1),15,ql))),256))])):d("",!0)]))),256)),(o(!0),r(m,null,g(F.value,l=>(o(),r("g",null,[(o(!0),r(m,null,g(l.plots,(u,s)=>(o(),r("circle",{cx:u.x,cy:u.y,fill:"transparent",r:i.value.plots,stroke:"none",onMouseenter:_=>Lt({datapoint:u,plotIndex:s,seriesIndex:l.seriesIndex}),onMouseleave:_=>$t({datapoint:u,plotIndex:s,seriesIndex:l.seriesIndex}),onClick:_=>_t({datapoint:u,plotIndex:s,seriesIndex:l.seriesIndex})},null,40,Jl))),256))]))),256)),f(t.$slots,"svg",{svg:x.value},void 0,!0)],12,gl)),t.$slots.watermark?(o(),r("div",Kl,[f(t.$slots,"watermark",X(Y({isPrinting:n(Te)||n(ze)})),void 0,!0)])):d("",!0),C("div",{id:"legend-bottom-".concat(I.value)},null,8,Zl),_e.value?(o(),N(Yt,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(I.value):"#legend-bottom-".concat(I.value)},[C("div",{ref_key:"chartLegend",ref:me},[e.value.style.chart.legend.show&&q.value?(o(),N(fl,{key:"legend_".concat(ge.value),legendSet:he.value,config:Ct.value,onClickMarker:a[0]||(a[0]=({legend:l})=>{Re(l.seriesIndex),Ee(l)})},{item:b(({legend:l,index:u})=>[C("div",{onClick:s=>{l.segregate(),Ee(l)},style:$("opacity:".concat(k.value.includes(l.seriesIndex)?.5:1))},S(l.name),13,Ql)]),_:1},8,["legendSet","config"])):f(t.$slots,"legend",{key:1,legend:he.value},void 0,!0)],512)],8,["to"])):d("",!0),t.$slots.source?(o(),r("div",{key:6,ref_key:"source",ref:Ce,dir:"auto"},[f(t.$slots,"source",{},void 0,!0)],512)):d("",!0),pe(n(lt),{show:w.value.showTooltip&&le.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,fontSize:e.value.style.chart.tooltip.fontSize,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:L.value,content:ae.value,isCustom:W.value,isFullscreen:j.value,smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":b(()=>[f(t.$slots,"tooltip-before",X(Y({...de.value})),void 0,!0)]),"tooltip-after":b(()=>[f(t.$slots,"tooltip-after",X(Y({...de.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isCustom","isFullscreen","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),q.value&&e.value.userOptions.buttons.table?(o(),N(Vt(G.value.component),Bt({key:7},G.value.props,{ref_key:"tableUnit",ref:U,onClose:Be}),We({content:b(()=>[(o(),N(n(ot),{key:"table_".concat(ke.value),colNames:J.value.colNames,head:J.value.head,body:J.value.body,config:J.value.config,title:e.value.table.useDialog?"":G.value.title,withCloseButton:!e.value.table.useDialog,onClose:Be},{th:b(({th:l})=>[C("div",{innerHTML:l,style:{display:"flex","align-items":"center"}},null,8,ea)]),td:b(({td:l})=>[Ue(S(l.name||l),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:b(()=>[Ue(S(G.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:b(()=>[C("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:a[1]||(a[1]=l=>ye(e.value.userOptions.callbacks.csv))},[pe(n(at),{name:"excel",stroke:G.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):d("",!0),n(T)?(o(),N(ul,{key:8})):d("",!0)],46,bl))}},ma=Wt(ta,[["__scopeId","data-v-d1ad2eeb"]]);export{ma as default};
