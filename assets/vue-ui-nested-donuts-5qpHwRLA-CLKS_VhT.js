
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-D0pGX8qz-BS2YwyOE.js","./vue-data-ui-8Gmf-dDN.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js","./useNestedProp-DaR1dBmj-yWXLkJlG.js","./DataTable-BfEbVwm4-B-GxLkq-.js","./Shape-12_eh8zD-Cy1mu6XW.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PenAndPaper--ADXtx65-ugytqLuo.js","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"])))=>i.map(i=>d[i]);
import{J as w,e as c,a8 as At,K as ue,aa as wa,E as $t,av as Aa,aw as xt,c1 as z,c as n,o as r,z as M,A as x,f as g,g as Ne,h as y,r as C,j as D,k as E,u as i,c3 as $a,O as pe,n as J,F,R as I,t as R,w as xa,v as _a,bq as _t,l as La,m as Lt,N as Ft,c4 as U}from"./index-CJB5jCfL.js";import{s as It,J as Ot,x as Tt,v as Dt,o as Ve,N as Be,S as G,E as Et,A as Z,$ as Pt,u as St,H as ze,L as fe,F as P,d as Nt,w as Vt,a2 as Fa,V as Ia,W as ge,R as Oa,g as Ta,e as Bt,f as zt,p as Mt,c as Me,_ as Da}from"./vue-data-ui-8Gmf-dDN.js";import{l as Rt}from"./labelUtils-B3mOOEke-Caugf9-y.js";import{E as Ut,M as Gt}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{s as jt,i as Re}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as Wt,j as Yt}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{m as qt}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{O as Ht}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as Jt}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as Xt}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as Kt}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import Qt from"./img-CqYIrJ8I-E54QgU9o.js";import Zt from"./Title-D0nD-PMs-DAiwElB_.js";import el from"./Legend-D2xmnFPH-CItLelVI.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";import"./Shape-12_eh8zD-Cy1mu6XW.js";const Ea={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",layout:{donut:{emptyFill:"#3A3A3A"},labels:{dataLabels:{color:"#CCCCCC"}}},legend:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#1A1A1A",backgroundOpacity:70,color:"#CCCCCC",borderColor:"#5A5A5A"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},td:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}}},Pa={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",layout:{labels:{dataLabels:{color:"#424242"}}},legend:{backgroundColor:"#FFF8E1",color:"#424242"},title:{color:"#424242",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#FFECB3",backgroundOpacity:30,color:"#424242",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#FFF8E1",color:"#424242"},td:{backgroundColor:"#FFF8E1",color:"#424242"}}},Sa={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",layout:{labels:{dataLabels:{color:"#BDBDBD"}}},legend:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}},tooltip:{backgroundColor:"#1E1E1E",backgroundOpacity:30,color:"#FFF8E1",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},td:{backgroundColor:"#1E1E1E",color:"#BDBDBD"}}},Na={style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",layout:{labels:{dataLabels:{color:"#AACCAA"}}},legend:{backgroundColor:"#1A1A1A",color:"#99AA99"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#2A2F2A",color:"#AACCAA",borderColor:"#66CC66"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}}},Va={style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",layout:{labels:{dataLabels:{color:"#A0AC94"}}},legend:{backgroundColor:"#fbfafa",color:"#99AA99"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#fbfafa",color:"#8A9892"}}},table:{th:{backgroundColor:"#fbfafa",color:"#8F837A"},td:{backgroundColor:"#fbfafa",color:"#8F837A"}}},Ba={style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",layout:{labels:{dataLabels:{color:"#61747E"}}},legend:{backgroundColor:"#f6f6fb",color:"#61747E"},title:{color:"#50606C",subtitle:{color:"#718890"}},tooltip:{backgroundColor:"#f6f6fb",color:"#50606C"}}},table:{th:{backgroundColor:"#f6f6fb",color:"#50606C"},td:{backgroundColor:"#f6f6fb",color:"#50606C"}}},za={default:{},dark:Ea,celebration:Pa,celebrationNight:Sa,hack:Na,zen:Va,concrete:Ba},Xl=Object.freeze(Object.defineProperty({__proto__:null,celebration:Pa,celebrationNight:Sa,concrete:Ba,dark:Ea,default:za,hack:Na,zen:Va},Symbol.toStringTag,{value:"Module"})),al=["id"],tl=["id"],ll=["xmlns","viewBox"],ol=["width","height"],sl=["id"],ul=["offset","stop-color"],rl=["offset","stop-opacity"],nl=["id"],il=["id"],dl=["id"],cl=["flood-color"],vl=["id","d"],hl=["d","fill","stroke","stroke-width","filter"],bl=["d","fill","stroke","stroke-width"],pl={key:1},fl=["d","fill"],gl={key:2},yl=["font-size","font-weight","fill","dy"],ml=["href"],Cl=["x","y","font-size","font-weight","fill"],kl={key:3},wl=["filter"],Al=["opacity","text-anchor","x","y","fill","font-size","font-weight"],$l=["opacity","text-anchor","x","y","fill","font-size","font-weight"],xl=["d","fill","onMouseenter","onClick","onMouseleave"],_l={key:4,class:"vue-data-ui-watermark"},Ll=["id"],Fl={key:0,class:"vue-ui-nested-donuts-legend-title"},Il=["onClick"],Ol=["innerHTML"],Tl={__name:"vue-ui-nested-donuts",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(Ma,{expose:Ra,emit:Ua}){const Ga=z(()=>U(()=>import("./Tooltip-D0pGX8qz-BS2YwyOE.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),ja=z(()=>U(()=>import("./vue-data-ui-8Gmf-dDN.js").then(a=>a.aA),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),Wa=z(()=>U(()=>import("./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),Ya=z(()=>U(()=>import("./DataTable-BfEbVwm4-B-GxLkq-.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),qa=z(()=>U(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([10,2,3,11,1,4,5,12,13]),import.meta.url)),Ha=z(()=>U(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([14,2,3,1,4,5,15,11]),import.meta.url)),Ja=z(()=>U(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([16,2,3]),import.meta.url)),Xa=z(()=>U(()=>import("./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_nested_donuts:Ka}=jt(),{isThemeValid:Qa,warnInvalidTheme:Za}=Jt(),A=Ma,ye=w({get(){return!!A.dataset&&A.dataset.length},set(a){return a}}),f=c(Ot()),me=c(!1),Ce=c(""),ke=c(null),Ue=c(0),S=c(null),Ge=c(null),we=c(null),je=c(null),We=c(null),Ye=c(0),qe=c(0),He=c(0),j=c(!0),W=c([]),ee=c([]),Je=c(!1),ae=c(null),Ae=c(null),Y=c(!1);function Xe(a){Y.value=a,Ue.value+=1}const e=c(Le()),Ke={name:"",series:[{name:"",values:[3],color:"#BABABA"},{name:"",values:[2],color:"#AAAAAA"},{name:"",values:[1],color:"#CACACA"}]},{loading:$e,FINAL_DATASET:q,manualLoading:xe}=Wt({...At(A),FINAL_CONFIG:e,prepareConfig:Le,callback:()=>{Promise.resolve().then(async()=>{await aa()})},skeletonDataset:[Ke,Ke],skeletonConfig:Tt({defaultConfig:e.value,userConfig:{useCssAnimation:!1,table:{show:!1},startAnimation:{show:!1},userOptions:{show:!1},style:{chart:{backgroundColor:"#99999930",layout:{labels:{dataLabels:{show:!1}}},legend:{backgroundColor:"transparent",showValue:!1,showPercentage:!1},title:{color:"#1A1A1A",subtitle:{color:"#5A5A5A"}}}}}})}),{userOptionsVisible:_e,setUserOptionsVisibility:Qe,keepUserOptionState:Ze}=Xt({config:e.value}),{svgRef:te}=Kt({config:e.value.style.chart.title});function Le(){const a=Re({userConfig:A.config,defaultConfig:Ka});let s={};const t=a.theme;if(t)if(!Qa.value(a))Za(a),s=a;else{const o=Re({userConfig:za[t]||A.config,defaultConfig:a});s={...Re({userConfig:A.config,defaultConfig:o}),customPalette:a.customPalette.length?a.customPalette:Dt[t]||Ve}}else s=a;return A.config&&Be(A.config,"events.datapointEnter")?s.events.datapointEnter=A.config.events.datapointEnter:s.events.datapointEnter=null,A.config&&Be(A.config,"events.datapointLeave")?s.events.datapointLeave=A.config.events.datapointLeave:s.events.datapointLeave=null,A.config&&Be(A.config,"events.datapointClick")?s.events.datapointClick=A.config.events.datapointClick:s.events.datapointClick=null,s}ue(()=>A.config,a=>{$e.value||(e.value=Le()),_e.value=!e.value.userOptions.showOnChartHover,ta(),Ye.value+=1,qe.value+=1,He.value+=1,_.value.dataLabels.show=e.value.style.chart.layout.labels.dataLabels.show,_.value.showTable=e.value.table.show,_.value.showTooltip=e.value.style.chart.tooltip.show,h.value.width=e.value.style.chart.width,h.value.height=e.value.style.chart.height},{deep:!0});const ea=w(()=>{const{top:a,right:s,bottom:t,left:o}=e.value.style.chart.padding;return{css:"padding:".concat(a,"px ").concat(s,"px ").concat(t,"px ").concat(o,"px"),top:a,right:s,bottom:t,left:o}});function et(a,s=1e3,t=50){return new Promise(o=>{const l=a.length;W.value=Array(l).fill(0),ee.value=[];let u=0;a.forEach((b,v)=>{setTimeout(()=>{const p=performance.now();function L(d){const m=Math.min((d-p)/s,1),O=Da(m),oe=b*O;W.value[v]=oe,W.value=[...W.value];const he=[];let se=0;A.dataset.forEach((be,De)=>{const mt=Me(be.series.reduce((Pe,Se)=>Pe+Me(G(Se.values).reduce((kt,wt)=>kt+wt,0)),0)),Ct=Me(W.value.slice(se,se+be.series.length).reduce((Pe,Se)=>Pe+Se,0)),Ee=mt-Ct;Ee>Number.MIN_VALUE&&he.push({name:"__ghost__",arcOf:be.name,arcOfId:"".concat(f.value,"_").concat(De),id:"ghost_".concat(f.value,"_").concat(De),seriesIndex:-1,datasetIndex:De,color:"transparent",value:Ee,fullValue:Ee,absoluteValues:[],ghost:!0}),se+=be.series.length}),ee.value=he,m<1?requestAnimationFrame(L):(u+=1,u===l&&o())}requestAnimationFrame(L)},v*t)})})}async function aa(){var a;if((a=e.value.startAnimation)!=null&&a.show){const s=q.value.flatMap(t=>t.series).map(t=>G(t.values).reduce((o,l)=>o+l,0));W.value=s.map(()=>0),j.value=!0,ee.value=q.value.map((t,o)=>{const l=t.series.reduce((u,b)=>u+G(b.values).reduce((v,p)=>v+p,0),0);return{name:"__ghost__",arcOf:t.name,arcOfId:"".concat(f.value,"_").concat(o),id:"ghost_".concat(f.value,"_").concat(o),seriesIndex:-1,datasetIndex:o,color:"transparent",value:l,fullValue:l,absoluteValues:[],ghost:!0}}),await wa(),et(s,e.value.startAnimation.durationMs,e.value.startAnimation.staggerMs).then(()=>{j.value=!1,ee.value=[]})}else j.value=!1}$t(async()=>{Je.value=!0,ta(),await aa()});const V=Aa(null),X=Aa(null),K=w(()=>!!e.value.debug);function ta(){if(Et(A.dataset)?(Z({componentName:"VueUiNestedDonuts",type:"dataset",debug:K.value}),ye.value=!1,xe.value=!0):xe.value=e.value.loading,e.value.responsive){const a=Ut(()=>{const{width:s,height:t}=Gt({chart:S.value,title:e.value.style.chart.title.text?Ge.value:null,legend:e.value.style.chart.legend.show?we.value:null,source:je.value,noTitle:We.value,padding:ea.value});requestAnimationFrame(()=>{h.value.width=s,h.value.height=t})});V.value&&(X.value&&V.value.unobserve(X.value),V.value.disconnect()),V.value=new ResizeObserver(a),X.value=S.value.parentNode,V.value.observe(X.value)}}xt(()=>{V.value&&(X.value&&V.value.unobserve(X.value),V.value.disconnect())});const{isPrinting:la,isImaging:oa,generatePdf:sa,generateImage:ua}=qt({elementId:"nested_donuts_".concat(f.value),fileName:e.value.style.chart.title.text||"vue-ui-nested-donuts",options:e.value.userOptions.print}),at=w(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),tt=w(()=>Pt(e.value.customPalette)),_=c({dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show});ue(e,()=>{_.value={dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}},{immediate:!0});const h=c({width:e.value.style.chart.width,height:e.value.style.chart.height}),ra=Ua;function lt({datapoint:a,index:s,seriesIndex:t}){e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:a,seriesIndex:t}),ra("selectDatapoint",{datapoint:a,index:s})}function na({from:a,to:s,duration:t,onUpdate:o,onDone:l,easing:u=Da}){const b=performance.now();function v(p){const L=Math.min((p-b)/t,1),d=u(L),m=a+(s-a)*d;o(m,L),L<1?requestAnimationFrame(v):(o(s,1),l&&l())}requestAnimationFrame(v)}const k=c([]),T=w(()=>{$e.value,q.value.forEach((s,t)=>{[null,void 0].includes(s.name)&&Z({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:t,debug:K.value}),[null,void 0].includes(s.series)?Z({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"series",index:t,debug:K.value}):s.series.length===0?Z({componentName:"VueUiNestedDonuts",type:"datasetAttributeEmpty",property:"series at index ".concat(t),debug:K.value}):s.series.forEach((o,l)=>{[null,void 0].includes(o.name)&&Z({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:l,key:"serie",debug:K.value}),[null,void 0].includes(o.values)&&Z({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"values",index:l,key:"serie",debug:K.value})})});let a=0;return q.value.map((s,t)=>({...s,total:s.series.filter(o=>!k.value.includes(o.id)).map(o=>G(o.values).reduce((l,u)=>l+u,0)).reduce((o,l)=>o+l,0),datasetIndex:t,id:"".concat(f.value,"_").concat(t),series:s.series.map((o,l)=>{var b;const u=G(o.values).reduce((v,p)=>v+p,0);return{name:o.name,arcOf:s.name,arcOfId:"".concat(f.value,"_").concat(t),id:"".concat(f.value,"_").concat(t,"_").concat(l),seriesIndex:l,datasetIndex:t,color:St(o.color)||tt.value[l]||Ve[l%Ve.length],value:j.value?(b=W.value[a++])!=null?b:0:u,absoluteValues:o.values||[]}})}))});ue(()=>A.dataset,a=>{Array.isArray(a)&&a.length>0&&(xe.value=!1)},{immediate:!0});const N=w(()=>Math.min(h.value.height,h.value.width)*(e.value.style.chart.layout.donut.strokeWidth/512)),ia=w(()=>[...T.value].map((a,s)=>{const t=a.series.filter(o=>!k.value.includes(o.id)).map(o=>o.value).reduce((o,l)=>o+l,0);return{...a,total:t,series:a.series.filter(o=>!k.value.includes(o.id)).map(o=>({...o,proportion:o.value/t}))}}));function ot(a,s,t){let o=0;for(let l=0;l<a.length;l+=1)t.includes(a[l])&&(o+=1);return o<s}const $=c(ia.value);ue(()=>ia.value,a=>$.value=a);function H(a){var p,L;ra("selectLegend",a);const s=A.dataset.flatMap((d,m)=>d.series.map((O,oe)=>({value:G(O.values).reduce((he,se)=>he+se,0),id:"".concat(f.value,"_").concat(m,"_").concat(oe),arcOfId:"".concat(f.value,"_").concat(m)}))).find(d=>d.id===a.id);if(!s)return;const t=(L=(p=T.value.flatMap(d=>d.series).find(d=>d.id===a.id))==null?void 0:p.value)!=null?L:0,o=$.value.flatMap(d=>d.series).find(d=>d.id===a.id);let l=o?o.value:0;const u=T.value.find(d=>d.id===s.arcOfId);if(!u)return;const b=u.series.map(d=>d.id),v=ot(b,b.length-1,k.value);k.value.includes(a.id)?(k.value=k.value.filter(d=>d!==a.id),e.value.serieToggleAnimation.show?na({from:l,to:t,duration:e.value.serieToggleAnimation.durationMs,onUpdate:d=>{$.value=$.value.map(m=>({...m,series:m.series.map(O=>O.id===a.id?{...O,value:d}:O)}))}}):$.value=$.value.map(d=>({...d,series:d.series.map(m=>m.id===a.id?{...m,value:t}:m)}))):v&&(e.value.serieToggleAnimation.show?na({from:l,to:0,duration:e.value.serieToggleAnimation.durationMs,onUpdate:d=>{$.value=$.value.map(m=>({...m,series:m.series.map(O=>O.id===a.id?{...O,value:d}:O)}))},onDone:()=>{k.value.push(a.id)}}):($.value=$.value.map(d=>({...d,series:d.series.map(m=>m.id===a.id?{...m,value:0}:m)})),k.value.push(a.id)))}function da(a){return T.value.length?T.value.flatMap(t=>t.series).filter(t=>t.name===a)||(e.value.debug&&console.warn('VueUiNestedDonuts - Series name not found "'.concat(a,'"')),null):(e.value.debug&&console.warn("VueUiNestedDonuts - There are no series to show."),null)}function st(a){const s=da(a);s!==null&&(Array.isArray(s)?s.forEach(t=>{k.value.includes(t.id)&&H({id:t.id})}):k.value.includes(s.id)&&H({id:s.id}))}function ut(a){const s=da(a);s!==null&&(Array.isArray(s)?s.forEach(t=>{k.value.includes(t.id)||H({id:t.id})}):k.value.includes(s.id)||H({id:s.id}))}const re=w(()=>N.value/T.value.length*e.value.style.chart.layout.donut.spacingRatio),ca=w(()=>$.value.map((a,s)=>N.value-s*N.value/T.value.length)),Q=w(()=>$.value.map((a,s)=>{const t=Math.abs(a.series.map(p=>p.value).reduce((p,L)=>p+L,0))>0,o=N.value-s*N.value/$.value.length,l=j.value?ee.value.find(p=>p.datasetIndex===s):null,u=[...a.series,...l?[l]:[]].map(p=>({...p,value:p.value<1e-11?Number.MIN_VALUE:p.value})),b=ze({series:[{name:"_",color:e.value.style.chart.layout.donut.emptyFill,value:1}]},h.value.width/2,h.value.height/2,o,o,1.99999,2,1,360,105.25,re.value),v="M ".concat(h.value.width/2,",").concat(h.value.height/2+o,"\n            a ").concat(o,",").concat(o," 0 1,1 0,").concat(-2*o,"\n            a ").concat(o,",").concat(o," 0 1,1 0,").concat(2*o);return{...a,hasData:t,radius:o,skeleton:b,fullCirclePath:v,donut:ze({series:u},h.value.width/2,h.value.height/2,o,o,1.99999,2,1,360,105.25,re.value)}})),va=w(()=>[...T.value].map((a,s)=>{const t=s*N.value/T.value.length;return{sizeRatio:t,donut:ze({series:[{value:1}]},h.value.width/2,h.value.height/2,N.value-t,N.value-t,1.99999,2,1,360,105.25,N.value/T.value.length*e.value.style.chart.layout.donut.spacingRatio)[0]}})),ha=c(null),ne=c(null),ie=c(null),Fe=c(null);function rt({datapoint:a,seriesIndex:s}){e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:a,seriesIndex:s}),me.value=!1,ha.value=null,ke.value=null,ne.value=null,ie.value=null}function ba({val:a,percentage:s,showVal:t,showPercentage:o,config:l}){return Rt({config:l,val:a,percentage:s,showVal:t,showPercentage:o})}function nt({datapoint:a,_relativeIndex:s,seriesIndex:t}){var l;e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:a,seriesIndex:t}),ha.value=a.arcOfId,ne.value=a.id,ie.value=t,ke.value=a.id,Fe.value={datapoint:a,seriesIndex:t,series:$.value,config:e.value};const o=e.value.style.chart.tooltip.customFormat;if(Ta(o)&&Mt(()=>o({seriesIndex:t,datapoint:a,series:$.value,config:e.value})))Ce.value=o({seriesIndex:t,datapoint:a,series:$.value,config:e.value});else{let u="";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&k.value.length===0){const b=$.value.map(v=>v.series.find(p=>p.seriesIndex===t));b.forEach((v,p)=>{var L;if(!v)return"";u+='\n                    <div style="display:flex; flex-direction: column; justify-content:flex-start; align-items:flex-start;padding:6px 0; '.concat(p<b.length-1?"border-bottom:1px solid ".concat(e.value.style.chart.tooltip.borderColor):"",'">\n                        <div style="display:flex; flex-direction: row; gap: 3px; justify-content:flex-start; align-items:center;">\n                            <svg viewBox="0 0 20 20" height="').concat(e.value.style.chart.tooltip.fontSize,'" width="').concat(e.value.style.chart.tooltip.fontSize,'">\n                                <circle cx="10" cy="10" r="10" fill="').concat(v.color,'"/>\n                            </svg>\n                            <span>\n                                ').concat((L=v.arcOf)!=null?L:""," - ").concat(v.name,"\n                            </span>\n                        </div>\n                        <span>\n                            <b>\n                                ").concat(ba({config:e.value.style.chart.tooltip,showVal:e.value.style.chart.tooltip.showValue,showPercentage:e.value.style.chart.tooltip.showPercentage,val:fe(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,P({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:t}),percentage:P({v:v.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})}),"\n                            </b>\n                        </span>\n                    </div>\n                ")})}else u+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(e.value.style.chart.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;">').concat((l=a.arcOf)!=null?l:""," - ").concat(a.name,"</div>"),u+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="'.concat(a.color,'"/></svg>'),e.value.style.chart.tooltip.showValue&&(u+="<b>".concat(fe(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,P({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:t}),"</b>")),e.value.style.chart.tooltip.showPercentage&&(e.value.style.chart.tooltip.showValue?u+="<span>(".concat(P({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),")</span></div>"):u+="<b>".concat(P({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),"</b></div>"));Ce.value='<div style="font-size:'.concat(e.value.style.chart.tooltip.fontSize,'px">').concat(u,"</div>")}me.value=!0}function pa(a){return a.proportion*100>e.value.style.chart.layout.labels.dataLabels.hideUnderValue}function fa(a,s){if(!e.value.useBlurOnHover)return"";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&k.value.length===0)return[null,void 0].includes(ie.value)||ie.value===s?"":"url(#blur_".concat(f.value,")");if(!e.value.style.chart.tooltip.showAllItemsAtIndex||k.value.length)return[null,void 0].includes(ne.value)||ne.value===a.id?"":"url(#blur_".concat(f.value,")")}const de=w(()=>T.value.map((a,s)=>{const t=a.series.filter(l=>!k.value.includes(l.id)),o=j.value?t.map(l=>{const u=q.value[s].series.findIndex(b=>b.name===l.name);return G(q.value[s].series[u].values).reduce((b,v)=>b+v,0)}).reduce((l,u)=>l+u,0):t.map(l=>l.value).reduce((l,u)=>l+u,0);return a.series.map((l,u)=>{const b=G(q.value[s].series[u].values).reduce((O,oe)=>O+oe,0),v=j.value?b:l.value,p=fe(e.value.style.chart.layout.labels.dataLabels.formatter,v,P({p:e.value.style.chart.layout.labels.dataLabels.prefix,v,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,seriesIndex:u}),L=isNaN(v/o)||k.value.includes(l.id)?"-":P({v:v/o*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}),d=ba({val:p,percentage:L,showVal:e.value.style.chart.legend.showValue,showPercentage:e.value.style.chart.legend.showPercentage,config:e.value.style.chart.legend}),m="".concat(l.name).concat(e.value.style.chart.legend.showPercentage||e.value.style.chart.legend.showValue?": ":"").concat(d);return{name:l.name,color:l.color,value:v,display:m,svgDisplay:"".concat(l.arcOf?"".concat(l.arcOf," - "):"").concat(m),shape:"circle",arcOf:l.arcOf,id:l.id,seriesIndex:u,datasetIndex:s,total:o,opacity:k.value.includes(l.id)?.5:1,segregate:()=>H(l),isSegregated:k.value.includes(l.id)}})})),it=w(()=>({cy:"nested-donuts-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),B=w(()=>{const a=$.value.flatMap(t=>t.series.map(o=>({name:"".concat(t.name," - ").concat(o.name),color:o.color,total:t.total}))),s=$.value.flatMap(t=>t.series.map(o=>o.value));return{head:a,body:s}});function Ie(a=null){wa(()=>{const s=B.value.head.map((l,u)=>[[l.name],[B.value.body[u]],[isNaN(B.value.body[u]/l.total)?"-":B.value.body[u]/l.total*100]]),t=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(s),o=Bt(t);a?a(o):zt({csvContent:o,title:e.value.style.chart.title.text||"vue-ui-nested-donuts"})})}const ce=w(()=>{const a=[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],s=B.value.head.map((o,l)=>{const u=P({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:B.value.body[l],s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue});return[{color:o.color,name:o.name},u,isNaN(B.value.body[l]/o.total)?"-":P({v:B.value.body[l]/o.total*100,s:"%",r:e.value.table.td.roundingPercentage})]}),t={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],head:a,body:s,config:t}});function dt(){return T.value}function ga(){_.value.showTable=!_.value.showTable}function ya(){_.value.dataLabels.show=!_.value.dataLabels.show}function ma(){_.value.showTooltip=!_.value.showTooltip}const ve=c(!1);function Oe(){ve.value=!ve.value}async function ct({scale:a=2}={}){if(!S.value)return;const{width:s,height:t}=S.value.getBoundingClientRect(),o=s/t,{imageUri:l,base64:u}=await Qt({domElement:S.value,base64:!0,img:!0,scale:a});return{imageUri:l,base64:u,title:e.value.style.chart.title.text,width:s,height:t,aspectRatio:o}}const Te=c(null);function vt(){if(!Te.value)return;const{x:a,y:s,width:t,height:o}=Te.value.getBBox();te.value&&te.value.setAttribute("viewBox","".concat(a," ").concat(s," ").concat(t+Math.min(0,a)," ").concat(o+Math.min(0,s)))}const le=w(()=>{const a=e.value.table.useDialog&&!e.value.table.show,s=_.value.showTable;return{component:a?Xa:Wa,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:a?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:Y.value,fullscreenParent:S.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:s,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});ue(()=>_.value.showTable,a=>{e.value.table.show||(a&&e.value.table.useDialog&&ae.value?ae.value.open():"close"in ae.value&&ae.value.close())});function Ca(){_.value.showTable=!1,Ae.value&&Ae.value.setTableIconState(!1)}const ht=w(()=>e.value.style.chart.backgroundColor),bt=w(()=>e.value.style.chart.legend),pt=w(()=>e.value.style.chart.title),ft=w(()=>de.value.flat().map(a=>({...a,name:a.svgDisplay}))),{exportSvg:gt,getSvg:yt}=Ht({svg:te,title:pt,legend:bt,legendItems:ft,backgroundColor:ht});async function ka({isCb:a}){if(a){const{blob:s,url:t,text:o,dataUrl:l}=await yt();e.value.userOptions.callbacks.svg({blob:s,url:t,text:o,dataUrl:l})}else gt()}return Ra({autoSize:vt,getData:dt,getImage:ct,generatePdf:sa,generateCsv:Ie,generateImage:ua,generateSvg:ka,hideSeries:ut,showSeries:st,toggleTable:ga,toggleLabels:ya,toggleTooltip:ma,toggleAnnotator:Oe,toggleFullscreen:Xe}),(a,s)=>(r(),n("div",{ref_key:"nestedDonutsChart",ref:S,class:J("vue-data-ui-component vue-ui-nested-donuts ".concat(Y.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(e.value.useCssAnimation?"":"vue-ui-dna")),style:pe("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),id:"nested_donuts_".concat(f.value),onMouseenter:s[2]||(s[2]=()=>i(Qe)(!0)),onMouseleave:s[3]||(s[3]=()=>i(Qe)(!1))},[e.value.userOptions.buttons.annotator?(r(),M(i(Ha),{key:0,svgRef:i(te),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:ve.value,onClose:Oe},{"annotator-action-close":y(()=>[C(a.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":y(({color:t})=>[C(a.$slots,"annotator-action-color",D(E({color:t})),void 0,!0)]),"annotator-action-draw":y(({mode:t})=>[C(a.$slots,"annotator-action-draw",D(E({mode:t})),void 0,!0)]),"annotator-action-undo":y(({disabled:t})=>[C(a.$slots,"annotator-action-undo",D(E({disabled:t})),void 0,!0)]),"annotator-action-redo":y(({disabled:t})=>[C(a.$slots,"annotator-action-redo",D(E({disabled:t})),void 0,!0)]),"annotator-action-delete":y(({disabled:t})=>[C(a.$slots,"annotator-action-delete",D(E({disabled:t})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):x("",!0),at.value?(r(),n("div",{key:1,ref_key:"noTitle",ref:We,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):x("",!0),e.value.style.chart.title.text?(r(),n("div",{key:2,ref_key:"chartTitle",ref:Ge},[(r(),M(Zt,{key:"title_".concat(Ye.value),config:{title:{cy:"donut-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):x("",!0),g("div",{id:"legend-top-".concat(f.value)},null,8,tl),e.value.userOptions.show&&ye.value&&(i(Ze)||i(_e))?(r(),M(i(qa),{ref_key:"userOptionsRef",ref:Ae,key:"user_option_".concat(Ue.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:i(la),isImaging:i(oa),uid:f.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.chart.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasXls:e.value.userOptions.buttons.csv,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:Y.value,isTooltip:_.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:S.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:ve.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:Xe,onGeneratePdf:i(sa),onGenerateCsv:Ie,onGenerateImage:i(ua),onGenerateSvg:ka,onToggleTable:ga,onToggleLabels:ya,onToggleTooltip:ma,onToggleAnnotator:Oe,style:pe({visibility:i(Ze)?i(_e)?"visible":"hidden":"visible"})},$a({_:2},[a.$slots.menuIcon?{name:"menuIcon",fn:y(({isOpen:t,color:o})=>[C(a.$slots,"menuIcon",D(E({isOpen:t,color:o})),void 0,!0)]),key:"0"}:void 0,a.$slots.optionTooltip?{name:"optionTooltip",fn:y(()=>[C(a.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:y(()=>[C(a.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:y(()=>[C(a.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:y(()=>[C(a.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,a.$slots.optionSvg?{name:"optionSvg",fn:y(()=>[C(a.$slots,"optionSvg",{},void 0,!0)]),key:"5"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:y(()=>[C(a.$slots,"optionTable",{},void 0,!0)]),key:"6"}:void 0,a.$slots.optionLabels?{name:"optionLabels",fn:y(()=>[C(a.$slots,"optionLabels",{},void 0,!0)]),key:"7"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:y(({toggleFullscreen:t,isFullscreen:o})=>[C(a.$slots,"optionFullscreen",D(E({toggleFullscreen:t,isFullscreen:o})),void 0,!0)]),key:"8"}:void 0,a.$slots.optionAnnotator?{name:"optionAnnotator",fn:y(({toggleAnnotator:t,isAnnotator:o})=>[C(a.$slots,"optionAnnotator",D(E({toggleAnnotator:t,isAnnotator:o})),void 0,!0)]),key:"9"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasXls","hasImg","hasSvg","hasTable","hasLabel","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):x("",!0),(r(),n("svg",{ref_key:"svgRef",ref:te,xmlns:i(Nt),class:J({"vue-data-ui-fullscreen--on":Y.value,"vue-data-ui-fulscreen--off":!Y.value,"vue-data-ui-svg":!0}),viewBox:"0 0 ".concat(h.value.width<=0?.001:h.value.width," ").concat(h.value.height<0?.001:h.value.height),style:pe("max-width:100%; overflow: visible; background:transparent;color:".concat(e.value.style.chart.color,";").concat(ea.value.css))},[g("g",{ref_key:"G",ref:Te,class:"vue-data-ui-g"},[Ne(i(Ja)),a.$slots["chart-background"]?(r(),n("foreignObject",{key:0,x:0,y:0,width:h.value.width<=0?.001:h.value.width,height:h.value.height<0?.001:h.value.height,style:{pointerEvents:"none"}},[C(a.$slots,"chart-background",{},void 0,!0)],8,ol)):x("",!0),g("defs",null,[(r(!0),n(F,null,I(va.value,(t,o)=>(r(),n("radialGradient",{id:"radial_".concat(f.value,"_").concat(o)},[s[4]||(s[4]=g("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1)),g("stop",{offset:"".concat((1-re.value/ca.value[o])*100,"%"),"stop-color":i(Vt)("#FFFFFF",0),"stop-opacity":"0"},null,8,ul),g("stop",{offset:"".concat((1-re.value/ca.value[o]/2)*100,"%"),"stop-color":"#FFFFFF","stop-opacity":e.value.style.chart.gradientIntensity/100},null,8,rl),s[5]||(s[5]=g("stop",{offset:"100%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1))],8,sl))),256))]),g("defs",null,[g("filter",{id:"blur_".concat(f.value),x:"-50%",y:"-50%",width:"200%",height:"200%"},[g("feGaussianBlur",{in:"SourceGraphic",stdDeviation:2,id:"blur_std_".concat(f.value)},null,8,il),s[6]||(s[6]=g("feColorMatrix",{type:"saturate",values:"0"},null,-1))],8,nl),g("filter",{id:"shadow_".concat(f.value),"color-interpolation-filters":"sRGB"},[g("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10","flood-opacity":"0.5","flood-color":e.value.style.chart.layout.donut.shadowColor},null,8,cl)],8,dl)]),g("defs",null,[(r(!0),n(F,null,I(Q.value,(t,o)=>(r(),n("path",{key:"path-full-".concat(o),id:"path-full-".concat(o,"-").concat(f.value),d:t.fullCirclePath,fill:"none"},null,8,vl))),128))]),(r(!0),n(F,null,I(Q.value,(t,o)=>(r(),n("g",null,[t.hasData?(r(!0),n(F,{key:0},I(t.donut.filter(l=>!l.ghost),(l,u)=>(r(),n("g",null,[g("path",{class:"vue-ui-donut-arc-path",d:l.arcSlice,fill:l.color,stroke:e.value.style.chart.layout.donut.borderColorAuto?e.value.style.chart.backgroundColor:e.value.style.chart.layout.donut.borderColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:fa(l,u)},null,8,hl)]))),256)):(r(!0),n(F,{key:1},I(t.skeleton,(l,u)=>(r(),n("g",null,[g("path",{class:"vue-ui-donut-arc-path",d:l.arcSlice,fill:l.color,stroke:e.value.style.chart.layout.donut.borderColorAuto?e.value.style.chart.backgroundColor:e.value.style.chart.layout.donut.borderColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth},null,8,bl)]))),256))]))),256)),e.value.style.chart.useGradient?(r(),n("g",pl,[(r(!0),n(F,null,I(va.value,(t,o)=>(r(),n("g",null,[g("path",{d:t.donut.arcSlice,fill:"url(#radial_".concat(f.value,"_").concat(o,")"),stroke:"transparent","stroke-width":"0"},null,8,fl)]))),256))])):x("",!0),e.value.style.chart.layout.labels.dataLabels.showDonutName?(r(),n("g",gl,[e.value.style.chart.layout.labels.dataLabels.curvedDonutName?(r(!0),n(F,{key:0},I(Q.value,(t,o)=>(r(),n("g",null,[(r(!0),n(F,null,I(t.donut,(l,u)=>(r(),n("g",null,[u===0&&h.value.width&&h.value.height?(r(),n("text",{key:0,class:J({animated:e.value.useCssAnimation}),"text-anchor":"middle","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldDonutName?"bold":"normal",fill:e.value.style.chart.layout.labels.dataLabels.color,dy:e.value.style.chart.layout.labels.dataLabels.donutNameOffsetY},[g("textPath",{href:"#path-full-".concat(o,"-").concat(f.value),startOffset:"50%","text-anchor":"middle",method:"align",spacing:"auto"},R(e.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?i(Fa)({source:t.name,length:e.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):t.name),9,ml)],10,yl)):x("",!0)]))),256))]))),256)):(r(!0),n(F,{key:1},I(Q.value,(t,o)=>(r(),n("g",null,[(r(!0),n(F,null,I(t.donut,(l,u)=>(r(),n("g",null,[u===0&&h.value.width&&h.value.height?(r(),n("text",{key:0,class:J({animated:e.value.useCssAnimation}),x:h.value.width/2,y:l.startY-e.value.style.chart.layout.labels.dataLabels.fontSize+e.value.style.chart.layout.labels.dataLabels.donutNameOffsetY,"text-anchor":"middle","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldDonutName?"bold":"normal",fill:e.value.style.chart.layout.labels.dataLabels.color},R(e.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?i(Fa)({source:t.name,length:e.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):t.name),11,Cl)):x("",!0)]))),256))]))),256))])):x("",!0),e.value.style.chart.layout.labels.dataLabels.show?(r(),n("g",kl,[(r(!0),n(F,null,I(Q.value,(t,o)=>(r(),n("g",null,[(r(!0),n(F,null,I(t.donut.filter(l=>!l.ghost),(l,u)=>(r(),n("g",{filter:fa(l,u)},[xa(g("text",{class:J({animated:e.value.useCssAnimation}),opacity:pa(l)?1:0,"text-anchor":i(ge)(l,!0).anchor,x:i(ge)(l,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(Ia)(l,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY)+(e.value.style.chart.layout.labels.dataLabels.showValueFirst&&e.value.style.chart.layout.labels.dataLabels.showValue?e.value.style.chart.layout.labels.dataLabels.fontSize:0),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?l.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldPercentage?"bold":"normal"},R(i(Oa)(i(P)({v:l.proportion*100,s:"%",r:e.value.style.chart.layout.labels.dataLabels.roundingPercentage}),e.value.style.chart.layout.labels.dataLabels.usePercentageParens?"(":"",e.value.style.chart.layout.labels.dataLabels.usePercentageParens?")":"")),11,Al),[[_a,_.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage]]),xa(g("text",{class:J({animated:e.value.useCssAnimation}),opacity:pa(l)?1:0,"text-anchor":i(ge)(l,!0).anchor,x:i(ge)(l,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(Ia)(l,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY)+(e.value.style.chart.layout.labels.dataLabels.showValueFirst||!e.value.style.chart.layout.labels.dataLabels.showPercentage?0:e.value.style.chart.layout.labels.dataLabels.fontSize),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?l.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"},R(i(Oa)(i(fe)(e.value.style.chart.layout.labels.dataLabels.formatter,l.value,i(P)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:l,seriesIndex:o,datapointIndex:u}),e.value.style.chart.layout.labels.dataLabels.useValueParens?"(":"",e.value.style.chart.layout.labels.dataLabels.useValueParens?")":"")),11,$l),[[_a,_.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showValue]])],8,wl))),256))]))),256))])):x("",!0),(r(!0),n(F,null,I(Q.value,(t,o)=>(r(),n("g",null,[(r(!0),n(F,null,I(t.donut,(l,u)=>(r(),n("g",null,[g("path",{d:l.arcSlice,fill:ke.value===l.id?e.value.style.chart.layout.donut.selectedColor:"transparent",onMouseenter:b=>nt({datapoint:l,seriesIndex:l.seriesIndex}),onClick:b=>lt({datapoint:l,index:u,seriesIndex:l.seriesIndex}),onMouseleave:b=>rt({datapoint:l,seriesIndex:l.seriesIndex})},null,40,xl)]))),256))]))),256)),C(a.$slots,"svg",{svg:h.value},void 0,!0)],512)],14,ll)),a.$slots.watermark?(r(),n("div",_l,[C(a.$slots,"watermark",D(E({isPrinting:i(la)||i(oa)})),void 0,!0)])):x("",!0),Ne(i(Ga),{show:_.value.showTooltip&&me.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,fontSize:e.value.style.chart.tooltip.fontSize,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:S.value,content:Ce.value,isFullscreen:Y.value,isCustom:i(Ta)(e.value.style.chart.tooltip.customFormat),smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":y(()=>[C(a.$slots,"tooltip-before",D(E({...Fe.value})),void 0,!0)]),"tooltip-after":y(()=>[C(a.$slots,"tooltip-after",D(E({...Fe.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),g("div",{id:"legend-bottom-".concat(f.value)},null,8,Ll),Je.value?(r(),M(_t,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(f.value):"#legend-bottom-".concat(f.value)},[e.value.style.chart.legend.show?(r(),n("div",{key:0,ref_key:"chartLegend",ref:we,class:J({"vue-ui-nested-donuts-legend":de.value.length>1})},[(r(!0),n(F,null,I(de.value,(t,o)=>(r(),M(el,{key:"legend_".concat(o,"_").concat(He.value),legendSet:t,config:it.value,onClickMarker:s[0]||(s[0]=({legend:l})=>H(l))},{legendTitle:y(({titleSet:l})=>[l[0]&&l[0].arcOf?(r(),n("div",Fl,R(l[0].arcOf),1)):x("",!0)]),item:y(({legend:l,index:u})=>[g("div",{onClick:b=>H(l),style:pe("opacity:".concat(k.value.includes(l.id)?.5:1))},R(l.display),13,Il)]),_:1},8,["legendSet","config"]))),128))],2)):x("",!0)],8,["to"])):x("",!0),e.value.style.chart.legend.show?x("",!0):(r(),n("div",{key:6,ref_key:"chartLegend",ref:we},[C(a.$slots,"legend",{legend:de.value},void 0,!0)],512)),a.$slots.source?(r(),n("div",{key:7,ref_key:"source",ref:je,dir:"auto"},[C(a.$slots,"source",{},void 0,!0)],512)):x("",!0),ye.value&&e.value.userOptions.buttons.table?(r(),M(Ft(le.value.component),Lt({key:8},le.value.props,{ref_key:"tableUnit",ref:ae,onClose:Ca}),$a({content:y(()=>[(r(),M(i(Ya),{key:"table_".concat(qe.value),colNames:ce.value.colNames,head:ce.value.head,body:ce.value.body,config:ce.value.config,title:e.value.table.useDialog?"":le.value.title,withCloseButton:!e.value.table.useDialog,onClose:Ca},{th:y(({th:t})=>[g("div",{innerHTML:t,style:{display:"flex","align-items":"center"}},null,8,Ol)]),td:y(({td:t})=>[La(R(t.name||t),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:y(()=>[La(R(le.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:y(()=>[g("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:s[1]||(s[1]=t=>Ie(e.value.userOptions.callbacks.csv))},[Ne(i(ja),{name:"excel",stroke:le.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):x("",!0),i($e)?(r(),M(Yt,{key:9})):x("",!0)],46,al))}},Dl=It(Tl,[["__scopeId","data-v-80821f9a"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"}));export{Xl as a,Kl as b,Dl as v};
