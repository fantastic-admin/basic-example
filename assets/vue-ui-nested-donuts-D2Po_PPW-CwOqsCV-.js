
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-68Yi_FFl-CRPaJsgv.js","./vue-data-ui-BN9YfUec.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./vue-ui-accordion-UpZ765hd-DndPzmcD.js","./useNestedProp-dJX_8vvZ-BzBW50KN.js","./DataTable-BT7VF2ua-Cw2NNXsE.js","./Shape-CNXKB8O0-BJGuTKHC.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js","./PenAndPaper-DSvu9dwa-B6YjX2xm.js","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./PackageVersion-TgflyMpU-q2MkeeNq.js","./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"])))=>i.map(i=>d[i]);
import{J as m,e as d,a7 as it,K as se,a9 as wa,E as vt,au as xa,av as dt,b_ as z,c as r,o as n,z as M,A as $,f as b,g as Ee,u as i,c0 as $a,h as _,r as A,j as J,k as Q,O as ye,n as R,F as I,R as O,t as P,w as ka,v as _a,bn as ct,l as La,m as ht,N as pt,c1 as B}from"./index-DXZKKOp8.js";import{s as yt,Q as ft,A as bt,v as gt,m as ze,L as Me,N as U,g as mt,p as K,C as wt,a as xt,k as Re,I as ue,f as T,y as $t,O as kt,a4 as Ca,V as Be,W as Z,F as Aa,e as _t,r as Lt,h as Ct,c as Ue,D as Ia}from"./vue-data-ui-BN9YfUec.js";import{E as At,M as It}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as Ot,o as Oa}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{S as Tt,T as Ft}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{m as Nt}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{O as St}from"./useSvgExport-DrjCWun4-CbW14PXm.js";import{a as Vt}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as Pt}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import Dt from"./img-BecE5qXd-CsL1o-EN.js";import Et from"./Title-BWp-37K_-BMUMQpSO.js";import{J as zt}from"./themes-AUNCOb2G-RAhReTPj.js";import Mt from"./Legend-G6GMcdAc-7HaGLNN7.js";import"./alert-l5XlVwCh.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";import"./Shape-CNXKB8O0-BJGuTKHC.js";const Rt=["id"],Bt=["id"],Ut=["xmlns","viewBox"],Gt=["width","height"],Yt=["id"],Wt=["offset","stop-color"],jt=["offset","stop-opacity"],Ht=["id"],Xt=["id"],qt=["id"],Jt=["flood-color"],Qt=["id","d"],Kt=["d","fill","stroke","stroke-width","filter"],Zt=["d","fill","stroke","stroke-width"],el={key:1},al=["d","fill"],tl={key:2},ll=["font-size","font-weight","fill","dy"],ol=["href"],sl=["x","y","font-size","font-weight","fill"],ul={key:3},nl=["filter"],rl=["opacity","text-anchor","x","y","fill","font-size","font-weight"],il=["opacity","text-anchor","x","y","fill","font-size","font-weight"],vl=["text-anchor","x","y","fill","font-size","font-weight"],dl=["d","fill","onMouseenter","onClick","onMouseleave"],cl={key:4,class:"vue-data-ui-watermark"},hl=["id"],pl={key:0,class:"vue-ui-nested-donuts-legend-title"},yl=["onClick"],fl=["innerHTML"],bl={__name:"vue-ui-nested-donuts",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(Ta,{expose:Fa,emit:Na}){const Sa=z(()=>B(()=>import("./Tooltip-68Yi_FFl-CRPaJsgv.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),Va=z(()=>B(()=>import("./vue-data-ui-BN9YfUec.js").then(a=>a.aw),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),Pa=z(()=>B(()=>import("./vue-ui-accordion-UpZ765hd-DndPzmcD.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),Da=z(()=>B(()=>import("./DataTable-BT7VF2ua-Cw2NNXsE.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),Ea=z(()=>B(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([10,2,3,11,1,4,5,12,13]),import.meta.url)),za=z(()=>B(()=>import("./PenAndPaper-DSvu9dwa-B6YjX2xm.js"),__vite__mapDeps([14,2,3,1,4,5,15,11]),import.meta.url)),Ma=z(()=>B(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([16,2,3]),import.meta.url)),Ra=z(()=>B(()=>import("./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_nested_donuts:Ba}=Ot(),w=Ta,fe=m({get(){return!!w.dataset&&w.dataset.length},set(a){return a}}),f=d(ft()),be=d(!1),ge=d(""),me=d(null),Ge=d(0),S=d(null),Ye=d(null),we=d(null),We=d(null),je=d(null),He=d(0),Xe=d(0),qe=d(0),G=d(!0),Y=d([]),ee=d([]),Je=d(!1),ae=d(null),xe=d(null),W=d(!1);function Qe(a){W.value=a,Ge.value+=1}const e=d(Le()),Ke={name:"",series:[{name:"",values:[3],color:"#BABABA"},{name:"",values:[2],color:"#AAAAAA"},{name:"",values:[1],color:"#CACACA"}]},{loading:$e,FINAL_DATASET:j,manualLoading:ke}=Tt({...it(w),FINAL_CONFIG:e,prepareConfig:Le,callback:()=>{Promise.resolve().then(async()=>{await ta()})},skeletonDataset:[Ke,Ke],skeletonConfig:bt({defaultConfig:e.value,userConfig:{useCssAnimation:!1,table:{show:!1},startAnimation:{show:!1},userOptions:{show:!1},style:{chart:{backgroundColor:"#99999930",layout:{labels:{dataLabels:{show:!1}}},legend:{backgroundColor:"transparent",showValue:!1,showPercentage:!1},title:{color:"#1A1A1A",subtitle:{color:"#5A5A5A"}}}}}})}),{userOptionsVisible:_e,setUserOptionsVisibility:Ze,keepUserOptionState:ea}=Vt({config:e.value}),{svgRef:te}=Pt({config:e.value.style.chart.title});function Le(){const a=Oa({userConfig:w.config,defaultConfig:Ba});let s={};return a.theme?s={...Oa({userConfig:zt.vue_ui_nested_donuts[a.theme]||w.config,defaultConfig:a}),customPalette:gt[a.theme]||ze}:s=a,w.config&&Me(w.config,"events.datapointEnter")?s.events.datapointEnter=w.config.events.datapointEnter:s.events.datapointEnter=null,w.config&&Me(w.config,"events.datapointLeave")?s.events.datapointLeave=w.config.events.datapointLeave:s.events.datapointLeave=null,w.config&&Me(w.config,"events.datapointClick")?s.events.datapointClick=w.config.events.datapointClick:s.events.datapointClick=null,s}se(()=>w.config,a=>{$e.value||(e.value=Le()),_e.value=!e.value.userOptions.showOnChartHover,la(),He.value+=1,Xe.value+=1,qe.value+=1,k.value.dataLabels.show=e.value.style.chart.layout.labels.dataLabels.show,k.value.showTable=e.value.table.show,k.value.showTooltip=e.value.style.chart.tooltip.show,h.value.width=e.value.style.chart.width,h.value.height=e.value.style.chart.height},{deep:!0});const aa=m(()=>{const{top:a,right:s,bottom:o,left:l}=e.value.style.chart.padding;return{css:"padding:".concat(a,"px ").concat(s,"px ").concat(o,"px ").concat(l,"px"),top:a,right:s,bottom:o,left:l}});function Ua(a,s=1e3,o=50){return new Promise(l=>{const t=a.length;Y.value=Array(t).fill(0),ee.value=[];let u=0;a.forEach((y,c)=>{setTimeout(()=>{const p=performance.now();function C(v){const g=Math.min((v-p)/s,1),F=Ia(g),Ne=y*F;Y.value[c]=Ne,Y.value=[...Y.value];const he=[];let oe=0;w.dataset.forEach((pe,Se)=>{const st=Ue(pe.series.reduce((Pe,De)=>Pe+Ue(U(De.values).reduce((nt,rt)=>nt+rt,0)),0)),ut=Ue(Y.value.slice(oe,oe+pe.series.length).reduce((Pe,De)=>Pe+De,0)),Ve=st-ut;Ve>Number.MIN_VALUE&&he.push({name:"__ghost__",arcOf:pe.name,arcOfId:"".concat(f.value,"_").concat(Se),id:"ghost_".concat(f.value,"_").concat(Se),seriesIndex:-1,datasetIndex:Se,color:"transparent",value:Ve,fullValue:Ve,absoluteValues:[],ghost:!0}),oe+=pe.series.length}),ee.value=he,g<1?requestAnimationFrame(C):(u+=1,u===t&&l())}requestAnimationFrame(C)},c*o)})})}async function ta(){var a;if((a=e.value.startAnimation)!=null&&a.show){const s=j.value.flatMap(o=>o.series).map(o=>U(o.values).reduce((l,t)=>l+t,0));Y.value=s.map(()=>0),G.value=!0,ee.value=j.value.map((o,l)=>{const t=o.series.reduce((u,y)=>u+U(y.values).reduce((c,p)=>c+p,0),0);return{name:"__ghost__",arcOf:o.name,arcOfId:"".concat(f.value,"_").concat(l),id:"ghost_".concat(f.value,"_").concat(l),seriesIndex:-1,datasetIndex:l,color:"transparent",value:t,fullValue:t,absoluteValues:[],ghost:!0}}),await wa(),Ua(s,e.value.startAnimation.durationMs,e.value.startAnimation.staggerMs).then(()=>{G.value=!1,ee.value=[]})}else G.value=!1}vt(async()=>{Je.value=!0,la(),await ta()});const D=xa(null),H=xa(null),X=m(()=>!!e.value.debug);function la(){if(mt(w.dataset)?(K({componentName:"VueUiNestedDonuts",type:"dataset",debug:X.value}),fe.value=!1,ke.value=!0):ke.value=e.value.loading,e.value.responsive){const a=At(()=>{const{width:s,height:o}=It({chart:S.value,title:e.value.style.chart.title.text?Ye.value:null,legend:e.value.style.chart.legend.show?we.value:null,source:We.value,noTitle:je.value,padding:aa.value});requestAnimationFrame(()=>{h.value.width=s,h.value.height=o})});D.value&&(H.value&&D.value.unobserve(H.value),D.value.disconnect()),D.value=new ResizeObserver(a),H.value=S.value.parentNode,D.value.observe(H.value)}}dt(()=>{D.value&&(H.value&&D.value.unobserve(H.value),D.value.disconnect())});const{isPrinting:oa,isImaging:sa,generatePdf:ua,generateImage:na}=Nt({elementId:"nested_donuts_".concat(f.value),fileName:e.value.style.chart.title.text||"vue-ui-nested-donuts",options:e.value.userOptions.print}),Ga=m(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),Ya=m(()=>wt(e.value.customPalette)),k=d({dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show});se(e,()=>{k.value={dataLabels:{show:e.value.style.chart.layout.labels.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}},{immediate:!0});const h=d({width:e.value.style.chart.width,height:e.value.style.chart.height}),ra=Na;function Wa({datapoint:a,index:s,seriesIndex:o}){e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:a,seriesIndex:o}),ra("selectDatapoint",{datapoint:a,index:s})}function ia({from:a,to:s,duration:o,onUpdate:l,onDone:t,easing:u=Ia}){const y=performance.now();function c(p){const C=Math.min((p-y)/o,1),v=u(C),g=a+(s-a)*v;l(g,C),C<1?requestAnimationFrame(c):(l(s,1),t&&t())}requestAnimationFrame(c)}const L=d([]),N=m(()=>{$e.value,j.value.forEach((s,o)=>{[null,void 0].includes(s.name)&&K({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:o,debug:X.value}),[null,void 0].includes(s.series)?K({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"series",index:o,debug:X.value}):s.series.length===0?K({componentName:"VueUiNestedDonuts",type:"datasetAttributeEmpty",property:"series at index ".concat(o),debug:X.value}):s.series.forEach((l,t)=>{[null,void 0].includes(l.name)&&K({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"name",index:t,key:"serie",debug:X.value}),[null,void 0].includes(l.values)&&K({componentName:"VueUiNestedDonuts",type:"datasetSerieAttribute",property:"values",index:t,key:"serie",debug:X.value})})});let a=0;return j.value.map((s,o)=>({...s,total:s.series.filter(l=>!L.value.includes(l.id)).map(l=>U(l.values).reduce((t,u)=>t+u,0)).reduce((l,t)=>l+t,0),datasetIndex:o,id:"".concat(f.value,"_").concat(o),series:s.series.map((l,t)=>{var y;const u=U(l.values).reduce((c,p)=>c+p,0);return{name:l.name,arcOf:s.name,arcOfId:"".concat(f.value,"_").concat(o),id:"".concat(f.value,"_").concat(o,"_").concat(t),seriesIndex:t,datasetIndex:o,color:xt(l.color)||Ya.value[t]||ze[t%ze.length],value:G.value?(y=Y.value[a++])!=null?y:0:u,absoluteValues:l.values||[]}})}))});se(()=>w.dataset,a=>{Array.isArray(a)&&a.length>0&&(ke.value=!1)},{immediate:!0});const V=m(()=>Math.min(h.value.height,h.value.width)*(e.value.style.chart.layout.donut.strokeWidth/512)),va=m(()=>[...N.value].map((a,s)=>{const o=a.series.filter(l=>!L.value.includes(l.id)).map(l=>l.value).reduce((l,t)=>l+t,0);return{...a,total:o,series:a.series.filter(l=>!L.value.includes(l.id)).map(l=>({...l,proportion:l.value/o}))}}));function ja(a,s,o){let l=0;for(let t=0;t<a.length;t+=1)o.includes(a[t])&&(l+=1);return l<s}const x=d(va.value);se(()=>va.value,a=>x.value=a);function Ce(a){var p,C;ra("selectLegend",a);const s=w.dataset.flatMap((v,g)=>v.series.map((F,Ne)=>({value:U(F.values).reduce((he,oe)=>he+oe,0),id:"".concat(f.value,"_").concat(g,"_").concat(Ne),arcOfId:"".concat(f.value,"_").concat(g)}))).find(v=>v.id===a.id);if(!s)return;const o=(C=(p=N.value.flatMap(v=>v.series).find(v=>v.id===a.id))==null?void 0:p.value)!=null?C:0,l=x.value.flatMap(v=>v.series).find(v=>v.id===a.id);let t=l?l.value:0;const u=N.value.find(v=>v.id===s.arcOfId);if(!u)return;const y=u.series.map(v=>v.id),c=ja(y,y.length-1,L.value);L.value.includes(a.id)?(L.value=L.value.filter(v=>v!==a.id),e.value.serieToggleAnimation.show?ia({from:t,to:o,duration:e.value.serieToggleAnimation.durationMs,onUpdate:v=>{x.value=x.value.map(g=>({...g,series:g.series.map(F=>F.id===a.id?{...F,value:v}:F)}))}}):x.value=x.value.map(v=>({...v,series:v.series.map(g=>g.id===a.id?{...g,value:o}:g)}))):c&&(e.value.serieToggleAnimation.show?ia({from:t,to:0,duration:e.value.serieToggleAnimation.durationMs,onUpdate:v=>{x.value=x.value.map(g=>({...g,series:g.series.map(F=>F.id===a.id?{...F,value:v}:F)}))},onDone:()=>{L.value.push(a.id)}}):(x.value=x.value.map(v=>({...v,series:v.series.map(g=>g.id===a.id?{...g,value:0}:g)})),L.value.push(a.id)))}const ne=m(()=>V.value/N.value.length*e.value.style.chart.layout.donut.spacingRatio),da=m(()=>x.value.map((a,s)=>V.value-s*V.value/N.value.length)),q=m(()=>x.value.map((a,s)=>{const o=Math.abs(a.series.map(p=>p.value).reduce((p,C)=>p+C,0))>0,l=V.value-s*V.value/x.value.length,t=G.value?ee.value.find(p=>p.datasetIndex===s):null,u=[...a.series,...t?[t]:[]].map(p=>({...p,value:p.value<1e-11?Number.MIN_VALUE:p.value})),y=Re({series:[{name:"_",color:e.value.style.chart.layout.donut.emptyFill,value:1}]},h.value.width/2,h.value.height/2,l,l,1.99999,2,1,360,105.25,ne.value),c="M ".concat(h.value.width/2,",").concat(h.value.height/2+l,"\n            a ").concat(l,",").concat(l," 0 1,1 0,").concat(-2*l,"\n            a ").concat(l,",").concat(l," 0 1,1 0,").concat(2*l);return{...a,hasData:o,radius:l,skeleton:y,fullCirclePath:c,donut:Re({series:u},h.value.width/2,h.value.height/2,l,l,1.99999,2,1,360,105.25,ne.value)}})),ca=m(()=>[...N.value].map((a,s)=>{const o=s*V.value/N.value.length;return{sizeRatio:o,donut:Re({series:[{value:1}]},h.value.width/2,h.value.height/2,V.value-o,V.value-o,1.99999,2,1,360,105.25,V.value/N.value.length*e.value.style.chart.layout.donut.spacingRatio)[0]}})),ha=d(null),re=d(null),ie=d(null),Ae=d(null);function Ha({datapoint:a,seriesIndex:s}){e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:a,seriesIndex:s}),be.value=!1,ha.value=null,me.value=null,re.value=null,ie.value=null}function Xa({datapoint:a,_relativeIndex:s,seriesIndex:o}){var t;e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:a,seriesIndex:o}),ha.value=a.arcOfId,re.value=a.id,ie.value=o,me.value=a.id,Ae.value={datapoint:a,seriesIndex:o,series:x.value,config:e.value};const l=e.value.style.chart.tooltip.customFormat;if(Aa(l)&&Ct(()=>l({seriesIndex:o,datapoint:a,series:x.value,config:e.value})))ge.value=l({seriesIndex:o,datapoint:a,series:x.value,config:e.value});else{let u="";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&L.value.length===0){const y=x.value.map(c=>c.series.find(p=>p.seriesIndex===o));y.forEach((c,p)=>{var C;if(!c)return"";u+='\n                    <div style="display:flex; flex-direction: column; justify-content:flex-start; align-items:flex-start;padding:6px 0; '.concat(p<y.length-1?"border-bottom:1px solid ".concat(e.value.style.chart.tooltip.borderColor):"",'">\n                        <div style="display:flex; flex-direction: row; gap: 3px; justify-content:flex-start; align-items:center;">\n                            <svg viewBox="0 0 20 20" height="').concat(e.value.style.chart.tooltip.fontSize,'" width="').concat(e.value.style.chart.tooltip.fontSize,'">\n                                <circle cx="10" cy="10" r="10" fill="').concat(c.color,'"/>\n                            </svg>\n                            <span>\n                                ').concat((C=c.arcOf)!=null?C:""," - ").concat(c.name,"\n                            </span>\n                        </div>\n                        <span>\n                            ").concat(e.value.style.chart.tooltip.showValue?"<b>".concat(ue(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,T({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:o}),"\n                        </b>"):"","\n                            ").concat(e.value.style.chart.tooltip.showPercentage?"(".concat(T({v:c.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),")"):"","\n                        </span>\n                    </div>\n                ")})}else u+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(e.value.style.chart.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;">').concat((t=a.arcOf)!=null?t:""," - ").concat(a.name,"</div>"),u+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="'.concat(a.color,'"/></svg>'),e.value.style.chart.tooltip.showValue&&(u+="<b>".concat(ue(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,T({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:a,seriesIndex:o}),"</b>")),e.value.style.chart.tooltip.showPercentage&&(e.value.style.chart.tooltip.showValue?u+="<span>(".concat(T({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),")</span></div>"):u+="<b>".concat(T({v:a.proportion*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage}),"</b></div>"));ge.value='<div style="font-size:'.concat(e.value.style.chart.tooltip.fontSize,'px">').concat(u,"</div>")}be.value=!0}function Ie(a){return a.proportion*100>e.value.style.chart.layout.labels.dataLabels.hideUnderValue}function pa(a,s){if(!e.value.useBlurOnHover)return"";if(e.value.style.chart.tooltip.showAllItemsAtIndex&&L.value.length===0)return[null,void 0].includes(ie.value)||ie.value===s?"":"url(#blur_".concat(f.value,")");if(!e.value.style.chart.tooltip.showAllItemsAtIndex||L.value.length)return[null,void 0].includes(re.value)||re.value===a.id?"":"url(#blur_".concat(f.value,")")}const ve=m(()=>N.value.map((a,s)=>{const o=a.series.filter(t=>!L.value.includes(t.id)),l=G.value?o.map(t=>{const u=j.value[s].series.findIndex(y=>y.name===t.name);return U(j.value[s].series[u].values).reduce((y,c)=>y+c,0)}).reduce((t,u)=>t+u,0):o.map(t=>t.value).reduce((t,u)=>t+u,0);return a.series.map((t,u)=>{const y=U(j.value[s].series[u].values).reduce((C,v)=>C+v,0),c=G.value?y:t.value,p="".concat(t.name).concat(e.value.style.chart.legend.showPercentage||e.value.style.chart.legend.showValue?": ":"").concat(e.value.style.chart.legend.showValue?ue(e.value.style.chart.layout.labels.dataLabels.formatter,c,T({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:c,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:t,seriesIndex:u}):"").concat(e.value.style.chart.legend.showPercentage?L.value.includes(t.id)?"".concat(e.value.style.chart.legend.showValue?"(":"","- %").concat(e.value.style.chart.legend.showValue?")":""):"".concat(e.value.style.chart.legend.showValue?"(":"").concat(isNaN(c/l)?"-":T({v:c/l*100,s:"%",r:e.value.style.chart.legend.roundingPercentage})).concat(e.value.style.chart.legend.showValue?")":""):"");return{name:t.name,color:t.color,value:c,display:p,svgDisplay:"".concat(t.arcOf?"".concat(t.arcOf," - "):"").concat(p),shape:"circle",arcOf:t.arcOf,id:t.id,seriesIndex:u,datasetIndex:s,total:l,opacity:L.value.includes(t.id)?.5:1,segregate:()=>Ce(t),isSegregated:L.value.includes(t.id)}})})),qa=m(()=>({cy:"nested-donuts-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),E=m(()=>{const a=x.value.flatMap(o=>o.series.map(l=>({name:"".concat(o.name," - ").concat(l.name),color:l.color,total:o.total}))),s=x.value.flatMap(o=>o.series.map(l=>l.value));return{head:a,body:s}});function Oe(a=null){wa(()=>{const s=E.value.head.map((t,u)=>[[t.name],[E.value.body[u]],[isNaN(E.value.body[u]/t.total)?"-":E.value.body[u]/t.total*100]]),o=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(s),l=_t(o);a?a(l):Lt({csvContent:l,title:e.value.style.chart.title.text||"vue-ui-nested-donuts"})})}const de=m(()=>{const a=[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],s=E.value.head.map((l,t)=>{const u=T({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:E.value.body[t],s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue});return[{color:l.color,name:l.name},u,isNaN(E.value.body[t]/l.total)?"-":T({v:E.value.body[t]/l.total*100,s:"%",r:e.value.table.td.roundingPercentage})]}),o={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{colNames:[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage],head:a,body:s,config:o}});function Ja(){return N.value}function ya(){k.value.showTable=!k.value.showTable}function fa(){k.value.dataLabels.show=!k.value.dataLabels.show}function ba(){k.value.showTooltip=!k.value.showTooltip}const ce=d(!1);function Te(){ce.value=!ce.value}async function Qa({scale:a=2}={}){if(!S.value)return;const{width:s,height:o}=S.value.getBoundingClientRect(),l=s/o,{imageUri:t,base64:u}=await Dt({domElement:S.value,base64:!0,img:!0,scale:a});return{imageUri:t,base64:u,title:e.value.style.chart.title.text,width:s,height:o,aspectRatio:l}}const Fe=d(null);function Ka(){if(!Fe.value)return;const{x:a,y:s,width:o,height:l}=Fe.value.getBBox();te.value&&te.value.setAttribute("viewBox","".concat(a," ").concat(s," ").concat(o+Math.min(0,a)," ").concat(l+Math.min(0,s)))}const le=m(()=>{const a=e.value.table.useDialog&&!e.value.table.show,s=k.value.showTable;return{component:a?Ra:Pa,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:a?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:W.value,fullscreenParent:S.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:s,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});se(()=>k.value.showTable,a=>{e.value.table.show||(a&&e.value.table.useDialog&&ae.value?ae.value.open():"close"in ae.value&&ae.value.close())});function ga(){k.value.showTable=!1,xe.value&&xe.value.setTableIconState(!1)}const Za=m(()=>e.value.style.chart.backgroundColor),et=m(()=>e.value.style.chart.legend),at=m(()=>e.value.style.chart.title),tt=m(()=>ve.value.flat().map(a=>({...a,name:a.svgDisplay}))),{exportSvg:lt,getSvg:ot}=St({svg:te,title:at,legend:et,legendItems:tt,backgroundColor:Za});async function ma({isCb:a}){if(a){const{blob:s,url:o,text:l,dataUrl:t}=await ot();e.value.userOptions.callbacks.svg({blob:s,url:o,text:l,dataUrl:t})}else lt()}return Fa({autoSize:Ka,getData:Ja,getImage:Qa,generatePdf:ua,generateCsv:Oe,generateImage:na,generateSvg:ma,toggleTable:ya,toggleLabels:fa,toggleTooltip:ba,toggleAnnotator:Te,toggleFullscreen:Qe}),(a,s)=>(n(),r("div",{ref_key:"nestedDonutsChart",ref:S,class:R("vue-data-ui-component vue-ui-nested-donuts ".concat(W.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(e.value.useCssAnimation?"":"vue-ui-dna")),style:ye("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),id:"nested_donuts_".concat(f.value),onMouseenter:s[2]||(s[2]=()=>i(Ze)(!0)),onMouseleave:s[3]||(s[3]=()=>i(Ze)(!1))},[e.value.userOptions.buttons.annotator?(n(),M(i(za),{key:0,svgRef:i(te),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:ce.value,onClose:Te},null,8,["svgRef","backgroundColor","color","active"])):$("",!0),Ga.value?(n(),r("div",{key:1,ref_key:"noTitle",ref:je,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):$("",!0),e.value.style.chart.title.text?(n(),r("div",{key:2,ref_key:"chartTitle",ref:Ye},[(n(),M(Et,{key:"title_".concat(He.value),config:{title:{cy:"donut-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):$("",!0),b("div",{id:"legend-top-".concat(f.value)},null,8,Bt),e.value.userOptions.show&&fe.value&&(i(ea)||i(_e))?(n(),M(i(Ea),{ref_key:"userOptionsRef",ref:xe,key:"user_option_".concat(Ge.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:i(oa),isImaging:i(sa),uid:f.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.chart.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasXls:e.value.userOptions.buttons.csv,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:W.value,isTooltip:k.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:S.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:ce.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:Qe,onGeneratePdf:i(ua),onGenerateCsv:Oe,onGenerateImage:i(na),onGenerateSvg:ma,onToggleTable:ya,onToggleLabels:fa,onToggleTooltip:ba,onToggleAnnotator:Te,style:ye({visibility:i(ea)?i(_e)?"visible":"hidden":"visible"})},$a({_:2},[a.$slots.menuIcon?{name:"menuIcon",fn:_(({isOpen:o,color:l})=>[A(a.$slots,"menuIcon",J(Q({isOpen:o,color:l})),void 0,!0)]),key:"0"}:void 0,a.$slots.optionTooltip?{name:"optionTooltip",fn:_(()=>[A(a.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:_(()=>[A(a.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:_(()=>[A(a.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:_(()=>[A(a.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:_(()=>[A(a.$slots,"optionTable",{},void 0,!0)]),key:"5"}:void 0,a.$slots.optionLabels?{name:"optionLabels",fn:_(()=>[A(a.$slots,"optionLabels",{},void 0,!0)]),key:"6"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:_(({toggleFullscreen:o,isFullscreen:l})=>[A(a.$slots,"optionFullscreen",J(Q({toggleFullscreen:o,isFullscreen:l})),void 0,!0)]),key:"7"}:void 0,a.$slots.optionAnnotator?{name:"optionAnnotator",fn:_(({toggleAnnotator:o,isAnnotator:l})=>[A(a.$slots,"optionAnnotator",J(Q({toggleAnnotator:o,isAnnotator:l})),void 0,!0)]),key:"8"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasXls","hasImg","hasSvg","hasTable","hasLabel","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):$("",!0),(n(),r("svg",{ref_key:"svgRef",ref:te,xmlns:i($t),class:R({"vue-data-ui-fullscreen--on":W.value,"vue-data-ui-fulscreen--off":!W.value,"vue-data-ui-svg":!0}),viewBox:"0 0 ".concat(h.value.width<=0?.001:h.value.width," ").concat(h.value.height<0?.001:h.value.height),style:ye("max-width:100%; overflow: visible; background:transparent;color:".concat(e.value.style.chart.color,";").concat(aa.value.css))},[b("g",{ref_key:"G",ref:Fe,class:"vue-data-ui-g"},[Ee(i(Ma)),a.$slots["chart-background"]?(n(),r("foreignObject",{key:0,x:0,y:0,width:h.value.width<=0?.001:h.value.width,height:h.value.height<0?.001:h.value.height,style:{pointerEvents:"none"}},[A(a.$slots,"chart-background",{},void 0,!0)],8,Gt)):$("",!0),b("defs",null,[(n(!0),r(I,null,O(ca.value,(o,l)=>(n(),r("radialGradient",{id:"radial_".concat(f.value,"_").concat(l)},[s[4]||(s[4]=b("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1)),b("stop",{offset:"".concat((1-ne.value/da.value[l])*100,"%"),"stop-color":i(kt)("#FFFFFF",0),"stop-opacity":"0"},null,8,Wt),b("stop",{offset:"".concat((1-ne.value/da.value[l]/2)*100,"%"),"stop-color":"#FFFFFF","stop-opacity":e.value.style.chart.gradientIntensity/100},null,8,jt),s[5]||(s[5]=b("stop",{offset:"100%","stop-color":"#FFFFFF","stop-opacity":"0"},null,-1))],8,Yt))),256))]),b("defs",null,[b("filter",{id:"blur_".concat(f.value),x:"-50%",y:"-50%",width:"200%",height:"200%"},[b("feGaussianBlur",{in:"SourceGraphic",stdDeviation:2,id:"blur_std_".concat(f.value)},null,8,Xt),s[6]||(s[6]=b("feColorMatrix",{type:"saturate",values:"0"},null,-1))],8,Ht),b("filter",{id:"shadow_".concat(f.value),"color-interpolation-filters":"sRGB"},[b("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10","flood-opacity":"0.5","flood-color":e.value.style.chart.layout.donut.shadowColor},null,8,Jt)],8,qt)]),b("defs",null,[(n(!0),r(I,null,O(q.value,(o,l)=>(n(),r("path",{key:"path-full-".concat(l),id:"path-full-".concat(l,"-").concat(f.value),d:o.fullCirclePath,fill:"none"},null,8,Qt))),128))]),(n(!0),r(I,null,O(q.value,(o,l)=>(n(),r("g",null,[o.hasData?(n(!0),r(I,{key:0},O(o.donut.filter(t=>!t.ghost),(t,u)=>(n(),r("g",null,[b("path",{class:"vue-ui-donut-arc-path",d:t.arcSlice,fill:t.color,stroke:e.value.style.chart.layout.donut.borderColorAuto?e.value.style.chart.backgroundColor:e.value.style.chart.layout.donut.borderColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth,filter:pa(t,u)},null,8,Kt)]))),256)):(n(!0),r(I,{key:1},O(o.skeleton,(t,u)=>(n(),r("g",null,[b("path",{class:"vue-ui-donut-arc-path",d:t.arcSlice,fill:t.color,stroke:e.value.style.chart.layout.donut.borderColorAuto?e.value.style.chart.backgroundColor:e.value.style.chart.layout.donut.borderColor,"stroke-width":e.value.style.chart.layout.donut.borderWidth},null,8,Zt)]))),256))]))),256)),e.value.style.chart.useGradient?(n(),r("g",el,[(n(!0),r(I,null,O(ca.value,(o,l)=>(n(),r("g",null,[b("path",{d:o.donut.arcSlice,fill:"url(#radial_".concat(f.value,"_").concat(l,")"),stroke:"transparent","stroke-width":"0"},null,8,al)]))),256))])):$("",!0),e.value.style.chart.layout.labels.dataLabels.showDonutName?(n(),r("g",tl,[e.value.style.chart.layout.labels.dataLabels.curvedDonutName?(n(!0),r(I,{key:0},O(q.value,(o,l)=>(n(),r("g",null,[(n(!0),r(I,null,O(o.donut,(t,u)=>(n(),r("g",null,[u===0&&h.value.width&&h.value.height?(n(),r("text",{key:0,class:R({animated:e.value.useCssAnimation}),"text-anchor":"middle","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldDonutName?"bold":"normal",fill:e.value.style.chart.layout.labels.dataLabels.color,dy:e.value.style.chart.layout.labels.dataLabels.donutNameOffsetY},[b("textPath",{href:"#path-full-".concat(l,"-").concat(f.value),startOffset:"50%","text-anchor":"middle",method:"align",spacing:"auto"},P(e.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?i(Ca)({source:o.name,length:e.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):o.name),9,ol)],10,ll)):$("",!0)]))),256))]))),256)):(n(!0),r(I,{key:1},O(q.value,(o,l)=>(n(),r("g",null,[(n(!0),r(I,null,O(o.donut,(t,u)=>(n(),r("g",null,[u===0&&h.value.width&&h.value.height?(n(),r("text",{key:0,class:R({animated:e.value.useCssAnimation}),x:h.value.width/2,y:t.startY-e.value.style.chart.layout.labels.dataLabels.fontSize+e.value.style.chart.layout.labels.dataLabels.donutNameOffsetY,"text-anchor":"middle","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldDonutName?"bold":"normal",fill:e.value.style.chart.layout.labels.dataLabels.color},P(e.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?i(Ca)({source:o.name,length:e.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):o.name),11,sl)):$("",!0)]))),256))]))),256))])):$("",!0),e.value.style.chart.layout.labels.dataLabels.show?(n(),r("g",ul,[(n(!0),r(I,null,O(q.value,(o,l)=>(n(),r("g",null,[(n(!0),r(I,null,O(o.donut.filter(t=>!t.ghost),(t,u)=>(n(),r("g",{filter:pa(t,u)},[ka(b("text",{class:R({animated:e.value.useCssAnimation}),opacity:Ie(t)?1:0,"text-anchor":i(Z)(t,!0).anchor,x:i(Z)(t,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(Be)(t,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldPercentage?"bold":"normal"},P(i(T)({v:t.proportion*100,s:"%",r:e.value.style.chart.layout.labels.dataLabels.roundingPercentage})),11,rl),[[_a,k.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage]]),ka(b("text",{class:R({animated:e.value.useCssAnimation}),opacity:Ie(t)?1:0,"text-anchor":i(Z)(t,!0).anchor,x:i(Z)(t,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(Be)(t,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY)+e.value.style.chart.layout.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"}," ("+P(i(ue)(e.value.style.chart.layout.labels.dataLabels.formatter,t.value,i(T)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:t,seriesIndex:l,datapointIndex:u}))+") ",11,il),[[_a,k.value.dataLabels.show&&e.value.style.chart.layout.labels.dataLabels.showPercentage&&e.value.style.chart.layout.labels.dataLabels.showValue]]),Ie(t)&&k.value.dataLabels.show&&!e.value.style.chart.layout.labels.dataLabels.showPercentage&&e.value.style.chart.layout.labels.dataLabels.showValue?(n(),r("text",{key:0,class:R({animated:e.value.useCssAnimation}),"text-anchor":i(Z)(t,!0).anchor,x:i(Z)(t,!1,e.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:i(Be)(t,e.value.style.chart.layout.labels.dataLabels.offsetY,e.value.style.chart.layout.labels.dataLabels.offsetY),fill:e.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:e.value.style.chart.layout.labels.dataLabels.color,"font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":e.value.style.chart.layout.labels.dataLabels.boldValue?"bold":"normal"},P(i(ue)(e.value.style.chart.layout.labels.dataLabels.formatter,t.value,i(T)({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:t,seriesIndex:l,datapointIndex:u})),11,vl)):$("",!0)],8,nl))),256))]))),256))])):$("",!0),(n(!0),r(I,null,O(q.value,(o,l)=>(n(),r("g",null,[(n(!0),r(I,null,O(o.donut,(t,u)=>(n(),r("g",null,[b("path",{d:t.arcSlice,fill:me.value===t.id?e.value.style.chart.layout.donut.selectedColor:"transparent",onMouseenter:y=>Xa({datapoint:t,seriesIndex:t.seriesIndex}),onClick:y=>Wa({datapoint:t,index:u,seriesIndex:t.seriesIndex}),onMouseleave:y=>Ha({datapoint:t,seriesIndex:t.seriesIndex})},null,40,dl)]))),256))]))),256)),A(a.$slots,"svg",{svg:h.value},void 0,!0)],512)],14,Ut)),a.$slots.watermark?(n(),r("div",cl,[A(a.$slots,"watermark",J(Q({isPrinting:i(oa)||i(sa)})),void 0,!0)])):$("",!0),Ee(i(Sa),{show:k.value.showTooltip&&be.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,fontSize:e.value.style.chart.tooltip.fontSize,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:S.value,content:ge.value,isFullscreen:W.value,isCustom:i(Aa)(e.value.style.chart.tooltip.customFormat),smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":_(()=>[A(a.$slots,"tooltip-before",J(Q({...Ae.value})),void 0,!0)]),"tooltip-after":_(()=>[A(a.$slots,"tooltip-after",J(Q({...Ae.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),b("div",{id:"legend-bottom-".concat(f.value)},null,8,hl),Je.value?(n(),M(ct,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(f.value):"#legend-bottom-".concat(f.value)},[e.value.style.chart.legend.show?(n(),r("div",{key:0,ref_key:"chartLegend",ref:we,class:R({"vue-ui-nested-donuts-legend":ve.value.length>1})},[(n(!0),r(I,null,O(ve.value,(o,l)=>(n(),M(Mt,{key:"legend_".concat(l,"_").concat(qe.value),legendSet:o,config:qa.value,onClickMarker:s[0]||(s[0]=({legend:t})=>Ce(t))},{legendTitle:_(({titleSet:t})=>[t[0]&&t[0].arcOf?(n(),r("div",pl,P(t[0].arcOf),1)):$("",!0)]),item:_(({legend:t,index:u})=>[b("div",{onClick:y=>Ce(t),style:ye("opacity:".concat(L.value.includes(t.id)?.5:1))},P(t.display),13,yl)]),_:1},8,["legendSet","config"]))),128))],2)):$("",!0)],8,["to"])):$("",!0),e.value.style.chart.legend.show?$("",!0):(n(),r("div",{key:6,ref_key:"chartLegend",ref:we},[A(a.$slots,"legend",{legend:ve.value},void 0,!0)],512)),a.$slots.source?(n(),r("div",{key:7,ref_key:"source",ref:We,dir:"auto"},[A(a.$slots,"source",{},void 0,!0)],512)):$("",!0),fe.value&&e.value.userOptions.buttons.table?(n(),M(pt(le.value.component),ht({key:8},le.value.props,{ref_key:"tableUnit",ref:ae,onClose:ga}),$a({content:_(()=>[(n(),M(i(Da),{key:"table_".concat(Xe.value),colNames:de.value.colNames,head:de.value.head,body:de.value.body,config:de.value.config,title:e.value.table.useDialog?"":le.value.title,withCloseButton:!e.value.table.useDialog,onClose:ga},{th:_(({th:o})=>[b("div",{innerHTML:o,style:{display:"flex","align-items":"center"}},null,8,fl)]),td:_(({td:o})=>[La(P(o.name||o),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:_(()=>[La(P(le.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:_(()=>[b("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:s[1]||(s[1]=o=>Oe(e.value.userOptions.callbacks.csv))},[Ee(i(Va),{name:"excel",stroke:le.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):$("",!0),i($e)?(n(),M(Ft,{key:9})):$("",!0)],46,Rt))}},Vl=yt(bl,[["__scopeId","data-v-f58dd2ed"]]);export{Vl as default};
