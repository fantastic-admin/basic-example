
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-D0pGX8qz-BS2YwyOE.js","./vue-data-ui-8Gmf-dDN.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js","./useNestedProp-DaR1dBmj-yWXLkJlG.js","./DataTable-BfEbVwm4-B-GxLkq-.js","./Shape-12_eh8zD-Cy1mu6XW.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PenAndPaper--ADXtx65-ugytqLuo.js","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"])))=>i.map(i=>d[i]);
import{J as d,e as i,a8 as Nt,aa as Ue,K as G,av as Xe,E as Gt,aw as Yt,c1 as D,c as g,o as n,z as E,A as f,f as I,g as de,h as c,r as v,j as k,k as C,u,c3 as je,O as M,n as q,F as Y,R as U,t as K,bq as Ut,l as He,m as Xt,N as jt,c4 as P}from"./index-CJB5jCfL.js";import{s as Ht,J as Jt,x as Wt,v as qt,o as Je,$ as Kt,E as We,A as ge,u as Qt,L as he,F as V,d as Zt,g as qe,e as eo,f as to,p as oo}from"./vue-data-ui-8Gmf-dDN.js";import{l as ao}from"./labelUtils-B3mOOEke-Caugf9-y.js";import{E as lo,M as ro}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{s as no,i as pe}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as uo,j as so}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{m as io}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{O as co}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as vo}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as go}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as ho}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import{v as po}from"./useAutoSizeLabelsInsideViewbox-DmpzKQ9i-BMsDV4GS.js";import fo from"./img-CqYIrJ8I-E54QgU9o.js";import bo from"./Title-D0nD-PMs-DAiwElB_.js";import mo from"./Legend-D2xmnFPH-CItLelVI.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";import"./Shape-12_eh8zD-Cy1mu6XW.js";const Ke={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",layout:{gutter:{color:"#4A4A4A"},labels:{color:"#CCCCCC"}},legend:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#1A1A1A",backgroundOpacity:70,color:"#CCCCCC",borderColor:"#5A5A5A"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},td:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}}},Qe={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",useGradient:!1,layout:{gutter:{color:"#5D403730"},labels:{color:"#424242"}},legend:{backgroundColor:"#FFF8E1",color:"#424242"},title:{color:"#424242",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#FFECB3",backgroundOpacity:30,color:"#424242",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#FFF8E1",color:"#424242"},td:{backgroundColor:"#FFF8E1",color:"#424242"}}},Ze={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",useGradient:!1,layout:{gutter:{color:"#5D403730"},labels:{color:"#BDBDBD"}},legend:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}},tooltip:{backgroundColor:"#1E1E1E",backgroundOpacity:30,color:"#FFF8E1",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},td:{backgroundColor:"#1E1E1E",color:"#BDBDBD"}}},et={style:{chart:{backgroundColor:"#1A1A1A",useGradient:!1,color:"#99AA99",layout:{gutter:{color:"#2A2A2A"},labels:{color:"#99CC99"}},legend:{backgroundColor:"#1A1A1A",color:"#99AA99"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#2A2F2A",color:"#AACCAA",borderColor:"#66CC66"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}}},tt={style:{chart:{useGradient:!1,backgroundColor:"#fbfafa",color:"#8A9892",layout:{gutter:{color:"#F7EDE2"},labels:{color:"#A0AC94"}},legend:{backgroundColor:"#fbfafa",color:"#99AA99"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#fbfafa",color:"#8A9892"}}},table:{th:{backgroundColor:"#fbfafa",color:"#8F837A"},td:{backgroundColor:"#fbfafa",color:"#8F837A"}}},ot={style:{chart:{useGradient:!1,backgroundColor:"#f6f6fb",color:"#50606C",layout:{gutter:{color:"#DDDDDB"},labels:{color:"#61747E"}},legend:{backgroundColor:"#f6f6fb",color:"#61747E"},title:{color:"#50606C",subtitle:{color:"#718890"}},tooltip:{backgroundColor:"#f6f6fb",color:"#50606C"}}},table:{th:{backgroundColor:"#f6f6fb",color:"#50606C"},td:{backgroundColor:"#f6f6fb",color:"#50606C"}}},at={default:{},dark:Ke,celebration:Qe,celebrationNight:Ze,hack:et,zen:tt,concrete:ot},aa=Object.freeze(Object.defineProperty({__proto__:null,celebration:Qe,celebrationNight:Ze,concrete:ot,dark:Ke,default:at,hack:et,zen:tt},Symbol.toStringTag,{value:"Module"})),yo=["id"],ko=["id"],Co=["xmlns","viewBox"],wo=["width","height"],Ao=["cx","cy","r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],$o=["cx","cy","r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],xo=["id"],_o=["stdDeviation"],Oo=["filter"],To=["cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset"],Fo=["cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset","onMouseenter","onMouseleave","onClick"],Do={key:2},Eo=["onMouseenter","onMouseleave","onClick"],Io=["x","y","font-size","fill","font-weight"],Po={key:4,class:"vue-data-ui-watermark"},So=["id"],Bo=["onClick"],Mo=["innerHTML"],Ro={__name:"vue-ui-onion",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend"],setup(lt,{expose:rt,emit:nt}){const ut=D(()=>P(()=>import("./Tooltip-D0pGX8qz-BS2YwyOE.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),st=D(()=>P(()=>import("./vue-data-ui-8Gmf-dDN.js").then(t=>t.aA),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),it=D(()=>P(()=>import("./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),ct=D(()=>P(()=>import("./DataTable-BfEbVwm4-B-GxLkq-.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),vt=D(()=>P(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([10,2,3,11,1,4,5,12,13]),import.meta.url)),dt=D(()=>P(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([14,2,3,1,4,5,15,11]),import.meta.url)),gt=D(()=>P(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([16,2,3]),import.meta.url)),ht=D(()=>P(()=>import("./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_onion:pt}=no(),{isThemeValid:ft,warnInvalidTheme:bt}=vo(),w=lt,fe=d(()=>!!w.dataset&&w.dataset.length),A=i(Jt()),mt=i(null),be=i(0),Q=i(!1),Z=i(""),b=i([]),x=i(null),me=i(null),ye=i(null),ke=i(null),Ce=i(null),we=i(0),Ae=i(0),$e=i(0),_=i(!1),xe=i(!1),z=i(null),e=i(oe()),{loading:$,FINAL_DATASET:_e,manualLoading:ee}=uo({...Nt(w),FINAL_CONFIG:e,prepareConfig:oe,callback:()=>{Promise.resolve().then(async()=>{await Ue(),Be()})},skeletonDataset:[{name:"_",percentage:50,value:1,color:"#DBDBDB"},{name:"_",percentage:50,value:1,color:"#C4C4C4"},{name:"_",percentage:50,value:1,color:"#ADADAD"},{name:"_",percentage:50,value:1,color:"#969696"}],skeletonConfig:Wt({defaultConfig:e.value,userConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:"#99999930",layout:{gutter:{color:"#99999950"},labels:{show:!1}},legend:{backgroundColor:"transparent"}}}}})}),{userOptionsVisible:te,setUserOptionsVisibility:Oe,keepUserOptionState:Te}=go({config:e.value}),{svgRef:X}=ho({config:e.value.style.chart.title});function oe(){const t=pe({userConfig:w.config,defaultConfig:pt}),a=t.theme;if(!a)return t;if(!ft.value(t))return bt(t),t;const o=pe({userConfig:at[a]||w.config,defaultConfig:t}),l=pe({userConfig:w.config,defaultConfig:o});return{...l,customPalette:l.customPalette.length?l.customPalette:qt[a]||Je}}G(()=>w.config,t=>{$.value||(e.value=oe()),te.value=!e.value.userOptions.showOnChartHover,Se(),we.value+=1,Ae.value+=1,$e.value+=1,m.value.showTable=e.value.table.show,m.value.showTooltip=e.value.style.chart.tooltip.show},{deep:!0});const{isPrinting:Fe,isImaging:De,generatePdf:Ee,generateImage:Ie}=io({elementId:"vue-ui-onion_".concat(A.value),fileName:e.value.style.chart.title.text||"vue-ui-onion",options:e.value.userOptions.print}),yt=d(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),kt=d(()=>Kt(e.value.customPalette)),m=i({showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show});G(e,()=>{m.value={showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}},{immediate:!0});const r=i({height:512,width:512,padding:{top:64,left:64,right:64,bottom:64},minRadius:64}),T=Xe(null),R=Xe(null);Gt(()=>{xe.value=!0,Se()});const Ct=d({get:()=>e.value.style.chart.layout.labels.fontSize,set:t=>t}),{autoSizeLabels:Pe}=po({svgRef:X,fontSize:e.value.style.chart.layout.labels.fontSize,minFontSize:e.value.style.chart.layout.labels.minFontSize,sizeRef:Ct,labelClass:".vue-ui-onion-label"}),wt=d(()=>e.value.debug);let ae=null;function Se(){if(We(w.dataset)&&(ge({componentName:"VueUiOnion",type:"dataset",debug:wt.value}),ee.value=!0),We(w.dataset)||(ee.value=e.value.loading),e.value.responsive){const t=lo(()=>{ae&&clearTimeout(ae),_.value=!0;let{width:a,height:o}=ro({chart:x.value,title:e.value.style.chart.title.text?me.value:null,legend:e.value.style.chart.legend.show?ye.value:null,source:ke.value,noTitle:Ce.value});o-=12,requestAnimationFrame(async()=>{r.value.width=a,r.value.height=o,r.value.padding.top=Math.max(a,o)*.125,r.value.padding.right=Math.max(a,o)*.125,r.value.padding.bottom=Math.max(a,o)*.125,r.value.padding.left=Math.max(a,o)*.125,r.value.minRadius=Math.min(a,o)*.125,ae=setTimeout(()=>{_.value=!1,Pe()},0)})});T.value&&(R.value&&T.value.unobserve(R.value),T.value.disconnect()),T.value=new ResizeObserver(t),R.value=x.value.parentNode,T.value.observe(R.value)}requestAnimationFrame(Pe)}Yt(()=>{T.value&&(R.value&&T.value.unobserve(R.value),T.value.disconnect())});const h=d(()=>({top:r.value.padding.top,left:r.value.padding.left,right:r.value.width-r.value.padding.right,bottom:r.value.height-r.value.padding.bottom,centerX:r.value.width/2,centerY:r.value.height/2,width:r.value.width-r.value.padding.right-r.value.padding.left,height:r.value.height-r.value.padding.bottom-r.value.padding.top,minRadius:r.value.minRadius,maxRadius:Math.min(r.value.width,r.value.height)-r.value.padding.top*2})),p=d(()=>(_e.value.forEach((t,a)=>{[null,void 0].includes(t.name)&&ge({componentName:"VueUiOnion",type:"datasetSerieAttribute",property:"name",index:a}),[void 0].includes(t.percentage)&&ge({componentName:"VueUiOnion",type:"datasetSerieAttribute",property:"percentage",index:a})}),_e.value.map((t,a)=>{const o="onion_serie_".concat(a,"_").concat(A.value);return{...t,percentage:t.percentage||0,targetPercentage:t.percentage||0,color:Qt(t.color)||kt.value[a]||Je[a],id:o,shape:"circle",opacity:b.value.includes(o)?.5:1,absoluteIndex:a,segregate:()=>j(o),isSegregated:b.value.includes(o)}}))),le=d(()=>p.value.map((t,a)=>{var W;const o=e.value.style.chart.legend.showValue,l=e.value.style.chart.legend.showPercentage,s=he(e.value.style.chart.layout.labels.value.formatter,t.value,V({p:t.prefix||"",v:t.value,s:t.suffix||"",r:e.value.style.chart.legend.roundingValue})),y=V({v:(W=t.percentage)!=null?W:0,s:"%",r:e.value.style.chart.legend.roundingPercentage}),ve=se({showVal:o,showPercentage:l,val:s,percentage:y,config:e.value.style.chart.legend});return{...t,display:"".concat(t.name).concat(o||l?": ":"").concat(ve)}})),L=i(p.value),At=d(()=>e.value.useStartAnimation),$t=i(null),xt=d(()=>Math.max(...p.value.map(t=>t.percentage))),re=i(!1);G(()=>p.value,Be,{immediate:!0,deep:!0}),G(()=>w.dataset,t=>{Array.isArray(t)&&t.length>0&&(ee.value=!1)},{deep:!0});function Be(){if(At.value&&!re.value&&!$.value){let t=function(){a>=xt.value?(cancelAnimationFrame($t.value),L.value=p.value,re.value=!0):(L.value=p.value.map(o=>({...o,percentage:a<o.targetPercentage?a:o.targetPercentage})),a+=1,requestAnimationFrame(t),re.value=!0)};L.value=p.value.map(o=>({...o,percentage:0}));let a=0;t()}else L.value=p.value}const _t=d(()=>({cy:"onion-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),Ot=d(()=>p.value.filter(t=>!b.value.includes(t.id)).length),S=d(()=>{const t=Math.min(h.value.width,h.value.height)/2/p.value.length;return{gutter:(t>e.value.style.chart.layout.maxThickness?e.value.style.chart.layout.maxThickness:t)*e.value.style.chart.layout.gutter.width,track:(t>e.value.style.chart.layout.maxThickness?e.value.style.chart.layout.maxThickness:t)*e.value.style.chart.layout.track.width}}),O=d(()=>L.value.filter(t=>!b.value.includes(t.id)).map((t,a)=>{const o=(h.value.maxRadius-S.value.track)/Ot.value/2*(1+a),l=h.value.centerY-o;return{percentage:t.percentage||0,...t,labelY:l,radius:o,path:Tt(o,t.percentage||0)}}));function Tt(t,a){const o=2*Math.PI*t,l=o*.75,s="".concat(l," ").concat(o),y=l*(1-a/100);return{bgDashArray:"".concat(l," ").concat(o),bgDashOffset:0,dashArray:s,dashOffset:y,fullOffset:0,active:"\n            M ".concat(h.value.centerX,",").concat(h.value.centerY-t," \n            A ").concat(t,",").concat(t," 0 1 1 \n            ").concat(h.value.centerX+t*Math.cos(Math.PI*3/4),",").concat(h.value.centerY+t*Math.sin(Math.PI*3/4),"\n        ").trim()}}const Ft=nt;function j(t){if(b.value.includes(t))b.value=b.value.filter(a=>a!==t);else{if(b.value.length===p.value.length-1)return;b.value.push(t)}Ft("selectLegend",O.value)}function Me(t){return p.value.length?p.value.find(o=>o.name===t)||(e.value.debug&&console.warn('VueUiOnion - Series name not found "'.concat(t,'"')),null):(e.value.debug&&console.warn("VueUiOnion - There are no series to show."),null)}function Dt(t){const a=Me(t);a!==null&&b.value.includes(a.id)&&j(a.id)}function Et(t){const a=Me(t);a!==null&&(b.value.includes(a.id)||j(a.id))}function It(){return O.value}const ne=d(()=>{const t=[e.value.table.translations.serie,e.value.table.translations.percentage,e.value.table.translations.value],a=O.value.map(o=>[o.name,o.percentage,o.value]);return{head:t,body:a}}),H=d(()=>{const t=ne.value.head,a=O.value.map(l=>{var s;return['<span style="color:'.concat(l.color,'">⬤</span> ').concat(l.name),"".concat(Number((s=l.percentage)!=null?s:0).toFixed(e.value.table.td.roundingPercentage).toLocaleString(),"%"),"".concat(l.prefix||"").concat([null,void 0,NaN,"NaN"].includes(l.value)?"-":l.value.toFixed(e.value.table.td.roundingValue).toLocaleString()).concat(l.suffix||"")]}),o={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint};return{head:t,body:a,config:o,colNames:t}});function ue(t=null){Ue(()=>{const a=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],o=ne.value.head,l=ne.value.body,s=a.concat([o]).concat(l),y=eo(s);t?t(y):to({csvContent:y,title:e.value.style.chart.title.text||"vue-ui-onion"})})}const F=i(void 0),B=i(!1);function Re(t){B.value=t,be.value+=1}function Ve({datapoint:t}){e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:t,seriesIndex:t.absoluteIndex})}function ze({datapoint:t}){F.value=void 0,Q.value=!1,e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:t,seriesIndex:t.absoluteIndex})}function se({val:t,percentage:a,showVal:o,showPercentage:l,config:s}){return ao({config:s,val:t,percentage:a,showVal:o,showPercentage:l})}function Pt(t,a){const o=e.value.style.chart.layout.labels.value.show,l=e.value.style.chart.layout.labels.percentage.show,s=se({config:e.value.style.chart.layout.labels,showVal:o,showPercentage:l,val:he(e.value.style.chart.layout.labels.value.formatter,t.value,V({p:t.prefix||"",v:t.value||0,s:t.suffix||"",r:e.value.style.chart.layout.labels.roundingValue}),{datapoint:t,seriesIndex:a}),percentage:V({v:t.percentage,s:"%",r:e.value.style.chart.layout.labels.roundingPercentage})});return"".concat(t.name).concat(o||l?": ":"").concat(s)}const ie=i(null);function Le({datapoint:t,seriesIndex:a,show:o=!0}){e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:t,seriesIndex:t.absoluteIndex});const l=t.absoluteIndex;F.value=a,ie.value={datapoint:t,seriesIndex:l,series:p.value,config:e.value},Q.value=o;let s="";const y=e.value.style.chart.tooltip.customFormat;if(qe(y)&&oo(()=>y({seriesIndex:l,datapoint:t,series:p.value,config:e.value})))Z.value=y({seriesIndex:l,datapoint:t,series:p.value,config:e.value});else{const ve=e.value.style.chart.tooltip.showPercentage,W=e.value.style.chart.tooltip.showValue;s+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(e.value.style.chart.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;">').concat(t.name,"</div>"),s+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 60 60" height="14" width="14"><circle cx="30" cy="30" r="30" stroke="none" fill="'.concat(t.color,'"/></svg>'),s+="<b>".concat(se({config:e.value.style.chart.tooltip,showVal:W,showPercentage:ve,val:"<span>".concat(he(e.value.style.chart.layout.labels.value.formatter,t.value,V({p:t.prefix||"",v:t.value,s:t.suffix||"",r:e.value.style.chart.tooltip.roundingValue}),{datapoint:t,seriesIndex:a}),"</span>"),percentage:V({v:t.percentage,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})}),"</b></div>"),Z.value="<div>".concat(s,"</div>")}}function Ne(){m.value.showTable=!m.value.showTable}function Ge(){m.value.showTooltip=!m.value.showTooltip}const J=i(!1);function ce(){J.value=!J.value}async function St({scale:t=2}={}){if(!x.value)return;const{width:a,height:o}=x.value.getBoundingClientRect(),l=a/o,{imageUri:s,base64:y}=await fo({domElement:x.value,base64:!0,img:!0,scale:t});return{imageUri:s,base64:y,title:e.value.style.chart.title.text,width:a,height:o,aspectRatio:l}}const N=d(()=>{const t=e.value.table.useDialog&&!e.value.table.show,a=m.value.showTable;return{component:t?ht:it,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:t?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:B.value,fullscreenParent:x.value,forcedWidth:Math.min(600,window.innerWidth*.8)}:{hideDetails:!0,config:{open:a,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});G(()=>m.value.showTable,t=>{e.value.table.show||(t&&e.value.table.useDialog&&z.value?z.value.open():"close"in z.value&&z.value.close())});const Bt=d(()=>le.value.map(t=>({...t,name:t.display}))),Mt=d(()=>e.value.style.chart.backgroundColor),Rt=d(()=>e.value.style.chart.legend),Vt=d(()=>e.value.style.chart.title),{exportSvg:zt,getSvg:Lt}=co({svg:X,title:Vt,legend:Rt,legendItems:Bt,backgroundColor:Mt});async function Ye({isCb:t}){if(t){const{blob:a,url:o,text:l,dataUrl:s}=await Lt();e.value.userOptions.callbacks.svg({blob:a,url:o,text:l,dataUrl:s})}else zt()}return rt({getData:It,getImage:St,generatePdf:Ee,generateCsv:ue,generateImage:Ie,generateSvg:Ye,hideSeries:Et,showSeries:Dt,toggleTable:Ne,toggleTooltip:Ge,toggleAnnotator:ce,toggleFullscreen:Re}),(t,a)=>(n(),g("div",{class:q("vue-data-ui-component vue-ui-onion ".concat(B.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(e.value.useCssAnimation?"":"vue-ui-dna")),ref_key:"onionChart",ref:x,id:"vue-ui-onion_".concat(A.value),style:M("font-family:".concat(e.value.style.fontFamily,";width:100%; ").concat(e.value.responsive?"height: 100%;":""," text-align:center;background:").concat(e.value.style.chart.backgroundColor)),onMouseenter:a[4]||(a[4]=()=>u(Oe)(!0)),onMouseleave:a[5]||(a[5]=()=>u(Oe)(!1))},[e.value.userOptions.buttons.annotator?(n(),E(u(dt),{key:0,svgRef:u(X),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:J.value,onClose:ce},{"annotator-action-close":c(()=>[v(t.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":c(({color:o})=>[v(t.$slots,"annotator-action-color",k(C({color:o})),void 0,!0)]),"annotator-action-draw":c(({mode:o})=>[v(t.$slots,"annotator-action-draw",k(C({mode:o})),void 0,!0)]),"annotator-action-undo":c(({disabled:o})=>[v(t.$slots,"annotator-action-undo",k(C({disabled:o})),void 0,!0)]),"annotator-action-redo":c(({disabled:o})=>[v(t.$slots,"annotator-action-redo",k(C({disabled:o})),void 0,!0)]),"annotator-action-delete":c(({disabled:o})=>[v(t.$slots,"annotator-action-delete",k(C({disabled:o})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):f("",!0),yt.value?(n(),g("div",{key:1,ref_key:"noTitle",ref:Ce,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):f("",!0),e.value.style.chart.title.text?(n(),g("div",{key:2,ref_key:"chartTitle",ref:me,style:"width:100%;background:transparent"},[(n(),E(bo,{key:"title_".concat(we.value),config:{title:{cy:"onion-div-title",...e.value.style.chart.title},subtitle:{cy:"onion-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):f("",!0),I("div",{id:"legend-top-".concat(A.value)},null,8,ko),e.value.userOptions.show&&fe.value&&(u(Te)||u(te))?(n(),E(u(vt),{ref_key:"details",ref:mt,key:"user_options".concat(be.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isImaging:u(De),isPrinting:u(Fe),uid:A.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.chart.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:B.value,isTooltip:m.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},chartElement:x.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:J.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:Re,onGeneratePdf:u(Ee),onGenerateCsv:ue,onGenerateImage:u(Ie),onGenerateSvg:Ye,onToggleTable:Ne,onToggleTooltip:Ge,onToggleAnnotator:ce,style:M({visibility:u(Te)?u(te)?"visible":"hidden":"visible"})},je({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:c(({isOpen:o,color:l})=>[v(t.$slots,"menuIcon",k(C({isOpen:o,color:l})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionTooltip?{name:"optionTooltip",fn:c(()=>[v(t.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:c(()=>[v(t.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:c(()=>[v(t.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:c(()=>[v(t.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionSvg?{name:"optionSvg",fn:c(()=>[v(t.$slots,"optionSvg",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:c(()=>[v(t.$slots,"optionTable",{},void 0,!0)]),key:"6"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:c(({toggleFullscreen:o,isFullscreen:l})=>[v(t.$slots,"optionFullscreen",k(C({toggleFullscreen:o,isFullscreen:l})),void 0,!0)]),key:"7"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:c(({toggleAnnotator:o,isAnnotator:l})=>[v(t.$slots,"optionAnnotator",k(C({toggleAnnotator:o,isAnnotator:l})),void 0,!0)]),key:"8"}:void 0]),1032,["backgroundColor","color","isImaging","isPrinting","uid","hasTooltip","hasPdf","hasImg","hasSvg","hasXls","hasTable","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):f("",!0),(n(),g("svg",{ref_key:"svgRef",ref:X,xmlns:u(Zt),class:q({"vue-data-ui-fullscreen--on":B.value,"vue-data-ui-fulscreen--off":!B.value,resizing:_.value}),viewBox:"0 0 ".concat(r.value.width<=0?10:r.value.width," ").concat(r.value.height<=0?10:r.value.height),style:M("max-width:100%;overflow:visible;background:transparent;color:".concat(e.value.style.chart.color))},[de(u(gt)),t.$slots["chart-background"]?(n(),g("foreignObject",{key:0,x:0,y:0,width:r.value.width<=0?10:r.value.width,height:r.value.height<=0?10:r.value.height,style:{pointerEvents:"none"}},[v(t.$slots,"chart-background",{},void 0,!0)],8,wo)):f("",!0),(n(!0),g(Y,null,U(O.value,(o,l)=>(n(),g("circle",{cx:h.value.centerX,cy:h.value.centerY,r:o.radius<=0?1e-4:o.radius,stroke:e.value.style.chart.layout.gutter.color,"stroke-width":S.value.gutter,fill:"none","stroke-dasharray":o.path.bgDashArray,"stroke-dashoffset":o.path.fullOffset,"stroke-linecap":"round",class:q({"vue-ui-onion-path":!0,"vue-ui-onion-blur":e.value.useBlurOnHover&&![null,void 0].includes(F.value)&&F.value!==l}),style:M({transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:_.value||u($)?"none":"all 0.3s ease-in-out !important",animation:_.value||u($)?"none":"xyAnimation 0.5s ease-in"})},null,14,Ao))),256)),(n(!0),g(Y,null,U(O.value,(o,l)=>(n(),g("circle",{cx:h.value.centerX,cy:h.value.centerY,r:o.radius<0?1e-4:o.radius,stroke:"".concat(o.color),"stroke-width":S.value.track,fill:"none","stroke-dasharray":o.path.dashArray,"stroke-dashoffset":o.path.dashOffset,class:q({"vue-ui-onion-path":!0,"vue-ui-onion-blur":e.value.useBlurOnHover&&![null,void 0].includes(F.value)&&F.value!==l}),"stroke-linecap":"round",style:M({transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:_.value||u($)?"none":"all 0.3s ease-in-out !important",animation:_.value||u($)?"none":"xyAnimation 0.5s ease-in"})},null,14,$o))),256)),I("defs",null,[I("filter",{id:"blur_".concat(A.value),x:"-50%",y:"-50%",width:"200%",height:"200%"},[I("feGaussianBlur",{in:"SourceGraphic",stdDeviation:100/e.value.style.chart.gradientIntensity},null,8,_o)],8,xo)]),e.value.style.chart.useGradient?(n(),g("g",{key:1,filter:"url(#blur_".concat(A.value,")")},[(n(!0),g(Y,null,U(O.value,(o,l)=>(n(),g("circle",{cx:h.value.centerX,cy:h.value.centerY,r:o.radius<=0?1e-4:o.radius,stroke:"white","stroke-width":S.value.track/3,fill:"none","stroke-linecap":"round","stroke-dasharray":o.path.dashArray,"stroke-dashoffset":o.path.dashOffset,style:M({transform:"rotate(-90deg)",transformOrigin:"50% 50%",transition:_.value||u($)?"none":"all 0.3s ease-in-out !important",animation:_.value||u($)?"none":"xyAnimation 0.5s ease-in"})},null,12,To))),256))],8,Oo)):f("",!0),(n(!0),g(Y,null,U(O.value,(o,l)=>(n(),g("circle",{cx:h.value.centerX,cy:h.value.centerY,r:o.radius<=0?1e-4:o.radius,stroke:"transparent","stroke-width":Math.max(S.value.track,S.value.gutter),fill:"none","stroke-dasharray":o.path.bgDashArray,"stroke-dashoffset":o.path.fullOffset,"stroke-linecap":"round",class:"vue-ui-onion-path",style:{transform:"rotate(-90deg)",transformOrigin:"50% 50%"},onMouseenter:s=>Le({datapoint:o,show:!0,seriesIndex:l}),onMouseleave:s=>ze({datapoint:o}),onClick:s=>Ve({datapoint:o})},null,40,Fo))),256)),e.value.style.chart.layout.labels.show?(n(),g("g",Do,[(n(!0),g(Y,null,U(O.value,(o,l)=>(n(),g("g",{onMouseenter:s=>Le({datapoint:o,show:!0,seriesIndex:l}),onMouseleave:s=>ze({datapoint:o}),onClick:s=>Ve({datapoint:o})},[b.value.includes(o.id)?f("",!0):(n(),g("text",{key:0,class:"vue-ui-onion-label",x:r.value.width/2-S.value.gutter*.8+e.value.style.chart.layout.labels.offsetX,y:o.labelY+e.value.style.chart.layout.labels.offsetY,"text-anchor":"end","font-size":e.value.style.chart.layout.labels.fontSize,fill:e.value.useBlurOnHover&&![null,void 0].includes(F.value)&&F.value===l?o.color:e.value.style.chart.layout.labels.color,"font-weight":e.value.style.chart.layout.labels.bold?"bold":"normal"},K(Pt(o,l)),9,Io))],40,Eo))),256))])):f("",!0),v(t.$slots,"svg",{svg:r.value},void 0,!0)],14,Co)),t.$slots.watermark?(n(),g("div",Po,[v(t.$slots,"watermark",k(C({isPrinting:u(Fe)||u(De)})),void 0,!0)])):f("",!0),I("div",{id:"legend-bottom-".concat(A.value)},null,8,So),xe.value?(n(),E(Ut,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(A.value):"#legend-bottom-".concat(A.value)},[I("div",{ref_key:"chartLegend",ref:ye},[e.value.style.chart.legend.show?(n(),E(mo,{key:"legend_".concat($e.value),legendSet:le.value,config:_t.value,onClickMarker:a[0]||(a[0]=({legend:o})=>j(o.id))},{item:c(({legend:o})=>[u($)?f("",!0):(n(),g("div",{key:0,"data-cy-legend-item":"",onClick:l=>o.segregate(),style:M("opacity:".concat(b.value.includes(o.id)?.5:1))},K(o.display),13,Bo))]),_:1},8,["legendSet","config"])):v(t.$slots,"legend",{key:1,legend:le.value},void 0,!0)],512)],8,["to"])):f("",!0),t.$slots.source?(n(),g("div",{key:6,ref_key:"source",ref:ke,dir:"auto"},[v(t.$slots,"source",{},void 0,!0)],512)):f("",!0),de(u(ut),{show:m.value.showTooltip&&Q.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,fontSize:e.value.style.chart.tooltip.fontSize,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:x.value,content:Z.value,isFullscreen:B.value,isCustom:u(qe)(e.value.style.chart.tooltip.customFormat),smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":c(()=>[v(t.$slots,"tooltip-before",k(C({...ie.value})),void 0,!0)]),"tooltip-after":c(()=>[v(t.$slots,"tooltip-after",k(C({...ie.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),fe.value&&e.value.userOptions.buttons.table?(n(),E(jt(N.value.component),Xt({key:7},N.value.props,{ref_key:"tableUnit",ref:z,onClose:a[3]||(a[3]=o=>m.value.showTable=!1)}),je({content:c(()=>[(n(),E(u(ct),{key:"table_".concat(Ae.value),colNames:H.value.colNames,head:H.value.head,body:H.value.body,config:H.value.config,title:e.value.table.useDialog?"":N.value.title,withCloseButton:!e.value.table.useDialog,onClose:a[2]||(a[2]=o=>m.value.showTable=!1)},{th:c(({th:o})=>[He(K(o),1)]),td:c(({td:o})=>[I("div",{innerHTML:o},null,8,Mo)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:c(()=>[He(K(N.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:c(()=>[I("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:a[1]||(a[1]=o=>ue(e.value.userOptions.callbacks.csv))},[de(u(st),{name:"excel",stroke:N.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):f("",!0),u($)?(n(),E(so,{key:8})):f("",!0)],46,yo))}},Vo=Ht(Ro,[["__scopeId","data-v-0e506fb5"]]),la=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"}));export{aa as a,la as b,Vo as v};
