
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-D0pGX8qz-BS2YwyOE.js","./vue-data-ui-8Gmf-dDN.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js","./useNestedProp-DaR1dBmj-yWXLkJlG.js","./DataTable-BfEbVwm4-B-GxLkq-.js","./Shape-12_eh8zD-Cy1mu6XW.js","./PenAndPaper--ADXtx65-ugytqLuo.js","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"])))=>i.map(i=>d[i]);
import{ac as Ul,e as u,J as c,a8 as jl,K as ee,av as Qe,E as Gl,aw as Hl,c1 as S,c as b,o as n,z as I,A as f,f as m,g as le,h as i,r as v,j as x,k as $,u as r,c3 as be,O as M,n as P,F as ae,R as pe,m as Ze,t as ye,bq as Xl,l as el,N as Jl,c4 as B,aa as Yl}from"./index-CJB5jCfL.js";import{s as ql,J as ll,x as Kl,v as Ql,o as W,E as al,A as fe,a as Zl,$ as ea,S as la,u as tl,L as me,F as V,d as aa,w as ta,X as oa,Y as sa,e as ra,f as ua,c as na,g as ia,p as va}from"./vue-data-ui-8Gmf-dDN.js";import{l as ca}from"./labelUtils-B3mOOEke-Caugf9-y.js";import{E as da,M as ha}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{s as ga,i as ke}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{m as ba}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{T as pa,j as ya}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{O as fa}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as ma}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as ka}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as Ca}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import wa from"./img-CqYIrJ8I-E54QgU9o.js";import{b as Aa}from"./Shape-12_eh8zD-Cy1mu6XW.js";import xa from"./Title-D0nD-PMs-DAiwElB_.js";import $a from"./Legend-D2xmnFPH-CItLelVI.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";const ol={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",layout:{rings:{stroke:"#3A3A3A"},labels:{dataLabels:{color:"#CCCCCC",markers:{stroke:"#4A4A4A"}}}},legend:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#1A1A1A",backgroundOpacity:70,color:"#CCCCCC",borderColor:"#5A5A5A"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},td:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}}},sl={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",layout:{rings:{stroke:"#5D4037",strokeWidth:10},labels:{dataLabels:{color:"#424242",markers:{stroke:"#5D4037"}}}},legend:{backgroundColor:"#FFF8E1",color:"#424242"},title:{color:"#424242",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#FFECB3",backgroundOpacity:30,color:"#424242",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#FFF8E1",color:"#424242"},td:{backgroundColor:"#FFF8E1",color:"#424242"}}},rl={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",layout:{rings:{stroke:"#2E2E2E",strokeWidth:10},labels:{dataLabels:{color:"#BDBDBD",markers:{stroke:"#2E2E2E"}}}},legend:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}},tooltip:{backgroundColor:"#1E1E1E",backgroundOpacity:30,color:"#FFF8E1",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},td:{backgroundColor:"#1E1E1E",color:"#BDBDBD"}}},ul={style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",layout:{rings:{stroke:"#1A1A1A",strokeWidth:10},labels:{dataLabels:{color:"#BDBDBD",markers:{stroke:"#3A3A3A"}}}},legend:{backgroundColor:"#1A1A1A",color:"#99AA99"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#2A2F2A",color:"#AACCAA",borderColor:"#66CC66"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}}},nl={style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",layout:{rings:{stroke:"#fbfafa",strokeWidth:10},labels:{dataLabels:{color:"#8A9892",markers:{stroke:"#FFFFFF"}}}},legend:{backgroundColor:"#fbfafa",color:"#99AA99"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#fbfafa",color:"#8A9892"}}},table:{th:{backgroundColor:"#fbfafa",color:"#8F837A"},td:{backgroundColor:"#fbfafa",color:"#8F837A"}}},il={style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",layout:{rings:{stroke:"#fbfafa",strokeWidth:10},labels:{dataLabels:{color:"#50606C",markers:{stroke:"#50606C"}}}},legend:{backgroundColor:"#f6f6fb",color:"#61747E"},title:{color:"#50606C",subtitle:{color:"#718890"}},tooltip:{backgroundColor:"#f6f6fb",color:"#50606C"}}},table:{th:{backgroundColor:"#f6f6fb",color:"#50606C"},td:{backgroundColor:"#f6f6fb",color:"#50606C"}}},vl={default:{},dark:ol,celebration:sl,celebrationNight:rl,hack:ul,zen:nl,concrete:il},vt=Object.freeze(Object.defineProperty({__proto__:null,celebration:sl,celebrationNight:rl,concrete:il,dark:ol,default:vl,hack:ul,zen:nl},Symbol.toStringTag,{value:"Module"})),_a=["id"],La=["id"],Fa=["xmlns","viewBox"],Ta=["width","height"],Ea=["id"],Oa=["stop-color"],Da=["stop-color"],Sa={key:1},Ia=["stroke","cx","cy","r","fill"],Pa=["stroke","stroke-width","cx","cy","r","fill"],Ba=["stroke","stroke-width","cx","cy","r","fill"],Va=["cx","cy","r","onMouseenter","onMouseleave","onClick"],za=["x","y","width","height","fill","rx"],Na=["cx","cy","r","fill","stroke"],Ra=["x","y","text-anchor","font-size","fill","font-weight","onMouseenter","onMouseleave","onClick","innerHTML"],Ma={key:4,class:"vue-data-ui-watermark"},Wa=["id"],Ua=["onClick"],ja=["innerHTML"],Ga={__name:"vue-ui-rings",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend"],setup(cl,{expose:dl,emit:hl}){const gl=S(()=>B(()=>import("./Tooltip-D0pGX8qz-BS2YwyOE.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),bl=S(()=>B(()=>import("./vue-data-ui-8Gmf-dDN.js").then(l=>l.aA),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),pl=S(()=>B(()=>import("./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),yl=S(()=>B(()=>import("./DataTable-BfEbVwm4-B-GxLkq-.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),fl=S(()=>B(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([10,2,3,1,4,5,11,12]),import.meta.url)),ml=S(()=>B(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([13,2,3,12,1,4,5,14,15]),import.meta.url)),kl=S(()=>B(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([16,2,3]),import.meta.url)),Cl=S(()=>B(()=>import("./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_rings:wl}=ga(),{isThemeValid:Al,warnInvalidTheme:xl}=ma(),$l=Ul(),k=cl,C=u(!1),Ce=c(()=>!!k.dataset&&k.dataset.length),w=u(ll()),q=u(!1),te=u(""),y=u(null),we=u(0),L=u(null),Ae=u(null),xe=u(null),$e=u(null),_e=u(null),Le=u(0),Fe=u(0),Te=u(0),oe=u(!1),Ee=u(!1),j=u(null),se=u(null),e=u(ne()),{loading:_,FINAL_DATASET:Oe,manualLoading:K}=pa({...jl(k),FINAL_CONFIG:e,prepareConfig:ne,skeletonDataset:[{name:"_",values:[13],color:"#808080"},{name:"_",values:[8],color:"#969696"},{name:"_",values:[5],color:"#ADADAD"},{name:"_",values:[3],color:"#C4C4C4"},{name:"_",values:[2],color:"#DBDBDB"}],skeletonConfig:Kl({defaultConfig:e.value,userConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:"#99999930",layout:{rings:{stroke:"#6A6A6A",gradient:{underlayerColor:"#FFFFFF"}},labels:{dataLabels:{show:!1}}},legend:{backgroundColor:"transparent"}}}}})}),{userOptionsVisible:re,setUserOptionsVisibility:De,keepUserOptionState:Se}=ka({config:e.value}),{svgRef:ue}=Ca({config:e.value.style.chart.title});function ne(){const l=ke({userConfig:k.config,defaultConfig:wl}),t=l.theme;if(!t)return l;if(!Al.value(l))return xl(l),l;const a=ke({userConfig:vl[t]||k.config,defaultConfig:l});return{...ke({userConfig:k.config,defaultConfig:a}),customPalette:l.customPalette.length?l.customPalette:Ql[l.theme]||W}}ee(()=>k.config,l=>{_.value||(e.value=ne()),re.value=!e.value.userOptions.showOnChartHover,Pe(),Le.value+=1,Fe.value+=1,Te.value+=1,g.value.showTable=e.value.table.show,g.value.showTooltip=e.value.style.chart.tooltip.show,g.value.showLabels=e.value.style.chart.layout.labels.dataLabels.show,d.value.width=e.value.style.chart.size,d.value.height=e.value.style.chart.size},{deep:!0});const Ie=c(()=>{const{markers:l}=e.value.style.chart.layout.labels.dataLabels,t=N.value/2,a=g.value.showLabels?l.position==="left"?t:-t:0,o=g.value.showLabels?d.value.width/2-t:0,s=l.position==="left"?o:-o;return{x:e.value.responsive?s:a/e.value.style.chart.size*d.value.width,y:0/e.value.style.chart.size*d.value.height}}),F=c(()=>({x:d.value.width/2+Ie.value.x,y:d.value.height/2+Ie.value.y}));ee(()=>k.dataset,l=>{Array.isArray(l)&&l.length>0&&(K.value=!1)},{deep:!0});const O=Qe(null),U=Qe(null);Gl(()=>{Ee.value=!0,Pe()});const ie=c(()=>!!e.value.debug);function Pe(){if(al(k.dataset)?(fe({componentName:"VueUiRings",type:"dataset",debug:ie.value}),K.value=!0):k.dataset.forEach((l,t)=>{l.values.length||(fe({componentName:"VueUiRings",type:"dataset",debug:ie.value}),K.value=!0),Zl({datasetObject:l,requiredAttributes:["name","values"]}).forEach(a=>{fe({componentName:"VueUiRings",type:"datasetSerieAttribute",property:a,index:t,debug:ie.value})})}),al(k.dataset)||(K.value=e.value.loading),e.value.responsive){const l=da(()=>{oe.value=!0;const{width:t,height:a}=ha({chart:L.value,title:e.value.style.chart.title.text?Ae.value:null,legend:e.value.style.chart.legend.show?xe.value:null,source:$e.value,noTitle:_e.value});requestAnimationFrame(()=>{d.value.width=t,d.value.height=a-12,oe.value=!1})});O.value&&(U.value&&O.value.unobserve(U.value),O.value.disconnect()),O.value=new ResizeObserver(l),U.value=L.value.parentNode,O.value.observe(U.value)}setTimeout(()=>{C.value=!0},600)}Hl(()=>{O.value&&(U.value&&O.value.unobserve(U.value),O.value.disconnect())});const{isPrinting:Be,isImaging:Ve,generatePdf:ze,generateImage:Ne}=ba({elementId:"rings_".concat(w.value),fileName:e.value.style.chart.title.text||"vue-ui-rings",options:e.value.userOptions.print}),_l=c(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),Re=c(()=>ea(e.value.customPalette)),g=u({showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show,showLabels:e.value.style.chart.layout.labels.dataLabels.show});ee(e,()=>{g.value={showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show,showLabels:e.value.style.chart.layout.labels.dataLabels.show}},{immediate:!0});const d=u({height:e.value.style.chart.size,width:e.value.style.chart.size}),Ll=c(()=>Math.min(d.value.height,d.value.width)),Fl=hl,p=u([]);function G(l){if(p.value.includes(l))p.value=p.value.filter(t=>t!==l);else{if(p.value.length===z.value.length-1)return;p.value.push(l)}Fl("selectLegend",A.value.map(t=>({name:t.name,color:t.color,value:t.value})))}function Me(l){return z.value.length?z.value.find(a=>a.name===l)||(e.value.debug&&console.warn('VueUiRings - Series name not found "'.concat(l,'"')),null):(e.value.debug&&console.warn("VueUiRings - There are no series to show."),null)}function Tl(l){const t=Me(l);t!==null&&p.value.includes(t.uid)&&G(t.uid)}function El(l){const t=Me(l);t!==null&&(p.value.includes(t.uid)||G(t.uid))}const Ol=c(()=>Math.max(...z.value.filter(l=>!p.value.includes(l.uid)).map(({value:l})=>l)));function We(l){return l/Ol.value}const z=c(()=>Oe.value.map(({values:l,name:t,color:a=null},o)=>{const s=la(l).reduce((h,Y)=>h+Y,0);return{name:t,color:a||tl(a)||Re.value[o]||W[o]||W[o%W.length],value:s,proportion:s/Oe.value.map(h=>(h.values||[]).reduce((Y,Wl)=>Y+Wl,0)).reduce((h,Y)=>h+Y,0),uid:ll(),absoluteIndex:o}})),ve=c(()=>z.value.map((l,t)=>{const a=me(e.value.style.chart.layout.labels.dataLabels.formatter,l.value,V({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,index:t}),o=isNaN(l.value/T.value)?"-":V({v:l.value/T.value*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}),s=ce({showVal:e.value.style.chart.legend.showValue,showPercentage:e.value.style.chart.legend.showPercentage,val:a,percentage:p.value.includes(l.uid)?"-%":o});return{...l,shape:"circle",opacity:p.value.includes(l.uid)?.5:1,segregate:()=>G(l.uid),isSegregated:p.value.includes(l.uid),display:"".concat(l.name).concat(e.value.style.chart.legend.showPercentage||e.value.style.chart.legend.showValue?": ":"").concat(s)}}).toSorted((l,t)=>t.value-l.value)),Dl=c(()=>({cy:"rings-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),T=c(()=>z.value.filter(l=>!p.value.includes(l.uid)).map(({value:l})=>l).reduce((l,t)=>l+t,0)),A=c(()=>z.value.filter(l=>!p.value.includes(l.uid)).map(({name:l,value:t,color:a=null,uid:o,absoluteIndex:s},h)=>({absoluteIndex:s,uid:o,name:l,color:a||tl(a)||Re.value[h]||W[h]||W[h%W.length],value:t,proportion:We(t),percentage:t/T.value*100,strokeWidth:e.value.style.chart.layout.rings.strokeWidth*We(t)})).toSorted((l,t)=>t.value-l.value));function Sl(){return A.value.map(({name:l,color:t,value:a,absoluteValues:o,percentage:s})=>({name:l,color:t,value:a,absoluteValues:o,percentage:s}))}const N=c(()=>Ll.value-e.value.style.chart.layout.rings.strokeWidth*2);function Ue(l,t){e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:l,seriesIndex:t})}function je(l,t){y.value=null,q.value=!1,e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:l,seriesIndex:t})}function ce({val:l,percentage:t,showVal:a,showPercentage:o}){const s=e.value.style.chart.layout.labels.dataLabels;return ca({config:s,val:l,percentage:t,showVal:a,showPercentage:o})}function Il(l){const t=e.value.style.chart.layout.labels.dataLabels,a=me(t.formatter,l.value,V({p:t.prefix,v:l.value,s:t.suffix,r:t.roundingValue})),o=V({v:l.percentage,s:"%",r:t.roundingPercentage});return"".concat(l.name,"\n").concat(ce({val:a,percentage:o,showVal:t.showValue,showPercentage:t.showPercentage}))}function H(l){return na(N.value*l.proportion/2*.9<=0?1e-4:N.value*l.proportion/2*.9)}function X(l,t){return t===0?F.value.y:F.value.y+N.value*A.value[0].proportion/2-N.value*l.proportion/2-2*(t+1)}function E(l,t){const a=e.value.style.chart.layout.labels.dataLabels.markers.position==="left"?-(N.value/2):N.value/2;return{x:F.value.x+a,y:X(l,t)-H(l)}}const de=u(null);function Ge(l,t){if(e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:l,seriesIndex:t}),p.value.length===k.dataset.length)return;de.value={datapoint:l,seriesIndex:t,series:A.value,config:e.value},y.value=t;const a=A.value[t],o=e.value.style.chart.tooltip.customFormat;if(ia(o)&&va(()=>o({seriesIndex:t,datapoint:l,series:A.value,config:e.value})))te.value=o({seriesIndex:t,datapoint:l,series:A.value,config:e.value});else{let s="";s+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(e.value.style.chart.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;">').concat(a.name,"</div>"),s+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 60 60" height="14" width="14"><circle cx="30" cy="30" r="30" stroke="none" fill="'.concat(a.color,'" />').concat($l.pattern?'<circle cx="30" cy="30" r="30" stroke="none" fill="url(#pattern_'.concat(w.value,"_").concat(l.absoluteIndex,')" />'):"","</svg>"),s+="<b>".concat(ce({showVal:e.value.style.chart.tooltip.showValue,showPercentage:e.value.style.chart.tooltip.showPercentage,val:"<span>".concat(me(e.value.style.chart.layout.labels.dataLabels.formatter,a.value,V({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:a.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.style.chart.tooltip.roundingValue}),{datapoint:l,seriesIndex:t}),"</span>"),percentage:V({v:a.value/T.value*100,s:"%",r:e.value.style.chart.tooltip.roundingPercentage})}),"</b></div>"),te.value=s}q.value=!0}const D=c(()=>{const l=A.value.map(a=>({name:a.name,color:a.color})),t=A.value.map(a=>a.value);return{head:l,body:t}}),Q=c(()=>{const l=[' <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>',V({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:T.value,s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue}),"100%"],t=D.value.head.map((s,h)=>[{color:s.color,name:s.name},V({p:e.value.style.chart.layout.labels.dataLabels.prefix,v:D.value.body[h],s:e.value.style.chart.layout.labels.dataLabels.suffix,r:e.value.table.td.roundingValue}),isNaN(D.value.body[h]/T.value)?"-":(D.value.body[h]/T.value*100).toFixed(e.value.table.td.roundingPercentage)+"%"]),a={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},o=[e.value.table.columnNames.series,e.value.table.columnNames.value,e.value.table.columnNames.percentage];return{head:l,body:t,config:a,colNames:o}});function he(l=null){Yl(()=>{const t=D.value.head.map((s,h)=>[[s.name],[D.value.body[h]],[isNaN(D.value.body[h]/T.value)?"-":D.value.body[h]/T.value*100]]),a=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(t),o=ra(a);l?l(o):ua({csvContent:o,title:e.value.style.chart.title.text||"vue-ui-rings"})})}const R=u(!1);function He(l){R.value=l,we.value+=1}function Xe(){g.value.showTable=!g.value.showTable}function Je(){g.value.showTooltip=!g.value.showTooltip}function Ye(){g.value.showLabels=!g.value.showLabels}const Z=u(!1);function ge(){Z.value=!Z.value}async function Pl({scale:l=2}={}){if(!L.value)return;const{width:t,height:a}=L.value.getBoundingClientRect(),o=t/a,{imageUri:s,base64:h}=await wa({domElement:L.value,base64:!0,img:!0,scale:l});return{imageUri:s,base64:h,title:e.value.style.chart.title.text,width:t,height:a,aspectRatio:o}}const J=c(()=>{const l=e.value.table.useDialog&&!e.value.table.show,t=g.value.showTable;return{component:l?Cl:pl,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:l?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:R.value,fullscreenParent:L.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:t,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});ee(()=>g.value.showTable,l=>{e.value.table.show||(l&&e.value.table.useDialog&&j.value?j.value.open():"close"in j.value&&j.value.close())});function qe(){g.value.showTable=!1,se.value&&se.value.setTableIconState(!1)}const Bl=c(()=>ve.value.map(l=>({...l,name:l.display}))),Vl=c(()=>e.value.style.chart.backgroundColor),zl=c(()=>e.value.style.chart.legend),Nl=c(()=>e.value.style.chart.title),{exportSvg:Rl,getSvg:Ml}=fa({svg:ue,title:Nl,legend:zl,legendItems:Bl,backgroundColor:Vl});async function Ke({isCb:l}){if(l){const{blob:t,url:a,text:o,dataUrl:s}=await Ml();e.value.userOptions.callbacks.svg({blob:t,url:a,text:o,dataUrl:s})}else Rl()}return dl({getData:Sl,getImage:Pl,generatePdf:ze,generateCsv:he,generateImage:Ne,generateSvg:Ke,hideSeries:El,showSeries:Tl,toggleTable:Xe,toggleTooltip:Je,toggleAnnotator:ge,toggleFullscreen:He,toggleLabels:Ye}),(l,t)=>(n(),b("div",{ref_key:"ringsChart",ref:L,class:P("vue-data-ui-component vue-ui-rings ".concat(R.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(e.value.useCssAnimation?"":"vue-ui-dna")),style:M("font-family:".concat(e.value.style.fontFamily,";text-align:center;width:100%;background:").concat(e.value.style.chart.backgroundColor,";").concat(e.value.responsive?"height: 100%":"")),id:"rings_".concat(w.value),onMouseleave:t[2]||(t[2]=a=>{y.value=null,q.value=!1,r(De)(!1)}),onMouseenter:t[3]||(t[3]=()=>r(De)(!0))},[e.value.userOptions.buttons.annotator?(n(),I(r(fl),{key:0,svgRef:r(ue),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:Z.value,onClose:ge},{"annotator-action-close":i(()=>[v(l.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":i(({color:a})=>[v(l.$slots,"annotator-action-color",x($({color:a})),void 0,!0)]),"annotator-action-draw":i(({mode:a})=>[v(l.$slots,"annotator-action-draw",x($({mode:a})),void 0,!0)]),"annotator-action-undo":i(({disabled:a})=>[v(l.$slots,"annotator-action-undo",x($({disabled:a})),void 0,!0)]),"annotator-action-redo":i(({disabled:a})=>[v(l.$slots,"annotator-action-redo",x($({disabled:a})),void 0,!0)]),"annotator-action-delete":i(({disabled:a})=>[v(l.$slots,"annotator-action-delete",x($({disabled:a})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):f("",!0),_l.value?(n(),b("div",{key:1,ref_key:"noTitle",ref:_e,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):f("",!0),e.value.style.chart.title.text?(n(),b("div",{key:2,ref_key:"chartTitle",ref:Ae,style:"width:100%;background:transparent"},[(n(),I(xa,{key:"title_".concat(Le.value),config:{title:{cy:"rings-div-title",...e.value.style.chart.title},subtitle:{cy:"rings-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):f("",!0),m("div",{id:"legend-top-".concat(w.value)},null,8,La),e.value.userOptions.show&&Ce.value&&(r(Se)||r(re))?(n(),I(r(ml),{ref_key:"userOptionsRef",ref:se,key:"user_options_".concat(we.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:r(Be),isImaging:r(Ve),uid:w.value,hasTooltip:e.value.userOptions.buttons.tooltip&&e.value.style.chart.tooltip.show,hasPdf:e.value.userOptions.buttons.pdf,hasXls:e.value.userOptions.buttons.csv,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,hasLabel:e.value.userOptions.buttons.labels,isTooltip:g.value.showTooltip,isFullscreen:R.value,titles:{...e.value.userOptions.buttonTitles},chartElement:L.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:Z.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:He,onGeneratePdf:r(ze),onGenerateCsv:he,onGenerateImage:r(Ne),onGenerateSvg:Ke,onToggleTable:Xe,onToggleTooltip:Je,onToggleAnnotator:ge,onToggleLabels:Ye,style:M({visibility:r(Se)?r(re)?"visible":"hidden":"visible"})},be({_:2},[l.$slots.menuIcon?{name:"menuIcon",fn:i(({isOpen:a,color:o})=>[v(l.$slots,"menuIcon",x($({isOpen:a,color:o})),void 0,!0)]),key:"0"}:void 0,l.$slots.optionTooltip?{name:"optionTooltip",fn:i(()=>[v(l.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,l.$slots.optionPdf?{name:"optionPdf",fn:i(()=>[v(l.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,l.$slots.optionCsv?{name:"optionCsv",fn:i(()=>[v(l.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,l.$slots.optionImg?{name:"optionImg",fn:i(()=>[v(l.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,l.$slots.optionSvg?{name:"optionSvg",fn:i(()=>[v(l.$slots,"optionSvg",{},void 0,!0)]),key:"5"}:void 0,l.$slots.optionTable?{name:"optionTable",fn:i(()=>[v(l.$slots,"optionTable",{},void 0,!0)]),key:"6"}:void 0,l.$slots.optionLabels?{name:"optionLabels",fn:i(()=>[v(l.$slots,"optionLabels",{},void 0,!0)]),key:"7"}:void 0,l.$slots.optionFullscreen?{name:"optionFullscreen",fn:i(({toggleFullscreen:a,isFullscreen:o})=>[v(l.$slots,"optionFullscreen",x($({toggleFullscreen:a,isFullscreen:o})),void 0,!0)]),key:"8"}:void 0,l.$slots.optionAnnotator?{name:"optionAnnotator",fn:i(({toggleAnnotator:a,isAnnotator:o})=>[v(l.$slots,"optionAnnotator",x($({toggleAnnotator:a,isAnnotator:o})),void 0,!0)]),key:"9"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasXls","hasImg","hasSvg","hasTable","hasFullscreen","hasLabel","isTooltip","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):f("",!0),(n(),b("svg",{ref_key:"svgRef",ref:ue,xmlns:r(aa),class:P({"vue-data-ui-fullscreen--on":R.value,"vue-data-ui-fulscreen--off":!R.value,resizing:oe.value||r(_)}),viewBox:"0 0 ".concat(d.value.width<=0?10:d.value.width," ").concat(d.value.height<=0?10:d.value.height),style:M("max-width:100%;overflow:hidden;background:transparent;color:".concat(e.value.style.chart.color))},[le(r(kl)),l.$slots["chart-background"]?(n(),b("foreignObject",{key:0,x:0,y:0,width:d.value.width<=0?10:d.value.width,height:d.value.height<=0?10:d.value.height,style:{pointerEvents:"none"}},[v(l.$slots,"chart-background",{},void 0,!0)],8,Ta)):f("",!0),m("defs",null,[(n(!0),b(ae,null,pe(A.value,(a,o)=>(n(),b("radialGradient",{cx:"50%",cy:"30%",r:"50%",fx:"50%",fy:"50%",id:"gradient_".concat(w.value,"_").concat(o)},[m("stop",{offset:"0%","stop-color":r(ta)(r(oa)(a.color,.05),100-e.value.style.chart.layout.rings.gradient.intensity)},null,8,Oa),m("stop",{offset:"100%","stop-color":a.color},null,8,Da)],8,Ea))),256))]),l.$slots.pattern?(n(),b("g",Sa,[(n(!0),b(ae,null,pe(A.value,a=>(n(),b("defs",null,[v(l.$slots,"pattern",Ze({ref_for:!0},{seriesIndex:a.absoluteIndex,patternId:"pattern_".concat(w.value,"_").concat(a.absoluteIndex)}),void 0,!0)]))),256))])):f("",!0),(n(!0),b(ae,null,pe(A.value,(a,o)=>(n(),b("g",null,[m("circle",{class:P({"vue-ui-rings-item":C.value&&e.value.useCssAnimation,"vue-rings-item-onload":!C.value&&e.value.useCssAnimation&&!r(_),"vue-ui-rings-opacity":y.value!==null&&y.value!==o}),style:M("animation-delay:".concat(o*100,"ms")),stroke:e.value.style.chart.layout.rings.stroke,cx:F.value.x,cy:X(a,o),r:H(a),fill:e.value.style.chart.layout.rings.gradient.underlayerColor},null,14,Ia),m("circle",{class:P({"vue-ui-rings-item":C.value&&e.value.useCssAnimation,"vue-rings-item-onload":!C.value&&e.value.useCssAnimation&&!r(_),"vue-ui-rings-shadow":e.value.style.chart.layout.rings.useShadow,"vue-ui-rings-blur":y.value!==null&&y.value!==o}),style:M("animation-delay:".concat(o*100,"ms")),stroke:e.value.style.chart.layout.rings.stroke,"stroke-width":a.strokeWidth<.5?.5:a.strokeWidth,cx:F.value.x,cy:X(a,o),r:H(a),fill:e.value.style.chart.layout.rings.gradient.show?"url(#gradient_".concat(w.value,"_").concat(o,")"):a.color},null,14,Pa),l.$slots.pattern?(n(),b("circle",{key:0,class:P({"vue-ui-rings-item":C.value&&e.value.useCssAnimation,"vue-rings-item-onload":!C.value&&e.value.useCssAnimation&&!r(_),"vue-ui-rings-shadow":e.value.style.chart.layout.rings.useShadow,"vue-ui-rings-blur":y.value!==null&&y.value!==o}),style:M("animation-delay:".concat(o*100,"ms")),stroke:e.value.style.chart.layout.rings.stroke,"stroke-width":a.strokeWidth<.5?.5:a.strokeWidth,cx:F.value.x,cy:X(a,o),r:H(a),fill:"url(#pattern_".concat(w.value,"_").concat(a.absoluteIndex,")")},null,14,Ba)):f("",!0),m("circle",{stroke:"none",cx:F.value.x,cy:X(a,o),r:H(a),fill:"transparent",onMouseenter:s=>Ge(a,o),onMouseleave:s=>je(a,o),onClick:s=>Ue(a,o)},null,40,Va),g.value.showLabels?(n(),b(ae,{key:1},[m("rect",{x:e.value.style.chart.layout.labels.dataLabels.markers.position==="left"?E(a,o).x:F.value.x,y:E(a,o).y-e.value.style.chart.layout.labels.dataLabels.markers.strokeWidth/2,width:Math.abs(F.value.x-E(a,o).x),height:e.value.style.chart.layout.labels.dataLabels.markers.strokeWidth,fill:e.value.style.chart.layout.labels.dataLabels.markers.stroke,rx:e.value.style.chart.layout.labels.dataLabels.markers.strokeWidth,class:P({"vue-ui-rings-item":C.value&&e.value.useCssAnimation,"vue-rings-item-onload":!C.value&&e.value.useCssAnimation&&!r(_),"vue-ui-rings-shadow":e.value.style.chart.layout.rings.useShadow,"vue-ui-rings-blur":y.value!==null&&y.value!==o})},null,10,za),m("circle",{cx:E(a,o).x,cy:E(a,o).y,r:e.value.style.chart.layout.labels.dataLabels.markers.radius,fill:a.color,stroke:e.value.style.chart.backgroundColor,class:P({"vue-ui-rings-item":C.value&&e.value.useCssAnimation,"vue-rings-item-onload":!C.value&&e.value.useCssAnimation&&!r(_),"vue-ui-rings-shadow":e.value.style.chart.layout.rings.useShadow,"vue-ui-rings-blur":y.value!==null&&y.value!==o})},null,10,Na),m("text",{x:E(a,o).x+(e.value.style.chart.layout.labels.dataLabels.markers.position==="left"?-e.value.style.chart.layout.labels.dataLabels.offsetX:e.value.style.chart.layout.labels.dataLabels.offsetX),y:E(a,o).y+e.value.style.chart.layout.labels.dataLabels.fontSize/3,"text-anchor":e.value.style.chart.layout.labels.dataLabels.markers.position==="left"?"end":"start","font-size":e.value.style.chart.layout.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.labels.dataLabels.color,"font-weight":e.value.style.chart.layout.labels.dataLabels.bold?"bold":"normal",class:P({"vue-ui-rings-item":C.value&&e.value.useCssAnimation,"vue-rings-item-onload":!C.value&&e.value.useCssAnimation&&!r(_),"vue-ui-rings-shadow":e.value.style.chart.layout.rings.useShadow,"vue-ui-rings-blur":y.value!==null&&y.value!==o}),onMouseenter:s=>Ge(a,o),onMouseleave:s=>je(a,o),onClick:s=>Ue(a,o),innerHTML:r(sa)({content:Il(a),fontSize:e.value.style.chart.layout.labels.dataLabels.fontSize,fill:e.value.style.chart.layout.labels.dataLabels.color,x:E(a,o).x+(e.value.style.chart.layout.labels.dataLabels.markers.position==="left"?-e.value.style.chart.layout.labels.dataLabels.offsetX-6-e.value.style.chart.layout.labels.dataLabels.markers.radius:e.value.style.chart.layout.labels.dataLabels.offsetX+6+e.value.style.chart.layout.labels.dataLabels.markers.radius),y:E(a,o).y+e.value.style.chart.layout.labels.dataLabels.fontSize/3,translateY:!0})},null,42,Ra)],64)):f("",!0)]))),256)),v(l.$slots,"svg",{svg:d.value},void 0,!0)],14,Fa)),l.$slots.watermark?(n(),b("div",Ma,[v(l.$slots,"watermark",x($({isPrinting:r(Be)||r(Ve)})),void 0,!0)])):f("",!0),m("div",{id:"legend-bottom-".concat(w.value)},null,8,Wa),Ee.value?(n(),I(Xl,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(w.value):"#legend-bottom-".concat(w.value)},[m("div",{ref_key:"chartLegend",ref:xe},[e.value.style.chart.legend.show?(n(),I($a,{key:"legend_".concat(Te.value),legendSet:ve.value,config:Dl.value,onClickMarker:t[0]||(t[0]=({legend:a})=>G(a.uid))},be({item:i(({legend:a,index:o})=>[r(_)?f("",!0):(n(),b("div",{key:0,onClick:s=>G(a.uid),style:M("opacity:".concat(p.value.includes(a.uid)?.5:1))},ye(a.display),13,Ua))]),_:2},[l.$slots.pattern?{name:"legend-pattern",fn:i(({legend:a,index:o})=>[le(Aa,{shape:a.shape,radius:30,stroke:"none",plot:{x:30,y:30},fill:"url(#pattern_".concat(w.value,"_").concat(o,")")},null,8,["shape","fill"])]),key:"0"}:void 0]),1032,["legendSet","config"])):v(l.$slots,"legend",{key:1,legend:ve.value},void 0,!0)],512)],8,["to"])):f("",!0),l.$slots.source?(n(),b("div",{key:6,ref_key:"source",ref:$e,dir:"auto"},[v(l.$slots,"source",{},void 0,!0)],512)):f("",!0),le(r(gl),{show:g.value.showTooltip&&q.value&&p.value.length<k.dataset.length,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,fontSize:e.value.style.chart.tooltip.fontSize,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:L.value,content:te.value,isFullscreen:R.value,isCustom:e.value.style.chart.tooltip.customFormat&&typeof e.value.style.chart.tooltip.customFormat=="function",smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":i(()=>[v(l.$slots,"tooltip-before",x($({...de.value})),void 0,!0)]),"tooltip-after":i(()=>[v(l.$slots,"tooltip-after",x($({...de.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","borderRadius","borderColor","borderWidth","fontSize","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),Ce.value&&e.value.userOptions.buttons.table?(n(),I(Jl(J.value.component),Ze({key:7},J.value.props,{ref_key:"tableUnit",ref:j,onClose:qe}),be({content:i(()=>[(n(),I(r(yl),{key:"table_".concat(Fe.value),colNames:Q.value.colNames,head:Q.value.head,body:Q.value.body,config:Q.value.config,title:e.value.table.useDialog?"":J.value.title,withCloseButton:!e.value.table.useDialog,onClose:qe},{th:i(({th:a})=>[m("div",{innerHTML:a,style:{display:"flex","align-items":"center"}},null,8,ja)]),td:i(({td:a})=>[el(ye(a.name||a),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[e.value.table.useDialog?{name:"title",fn:i(()=>[el(ye(J.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:i(()=>[m("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:t[1]||(t[1]=a=>he(e.value.userOptions.callbacks.csv))},[le(r(bl),{name:"excel",stroke:J.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):f("",!0),r(_)?(n(),I(ya,{key:8})):f("",!0)],46,_a))}},Ha=ql(Ga,[["__scopeId","data-v-b1f96184"]]),ct=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"}));export{vt as a,ct as b,Ha as v};
