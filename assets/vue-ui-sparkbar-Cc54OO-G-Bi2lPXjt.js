
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css"])))=>i.map(i=>d[i]);
import{ac as ie,E as O,e as h,a8 as se,J as C,K as j,aa as de,c as i,o as n,r as $,A as p,z as ve,j as ce,m as N,O as c,f as d,t as f,F as L,R as pe,u as o,g as ge,c1 as fe,c4 as ye}from"./index-CJB5jCfL.js";import{J as be,x as me,v as he,o as A,$ as xe,E as ke,A as P,a as Ce,u as Ae,L as w,F as _,d as we,w as E,X as _e}from"./vue-data-ui-8Gmf-dDN.js";import{s as Se,i as F}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as $e,j as Ee}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{i as Fe}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import"./alert-I_0TAljB.js";const V={style:{backgroundColor:"#1A1A1A",gutter:{backgroundColor:"#3A3A3A"},bar:{gradient:{underlayerColor:"#1A1A1A"}},labels:{name:{color:"#CCCCCC"}},title:{color:"#CCCCCC"}}},M={style:{backgroundColor:"#FFF8E1",gutter:{backgroundColor:"#ded6ca"},bar:{gradient:{underlayerColor:"#FFF8E1"}},labels:{name:{color:"#424242"}},title:{color:"#424242"}}},R={style:{backgroundColor:"#1E1E1E",gutter:{backgroundColor:"#2E2E2E"},bar:{gradient:{underlayerColor:"#FFF8E1"}},labels:{name:{color:"#BDBDBD"}},title:{color:"#BDBDBD"}}},J={style:{backgroundColor:"#1A1A1A",gutter:{backgroundColor:"#333333"},bar:{gradient:{underlayerColor:"#1A1A1A"}},labels:{name:{color:"#99CC99"}},title:{color:"#66CC66"}}},W={style:{backgroundColor:"#fbfafa",gutter:{backgroundColor:"#f5f0eb"},bar:{gradient:{underlayerColor:"#fbfafa"}},labels:{name:{color:"#8A9892"}}}},q={style:{backgroundColor:"#f6f6fb",bar:{gradient:{underlayerColor:"#f6f6fb"}},labels:{name:{color:"#50606C"}}}},G={default:{},dark:V,celebration:M,celebrationNight:R,hack:J,zen:W,concrete:q},Ue=Object.freeze(Object.defineProperty({__proto__:null,celebration:M,celebrationNight:R,concrete:q,dark:V,default:G,hack:J,zen:W},Symbol.toStringTag,{value:"Module"})),ze=["onClick","onMouseenter","onMouseleave"],De={key:1,class:"vue-ui-sparkbar-datapoint-value"},Be=["xmlns","viewBox"],Ie=["id"],Te=["stop-color"],Oe=["stop-color"],je=["height","width","fill","rx"],Ne=["height","width","fill","rx"],Le=["height","width","fill","rx"],Pe={key:2,ref:"source",dir:"auto"},Ve={__name:"vue-ui-sparkbar",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}},backgroundOpacity:{type:Number,default:null}},emits:["selectDatapoint"],setup(U,{emit:K}){const X=fe(()=>ye(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([0,1,2]),import.meta.url)),{vue_ui_sparkbar:Q}=Se(),{isThemeValid:Y,warnInvalidTheme:Z}=Fe(),g=U,H=ie();O(()=>{H["chart-background"]&&console.warn("VueUiSparkbar does not support the #chart-background slot.")});const z=h(be()),e=h(S()),{loading:x,FINAL_DATASET:v}=$e({...se(g),FINAL_CONFIG:e,prepareConfig:S,skeletonDataset:[{name:"_",value:21,target:25,color:"#808080"},{name:"_",value:13,target:25,color:"#ADADAD"},{name:"_",value:8,target:25,color:"#DBDBDB"}],skeletonConfig:me({defaultConfig:e.value,userConfig:{style:{backgroundColor:"#99999930",animation:{show:!1},layout:{independant:!0},gutter:{backgroundColor:"#6A6A6A",opacity:50},bar:{gradient:{underlayerColor:"#6A6A6A"}}}}})}),D=C(()=>!!e.value.debug);function S(){const t=F({userConfig:g.config,defaultConfig:Q}),l=t.theme;if(!l)return t;if(!Y.value(t))return Z(t),t;const a=F({userConfig:G[l]||g.config,defaultConfig:t}),r=F({userConfig:g.config,defaultConfig:a});return{...r,customPalette:r.customPalette.length?r.customPalette:he[l]||A}}j(()=>g.config,t=>{e.value=S()},{deep:!0});const ee=C(()=>xe(e.value.customPalette)),y=h(v.value.map(t=>({...t,value:e.value.style.animation.show?0:t.value||0,formatter:t.formatter||null}))),B=h(null);O(async()=>{ke(g.dataset)&&P({componentName:"VueUiSparkbar",type:"dataset",debug:D.value}),I()});function I(){if(e.value.style.animation.show){let t=function(){m+=r/l,m<r?(y.value=y.value.map((u,k)=>({...u,value:u.value+=a[k]})),B.value=requestAnimationFrame(t)):y.value=v.value.map(u=>({...u,value:u.value||0,formatter:u.formatter||null}))};const l=e.value.style.animation.animationFrames,a=v.value.map((u,k)=>u.value/l),r=v.value.map(u=>u.value||0).reduce((u,k)=>u+k,0);let m=0;t()}}j(()=>v.value,async t=>{cancelAnimationFrame(B.value),y.value=v.value.map(l=>({...l,value:e.value.style.animation.show?0:l.value||0,formatter:l.formatter||null})),de(I)},{deep:!0});const s=h({width:500,height:16}),te=C(()=>Math.max(...v.value.map(t=>t.value))),ae=C(()=>(v.value.forEach((t,l)=>{Ce({datasetObject:t,requiredAttributes:["name","value"]}).forEach(a=>{P({componentName:"VueUiSparkbar",type:"datasetSerieAttribute",property:a,index:l,debug:D.value})})}),y.value.map((t,l)=>({...t,value:t.value||0,color:Ae(t.color)||ee.value[l]||A[l]||A[l%A.length]}))));function le(t){return t/te.value}function T(t){return e.value.style.layout.independant?t.target?t.value/t.target:e.value.style.layout.percentage?t.value>100?1:t.value/100:e.value.style.layout.target===0?1:t.value/e.value.style.layout.target:le(t.value)}function b(t){return e.value.style.layout.independant&&t.target||e.value.style.layout.target}const oe=K;function re(t,l){oe("selectDatapoint",{datapoint:t,index:l}),e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:t,seriesIndex:l})}function ne(t,l){e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:t,seriesIndex:l})}function ue(t,l){e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:t,seriesIndex:l})}return(t,l)=>(n(),i("div",{class:"vue-data-ui-component vue-ui-sparkbar",style:c({width:"100%",position:"relative",fontFamily:e.value.style.fontFamily,background:g.backgroundOpacity!==null?o(E)(e.value.style.backgroundColor,g.backgroundOpacity):e.value.style.backgroundColor})},[t.$slots.title?$(t.$slots,"title",ce(N({key:0},{title:{...t.title,title:e.value.style.title.text,subtitle:e.value.style.title.subtitle.text}}))):p("",!0),!t.$slots.title&&e.value.style.title.text?(n(),i("div",{key:1,class:"vue-ui-sparkbar-title-container",style:c({background:e.value.style.title.backgroundColor,margin:e.value.style.title.margin,textAlign:e.value.style.title.textAlign})},[d("div",{class:"vue-ui-sparkbar-title",style:c({fontSize:e.value.style.title.fontSize+"px",color:e.value.style.title.color,fontWeight:e.value.style.title.bold?"bold":"normal"})},f(e.value.style.title.text),5),e.value.style.title.subtitle.text?(n(),i("div",{key:0,class:"vue-ui-sparkbar-subtitle",style:c({fontSize:e.value.style.title.subtitle.fontSize+"px",color:e.value.style.title.subtitle.color,fontWeight:e.value.style.title.subtitle.bold?"bold":"normal"})},f(e.value.style.title.subtitle.text),5)):p("",!0)],4)):p("",!0),(n(!0),i(L,null,pe(ae.value,(a,r)=>(n(),i("div",{style:c("display:flex !important;".concat(["left","right"].includes(e.value.style.labels.name.position)?"flex-direction: ".concat(e.value.style.labels.name.position==="right"?"row-reverse":"row"," !important"):"flex-direction:column !important",";gap:").concat(e.value.style.gap,"px !important;align-items:center;").concat(o(v).length>0&&r!==o(v).length-1?"margin-bottom:6px":"")),onClick:m=>re(a,r),onMouseenter:m=>ne(a,r),onMouseleave:m=>ue(a,r)},[o(x)?p("",!0):$(t.$slots,"data-label",N({key:0,ref_for:!0},{bar:{...a,target:b(a),valueLabel:o(w)(a.formatter,a.value,o(_)({p:a.prefix||"",v:a.value,s:a.suffix||"",r:a.rounding||0}),{datapoint:a,seriesIndex:r}),targetLabel:o(w)(a.formatter,b(a),o(_)({p:a.prefix||"",v:b(a),s:a.suffix||"",r:a.rounding||0}),{datapoint:a,seriesIndex:r})}})),!t.$slots["data-label"]||o(x)?(n(),i("div",{key:1,style:c({display:"flex",justifyContent:["right","top-right"].includes(e.value.style.labels.name.position)?"flex-end":["top-center"].includes(e.value.style.labels.name.position)?"center":"flex-start",alignItems:"center",width:e.value.style.labels.name.width,color:e.value.style.labels.name.color,fontSize:e.value.style.labels.fontSize+"px",fontWeight:e.value.style.labels.name.bold?"bold":"normal",flexWrap:"wrap"})},[o(x)?(n(),i("div",{key:0,class:"vue-ui-sparkbar-skeleton-name",style:c({width:"60px",height:e.value.style.labels.fontSize+"px",borderRadius:e.value.style.labels.fontSize/4+"px",display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"5px"})},[d("div",{style:c({height:"100%",width:"40px",borderRadius:e.value.style.labels.fontSize/4+"px",backgroundColor:"#6A6A6A80"})},null,4),d("div",{style:c({height:"100%",width:"15px",borderRadius:e.value.style.labels.fontSize/4+"px",backgroundColor:"#6A6A6A80"})},null,4)],4)):(n(),i(L,{key:1},[d("span",null,f(a.name),1),e.value.style.labels.value.show?(n(),i("span",{key:0,style:c("font-weight:".concat(e.value.style.labels.value.bold?"bold":"normal")),class:"vue-ui-sparkbar-datapoint-name"},": "+f(o(w)(a.formatter,a.value,o(_)({p:a.prefix||"",v:a.value,s:a.suffix||"",r:a.rounding||0}),{datapoint:a,seriesIndex:r})),5)):p("",!0),e.value.style.layout.showTargetValue?(n(),i("span",De,f(" "+e.value.style.layout.targetValueText)+" "+f(o(w)(a.formatter,b(a),o(_)({p:a.prefix||"",v:b(a),s:a.suffix||"",r:a.rounding||0}),{datapoint:a,seriesIndex:r})),1)):p("",!0)],64))],4)):p("",!0),(n(),i("svg",{xmlns:o(we),viewBox:"0 0 ".concat(s.value.width," ").concat(s.value.height),width:"100%"},[ge(o(X)),d("defs",null,[d("linearGradient",{x1:"0%",y1:"0%",x2:"100%",y2:"0%",id:"sparkbar_gradient_".concat(r,"_").concat(z.value)},[d("stop",{offset:"0%","stop-color":o(E)(o(_e)(a.color,.03),100-e.value.style.bar.gradient.intensity)},null,8,Te),d("stop",{offset:"100%","stop-color":a.color},null,8,Oe)],8,Ie)]),d("rect",{height:s.value.height,width:s.value.width,x:0,y:0,fill:o(E)(e.value.style.gutter.backgroundColor,e.value.style.gutter.opacity),rx:s.value.height/2},null,8,je),d("rect",{height:s.value.height,width:s.value.width*T(a),x:0,y:0,fill:e.value.style.bar.gradient.underlayerColor,rx:s.value.height/2},null,8,Ne),d("rect",{height:s.value.height,width:s.value.width*T(a),x:0,y:0,fill:e.value.style.bar.gradient.show?"url(#sparkbar_gradient_".concat(r,"_").concat(z.value,")"):a.color,rx:s.value.height/2},null,8,Le)],8,Be))],44,ze))),256)),t.$slots.source?(n(),i("div",Pe,[$(t.$slots,"source")],512)):p("",!0),o(x)?(n(),ve(Ee,{key:3})):p("",!0)],4))}},Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));export{Ve as _,Ke as a,Ue as v};
