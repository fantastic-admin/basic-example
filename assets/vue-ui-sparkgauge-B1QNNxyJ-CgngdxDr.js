
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-TgflyMpU-q2MkeeNq.js","./index-DXZKKOp8.js","./index-B7kifsnL.css"])))=>i.map(i=>d[i]);
import{e as b,a7 as q,E,J as s,K as I,c as r,o as u,A as f,z as J,O as g,t as k,u as i,g as Q,f as y,b_ as U,r as B,n as Y,c1 as K}from"./index-DXZKKOp8.js";import{t as H,o as F}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{Q as W,A as X,g as Z,p as V,b as ee,a1 as ae,y as te,I as le,c as x,f as oe}from"./vue-data-ui-BN9YfUec.js";import{S as se,T as ue}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{o as ie}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import{J as ne}from"./themes-AUNCOb2G-RAhReTPj.js";import"./alert-l5XlVwCh.js";const re=["xmlns","viewBox"],ve=["width","height"],de=["id"],fe=["stop-color"],ce=["stop-color"],ye=["d","stroke","stroke-linecap"],me=["d","stroke","stroke-linecap","stroke-dashoffset"],ge=["x","y","width","height"],pe=["x","y","font-size","fill","font-weight"],he={key:2,ref:"source",dir:"auto"},_e={__name:"vue-ui-sparkgauge",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(j){var M;const R=U(()=>K(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([0,1,2]),import.meta.url)),{vue_ui_sparkgauge:D}=H(),d=j,w=b(W()),e=b(h()),{loading:p,FINAL_DATASET:v}=se({...q(d),FINAL_CONFIG:e,prepareConfig:h,skeletonDataset:{value:0,min:-1,max:1,title:""},skeletonConfig:X({defaultConfig:e.value,userConfig:{style:{animation:{show:!1},background:"#99999930",colors:{min:"#CACACA",max:"#6A6A6A"},track:{autoColor:!0},gutter:{color:"#6A6A6A80"}}}})}),{svgRef:G}=ie({config:{text:((M=d.dataset)==null?void 0:M.title)||""}});function h(){const a=F({userConfig:d.config,defaultConfig:D});return a.theme?{...F({userConfig:ne.vue_ui_sparkgauge[a.theme]||d.config,defaultConfig:a})}:a}E(()=>{$()});const A=s(()=>e.value.debug);function $(){Z(d.dataset)?V({componentName:"VueUiSparkgauge",type:"dataset",debug:A.value}):ee({datasetObject:d.dataset,requiredAttributes:["value","min","max"]}).forEach(a=>{V({componentName:"VueUiSparkgauge",type:"datasetAttribute",property:a,debug:A.value})})}I(()=>d.config,a=>{e.value=h(),t.value=e.value.style.animation.show?o.value.min:v.value.value,$()},{deep:!0});const l=s(()=>({height:e.value.style.height,width:128,base:e.value.style.basePosition})),o=s(()=>{var N,O;const a=(N=v.value.min)!=null?N:0,n=(O=v.value.max)!=null?O:0,c=n-a;return{min:a,max:n,diff:c}}),t=b(e.value.style.animation.show?o.value.min:v.value.value);I(()=>v.value.value,()=>{_(v.value.value||0)});const T=s(()=>t.value>o.value.max?o.value.max:t.value<o.value.min?o.value.min:t.value),L=s(()=>o.value.diff/e.value.style.animation.speedMs);E(()=>{_(v.value.value||0)});function _(a){function n(){t.value<a?t.value=Math.min(t.value+L.value,a):t.value>a&&(t.value=Math.max(t.value-L.value,a)),t.value!==a&&requestAnimationFrame(n)}n()}const m=s(()=>{var a;return(a=v.value.title)!=null?a:""}),C=s(()=>{const a=o.value.diff;if(!isFinite(a)||a===0)return 0;const n=o.value.min,c=T.value;return c>=0?(c-n)/a:(Math.abs(n)-Math.abs(c))/a}),z=s(()=>ae(e.value.style.colors.min,e.value.style.colors.max,o.value.min,o.value.max,t.value)),S=s(()=>e.value.style.dataLabel.autoColor?z.value:e.value.style.dataLabel.color),P=s(()=>e.value.style.track.autoColor?z.value:e.value.style.track.color);return(a,n)=>(u(),r("div",{class:"vue-data-ui-component vue-ui-sparkgauge",style:g("font-family:".concat(e.value.style.fontFamily,";width: 100%; background:").concat(e.value.style.background))},[e.value.style.title.show&&m.value&&e.value.style.title.position==="top"?(u(),r("div",{key:0,class:"vue-data-ui-sparkgauge-label",style:g("font-size:".concat(e.value.style.title.fontSize,"px;text-align:").concat(e.value.style.title.textAlign,";font-weight:").concat(e.value.style.title.bold?"bold":"normal",";color:").concat(e.value.style.title.color))},k(m.value),5)):f("",!0),(u(),r("svg",{ref_key:"svgRef",ref:G,xmlns:i(te),viewBox:"0 0 ".concat(l.value.width," ").concat(l.value.height),style:"overflow: visible; background:transparent; width:100%;"},[Q(i(R)),a.$slots["chart-background"]&&!i(p)?(u(),r("foreignObject",{key:0,x:0,y:0,width:l.value.width,height:l.value.height,style:{pointerEvents:"none"}},[B(a.$slots,"chart-background")],8,ve)):f("",!0),y("defs",null,[y("linearGradient",{id:"gradient_".concat(w.value),x1:"-10%",y1:"100%",x2:"110%",y2:"100%"},[y("stop",{offset:"0%","stop-color":e.value.style.colors.min},null,8,fe),y("stop",{offset:"100%","stop-color":e.value.style.colors.max},null,8,ce)],8,de)]),y("path",{d:"M10 ".concat(l.value.base," A 1 1 0 1 1 118 ").concat(l.value.base),stroke:e.value.style.gutter.color,"stroke-width":8,"stroke-linecap":e.value.style.gutter.strokeLinecap,fill:"none"},null,8,ye),C.value!==0?(u(),r("path",{key:1,d:"M10 ".concat(l.value.base," A 1 1 0 1 1 118 ").concat(l.value.base),stroke:e.value.style.colors.showGradient?"url(#gradient_".concat(w.value,")"):P.value,"stroke-width":8,"stroke-linecap":e.value.style.track.strokeLinecap,fill:"none","stroke-dasharray":169.5,"stroke-dashoffset":169.5-169.5*C.value,class:Y({"vue-ui-sparkgauge-track":e.value.style.animation.show}),style:g(e.value.style.animation.show?"animation: vue-ui-sparkgauge-animation ".concat(e.value.style.animation.speedMs,"ms ease-in;"):"")},null,14,me)):f("",!0),i(p)?(u(),r("rect",{key:2,x:l.value.width/2-e.value.style.dataLabel.fontSize/2,y:l.value.base+6+e.value.style.dataLabel.offsetY-e.value.style.dataLabel.fontSize,width:e.value.style.dataLabel.fontSize,height:e.value.style.dataLabel.fontSize,fill:"#6A6A6A50",rx:3},null,8,ge)):(u(),r("text",{key:3,"text-anchor":"middle",x:l.value.width/2,y:l.value.base+6+e.value.style.dataLabel.offsetY,"font-size":e.value.style.dataLabel.fontSize,fill:S.value,"font-weight":e.value.style.dataLabel.bold?"bold":"normal"},k(i(le)(e.value.style.dataLabel.formatter,i(x)(t.value),i(oe)({p:e.value.style.dataLabel.prefix,v:i(x)(t.value),s:e.value.style.dataLabel.suffix,r:e.value.style.dataLabel.rounding}),{datapoint:i(x)(t.value),color:S.value})),9,pe))],8,re)),e.value.style.title.show&&m.value&&e.value.style.title.position==="bottom"?(u(),r("div",{key:1,class:"vue-data-ui-sparkgauge-label",style:g("font-size:".concat(e.value.style.title.fontSize,"px;text-align:").concat(e.value.style.title.textAlign,";font-weight:").concat(e.value.style.title.bold?"bold":"normal",";font-weight:").concat(e.value.style.title.bold?"bold":"normal",";color:").concat(e.value.style.title.color))},k(m.value),5)):f("",!0),a.$slots.source?(u(),r("div",he,[B(a.$slots,"source")],512)):f("",!0),i(p)?(u(),J(ue,{key:3})):f("",!0)],4))}};export{_e as default};
