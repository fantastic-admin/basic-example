
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css"])))=>i.map(i=>d[i]);
import{e as h,a8 as Z,E as M,J as u,K as O,c as n,o as r,A as f,z as ee,O as y,t as k,u as i,g as ae,f as m,c1 as te,r as j,n as le,c4 as oe}from"./index-CJB5jCfL.js";import{s as se,i as A}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{J as ue,x as re,E as ie,A as N,a as ne,a6 as ve,d as ce,L as de,c as C,F as fe}from"./vue-data-ui-8Gmf-dDN.js";import{T as me,j as ge}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{i as ye}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{o as be}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import"./alert-I_0TAljB.js";const T={style:{background:"#1A1A1A",title:{color:"#CCCCCC"},dataLabel:{color:"#CCCCCC"},gutter:{color:"#3A3A3A"}}},V={style:{background:"#FFF8E1",title:{color:"#424242"},dataLabel:{color:"#424242"},colors:{min:"#F57C00",max:"#D32F2F"},gutter:{color:"#5D403740"}}},I={style:{background:"#1E1E1E",title:{color:"#BDBDBD"},dataLabel:{color:"#BDBDBD"},colors:{min:"#F57C00",max:"#D32F2F"},gutter:{color:"#5D403740"}}},P={style:{background:"#1A1A1A",title:{color:"#66CC66"},dataLabel:{color:"#AACCAA"},colors:{min:"#334C33",max:"#33CC33"},track:{color:"#33CC33"},gutter:{color:"#333333"}}},J={style:{background:"#fbfafa",title:{color:"#8A9892"},dataLabel:{color:"#A0AC94"},colors:{min:"#C09E85",max:"#B9B99D"},track:{color:"#B9B99D"},gutter:{color:"#f5f0eb"}}},G={style:{background:"#f6f6fb",title:{color:"#50606C"},dataLabel:{color:"#61747E"},colors:{min:"#92B0AB",max:"#4A6A75"},track:{color:"#4A6A75"},gutter:{color:"#e1e5e8"}}},R={default:{},dark:T,celebration:V,celebrationNight:I,hack:P,zen:J,concrete:G},je=Object.freeze(Object.defineProperty({__proto__:null,celebration:V,celebrationNight:I,concrete:G,dark:T,default:R,hack:P,zen:J},Symbol.toStringTag,{value:"Module"})),pe=["xmlns","viewBox"],he=["width","height"],ke=["id"],Ae=["stop-color"],Ce=["stop-color"],xe=["d","stroke","stroke-linecap"],we=["d","stroke","stroke-linecap","stroke-dashoffset"],Le=["x","y","width","height"],$e=["x","y","font-size","fill","font-weight"],_e={key:2,ref:"source",dir:"auto"},ze={__name:"vue-ui-sparkgauge",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(q){var D;const U=te(()=>oe(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([0,1,2]),import.meta.url)),{vue_ui_sparkgauge:Y}=se(),{isThemeValid:H,warnInvalidTheme:K}=ye(),v=q,x=h(ue()),e=h(p()),{loading:b,FINAL_DATASET:c}=me({...Z(v),FINAL_CONFIG:e,prepareConfig:p,skeletonDataset:{value:0,min:-1,max:1,title:""},skeletonConfig:re({defaultConfig:e.value,userConfig:{style:{animation:{show:!1},background:"#99999930",colors:{min:"#CACACA",max:"#6A6A6A"},track:{autoColor:!0},gutter:{color:"#6A6A6A80"}}}})}),{svgRef:X}=be({config:{text:((D=v.dataset)==null?void 0:D.title)||""}});function p(){const a=A({userConfig:v.config,defaultConfig:Y}),o=a.theme;if(!o)return a;if(!H.value(a))return K(a),a;const d=A({userConfig:R[o]||v.config,defaultConfig:a});return A({userConfig:v.config,defaultConfig:d})}M(()=>{L()});const w=u(()=>e.value.debug);function L(){ie(v.dataset)?N({componentName:"VueUiSparkgauge",type:"dataset",debug:w.value}):ne({datasetObject:v.dataset,requiredAttributes:["value","min","max"]}).forEach(a=>{N({componentName:"VueUiSparkgauge",type:"datasetAttribute",property:a,debug:w.value})})}O(()=>v.config,a=>{e.value=p(),t.value=e.value.style.animation.show?s.value.min:c.value.value,L()},{deep:!0});const l=u(()=>({height:e.value.style.height,width:128,base:e.value.style.basePosition})),s=u(()=>{var F,E;const a=(F=c.value.min)!=null?F:0,o=(E=c.value.max)!=null?E:0,d=o-a;return{min:a,max:o,diff:d}}),t=h(e.value.style.animation.show?s.value.min:c.value.value);O(()=>c.value.value,()=>{_(c.value.value||0)});const Q=u(()=>t.value>s.value.max?s.value.max:t.value<s.value.min?s.value.min:t.value),$=u(()=>s.value.diff/e.value.style.animation.speedMs);M(()=>{_(c.value.value||0)});function _(a){function o(){t.value<a?t.value=Math.min(t.value+$.value,a):t.value>a&&(t.value=Math.max(t.value-$.value,a)),t.value!==a&&requestAnimationFrame(o)}o()}const g=u(()=>{var a;return(a=c.value.title)!=null?a:""}),z=u(()=>{const a=s.value.diff;if(!isFinite(a)||a===0)return 0;const o=s.value.min,d=Q.value;return d>=0?(d-o)/a:(Math.abs(o)-Math.abs(d))/a}),B=u(()=>ve(e.value.style.colors.min,e.value.style.colors.max,s.value.min,s.value.max,t.value)),S=u(()=>e.value.style.dataLabel.autoColor?B.value:e.value.style.dataLabel.color),W=u(()=>e.value.style.track.autoColor?B.value:e.value.style.track.color);return(a,o)=>(r(),n("div",{class:"vue-data-ui-component vue-ui-sparkgauge",style:y("font-family:".concat(e.value.style.fontFamily,";width: 100%; background:").concat(e.value.style.background))},[e.value.style.title.show&&g.value&&e.value.style.title.position==="top"?(r(),n("div",{key:0,class:"vue-data-ui-sparkgauge-label",style:y("font-size:".concat(e.value.style.title.fontSize,"px;text-align:").concat(e.value.style.title.textAlign,";font-weight:").concat(e.value.style.title.bold?"bold":"normal",";color:").concat(e.value.style.title.color))},k(g.value),5)):f("",!0),(r(),n("svg",{ref_key:"svgRef",ref:X,xmlns:i(ce),viewBox:"0 0 ".concat(l.value.width," ").concat(l.value.height),style:"overflow: visible; background:transparent; width:100%;"},[ae(i(U)),a.$slots["chart-background"]&&!i(b)?(r(),n("foreignObject",{key:0,x:0,y:0,width:l.value.width,height:l.value.height,style:{pointerEvents:"none"}},[j(a.$slots,"chart-background")],8,he)):f("",!0),m("defs",null,[m("linearGradient",{id:"gradient_".concat(x.value),x1:"-10%",y1:"100%",x2:"110%",y2:"100%"},[m("stop",{offset:"0%","stop-color":e.value.style.colors.min},null,8,Ae),m("stop",{offset:"100%","stop-color":e.value.style.colors.max},null,8,Ce)],8,ke)]),m("path",{d:"M10 ".concat(l.value.base," A 1 1 0 1 1 118 ").concat(l.value.base),stroke:e.value.style.gutter.color,"stroke-width":8,"stroke-linecap":e.value.style.gutter.strokeLinecap,fill:"none"},null,8,xe),z.value!==0?(r(),n("path",{key:1,d:"M10 ".concat(l.value.base," A 1 1 0 1 1 118 ").concat(l.value.base),stroke:e.value.style.colors.showGradient?"url(#gradient_".concat(x.value,")"):W.value,"stroke-width":8,"stroke-linecap":e.value.style.track.strokeLinecap,fill:"none","stroke-dasharray":169.5,"stroke-dashoffset":169.5-169.5*z.value,class:le({"vue-ui-sparkgauge-track":e.value.style.animation.show}),style:y(e.value.style.animation.show?"animation: vue-ui-sparkgauge-animation ".concat(e.value.style.animation.speedMs,"ms ease-in;"):"")},null,14,we)):f("",!0),i(b)?(r(),n("rect",{key:2,x:l.value.width/2-e.value.style.dataLabel.fontSize/2,y:l.value.base+6+e.value.style.dataLabel.offsetY-e.value.style.dataLabel.fontSize,width:e.value.style.dataLabel.fontSize,height:e.value.style.dataLabel.fontSize,fill:"#6A6A6A50",rx:3},null,8,Le)):(r(),n("text",{key:3,"text-anchor":"middle",x:l.value.width/2,y:l.value.base+6+e.value.style.dataLabel.offsetY,"font-size":e.value.style.dataLabel.fontSize,fill:S.value,"font-weight":e.value.style.dataLabel.bold?"bold":"normal"},k(i(de)(e.value.style.dataLabel.formatter,i(C)(t.value),i(fe)({p:e.value.style.dataLabel.prefix,v:i(C)(t.value),s:e.value.style.dataLabel.suffix,r:e.value.style.dataLabel.rounding}),{datapoint:i(C)(t.value),color:S.value})),9,$e))],8,pe)),e.value.style.title.show&&g.value&&e.value.style.title.position==="bottom"?(r(),n("div",{key:1,class:"vue-data-ui-sparkgauge-label",style:y("font-size:".concat(e.value.style.title.fontSize,"px;text-align:").concat(e.value.style.title.textAlign,";font-weight:").concat(e.value.style.title.bold?"bold":"normal",";font-weight:").concat(e.value.style.title.bold?"bold":"normal",";color:").concat(e.value.style.title.color))},k(g.value),5)):f("",!0),a.$slots.source?(r(),n("div",_e,[j(a.$slots,"source")],512)):f("",!0),i(b)?(r(),ee(ge,{key:3})):f("",!0)],4))}},Ne=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{ze as _,Ne as a,je as v};
