
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css"])))=>i.map(i=>d[i]);
import{c0 as _e,J as k,e as b,a8 as $e,E as P,K as X,c as o,aa as q,o as a,A as d,z as H,O as S,f,l as ze,t as p,u as r,g as Fe,c1 as Se,r as Y,F as y,R as h,n as U,c4 as De}from"./index-CJB5jCfL.js";import{s as Be,J as Ee,x as Me,E as Te,A as K,a as Ie,w as g,L as Q,F as Z,d as Ne,X as N}from"./vue-data-ui-8Gmf-dDN.js";import{E as Oe,M as Re}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{s as Ve,i as O}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as We,j as je}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{k as Ge}from"./useFitSvgText-2crs6Fv5-VePRYVh3.js";import{i as Je}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{o as Pe}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import{b as Xe}from"./Shape-12_eh8zD-Cy1mu6XW.js";import"./alert-I_0TAljB.js";const ee={style:{backgroundColor:"#1A1A1A",labels:{value:{color:"#CCCCCC"},valueLabel:{color:"#CCCCCC"},timeLabel:{color:"#CCCCCC"}},selector:{stroke:"#5A5A5A"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}}}},le={style:{backgroundColor:"#FFF8E1",bars:{colors:{positive:"#D32F2F",negative:"#F57C00"}},labels:{value:{color:"#424242"},valueLabel:{color:"#424242"},timeLabel:{color:"#757575"}},selector:{stroke:"#D32F2F"},title:{color:"#424242",subtitle:{color:"#757575"}}}},te={style:{backgroundColor:"#1E1E1E",bars:{colors:{positive:"#D32F2F",negative:"#F57C00"}},labels:{value:{color:"#BDBDBD"},valueLabel:{color:"#BDBDBD"},timeLabel:{color:"#BDBDBD"}},selector:{stroke:"#D32F2F"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}}}},ae={style:{backgroundColor:"#1A1A1A",bars:{colors:{positive:"#66CC66"}},labels:{value:{color:"#AACCAA"},valueLabel:{color:"#99CC99"},timeLabel:{color:"#99AA99"}},selector:{stroke:"#00FF00"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}}}},oe={style:{backgroundColor:"#fbfafa",bars:{colors:{positive:"#B9B99D",negative:"#C09E85"}},labels:{value:{color:"#A0AC94"},valueLabel:{color:"#A0AC94"},timeLabel:{color:"#8A9892"}},selector:{stroke:"#BBC4D3"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}}}},se={style:{backgroundColor:"#f6f6fb",bars:{colors:{positive:"#4A6A75"}},labels:{value:{color:"#61747E"},valueLabel:{color:"#8A9892"},timeLabel:{color:"#50606C"}},selector:{stroke:"#404C4D"},title:{color:"#50606C",subtitle:{color:"#718890"}}}},ie={default:{},dark:ee,celebration:le,celebrationNight:te,hack:ae,zen:oe,concrete:se},_l=Object.freeze(Object.defineProperty({__proto__:null,celebration:le,celebrationNight:te,concrete:se,dark:ee,default:ie,hack:ae,zen:oe},Symbol.toStringTag,{value:"Module"})),qe={key:0},He={key:1},Ye=["xmlns","viewBox"],Ue=["width","height"],Ke=["id"],Qe=["stop-color"],Ze=["stop-color"],el=["id"],ll=["stop-color"],tl=["stop-color"],al=["id"],ol=["stop-color"],sl=["stop-color"],il=["height","width","fill","x","stroke","stroke-width","rx","stroke-dasharray"],ul={key:1},rl=["x","y","height","width","fill","stroke","stroke-width","rx"],nl={key:2},vl=["x","y","font-size","font-weight","fill"],cl=["x","y","font-size","fill"],dl=["x","y","font-size","fill"],yl=["height","width","x","onMouseover","onMouseleave","onClick"],bl={__name:"vue-ui-sparkhistogram",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectDatapoint"],setup(ue,{emit:re}){_e(t=>({v47f58673:Ce.value}));const ne=Se(()=>De(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([0,1,2]),import.meta.url)),{vue_ui_sparkhistogram:ve}=Ve(),{isThemeValid:ce,warnInvalidTheme:de}=Je(),m=ue,C=b(Ee()),R=b(null),V=b(null),D=b(null),x=b(null),_=b(null),e=b(M()),{loading:W,FINAL_DATASET:w}=We({...$e(m),FINAL_CONFIG:e,prepareConfig:M,skeletonDataset:[{value:1,intensity:.2,color:"#CACACA"},{value:2,intensity:.3,color:"#CACACA"},{value:3,intensity:.5,color:"#CACACA"},{value:5,intensity:.7,color:"#CACACA"},{value:8,intensity:.9,color:"#CACACA"},{value:13,intensity:.95,color:"#CACACA"},{value:21,intensity:1,color:"#CACACA"},{value:13,intensity:.95,color:"#CACACA"},{value:8,intensity:.9,color:"#CACACA"},{value:5,intensity:.7,color:"#CACACA"},{value:3,intensity:.5,color:"#CACACA"},{value:2,intensity:.3,color:"#CACACA"},{value:1,intensity:.2,color:"#CACACA"}],skeletonConfig:Me({defaultConfig:e.value,userConfig:{style:{animation:{show:!1},backgroundColor:"#99999930"}}})}),B=b(e.value.style.layout.width),E=b(e.value.style.layout.height),{svgRef:j}=Pe({config:e.value.style.title});function M(){const t=O({userConfig:m.config,defaultConfig:ve}),s=t.theme;if(!s)return t;if(!ce.value(t))return de(t),t;const l=O({userConfig:ie[s]||m.config,defaultConfig:t});return O({userConfig:m.config,defaultConfig:l})}P(()=>{J()});const G=k(()=>!!e.value.debug);function J(){if(Te(m.dataset)?K({componentName:"VueUiSparkHistogram",type:"dataset",debug:G.value}):m.dataset.forEach((t,s)=>{Ie({datasetObject:t,requiredAttributes:["value"]}).forEach(l=>{K({componentName:"VueUiSparkHistogram",type:"datasetSerieAttribute",property:l,index:s,debug:G.value})})}),e.value.responsive){const t=Oe(()=>{const{width:s,height:l}=Re({chart:D.value,title:e.value.style.title.text?V.value:null,source:R.value}),i=e.value.style.labels.timeLabel.show?e.value.style.labels.timeLabel.fontSize*2:0,c=e.value.style.labels.valueLabel.show?e.value.style.labels.valueLabel.fontSize*2:0;requestAnimationFrame(()=>{B.value=Math.max(10,s),E.value=Math.max(10,l-12-i-c)})});x.value&&(_.value&&x.value.unobserve(_.value),x.value.disconnect()),x.value=new ResizeObserver(t),_.value=D.value.parentNode,x.value.observe(_.value)}}X(()=>m.config,t=>{e.value=M(),J()},{deep:!0});const v=k(()=>{const t=e.value.style.labels.timeLabel.show?e.value.style.labels.timeLabel.fontSize*2:0,s=e.value.style.labels.valueLabel.show?e.value.style.labels.valueLabel.fontSize*2:0,l=E.value+t+s,i=B.value,c=e.value.style.layout.padding.top,$=l-e.value.style.layout.padding.bottom,z=e.value.style.layout.padding.left,T=i-e.value.style.layout.padding.right,F=c+(l-c-e.value.style.layout.padding.bottom)/2,I=l-e.value.style.layout.padding.top-e.value.style.layout.padding.bottom-t-s,L=i-e.value.style.layout.padding.left-e.value.style.layout.padding.right;return{bottom:$,centerY:F,drawingHeight:I,drawingWidth:L,height:l,left:z,right:T,top:c,width:i}}),ye=k(()=>Math.max(...w.value.map(t=>Math.abs(t.value||0))));function be(t){return Math.abs(t)/ye.value}const u=k(()=>w.value.map((t,s)=>{const l=be(t.value||0),i=v.value.drawingHeight*l,c=v.value.drawingWidth/w.value.length,$=c*(e.value.style.bars.gap/100),z=c-$,T=v.value.centerY-i/2,F=v.value.left+($/2+s*c),I=v.value.left+s*c,L=typeof t.intensity>"u"?100:Math.round(t.intensity*100),ke=t.color?t.color:t.value>=0?g(e.value.style.bars.colors.positive,L):g(e.value.style.bars.colors.negative,L),xe=t.color?t.color:t.value>=0?e.value.style.bars.colors.positive:e.value.style.bars.colors.negative,we=t.color?"url(#gradient_datapoint_".concat(s,"_").concat(C.value,")"):t.value>=0?"url(#gradient_positive_".concat(s,"_").concat(C.value,")"):"url(#gradient_negative_".concat(s,"_").concat(C.value,")"),Le=F+z/2;return{...t,color:ke,gradient:we,height:i,intensity:L,proportion:l,stroke:xe,textAnchor:Le,trapX:I,unitWidth:c,width:z,x:F,y:T}}));function he(t,s){return Q(e.value.style.labels.value.formatter,t.value,Z({p:e.value.style.labels.value.prefix,v:t.value,s:e.value.style.labels.value.suffix,r:e.value.style.labels.value.rounding}),{datapoint:t,seriesIndex:s})}const n=b(null),fe=re;function pe(t,s){fe("selectDatapoint",{datapoint:t,index:s}),e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:t,seriesIndex:s})}function ge(t,s){n.value=s,e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:t,seriesIndex:s})}function me(t,s){n.value=null,e.value.events.datapointLeave&&e.value.events.datapointLeave({datapoint:t,seriesIndex:s})}const Ce=k(()=>"".concat(e.value.style.animation.speedMs,"ms")),Ae=k(()=>v.value.drawingWidth/w.value.length*.9),{fitText:A}=Ge({svgRef:j,unitWidth:Ae});return P(async()=>{await q(),A(".vue-ui-sparkhistogram-top-label",e.value.style.labels.value.minFontSize),A(".vue-ui-sparkhistogram-bottom-label",e.value.style.labels.valueLabel.minFontSize),A(".vue-ui-sparkhistogram-time-label",e.value.style.labels.timeLabel.minFontSize)}),X([B,E,()=>w.value],async()=>{await q(),A(".vue-ui-sparkhistogram-top-label",e.value.style.labels.value.minFontSize),A(".vue-ui-sparkhistogram-bottom-label",e.value.style.labels.valueLabel.minFontSize),A(".vue-ui-sparkhistogram-time-label",e.value.style.labels.timeLabel.minFontSize)}),(t,s)=>(a(),o("div",{class:"vue-data-ui-component vue-ui-spark-histogram",ref_key:"histogramChart",ref:D,style:S("width:100%;background:".concat(e.value.style.backgroundColor,";font-family:").concat(e.value.style.fontFamily)),onMouseleave:s[0]||(s[0]=l=>n.value=null)},[e.value.style.title.text?(a(),o("div",{key:0,ref_key:"chartTitle",ref:V,style:S("width:calc(100% - 12px);background:transparent;margin:0 auto;margin:".concat(e.value.style.title.margin,";padding: 0 6px;text-align:").concat(e.value.style.title.textAlign))},[f("div",{style:S("font-size:".concat(e.value.style.title.fontSize,"px;color:").concat(e.value.style.title.color,";font-weight:").concat(e.value.style.title.bold?"bold":"normal"))},[ze(p(e.value.style.title.text)+" ",1),n.value!==null?(a(),o("span",qe,"- "+p(u.value[n.value].timeLabel||"")+" "+p(r(Q)(e.value.style.labels.value.formatter,u.value[n.value].value,r(Z)({p:e.value.style.labels.value.prefix,v:u.value[n.value].value,s:e.value.style.labels.value.suffix,r:e.value.style.labels.value.rounding}),{datapoint:u.value[n.value],seriesIndex:n.value})),1)):d("",!0),![void 0,null].includes(n.value)&&![null,void 0].includes(u.value[n.value].valueLabel)?(a(),o("span",He,p(" (".concat(u.value[n.value].valueLabel||0,")")),1)):d("",!0)],4),e.value.style.title.subtitle.text?(a(),o("div",{key:0,style:S("font-size:".concat(e.value.style.title.subtitle.fontSize,"px;color:").concat(e.value.style.title.subtitle.color,";font-weight:").concat(e.value.style.title.subtitle.bold?"bold":"normal"))},p(e.value.style.title.subtitle.text),5)):d("",!0)],4)):d("",!0),(a(),o("svg",{ref_key:"svgRef",ref:j,xmlns:r(Ne),viewBox:"0 0 ".concat(v.value.width," ").concat(v.value.height),style:{overflow:"visible"}},[Fe(r(ne)),t.$slots["chart-background"]?(a(),o("foreignObject",{key:0,x:0,y:0,width:v.value.width,height:v.value.height,style:{pointerEvents:"none"}},[Y(t.$slots,"chart-background",{},void 0,!0)],8,Ue)):d("",!0),f("defs",null,[(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("radialGradient",{id:"gradient_positive_".concat(i,"_").concat(C.value),cy:"50%",cx:"50%",r:"50%",fx:"50%",fy:"50%"},[f("stop",{offset:"0%","stop-color":r(g)(r(N)(e.value.style.bars.colors.positive,.05),l.intensity)},null,8,Qe),f("stop",{offset:"100%","stop-color":r(g)(e.value.style.bars.colors.positive,l.intensity)},null,8,Ze)],8,Ke))),256)),(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("radialGradient",{id:"gradient_negative_".concat(i,"_").concat(C.value),cy:"50%",cx:"50%",r:"50%",fx:"50%",fy:"50%"},[f("stop",{offset:"0%","stop-color":r(g)(r(N)(e.value.style.bars.colors.negative,.05),l.intensity)},null,8,ll),f("stop",{offset:"100%","stop-color":r(g)(e.value.style.bars.colors.negative,l.intensity)},null,8,tl)],8,el))),256)),(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("radialGradient",{id:"gradient_datapoint_".concat(i,"_").concat(C.value),cy:"50%",cx:"50%",r:"50%",fx:"50%",fy:"50%"},[f("stop",{offset:"0%","stop-color":r(g)(r(N)(l.color,.05),l.intensity)},null,8,ol),f("stop",{offset:"100%","stop-color":r(g)(l.color,l.intensity)},null,8,sl)],8,al))),256))]),(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("g",null,[n.value!==null&&n.value===i?(a(),o("rect",{key:0,height:v.value.height,width:l.unitWidth,fill:e.value.style.selector.fill,x:l.trapX,y:0,stroke:e.value.style.selector.stroke,"stroke-width":e.value.style.selector.strokeWidth,rx:e.value.style.selector.borderRadius,"stroke-dasharray":e.value.style.selector.strokeDasharray},null,8,il)):d("",!0)]))),256)),!e.value.style.bars.shape||e.value.style.bars.shape==="square"?(a(),o("g",ul,[(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("rect",{x:l.x,y:l.y,height:l.height,width:l.width,fill:e.value.style.bars.colors.gradient.show?l.gradient:l.color,stroke:l.stroke,"stroke-width":e.value.style.bars.strokeWidth,rx:"".concat(e.value.style.bars.borderRadius*l.proportion/12,"%"),class:U({"vue-ui-sparkhistogram-shape":e.value.style.animation.show})},null,10,rl))),256))])):(a(),o("g",nl,[(a(!0),o(y,null,h(u.value,(l,i)=>(a(),H(Xe,{plot:{x:l.x+l.width/2,y:l.y+l.height/2},color:e.value.style.bars.colors.gradient.show?l.gradient:l.color,shape:e.value.style.bars.shape,radius:Math.min(l.height*.4,l.width*.4),class:U({"vue-ui-sparkhistogram-shape":e.value.style.animation.show})},null,8,["plot","color","shape","radius","class"]))),256))])),r(W)?d("",!0):(a(),o(y,{key:3},[(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("g",null,[e.value.style.labels.value.show?(a(),o("text",{key:0,class:"vue-ui-sparkhistogram-top-label","text-anchor":"middle",x:l.textAnchor,y:l.y-e.value.style.labels.value.fontSize/3+e.value.style.labels.value.offsetY,"font-size":e.value.style.labels.value.fontSize,"font-weight":e.value.style.labels.value.bold?"bold":"normal",fill:e.value.style.labels.value.color},p(he(l,i)),9,vl)):d("",!0)]))),256)),(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("g",null,[l.valueLabel&&e.value.style.labels.valueLabel.show?(a(),o("text",{key:0,class:"vue-ui-sparkhistogram-bottom-label",x:l.textAnchor,y:l.y+l.height+e.value.style.labels.valueLabel.fontSize,"font-size":e.value.style.labels.valueLabel.fontSize,"text-anchor":"middle",fill:e.value.style.labels.valueLabel.color},p(l.valueLabel),9,cl)):d("",!0)]))),256)),(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("g",null,[l.timeLabel&&e.value.style.labels.timeLabel.show?(a(),o("text",{key:0,class:"vue-ui-sparkhistogram-time-label",x:l.textAnchor,y:v.value.height,"font-size":e.value.style.labels.timeLabel.fontSize,fill:e.value.style.labels.timeLabel.color,"text-anchor":"middle"},p(l.timeLabel),9,dl)):d("",!0)]))),256))],64)),(a(!0),o(y,null,h(u.value,(l,i)=>(a(),o("g",null,[f("rect",{height:v.value.height,width:l.unitWidth,fill:"transparent",x:l.trapX,y:0,onMouseover:c=>ge(l,i),onMouseleave:c=>me(l,i),onClick:()=>pe(l,i)},null,40,yl)]))),256))],8,Ye)),t.$slots.source?(a(),o("div",{key:1,ref_key:"source",ref:R,dir:"auto"},[Y(t.$slots,"source",{},void 0,!0)],512)):d("",!0),r(W)?(a(),H(je,{key:2})):d("",!0)],36))}},hl=Be(bl,[["__scopeId","data-v-3b5d52bb"]]),$l=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"}));export{_l as a,$l as b,hl as v};
