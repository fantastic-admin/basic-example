
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-D0pGX8qz-BS2YwyOE.js","./vue-data-ui-8Gmf-dDN.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js","./useNestedProp-DaR1dBmj-yWXLkJlG.js","./DataTable-BfEbVwm4-B-GxLkq-.js","./Shape-12_eh8zD-Cy1mu6XW.js","./PenAndPaper--ADXtx65-ugytqLuo.js","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"])))=>i.map(i=>d[i]);
import{ac as El,J as y,e as b,E as ua,a8 as Ol,K as _e,av as ca,aw as mt,au as va,aa as Pl,c1 as ee,c as n,o as r,z as te,A as g,r as A,f as ae,g as Fe,h as $,j,k as q,u as m,c3 as ft,O as ue,n as ye,F as k,R as z,m as Ie,t as U,bq as Rl,l as da,N as Vl,c4 as le}from"./index-CJB5jCfL.js";import{s as Bl,i as pt}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{s as Ul,J as ha,x as Hl,v as jl,o as Je,N as ge,$ as ql,E as ba,A as ya,a as Yl,u as Jl,an as Te,ao as ga,h as ma,k as Wl,d as Gl,b as Xl,al as ce,m as fa,L as me,F as oe,Y as Kl,C as Ql,g as pa,e as Zl,f as eo,p as to}from"./vue-data-ui-8Gmf-dDN.js";import{E as xt,M as ao}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{m as lo}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{T as oo,j as ro}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{C as xa,_ as so,L as io}from"./useTimeLabels-DKoynYae-DbX6bBBl.js";import{O as no}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as uo}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as co}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as vo}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import{S as ho}from"./useTimeLabelCollider-CIsgDrl9-BAa7N0ra.js";import bo from"./img-CqYIrJ8I-E54QgU9o.js";import yo from"./Title-D0nD-PMs-DAiwElB_.js";import{b as go}from"./Shape-12_eh8zD-Cy1mu6XW.js";import mo from"./Legend-D2xmnFPH-CItLelVI.js";import{u as fo}from"./SlicerPreview-BF9QuD7E-Bsfug1YR.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";const ka={table:{th:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},td:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}},style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",title:{color:"#CCCCCC",subtitle:{color:"#757575"}},legend:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},zoom:{color:"#4A4A4A",highlightColor:"#9A9A9A",minimap:{selectedColor:"#8A8A8A",lineColor:"#424242",indicatorColor:"#CCCCCC"}},highlighter:{color:"#CCCCCC"},tooltip:{backgroundColor:"#1A1A1A",backgroundOpacity:70,color:"#CCCCCC",borderColor:"#5A5A5A"},bars:{totalValues:{color:"#CCCCCC"}},grid:{frame:{stroke:"#5A5A5A"},x:{axisColor:"#5A5A5A",linesColor:"#4A4A4A",axisName:{color:"#CCCCCC"},timeLabels:{color:"#CCCCCC"}},y:{axisColor:"#5A5A5A",linesColor:"#4A4A4A",axisName:{color:"#CCCCCC"},axisLabels:{color:"#CCCCCC"}}}}}},Ca={table:{th:{backgroundColor:"#FFF8E1",color:"#424242"},td:{backgroundColor:"#FFF8E1",color:"#424242"}},style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",title:{color:"#424242",subtitle:{color:"#757575"}},legend:{backgroundColor:"#FFF8E1",color:"#424242"},zoom:{color:"#5D4037",highlightColor:"#FF8A65"},highlighter:{color:"#424242"},tooltip:{backgroundColor:"#FFECB3",backgroundOpacity:30,color:"#424242",borderColor:"#FF8A65"},bars:{totalValues:{color:"#424242"}},grid:{x:{axisColor:"#5D403780",axisName:{color:"#424242"},timeLabels:{color:"#424242"}},y:{axisColor:"#5D403780",axisName:{color:"#424242"},axisLabels:{color:"#424242"}}}}}},wa={table:{th:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},td:{backgroundColor:"#1E1E1E",color:"#BDBDBD"}},style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}},legend:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},zoom:{color:"#5D4037",highlightColor:"#FF8A65"},highlighter:{color:"#FFF8E1"},tooltip:{backgroundColor:"#1E1E1E",backgroundOpacity:30,color:"#FFF8E1",borderColor:"#FF8A65"},bars:{totalValues:{color:"#BDBDBD"}},grid:{x:{axisColor:"#5D403740",axisName:{color:"#BDBDBD"},timeLabels:{color:"#BDBDBD"}},y:{axisColor:"#5D4037",axisName:{color:"#BDBDBD"},axisLabels:{color:"#BDBDBD"}}}}}},La={table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}},style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",title:{color:"#66CC66",subtitle:{color:"#99AA99"}},legend:{backgroundColor:"#1A1A1A",color:"#99AA99"},zoom:{color:"#5F6A5F",highlightColor:"#66CC66"},highlighter:{color:"#66CC66"},tooltip:{backgroundColor:"#2A2F2A",color:"#AACCAA",borderColor:"#66CC66"},bars:{totalValues:{color:"#99AA99"}},grid:{x:{axisColor:"#5F6A5F",axisName:{color:"#66CC66"},timeLabels:{color:"#99AA99"}},y:{axisColor:"#5F6A5F",axisName:{color:"#66CC66"},axisLabels:{color:"#99AA99"}}}}}},Aa={table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}},style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",title:{color:"#8A9892",subtitle:{color:"#99AA99"}},legend:{backgroundColor:"#fbfafa",color:"#99AA99"},zoom:{color:"#E0CFC3",highlightColor:"#8F837A"},highlighter:{color:"#8F837A"},tooltip:{backgroundColor:"#fbfafa",color:"#8A9892"},bars:{borderRadius:4,totalValues:{show:!1},dataLabels:{show:!1}},grid:{x:{showAxis:!1,axisName:{color:"#8F837A"},timeLabels:{show:!1}},y:{showAxis:!1,axisName:{color:"#8F837A"},axisLabels:{show:!1}}}}}},za={table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}},style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",title:{color:"#50606C",subtitle:{color:"#718890"}},legend:{backgroundColor:"#f6f6fb",color:"#61747E"},zoom:{color:"#92B0AB",highlightColor:"#50606C"},highlighter:{color:"#7DA9B5"},tooltip:{backgroundColor:"#f6f6fb",color:"#50606C"},bars:{totalValues:{color:"#50606C"}},grid:{x:{showHorizontalLines:!0,axisColor:"#829C98",axisName:{color:"#50606C"},timeLabels:{color:"#61747E"}},y:{showVerticalLines:!0,axisColor:"#829C98",axisName:{color:"#50606C"},axisLabels:{color:"#61747E"}}}}}},$a={default:{},dark:ka,celebration:Ca,celebrationNight:wa,hack:La,zen:Aa,concrete:za},Nr=Object.freeze(Object.defineProperty({__proto__:null,celebration:Ca,celebrationNight:wa,concrete:za,dark:ka,default:$a,hack:La,zen:Aa},Symbol.toStringTag,{value:"Module"})),po=["id"],xo=["id"],ko=["xmlns","viewBox"],Co=["x","y","width","height"],wo={key:1},Lo=["id"],Ao=["stop-color"],zo=["stop-color"],$o=["stop-color"],So=["x","y","width","height","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-dasharray"],Mo=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],_o=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],Fo=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],Io=["x1","x2","y1","y2","stroke","stroke-width","stroke-dasharray"],To={key:0},Do=["x","y","height","rx","width","fill","stroke","stroke-width"],No={key:0},Eo=["x","y","height","rx","width","fill","stroke","stroke-width"],Oo=["x","y","width","rx","height","fill","stroke","stroke-width"],Po={key:0},Ro=["x","y","width","rx","height","fill","stroke","stroke-width"],Vo=["x1","x2","y1","y2","stroke","stroke-width"],Bo=["x1","x2","y1","y2","stroke","stroke-width"],Uo=["x","y","font-size","fill","font-weight"],Ho=["transform","font-size","fill","font-weight"],jo=["x","y","font-size","fill","font-weight"],qo=["x","y","font-size","font-weight","fill"],Yo=["x","y","font-size","fill","font-weight"],Jo=["x","y","font-size","font-weight","fill"],Wo=["x1","x2","y1","y2","stroke"],Go=["x","y","font-size","font-weight","fill"],Xo=["x1","x2","y1","y2","stroke"],Ko=["font-size","font-weight","fill","text-anchor","transform"],Qo={key:0},Zo={key:1},er=["text-anchor","font-size","font-weight","fill","transform","onClick"],tr=["text-anchor","font-size","fill","transform","innerHTML","onClick"],ar={key:0},lr={key:1},or=["font-size","font-weight","fill","x","y","onClick"],rr=["font-size","font-weight","fill","x","y","onClick","innerHTML"],sr=["x","y","width","height","onClick","onMouseenter","onMouseleave","fill"],ir=["x","y","width","height","onClick","onMouseenter","onMouseleave","fill"],nr=["data-start","data-end"],ur={key:3,class:"vue-data-ui-watermark"},cr=["x","y","height","width","fill","stroke"],vr=["id"],dr=["onClick"],hr=["innerHTML"],br={__name:"vue-ui-stackbar",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}},selectedXIndex:{type:Number,default:void 0}},emits:["selectDatapoint","selectLegend","selectTimeLabel","selectX"],setup(We,{expose:Sa,emit:Ma}){const _a=ee(()=>le(()=>import("./Tooltip-D0pGX8qz-BS2YwyOE.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),Fa=ee(()=>le(()=>import("./vue-data-ui-8Gmf-dDN.js").then(t=>t.aA),__vite__mapDeps([1,2,3,4,5]),import.meta.url)),Ia=ee(()=>le(()=>import("./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js"),__vite__mapDeps([6,2,3,1,4,5,7]),import.meta.url)),Ta=ee(()=>le(()=>import("./DataTable-BfEbVwm4-B-GxLkq-.js"),__vite__mapDeps([8,2,3,9,1,4,5]),import.meta.url)),Da=ee(()=>le(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([10,2,3,1,4,5,11,12]),import.meta.url)),Na=ee(()=>le(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([13,2,3,12,1,4,5,14,15]),import.meta.url)),Ea=ee(()=>le(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([16,2,3]),import.meta.url)),Oa=ee(()=>le(()=>import("./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"),__vite__mapDeps([17,2,3,1,4,5]),import.meta.url)),{vue_ui_stackbar:Pa}=Bl(),{isThemeValid:Ra,warnInvalidTheme:Va}=uo(),Ba=El(),C=We,fe=Ma,pe=y({get(){return!!C.dataset&&C.dataset.length},set(t){return t}}),X=b(null),H=b(ha()),Ge=b(!1),Xe=b(null),Ke=b(""),N=b([]),kt=b(0),Ct=b(null),wt=b(null),xe=b(null),Lt=b(null),ke=b(!1),G=b(null),re=b(!1),At=b(0),Ua=b(0),Ha=b(0),zt=b(!1),Ce=b(null),Qe=b(null),Ze=b(null),et=b(null),se=b(null),ie=b(null),ja=b(null),tt=b(null),at=b(null);ua(()=>{zt.value=!0,nt()});const e=b(st()),{loading:we,FINAL_DATASET:lt,manualLoading:De}=oo({...Ol(C),FINAL_CONFIG:e,prepareConfig:st,callback:()=>{Promise.resolve().then(async()=>{await He()})},skeletonDataset:[{name:"",series:[2,3,5,8,13,21],color:"#BABABA"},{name:"",series:[1,2,3,5,8,13],color:"#CACACA"}],skeletonConfig:Hl({defaultConfig:e.value,userConfig:{userOptions:{show:!1},useCssAnimation:!1,table:{show:!1},tooltip:{show:!1},style:{chart:{backgroundColor:"#99999930",bars:{totalValues:{show:!1},dataLabels:{show:!1}},grid:{frame:{stroke:"#6A6A6A"},scale:{scaleMin:0,scaleMax:40},x:{axisColor:"#6A6A6A",linesColor:"#6A6A6A",axisName:{show:!1},timeLabels:{show:!1}},y:{axisColor:"#6A6A6A",linesColor:"#6A6A6A",axisName:{show:!1},axisLabels:{show:!1}}},legend:{backgroundColor:"transparent"},padding:{left:24,right:24,bottom:12},zoom:{show:!1,startIndex:null,endIndex:null}}}}})}),{userOptionsVisible:ot,setUserOptionsVisibility:$t,keepUserOptionState:St}=co({config:e.value}),{svgRef:rt}=vo({config:e.value.style.chart.title});function qa(){$t(!0)}function Ya(){$t(!1),fe("selectX",{seriesIndex:null,datapoint:null}),G.value=null}function st(){const t=pt({userConfig:C.config,defaultConfig:Pa});let l={};const a=t.theme;if(a)if(!Ra.value(t))Va(t),l=t;else{const o=pt({userConfig:$a[a]||C.config,defaultConfig:t});l={...pt({userConfig:C.config,defaultConfig:o}),customPalette:t.customPalette.length?t.customPalette:jl[a]||Je}}else l=t;return C.config&&ge(C.config,"style.chart.grid.scale.scaleMin")?l.style.chart.grid.scale.scaleMin=C.config.style.chart.grid.scale.scaleMin:l.style.chart.grid.scale.scaleMin=null,C.config&&ge(C.config,"style.chart.grid.scale.scaleMax")?l.style.chart.grid.scale.scaleMax=C.config.style.chart.grid.scale.scaleMax:l.style.chart.grid.scale.scaleMax=null,C.config&&ge(C.config,"style.chart.zoom.startIndex")?l.style.chart.zoom.startIndex=C.config.style.chart.zoom.startIndex:l.style.chart.zoom.startIndex=null,C.config&&ge(C.config,"style.chart.zoom.endIndex")?l.style.chart.zoom.endIndex=C.config.style.chart.zoom.endIndex:l.style.chart.zoom.endIndex=null,C.config&&ge(C.config,"style.chart.bars.dataLabels.hideUnderValue")?l.style.chart.bars.dataLabels.hideUnderValue=C.config.style.chart.bars.dataLabels.hideUnderValue:l.style.chart.bars.dataLabels.hideUnderValue=null,C.config&&ge(C.config,"style.chart.bars.dataLabels.hideUnderPercentage")?l.style.chart.bars.dataLabels.hideUnderPercentage=C.config.style.chart.bars.dataLabels.hideUnderPercentage:l.style.chart.bars.dataLabels.hideUnderPercentage=null,l}const Mt=y(()=>e.value.style.chart.bars.dataLabels.hideUnderValue!==null),_t=y(()=>e.value.style.chart.bars.dataLabels.hideUnderPercentage!==null);_e(()=>C.config,t=>{we.value||(e.value=st()),ot.value=!e.value.userOptions.showOnChartHover,nt(),At.value+=1,Ua.value+=1,Ha.value+=1,T.value.dataLabels.show=e.value.style.chart.bars.dataLabels.show,T.value.showTable=e.value.table.show,T.value.showTooltip=e.value.style.chart.tooltip.show,Oe()},{deep:!0}),_e(()=>C.dataset,t=>{Array.isArray(t)&&t.length>0&&(De.value=!1),Rt()},{deep:!0});const T=b({dataLabels:{show:e.value.style.chart.bars.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show});_e(e,()=>{T.value={dataLabels:{show:e.value.style.chart.bars.dataLabels.show},showTable:e.value.table.show,showTooltip:e.value.style.chart.tooltip.show}},{immediate:!0});const{isPrinting:Ft,isImaging:It,generatePdf:Tt,generateImage:Dt}=lo({elementId:"stackbar_".concat(H.value),fileName:e.value.style.chart.title.text||"vue-ui-stackbar",options:e.value.userOptions.print}),ve=b({width:e.value.style.chart.width,height:e.value.style.chart.height,paddingRatio:{top:e.value.style.chart.padding.top/e.value.style.chart.height,right:e.value.style.chart.padding.right/e.value.style.chart.width,bottom:e.value.style.chart.padding.bottom/e.value.style.chart.height,left:e.value.style.chart.padding.left/e.value.style.chart.width}}),Ja=y(()=>ql(e.value.customPalette)),Q=ca(null),de=ca(null),Nt=b(null);ua(()=>{nt()});const it=y(()=>!!e.value.debug);function nt(){if(ba(C.dataset)?(ya({componentName:"VueUiStackbar",type:"dataset",debug:it.value}),De.value=!0):C.dataset.forEach((t,l)=>{Yl({datasetObject:t,requiredAttributes:["name","series"]}).forEach(a=>{pe.value=!1,ya({componentName:"VueUiStackbar",type:"datasetSerieAttribute",property:a,index:l,debug:it.value}),De.value=!0})}),ba(C.dataset)||(De.value=e.value.loading),setTimeout(()=>{re.value=!0},10),e.value.responsive){const t=xt(()=>{re.value=!1;const{width:l,height:a}=ao({chart:X.value,title:e.value.style.chart.title.text?Ct.value:null,legend:e.value.style.chart.legend.show?wt.value:null,slicer:e.value.style.chart.zoom.show&&E.value>6?xe.value.$el:null,source:Lt.value});requestAnimationFrame(()=>{ve.value.width=l,ve.value.height=a-12,clearTimeout(Nt.value),Nt.value=setTimeout(()=>{re.value=!0},10)})});Q.value&&(de.value&&Q.value.unobserve(de.value),Q.value.disconnect()),Q.value=new ResizeObserver(t),de.value=X.value.parentNode,Q.value.observe(de.value)}He()}mt(()=>{Q.value&&(de.value&&Q.value.unobserve(de.value),Q.value.disconnect())});function Wa(){let t=0;e.value.orientation==="vertical"&&se.value&&(t=Array.from(se.value.querySelectorAll("text")).reduce((a,o)=>{const c=o.getComputedTextLength();return c>a?c:a},0)),e.value.orientation==="horizontal"&&ie.value&&(t=Array.from(ie.value.querySelectorAll("text")).reduce((a,o)=>{const c=o.getComputedTextLength();return c>a?c:a},0));const l=et.value?et.value.getBoundingClientRect().width:0;return t+l+(l?24:0)}const Ne=b(0),Ee=b(0),Ga=xt(t=>{Ne.value=t},100);va(t=>{const l=e.value.orientation==="vertical"?ie.value:se.value;if(!l)return;const a=new ResizeObserver(o=>{Ga(o[0].contentRect.height)});a.observe(l),t(()=>a.disconnect())});const Xa=xt(t=>{Ee.value=t+e.value.style.chart.bars.totalValues.fontSize},100);function Ka(){var o,c;if(e.value.orientation!=="horizontal")return 0;const t=tt.value;if(!t)return 0;const l=Array.from(t.querySelectorAll("text"));if(!l.length)return 0;let a=-1/0;for(const s of l)try{const x=s.getBBox(),f=x.x+x.width;f>a&&(a=f)}catch(x){}return Math.max(0,a-((c=(o=u.value)==null?void 0:o.right)!=null?c:0))}va(t=>{if(e.value.orientation!=="horizontal")return;const l=tt.value;if(!l)return;const a=()=>{const s=Ka();Xa(s)};a();const o=new ResizeObserver(a);o.observe(l);const c=new MutationObserver(a);c.observe(l,{childList:!0,subtree:!0,characterData:!0}),t(()=>{o.disconnect(),c.disconnect()})}),mt(()=>{Ne.value=0,Ee.value=0});const Et=y(()=>{let t=0;Ze.value&&(t=Ze.value.getBBox().height);let l=0;return e.value.orientation==="vertical"&&ie.value&&(l=Ne.value),e.value.orientation==="horizontal"&&se.value&&(l=Ne.value),t+l}),u=y(()=>{const{height:t,width:l}=ve.value,{right:a}=ve.value.paddingRatio;let o=e.value.style.chart.bars.totalValues.show&&C.dataset&&C.dataset.length>1?e.value.style.chart.bars.totalValues.fontSize*1.3:0,c=0;e.value.style.chart.grid.y.axisLabels.show&&(c=Wa());const s=e.value.style.chart.padding.top+o,x=l-l*a-Ee.value,f=t-e.value.style.chart.padding.bottom-Et.value-o,L=e.value.style.chart.padding.left+c,w=l-L-l*a-Ee.value,_=t-s-e.value.style.chart.padding.bottom-Et.value-o;return{chartHeight:t,chartWidth:l,top:s,right:x,bottom:f,left:L,width:Math.max(0,w),height:Math.max(0,_)}}),Qa=y(()=>{var D,F;const{left:t,top:l,width:a,height:o}=u.value,c=v.value.start,s=v.value.end,x=Math.max(1,s-c),f=Math.max(0,Math.min(x,((D=B.value.start)!=null?D:c)-c)),L=Math.max(0,Math.min(x,((F=B.value.end)!=null?F:s)-c)),w=Math.max(0,L-f),_={fill:e.value.style.chart.zoom.preview.fill,stroke:e.value.style.chart.zoom.preview.stroke,"stroke-width":e.value.style.chart.zoom.preview.strokeWidth,"stroke-dasharray":e.value.style.chart.zoom.preview.strokeDasharray,"stroke-linecap":"round","stroke-linejoin":"round",style:{pointerEvents:"none",transition:"none !important",animation:"none !important"}};if(e.value.orientation==="horizontal"){const O=o/x;return{x:t,y:l+f*O,width:a,height:w*O,..._}}else{const O=a/x;return{x:t+f*O,y:l,width:w*O,height:o,..._}}}),Y=y(()=>lt.value.map((t,l)=>{const a=Jl(t.color)||Ja.value[l]||Je[l]||Je[l%Je.length];return{...t,series:JSON.parse(JSON.stringify(t.series)).map(o=>e.value.style.chart.bars.distributed?Math.abs(o):o),signedSeries:t.series.map(o=>o>=0?1:-1),absoluteIndex:l,id:ha(),color:a}})),E=y(()=>Math.max(...Y.value.filter(t=>!N.value.includes(t.id)).map(t=>t.series.length)));function Za(t){at.value=t}const v=b({start:0,end:Math.max(...lt.value.map(t=>t.series.length))}),B=b({start:0,end:Math.max(...lt.value.map(t=>t.series.length))}),Ot=y(()=>e.value.style.chart.zoom.preview.enable&&(B.value.start!==v.value.start||B.value.end!==v.value.end));function Pt(t,l){B.value[t]=l}function Oe(){var o,c;const t=E.value;let l=Math.max(0,Math.min((o=v.value.start)!=null?o:0,t-1)),a=Math.max(l+1,Math.min((c=v.value.end)!=null?c:t,t));(!Number.isFinite(l)||!Number.isFinite(a)||a<=l)&&(l=0,a=t),v.value.start=l,v.value.end=a,B.value.start=l,B.value.end=a,xe.value&&(xe.value.setStartValue(l),xe.value.setEndValue(a))}const Le=b(null);function el(){return new Promise(t=>requestAnimationFrame(()=>requestAnimationFrame(()=>t())))}mt(()=>{Le.value&&cancelAnimationFrame(Le.value)});async function Rt(){He(),await Pl(),Le.value&&cancelAnimationFrame(Le.value),Le.value=requestAnimationFrame(async()=>{await el(),He()})}const p=y(()=>{let t;return e.value.orientation==="vertical"?t=u.value.width/(v.value.end-v.value.start):t=u.value.height/(v.value.end-v.value.start),t<=0?0:t}),Ae=y(()=>Te(Y.value.filter(t=>!N.value.includes(t.id))).slice(v.value.start,v.value.end)),ne=y(()=>e.value.style.chart.zoom.minimap.show?Te(Y.value.map(t=>({...t,series:t.series.map(l=>l!=null?l:0)})).filter(t=>!N.value.includes(t.id))):[]),tl=y(()=>e.value.style.chart.zoom.minimap.show?[{name:"",series:ne.value,color:"#000000",isVisible:!0}]:[]),al=y(()=>Te(Y.value.filter(t=>!N.value.includes(t.id)).map(t=>({...t,series:t.series.map((l,a)=>t.signedSeries[a]===-1&&l>=0?-l:l)}))).slice(v.value.start,v.value.end)),Pe=y(()=>{const t=Y.value.filter(l=>!N.value.includes(l.id));return{positive:Te(t.map(l=>({...l,series:l.series.slice(v.value.start,v.value.end).map(a=>a>=0?a:0)}))),negative:Te(t.map(l=>({...l,series:l.series.slice(v.value.start,v.value.end).map(a=>a<0?a:0)})))}}),J=y(()=>{const t=e.value.style.chart.grid.scale.scaleMax!==null&&!e.value.style.chart.bars.distributed?e.value.style.chart.grid.scale.scaleMax:Math.max(...Pe.value.positive),l=Math.min(...Pe.value.negative),a=e.value.style.chart.grid.scale.scaleMin!==null&&!e.value.style.chart.bars.distributed?e.value.style.chart.grid.scale.scaleMin:[-1/0,1/0,NaN,void 0,null].includes(l)?0:l,o=!e.value.style.chart.bars.distributed&&(e.value.style.chart.grid.scale.scaleMax!==null||e.value.style.chart.grid.scale.scaleMin!==null)?ga(a>0?0:a,t<0?0:t,e.value.style.chart.grid.scale.ticks):ma(a>0?0:a,t<0?0:t,e.value.style.chart.grid.scale.ticks);return o.ticks.map(c=>({zero:u.value.bottom-u.value.height*(Math.abs(o.min)/(o.max+Math.abs(o.min))),y:u.value.bottom-u.value.height*((c+Math.abs(o.min))/(o.max+Math.abs(o.min))),x:u.value.left-8,horizontal_zero:u.value.left+u.value.width*(Math.abs(o.min)/(o.max+Math.abs(o.min))),horizontal_x:u.value.left+u.value.width*((c+Math.abs(o.min))/(o.max+Math.abs(o.min))),horizontal_y:u.value.bottom-8,value:c}))}),V=y(()=>xa({values:e.value.style.chart.grid.x.timeLabels.values,maxDatapoints:E.value,formatter:e.value.style.chart.grid.x.timeLabels.datetimeFormatter,start:v.value.start,end:v.value.end})),ze=y(()=>xa({values:e.value.style.chart.grid.x.timeLabels.values,maxDatapoints:E.value,formatter:e.value.style.chart.grid.x.timeLabels.datetimeFormatter,start:0,end:E.value})),ll=y(()=>{const t=e.value.style.chart.grid.x.timeLabels.modulo;return V.value.length?Math.min(t,[...new Set(V.value.map(l=>l.text))].length):t}),Vt=y(()=>{var L;const t=e.value.style.chart.grid.x.timeLabels,l=V.value||[],a=ze.value||[],o=(L=v.value.start)!=null?L:0,c=G.value,s=E.value,x=l.map(w=>{var _;return(_=w==null?void 0:w.text)!=null?_:""}),f=a.map(w=>{var _;return(_=w==null?void 0:w.text)!=null?_:""});return Wl(!!t.showOnlyFirstAndLast,!!t.showOnlyAtModulo,Math.max(1,ll.value||1),x,f,o,c,s)}),Bt=y(()=>{const t=e.value.style.chart.grid.x.timeLabels.datetimeFormatter,l=so({useUTC:t.useUTC,locale:io[t.locale]||{months:[],shortMonths:[],days:[],shortDays:[]},januaryAsYear:t.januaryAsYear});return(a,o)=>{var s;const c=(s=e.value.style.chart.grid.x.timeLabels.values)==null?void 0:s[a];return c==null?"":(l.formatDate(new Date(c),o),l.formatDate(new Date(c),o))}}),Ut=y(()=>(e.value.style.chart.grid.x.timeLabels.values||[]).map((t,l)=>({text:Bt.value(l,e.value.style.chart.zoom.timeFormat),absoluteIndex:l}))),ut=y(()=>(e.value.style.chart.grid.x.timeLabels.values||[]).map((t,l)=>({text:Bt.value(l,e.value.style.chart.tooltip.timeFormat),absoluteIndex:l}))),S=y(()=>{if(!pe.value&&!we.value)return[];let t=Array(E.value).fill(0),l=Array(E.value).fill(0),a=Array(E.value).fill(0),o=Array(E.value).fill(0);const c=Math.max(...Pe.value.positive)||0,s=Math.min(...Pe.value.negative),x=[-1/0,1/0,NaN,void 0,null].includes(s)?0:s,f=!e.value.style.chart.bars.distributed&&(e.value.style.chart.grid.scale.scaleMax!==null||e.value.style.chart.grid.scale.scaleMin!==null)?ga(e.value.style.chart.grid.scale.scaleMin!==null?e.value.style.chart.grid.scale.scaleMin:x>0?0:x,e.value.style.chart.grid.scale.scaleMax!==null?e.value.style.chart.grid.scale.scaleMax:c<0?0:c,e.value.style.chart.grid.scale.ticks):ma(e.value.style.chart.grid.scale.scaleMin!==null?e.value.style.chart.grid.scale.scaleMin:x>0?0:x,e.value.style.chart.grid.scale.scaleMax!==null?e.value.style.chart.grid.scale.scaleMax:c<0?0:c,e.value.style.chart.grid.scale.ticks),{min:L,max:w}=f,_=w+(L>=0?0:Math.abs(L))||1,D=u.value.height,F=u.value.width,O=J.value[0]?J.value[0].zero:u.value.bottom,he=J.value[0]?J.value[0].horizontal_zero:u.value.left;let W=Array(ne.value.length).fill(0),Me=Array(ne.value.length).fill(0);return Y.value.filter(R=>!N.value.includes(R.id)).map(R=>{const Z=R.series.slice(),sa=Z.map((d,h)=>W[h]),wl=Z.map((d,h)=>Me[h]);Z.forEach((d,h)=>{(Number(d)||0)>=0?W[h]+=Number(d)||0:Me[h]+=Math.abs(Number(d)||0)});const K=R.series.slice(v.value.start,v.value.end),Ll=R.signedSeries.slice(v.value.start,v.value.end),Al=K.map((d,h)=>u.value.left+p.value*h+p.value*e.value.style.chart.bars.gapRatio/4),qe=(ne.value||[]).filter(Number.isFinite),yt=qe.length?Math.max(...qe):0,gt=qe.length?Math.min(...qe):0;function ia({minimapH:d}){const h=yt>0,I=gt<0;if(h&&I){const M=Math.max(yt,Math.abs(gt))||1e-9;return{pxPerUnit:d/2/M,zero:d/2}}if(h){const M=Math.max(1e-9,yt);return{pxPerUnit:d/M,zero:d}}const P=Math.max(1e-9,Math.abs(gt));return{pxPerUnit:d/P,zero:0}}const zl=({left:d,unitW:h})=>{const I=h*(e.value.style.chart.bars.gapRatio/4);return Z.map((P,M)=>d+h*M+I)},$l=K.map((d,h)=>u.value.top+p.value*h+p.value*e.value.style.chart.bars.gapRatio/4),Sl=K.map((d,h)=>{const I=e.value.style.chart.bars.distributed?(d||0)/Ae.value[h]:(d||0)/_;let P,M;return d>0?(M=D*I,P=O-M-t[h],t[h]+=M):(M=D*I,P=O+a[h],a[h]+=Math.abs(M)),P}),Ml=({minimapH:d})=>{if(e.value.style.chart.bars.distributed)return Z.map((P,M)=>{var na;const be=Math.abs(Number(P)||0),Ye=Math.abs(((na=ne.value)==null?void 0:na[M])||0)||1e-9,Nl=(sa[M]+be)/Ye;return d-Nl*d});const{pxPerUnit:h,zero:I}=ia({minimapH:d});return Z.map((P,M)=>{const be=Number(P)||0;return be>=0?I-(sa[M]+be)*h:I+wl[M]*h})},_l=K.map((d,h)=>{const I=e.value.style.chart.bars.distributed?(d||0)/Ae.value[h]:(d||0)/_;let P,M;return d>0?(M=F*I,P=he+l[h],l[h]+=M):(M=F*I,P=he-Math.abs(M)-o[h],o[h]+=Math.abs(M)),P}),Fl=K.map((d,h)=>{const I=e.value.style.chart.bars.distributed?(d||0)/Ae.value[h]:(d||0)/_;return d>0?D*I:D*Math.abs(I)}),Il=({minimapH:d})=>{if(e.value.style.chart.bars.distributed)return Z.map((I,P)=>{var Ye;const M=Math.abs(Number(I)||0),be=Math.abs(((Ye=ne.value)==null?void 0:Ye[P])||0)||1e-9;return M/be*d});const{pxPerUnit:h}=ia({minimapH:d});return Z.map(I=>Math.abs(Number(I)||0)*h)},Tl=K.map((d,h)=>{const I=e.value.style.chart.bars.distributed?(d||0)/Ae.value[h]:(d||0)/_;return d>0?F*I:F*Math.abs(I)}),Dl=K.map(d=>Math.abs(d)).reduce((d,h)=>d+h,0);return{...R,proportions:K.map((d,h)=>e.value.style.chart.bars.distributed?(d||0)/Ae.value[h]:(d||0)/Dl),series:K,signedSeries:Ll,x:Al,y:Sl,height:Fl,horizontal_width:Tl,horizontal_y:$l,horizontal_x:_l,xMinimap:zl,yMinimap:Ml,heightMinimap:Il}})}),Ht=y(()=>al.value.map((t,l)=>({value:t,sign:t>=0?1:-1})));function Re(t,l,a,o,c){const s=c===-1&&t>=0?-t:t;return me(e.value.style.chart.bars.dataLabels.formatter,s,oe({p:e.value.style.chart.bars.dataLabels.prefix,v:s,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.bars.dataLabels.rounding}),{datapoint:l,seriesIndex:a,datapointIndex:o})}function jt(t,l,a,o){return me(e.value.style.chart.bars.dataLabels.formatter,t,oe({v:isNaN(t)?0:t,s:"%",r:e.value.style.chart.bars.dataLabels.rounding}),{datapoint:l,seriesIndex:a,datapointIndex:o})}function qt(t){const l=JSON.parse(JSON.stringify(S.value)).map(a=>({name:a.name,value:a.series[t]===0?0:a.series[t]||null,proportion:a.proportions[t]||null,color:a.color,id:a.id}));e.value.events.datapointClick&&e.value.events.datapointClick({datapoint:l,seriesIndex:t+v.value.start}),fe("selectDatapoint",{datapoint:l,period:V.value[t]})}function ct(t){return JSON.parse(JSON.stringify(S.value)).map(l=>({name:l.name,absoluteIndex:l.absoluteIndex,value:l.series[t]===0?0:(l.signedSeries[t]===-1&&l.series[t]>=0?-l.series[t]:l.series[t])||null,proportion:l.proportions[t]||null,color:l.color,id:l.id,timeLabel:ze.value[t]}))}function Yt(t){if(e.value.events.datapointLeave){const l=ct(t);e.value.events.datapointLeave({datapoint:l,seriesIndex:t+v.value.start})}Ge.value=null,G.value=null}const ol=y(()=>Array(E.value).fill(0).map((t,l)=>ct(l)));_e(()=>C.selectedXIndex,t=>{if([null,void 0].includes(C.selectedXIndex)){G.value=null;return}const l=t-v.value.start;l<0||t>=v.value.end?G.value=null:G.value=l!=null?l:null},{immediate:!0});function Jt(t){var s,x,f;G.value=t,Ge.value=!0;const l=e.value.style.chart.tooltip.customFormat,a=ct(t);xl({seriesIndex:t,datapoint:a}),e.value.events.datapointEnter&&e.value.events.datapointEnter({datapoint:a,seriesIndex:t+v.value.start}),Xe.value={datapoint:a,seriesIndex:t,config:e.value,series:S.value};const o=a.map(L=>Math.abs(L.value)).reduce((L,w)=>L+w,0),c=a.map(L=>ce(L.value)).reduce((L,w)=>L+w,0);if(pa(l)&&to(()=>l({seriesIndex:t,datapoint:a,series:S.value,config:e.value})))Ke.value=l({seriesIndex:t,datapoint:a,series:S.value,config:e.value});else{const{showValue:L,showTotal:w,totalTranslation:_,showPercentage:D,borderColor:F,roundingValue:O,roundingPercentage:he}=e.value.style.chart.tooltip;let W="";(V.value[t]&&V.value[t].text||ut.value[t]&&ut.value[t].text&&e.value.style.chart.tooltip.showTimeLabel)&&(W+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(F,';padding-bottom:6px;margin-bottom:3px;">').concat(e.value.style.chart.tooltip.useDefaultTimeFormat?(s=V.value[t])==null?void 0:s.text:((x=ut.value[t])==null?void 0:x.text)||((f=ze.value[t])==null?void 0:f.text)||"","</div>")),w&&(W+='<div class="vue-data-ui-tooltip-total" style="display:flex;flex-direction:row;align-items:center;gap:4px">\n                <span>'.concat(_,":</span>\n                <span>\n                    ").concat(me(e.value.style.chart.bars.dataLabels.formatter,c,oe({p:e.value.style.chart.bars.dataLabels.prefix,v:c,s:e.value.style.chart.bars.dataLabels.suffix,r:O}),{datapoint:{name:_,value:c}}),"\n                </span>\n            </div>"));const Me=[L&&D?"(":"",L&&D?")":""];a.reverse().forEach(R=>{W+='\n                <div style="display:flex;flex-direction:row;align-items:center;gap:4px">\n                    <svg viewBox="0 0 60 60" height="14" width="14"><rect rx="5" x="0" y="0" height="60" width="60" stroke="none" fill="'.concat(e.value.style.chart.bars.gradient.show?"url(#gradient_".concat(R.id,")"):R.color,'"/>').concat(Ba.pattern?'<rect rx="5" x="0" y="0" height="60" width="60" stroke="none" fill="url(#pattern_'.concat(H.value,"_").concat(R.absoluteIndex,')"/>'):"","</svg>\n                    ").concat(R.name).concat(L||D?":":""," ").concat(L?me(e.value.style.chart.bars.dataLabels.formatter,R.value,oe({p:e.value.style.chart.bars.dataLabels.prefix,v:R.value,s:e.value.style.chart.bars.dataLabels.suffix,r:O})):""," ").concat(Me[0]).concat(D?oe({v:isNaN(R.value/o)?0:Math.abs(R.value)/o*100,s:"%",r:he}):"").concat(Me[1],"\n                </div>\n            ")}),Ke.value="<div>".concat(W,"</div>")}}const rl=y(()=>ve.value.width),sl=y(()=>ve.value.height);ho({timeLabelsEls:e.value.orientation==="vertical"?ie:se,timeLabels:V,slicer:v,configRef:e,rotationPath:["style","chart","grid","x","timeLabels","rotation"],autoRotatePath:["style","chart","grid","x","timeLabels","autoRotate","enable"],isAutoSize:!1,width:rl,height:sl,rotation:e.value.style.chart.grid.x.timeLabels.autoRotate.angle});function Wt(t){ke.value=t,kt.value+=1}function Gt(){T.value.showTable=!T.value.showTable}function Xt(){T.value.dataLabels.show=!T.value.dataLabels.show}function Kt(){T.value.showTooltip=!T.value.showTooltip}function il(){return S.value}const Qt=y(()=>{if(S.value.length===0)return{head:[],body:[],config:{},columnNames:[]};const t=S.value.map(({name:a,color:o})=>({label:a,color:o})),l=[];return V.value.forEach(a=>{const o=[e.value.style.chart.grid.x.timeLabels.values[a.absoluteIndex]?a.text:i+1];Y.value.forEach(c=>{o.push(Number((c.series[a.absoluteIndex]||0).toFixed(e.value.table.td.roundingValue)))}),l.push(o)}),{head:t,body:l}});function vt(t=null){const l=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],a=["",...Qt.value.head.map(x=>x.label)],o=Qt.value.body,c=l.concat([a]).concat(o),s=Zl(c);t?t(s):eo({csvContent:s,title:e.value.style.chart.title.text||"vue-ui-stackbar"})}const Ve=y(()=>{const t=[""].concat(S.value.map(c=>c.name)).concat(' <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>');let l=[];for(let c=0;c<E.value;c+=1){const s=S.value.map(x=>{var f;return(f=x.series[c])!=null?f:0}).reduce((x,f)=>x+f,0);l.push([e.value.style.chart.grid.x.timeLabels.values.slice(v.value.start,v.value.end)[c]?V.value[c].text:c+1].concat(S.value.map(x=>{var f;return((f=x.series[c])!=null?f:0).toFixed(e.value.table.td.roundingValue)})).concat((s!=null?s:0).toFixed(e.value.table.td.roundingValue)))}const a={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},o=[e.value.table.columnNames.period].concat(S.value.map(c=>c.name)).concat(e.value.table.columnNames.total);return{head:t,body:l.slice(0,v.value.end-v.value.start),config:a,colNames:o}});function dt(t){if(N.value.includes(t.id))N.value=N.value.filter(l=>l!==t.id);else{if(N.value.length===Y.value.length-1)return;N.value.push(t.id)}fe("selectLegend",S.value)}function Zt(t){return Y.value.length?Y.value.find(a=>a.name===t)||(e.value.debug&&console.warn('VueUiStackbar - Series name not found "'.concat(t,'"')),null):(e.value.debug&&console.warn("VueUiStackbar - There are no series to show."),null)}function nl(t){const l=Zt(t);l!==null&&N.value.includes(l.id)&&dt({id:l.id})}function ul(t){const l=Zt(t);l!==null&&(N.value.includes(l.id)||dt({id:l.id}))}const ht=y(()=>Y.value.map((t,l)=>({...t,shape:"square"})).map(t=>({...t,opacity:N.value.includes(t.id)?.5:1,segregate:()=>dt(t),isSegregated:N.value.includes(t.id)}))),cl=y(()=>({cy:"stackbar-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""})),Be=b(!1);function bt(){Be.value=!Be.value}function Ue(t,l){const a=JSON.parse(JSON.stringify(S.value)).map(o=>({name:o.name,value:o.series[l]===0?0:(o.signedSeries[l]===-1&&o.series[l]>=0?-o.series[l]:o.series[l])||null,proportion:o.proportions[l]||null,color:o.color,id:o.id}));fe("selectTimeLabel",{datapoint:a,absoluteIndex:t.absoluteIndex,label:t.text})}const vl=y(()=>Math.max(...S.value.flatMap(t=>t.series)));function ea(t,l){return e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?_t.value?l*100>=e.value.style.chart.bars.dataLabels.hideUnderPercentage:e.value.style.chart.bars.dataLabels.hideEmptyPercentages?l>0:!0:_t.value?(Mt.value&&it.value&&console.warn("Vue Data UI - VueUiStackbar - You cannot set both dataLabels.hideUnderPercentage and dataLabels.hideUnderValue. Note that dataLabels.hideUnderPercentage takes precedence in this case."),t>vl.value*e.value.style.chart.bars.dataLabels.hideUnderPercentage/100):Mt.value?Math.abs(t)>=e.value.style.chart.bars.dataLabels.hideUnderValue:e.value.style.chart.bars.dataLabels.hideEmptyValues?t!==0:!0}async function dl({scale:t=2}={}){if(!X.value)return;const{width:l,height:a}=X.value.getBoundingClientRect(),o=l/a,{imageUri:c,base64:s}=await bo({domElement:X.value,base64:!0,img:!0,scale:t});return{imageUri:c,base64:s,title:e.value.style.chart.title.text,width:l,height:a,aspectRatio:o}}const $e=y(()=>{const t=e.value.table.useDialog&&!e.value.table.show,l=T.value.showTable;return{component:t?Oa:Ia,title:"".concat(e.value.style.chart.title.text).concat(e.value.style.chart.title.subtitle.text?": ".concat(e.value.style.chart.title.subtitle.text):""),props:t?{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,headerColor:e.value.table.th.color,headerBg:e.value.table.th.backgroundColor,isFullscreen:ke.value,fullscreenParent:X.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:l,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}}}});_e(()=>T.value.showTable,t=>{e.value.table.show||(t&&e.value.table.useDialog&&Ce.value?Ce.value.open():"close"in Ce.value&&Ce.value.close())});function ta(){T.value.showTable=!1,Qe.value&&Qe.value.setTableIconState(!1)}const hl=y(()=>e.value.style.chart.backgroundColor),bl=y(()=>e.value.style.chart.legend),yl=y(()=>e.value.style.chart.title),{exportSvg:gl,getSvg:ml}=no({svg:rt,title:yl,legend:bl,legendItems:ht,backgroundColor:hl});async function aa({isCb:t}){if(t){const{blob:l,url:a,text:o,dataUrl:c}=await ml();e.value.userOptions.callbacks.svg({blob:l,url:a,text:o,dataUrl:c})}else gl()}function la(t){const l=E.value;return t>l?l:t<0||t<v.value.start?e.value.style.chart.zoom.startIndex!==null?v.value.start+1:1:t}const Se=b(!1),oa=b(!1);function He(){if(!Se.value){Se.value=!0;try{const{startIndex:t,endIndex:l}=e.value.style.chart.zoom,a=E.value,o=t!=null?t:0,c=l!=null?Math.min(la(l+1),a):a;je.value=!0,v.value.start=o,v.value.end=c,B.value.start=o,B.value.end=c,Oe(),oa.value=!0}finally{queueMicrotask(()=>{je.value=!1}),Se.value=!1}}}const je=b(!1);function fl(t){Se.value||je.value||t!==v.value.start&&(v.value.start=t,B.value.start=t,Oe())}function pl(t){if(Se.value||je.value)return;const l=la(t);l!==v.value.end&&(v.value.end=l,B.value.end=l,Oe())}function xl({seriesIndex:t,datapoint:l}){const a=v.value.start+t;fe("selectX",{dataset:l,index:a,indexLabel:e.value.style.chart.grid.x.timeLabels.values[a]})}function ra(){var t,l,a;return{y0:(a=(l=(t=J.value)==null?void 0:t[0])==null?void 0:l.zero)!=null?a:u.value.bottom}}function kl(t){var f,L,w,_,D;const{y0:l}=ra(),a=e.value.style.chart.bars.totalValues,o=Math.max(2,a.fontSize*.3+a.offsetY);let c=1/0,s=!1;for(const F of S.value||[]){const O=(L=(f=F==null?void 0:F.series)==null?void 0:f[t])!=null?L:0,he=(_=(w=F==null?void 0:F.height)==null?void 0:w[t])!=null?_:0,W=(D=F==null?void 0:F.y)==null?void 0:D[t];O>0&&he>0&&Number.isFinite(W)&&(s=!0,W<c&&(c=W))}const x=(s&&Number.isFinite(c)?c:l)-o;return Math.min(Math.max(x,0),u.value.bottom)}function Cl(t){var s,x,f,L;const{x0:l}=ra(),a=Math.max(2,e.value.style.chart.bars.totalValues.fontSize*.3+e.value.style.chart.bars.totalValues.offsetX);let o=-1/0,c=!1;for(const w of S.value||[]){const _=(x=(s=w==null?void 0:w.series)==null?void 0:s[t])!=null?x:0,D=(f=w==null?void 0:w.horizontal_x)==null?void 0:f[t],F=(L=w==null?void 0:w.horizontal_width)==null?void 0:L[t],O=Number.isFinite(F)?Math.max(0,F):0;Number.isFinite(D)&&_>0&&O>0&&(c=!0,o=Math.max(o,D+O))}return(c&&Number.isFinite(o)?o:l)+a}return Sa({getData:il,getImage:dl,generatePdf:Tt,generateCsv:vt,generateImage:Dt,generateSvg:aa,hideSeries:ul,showSeries:nl,toggleTable:Gt,toggleLabels:Xt,toggleTooltip:Kt,toggleAnnotator:bt,toggleFullscreen:Wt}),(t,l)=>(r(),n("div",{id:"stackbar_".concat(H.value),ref_key:"stackbarChart",ref:X,class:ye({"vue-data-ui-component":!0,"vue-ui-stackbar":!0,"vue-data-ui-wrapper-fullscreen":ke.value}),style:ue("background:".concat(e.value.style.chart.backgroundColor,";color:").concat(e.value.style.chart.color,";font-family:").concat(e.value.style.fontFamily,"; position: relative; ").concat(e.value.responsive?"height: 100%":"")),onMouseenter:qa,onMouseleave:Ya},[e.value.userOptions.buttons.annotator?(r(),te(m(Da),{key:0,svgRef:m(rt),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:Be.value,onClose:bt},{"annotator-action-close":$(()=>[A(t.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":$(({color:a})=>[A(t.$slots,"annotator-action-color",j(q({color:a})),void 0,!0)]),"annotator-action-draw":$(({mode:a})=>[A(t.$slots,"annotator-action-draw",j(q({mode:a})),void 0,!0)]),"annotator-action-undo":$(({disabled:a})=>[A(t.$slots,"annotator-action-undo",j(q({disabled:a})),void 0,!0)]),"annotator-action-redo":$(({disabled:a})=>[A(t.$slots,"annotator-action-redo",j(q({disabled:a})),void 0,!0)]),"annotator-action-delete":$(({disabled:a})=>[A(t.$slots,"annotator-action-delete",j(q({disabled:a})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):g("",!0),A(t.$slots,"userConfig",{},void 0,!0),e.value.style.chart.title.text?(r(),n("div",{key:1,ref_key:"chartTitle",ref:Ct,style:"width:100%;background:transparent;padding-bottom:24px"},[(r(),te(yo,{key:"title_".concat(At.value),config:{title:{cy:"stackbar-title",...e.value.style.chart.title},subtitle:{cy:"stackbar-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):g("",!0),ae("div",{id:"legend-top-".concat(H.value)},null,8,xo),e.value.userOptions.show&&pe.value&&(m(St)||m(ot))?(r(),te(m(Na),{ref_key:"userOptionsRef",ref:Qe,key:"user_option_".concat(kt.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:m(Ft),isImaging:m(It),uid:H.value,hasTooltip:e.value.style.chart.tooltip.show&&e.value.userOptions.buttons.tooltip,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasLabel:e.value.userOptions.buttons.labels,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:ke.value,chartElement:X.value,position:e.value.userOptions.position,isTooltip:T.value.showTooltip,titles:{...e.value.userOptions.buttonTitles},hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:Be.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,tableDialog:e.value.table.useDialog,onToggleFullscreen:Wt,onGeneratePdf:m(Tt),onGenerateCsv:vt,onGenerateImage:m(Dt),onGenerateSvg:aa,onToggleTable:Gt,onToggleLabels:Xt,onToggleTooltip:Kt,onToggleAnnotator:bt,style:ue({visibility:m(St)?m(ot)?"visible":"hidden":"visible"})},ft({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:$(({isOpen:a,color:o})=>[A(t.$slots,"menuIcon",j(q({isOpen:a,color:o})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionTooltip?{name:"optionTooltip",fn:$(()=>[A(t.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:$(()=>[A(t.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionCsv?{name:"optionCsv",fn:$(()=>[A(t.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:$(()=>[A(t.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,t.$slots.optionSvg?{name:"optionSvg",fn:$(()=>[A(t.$slots,"optionSvg",{},void 0,!0)]),key:"5"}:void 0,t.$slots.optionTable?{name:"optionTable",fn:$(()=>[A(t.$slots,"optionTable",{},void 0,!0)]),key:"6"}:void 0,t.$slots.optionLabels?{name:"optionLabels",fn:$(()=>[A(t.$slots,"optionLabels",{},void 0,!0)]),key:"7"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:$(({toggleFullscreen:a,isFullscreen:o})=>[A(t.$slots,"optionFullscreen",j(q({toggleFullscreen:a,isFullscreen:o})),void 0,!0)]),key:"8"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:$(({toggleAnnotator:a,isAnnotator:o})=>[A(t.$slots,"optionAnnotator",j(q({toggleAnnotator:a,isAnnotator:o})),void 0,!0)]),key:"9"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasImg","hasSvg","hasXls","hasTable","hasLabel","hasFullscreen","isFullscreen","chartElement","position","isTooltip","titles","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):g("",!0),(r(),n("svg",{ref_key:"svgRef",ref:rt,xmlns:m(Gl),viewBox:"0 0 ".concat(u.value.chartWidth<=0?10:u.value.chartWidth," ").concat(u.value.chartHeight<=0?10:u.value.chartHeight),class:ye({"vue-data-ui-loading":m(we)}),style:ue("max-width:100%;overflow:visible;background:transparent;color:".concat(e.value.style.chart.color))},[Fe(m(Ea)),t.$slots["chart-background"]?(r(),n("foreignObject",{key:0,x:u.value.left,y:u.value.top,width:u.value.width<=0?10:u.value.width,height:u.value.height<=0?10:u.value.height,style:{pointerEvents:"none"}},[A(t.$slots,"chart-background",{},void 0,!0)],8,Co)):g("",!0),e.value.style.chart.bars.gradient.show?(r(),n("defs",wo,[(r(!0),n(k,null,z(S.value,(a,o)=>(r(),n("linearGradient",{id:"gradient_".concat(a.id),x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[ae("stop",{offset:"0%","stop-color":a.color},null,8,Ao),ae("stop",{offset:"61.8%","stop-color":m(Xl)(a.color,e.value.style.chart.bars.gradient.intensity/100)},null,8,zo),ae("stop",{offset:"100%","stop-color":a.color},null,8,$o)],8,Lo))),256))])):g("",!0),e.value.style.chart.grid.frame.show?(r(),n("rect",{key:2,style:{pointerEvents:"none",transition:"none",animation:"none !important"},x:Math.max(0,u.value.left),y:Math.max(0,u.value.top),width:Math.max(0,u.value.width),height:Math.max(0,u.value.height),fill:"transparent",stroke:e.value.style.chart.grid.frame.stroke,"stroke-width":e.value.style.chart.grid.frame.strokeWidth,"stroke-linecap":e.value.style.chart.grid.frame.strokeLinecap,"stroke-linejoin":e.value.style.chart.grid.frame.strokeLinejoin,"stroke-dasharray":e.value.style.chart.grid.frame.strokeDasharray},null,8,So)):g("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="vertical"?(r(!0),n(k,{key:3},z(J.value,(a,o)=>(r(),n("line",{x1:u.value.left,x2:u.value.right,y1:a.y,y2:a.y,stroke:e.value.style.chart.grid.x.linesColor,"stroke-width":e.value.style.chart.grid.x.linesThickness,"stroke-dasharray":e.value.style.chart.grid.x.linesStrokeDasharray,"stroke-linecap":"round"},null,8,Mo))),256)):g("",!0),e.value.style.chart.grid.x.showHorizontalLines&&e.value.orientation==="horizontal"?(r(!0),n(k,{key:4},z(v.value.end-v.value.start+1,(a,o)=>(r(),n("line",{x1:u.value.left,x2:u.value.right,y1:u.value.top+p.value*o,y2:u.value.top+p.value*o,stroke:e.value.style.chart.grid.x.linesColor,"stroke-width":e.value.style.chart.grid.x.linesThickness,"stroke-dasharray":e.value.style.chart.grid.x.linesStrokeDasharray,"stroke-linecap":"round"},null,8,_o))),256)):g("",!0),e.value.style.chart.grid.y.showVerticalLines&&e.value.orientation==="vertical"?(r(!0),n(k,{key:5},z(v.value.end-v.value.start+1,(a,o)=>(r(),n("line",{x1:u.value.left+p.value*o,x2:u.value.left+p.value*o,y1:u.value.top,y2:u.value.bottom,stroke:e.value.style.chart.grid.y.linesColor,"stroke-width":e.value.style.chart.grid.y.linesThickness,"stroke-dasharray":e.value.style.chart.grid.y.linesStrokeDasharray,"stroke-linecap":"round"},null,8,Fo))),256)):g("",!0),e.value.style.chart.grid.y.showVerticalLines&&e.value.orientation==="horizontal"?(r(!0),n(k,{key:6},z(J.value,(a,o)=>(r(),n("line",{x1:a.horizontal_x,x2:a.horizontal_x,y1:u.value.top,y2:u.value.bottom,stroke:e.value.style.chart.grid.y.linesColor,"stroke-width":e.value.style.chart.grid.y.linesThickness,"stroke-dasharray":e.value.style.chart.grid.y.linesStrokeDasharray,"stroke-linecap":"round"},null,8,Io))),256)):g("",!0),(r(!0),n(k,null,z(S.value,(a,o)=>(r(),n("g",null,[t.$slots.pattern?(r(),n("defs",To,[A(t.$slots,"pattern",Ie({ref_for:!0},{seriesIndex:a.absoluteIndex,patternId:"pattern_".concat(H.value,"_").concat(a.absoluteIndex)}),void 0,!0)])):g("",!0),e.value.orientation==="vertical"?(r(),n(k,{key:1},[(r(!0),n(k,null,z(a.x,(c,s)=>(r(),n("rect",{x:c,y:m(ce)(a.y[s]),height:a.height[s]<0?1e-4:a.height[s]||0,rx:e.value.style.chart.bars.borderRadius>a.height[s]/2?(a.height[s]<0?0:a.height[s])/2:e.value.style.chart.bars.borderRadius,width:p.value*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?"url(#gradient_".concat(a.id,")"):a.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:ye({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":re.value})},null,10,Do))),256)),t.$slots.pattern?(r(),n("g",No,[(r(!0),n(k,null,z(a.x,(c,s)=>(r(),n("rect",{x:c,y:m(ce)(a.y[s]),height:a.height[s]<0?1e-4:a.height[s]||0,rx:e.value.style.chart.bars.borderRadius>a.height[s]/2?(a.height[s]<0?0:a.height[s])/2:e.value.style.chart.bars.borderRadius,width:p.value*(1-e.value.style.chart.bars.gapRatio/2),fill:"url(#pattern_".concat(H.value,"_").concat(a.absoluteIndex,")"),stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:ye({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":re.value})},null,10,Eo))),256))])):g("",!0)],64)):(r(),n(k,{key:2},[(r(!0),n(k,null,z(a.horizontal_x,(c,s)=>(r(),n("rect",{x:m(ce)(c,u.value.left),y:a.horizontal_y[s]<0?0:a.horizontal_y[s],width:m(ce)(a.horizontal_width[s]<0?1e-4:a.horizontal_width[s]),rx:e.value.style.chart.bars.borderRadius>a.height[s]/2?(a.height[s]<0?0:a.height[s])/2:e.value.style.chart.bars.borderRadius,height:p.value*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?"url(#gradient_".concat(a.id,")"):a.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:ye({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":re.value})},null,10,Oo))),256)),t.$slots.pattern?(r(),n("g",Po,[(r(!0),n(k,null,z(a.horizontal_x,(c,s)=>(r(),n("rect",{x:m(ce)(c,u.value.left),y:a.horizontal_y[s]<0?0:a.horizontal_y[s],width:m(ce)(a.horizontal_width[s]<0?1e-4:a.horizontal_width[s]),rx:e.value.style.chart.bars.borderRadius>a.height[s]/2?(a.height[s]<0?0:a.height[s])/2:e.value.style.chart.bars.borderRadius,height:p.value*(1-e.value.style.chart.bars.gapRatio/2),fill:"url(#pattern_".concat(H.value,"_").concat(a.absoluteIndex,")"),stroke:e.value.style.chart.backgroundColor,"stroke-width":e.value.style.chart.bars.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round",class:ye({"vue-data-ui-bar-animated":e.value.useCssAnimation,"vue-data-ui-bar-transition":re.value})},null,10,Ro))),256))])):g("",!0)],64))]))),256)),e.value.style.chart.grid.x.showAxis?(r(),n("line",{key:7,x1:u.value.left,x2:u.value.right,y1:u.value.bottom,y2:u.value.bottom,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":e.value.style.chart.grid.x.axisThickness,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,Vo)):g("",!0),e.value.style.chart.grid.y.showAxis&&!e.value.style.chart.bars.distributed?(r(),n("line",{key:8,x1:u.value.left,x2:u.value.left,y1:u.value.top,y2:u.value.bottom,stroke:e.value.style.chart.grid.y.axisColor,"stroke-width":e.value.style.chart.grid.y.axisThickness,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,Bo)):g("",!0),e.value.style.chart.grid.x.axisName.show&&e.value.style.chart.grid.x.axisName.text?(r(),n("text",{key:9,ref_key:"xAxisLabel",ref:Ze,x:u.value.left+u.value.width/2,y:u.value.chartHeight-3,"font-size":e.value.style.chart.grid.x.axisName.fontSize,fill:e.value.style.chart.grid.x.axisName.color,"font-weight":e.value.style.chart.grid.x.axisName.bold?"bold":"normal","text-anchor":"middle"},U(e.value.style.chart.grid.x.axisName.text),9,Uo)):g("",!0),e.value.style.chart.grid.y.axisName.show&&e.value.style.chart.grid.y.axisName.text?(r(),n("text",{key:10,ref_key:"yAxisLabel",ref:et,transform:"translate(".concat(e.value.style.chart.grid.y.axisName.fontSize,", ").concat(u.value.top+u.value.height/2,") rotate(-90)"),"font-size":e.value.style.chart.grid.y.axisName.fontSize,fill:e.value.style.chart.grid.y.axisName.color,"font-weight":e.value.style.chart.grid.y.axisName.bold?"bold":"normal","text-anchor":"middle"},U(e.value.style.chart.grid.y.axisName.text),9,Ho)):g("",!0),T.value.dataLabels.show&&e.value.orientation==="vertical"?(r(),n(k,{key:11},[(r(!0),n(k,null,z(S.value,(a,o)=>(r(),n("g",null,[(r(!0),n(k,null,z(a.x,(c,s)=>(r(),n(k,null,[ea(a.series[s],a.proportions[s])?(r(),n("text",{key:0,x:c+p.value*(1-e.value.style.chart.bars.gapRatio/2)/2,y:a.y[s]+a.height[s]/2+e.value.style.chart.bars.dataLabels.fontSize/3,"font-size":e.value.style.chart.bars.dataLabels.fontSize,fill:e.value.style.chart.bars.dataLabels.adaptColorToBackground?m(fa)(a.color):e.value.style.chart.bars.dataLabels.color,"font-weight":e.value.style.chart.bars.dataLabels.bold?"bold":"normal","text-anchor":"middle"},U(e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?jt(a.proportions[s]*100,a,o,s):Re(a.series[s],a,o,s,a.signedSeries[s])),9,jo)):g("",!0)],64))),256))]))),256)),e.value.style.chart.bars.totalValues.show&&S.value.length>1?(r(),n("g",{key:0,ref_key:"sumTop",ref:ja},[(r(!0),n(k,null,z(Ht.value,(a,o)=>(r(),n(k,null,[!e.value.style.chart.bars.dataLabels.hideEmptyValues||a.value!==0?(r(),n("text",{key:0,x:u.value.left+p.value*o+p.value/2,y:kl(o),"text-anchor":"middle","font-size":e.value.style.chart.bars.totalValues.fontSize,"font-weight":e.value.style.chart.bars.totalValues.bold?"bold":"normal",fill:e.value.style.chart.bars.totalValues.color},U(Re(a.value,a,o,a.sign)),9,qo)):g("",!0)],64))),256))],512)):g("",!0)],64)):g("",!0),T.value.dataLabels.show&&e.value.orientation==="horizontal"?(r(),n(k,{key:12},[(r(!0),n(k,null,z(S.value,(a,o)=>(r(),n("g",null,[(r(!0),n(k,null,z(a.horizontal_x,(c,s)=>(r(),n(k,null,[ea(a.series[s],a.proportions[s])?(r(),n("text",{key:0,x:c+(a.horizontal_width[s]<0?1e-4:a.horizontal_width[s])/2,y:a.horizontal_y[s]+p.value*(1-e.value.style.chart.bars.gapRatio/2)/2+e.value.style.chart.bars.dataLabels.fontSize/3,"font-size":e.value.style.chart.bars.dataLabels.fontSize,fill:e.value.style.chart.bars.dataLabels.adaptColorToBackground?m(fa)(a.color):e.value.style.chart.bars.dataLabels.color,"font-weight":e.value.style.chart.bars.dataLabels.bold?"bold":"normal","text-anchor":"middle"},U(e.value.style.chart.bars.showDistributedPercentage&&e.value.style.chart.bars.distributed?jt(a.proportions[s]*100,a,o,s):Re(a.series[s],a,o,s,a.signedSeries[s])),9,Yo)):g("",!0)],64))),256))]))),256)),e.value.style.chart.bars.totalValues.show&&S.value.length>1?(r(),n("g",{key:0,ref_key:"sumRight",ref:tt},[(r(!0),n(k,null,z(Ht.value,(a,o)=>(r(),n(k,null,[!e.value.style.chart.bars.dataLabels.hideEmptyValues||a.value!==0?(r(),n("text",{key:0,x:Cl(o),y:u.value.top+p.value*o+p.value/2+e.value.style.chart.bars.totalValues.fontSize/3,"text-anchor":"start","font-size":e.value.style.chart.bars.totalValues.fontSize,"font-weight":e.value.style.chart.bars.totalValues.bold?"bold":"normal",fill:e.value.style.chart.bars.totalValues.color},U(Re(a.value,a,o,a.sign)),9,Jo)):g("",!0)],64))),256))],512)):g("",!0)],64)):g("",!0),e.value.style.chart.grid.y.axisLabels.show&&!e.value.style.chart.bars.distributed&&e.value.orientation==="vertical"?(r(),n("g",{key:13,ref_key:"scaleLabels",ref:se},[(r(!0),n(k,null,z(J.value,(a,o)=>(r(),n("line",{x1:u.value.left,x2:u.value.left-6,y1:a.y,y2:a.y,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1},null,8,Wo))),256)),(r(!0),n(k,null,z(J.value,(a,o)=>(r(),n("text",{x:a.x,y:a.y+e.value.style.chart.grid.y.axisLabels.fontSize/3,"font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,"text-anchor":"end"},U(m(me)(e.value.style.chart.grid.y.axisLabels.formatter,a.value,m(oe)({p:e.value.style.chart.bars.dataLabels.prefix,v:a.value,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.grid.y.axisLabels.rounding}),{datapoint:a})),9,Go))),256))],512)):g("",!0),e.value.style.chart.grid.y.axisLabels.show&&!e.value.style.chart.bars.distributed&&e.value.orientation==="horizontal"?(r(),n("g",{key:14,ref_key:"scaleLabels",ref:se},[(r(!0),n(k,null,z(J.value,(a,o)=>(r(),n("line",{x1:a.horizontal_x,x2:a.horizontal_x,y1:u.value.bottom,y2:u.value.bottom+6,stroke:e.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":"round"},null,8,Xo))),256)),(r(!0),n(k,null,z(J.value,(a,o)=>(r(),n("text",{class:"vue-data-ui-time-label","font-size":e.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,"text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle",transform:"translate(".concat(a.horizontal_x,", ").concat(u.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY,"), rotate(").concat(e.value.style.chart.grid.x.timeLabels.rotation,")")},U(m(me)(e.value.style.chart.grid.y.axisLabels.formatter,a.value,m(oe)({p:e.value.style.chart.bars.dataLabels.prefix,v:a.value,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.style.chart.grid.y.axisLabels.rounding}),{datapoint:a})),9,Ko))),256))],512)):g("",!0),e.value.style.chart.grid.x.timeLabels.show&&e.value.orientation==="vertical"?(r(),n("g",{key:15,ref_key:"timeLabelsEls",ref:ie},[t.$slots["time-label"]?(r(),n("g",Qo,[(r(!0),n(k,null,z(Vt.value,(a,o)=>(r(),n("g",null,[A(t.$slots,"time-label",Ie({ref_for:!0},{x:u.value.left+p.value*o+p.value/2,y:u.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY,fontSize:e.value.style.chart.grid.x.timeLabels.fontSize,fill:e.value.style.chart.grid.x.timeLabels.color,transform:"translate(".concat(u.value.left+p.value*o+p.value/2,", ").concat(u.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY,"), rotate(").concat(e.value.style.chart.grid.x.timeLabels.rotation,")"),absoluteIndex:a.absoluteIndex,content:a.text,textAnchor:e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle",show:!0}),void 0,!0)]))),256))])):(r(),n("g",Zo,[(r(!0),n(k,null,z(Vt.value,(a,o)=>(r(),n("g",null,[String(a.text).includes("\n")?(r(),n("text",{key:o+"-multi","text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.grid.x.timeLabels.fontSize,fill:e.value.style.chart.grid.x.timeLabels.color,transform:"\n                                    translate(\n                                    ".concat(u.value.left+p.value*o+p.value/2,",\n                                    ").concat(u.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY,"\n                                    ),\n                                    rotate(").concat(e.value.style.chart.grid.x.timeLabels.rotation,")\n                                "),style:{cursor:"pointer"},innerHTML:m(Kl)({content:String(a.text),fontSize:e.value.style.chart.grid.x.timeLabels.fontSize,fill:e.value.style.chart.grid.x.timeLabels.color,x:0,y:0}),onClick:()=>Ue(a,o)},null,8,tr)):(r(),n("text",{class:"vue-data-ui-time-label",key:o,"text-anchor":e.value.style.chart.grid.x.timeLabels.rotation>0?"start":e.value.style.chart.grid.x.timeLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":e.value.style.chart.grid.x.timeLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.x.timeLabels.color,transform:"translate(".concat(u.value.left+p.value*o+p.value/2,", ").concat(u.value.bottom+e.value.style.chart.grid.x.timeLabels.fontSize*1.3+e.value.style.chart.grid.x.timeLabels.offsetY,"), rotate(").concat(e.value.style.chart.grid.x.timeLabels.rotation,")"),style:{cursor:"pointer"},onClick:()=>Ue(a,o)},U(a.text),9,er))]))),256))]))],512)):g("",!0),e.value.style.chart.grid.x.timeLabels.show&&e.value.orientation==="horizontal"?(r(),n("g",{key:16,ref_key:"timeLabelsEls",ref:ie},[t.$slots["time-label"]?(r(),n("g",ar,[(r(!0),n(k,null,z(V.value,(a,o)=>(r(),n("g",null,[A(t.$slots,"time-label",Ie({ref_for:!0},{x:u.value.left-8,y:u.value.top+p.value*o+p.value/2+e.value.style.chart.grid.y.axisLabels.fontSize/3,fontSize:e.value.style.chart.grid.x.timeLabels.fontSize,fill:e.value.style.chart.grid.x.timeLabels.color,transform:null,absoluteIndex:a.absoluteIndex,content:a.text,textAnchor:"end",show:!0}),void 0,!0)]))),256))])):(r(),n("g",lr,[(r(!0),n(k,null,z(V.value,(a,o)=>(r(),n("g",null,[String(a.text).includes("\n")?(r(),n("text",{key:1,"text-anchor":"end","font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,x:u.value.left-8,y:u.value.top+p.value*o+p.value/2+e.value.style.chart.grid.y.axisLabels.fontSize/3,style:{cursor:"pointer"},onClick:()=>Ue(a,o),innerHTML:m(Ql)({content:String(a.text),fontSize:e.value.style.chart.grid.y.axisLabels.fontSize,fill:e.value.style.chart.grid.y.axisLabels.color,x:u.value.left-8,y:0})},null,8,rr)):(r(),n("text",{key:0,"text-anchor":"end","font-size":e.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":e.value.style.chart.grid.y.axisLabels.bold?"bold":"normal",fill:e.value.style.chart.grid.y.axisLabels.color,x:u.value.left-8,y:u.value.top+p.value*o+p.value/2+e.value.style.chart.grid.y.axisLabels.fontSize/3,style:{cursor:"pointer"},onClick:()=>Ue(a,o)},U(a.text),9,or))]))),256))]))],512)):g("",!0),T.value.showTooltip&&e.value.orientation==="vertical"?(r(!0),n(k,{key:17},z(v.value.end-v.value.start,(a,o)=>(r(),n("rect",{x:u.value.left+o*p.value,y:u.value.top,width:p.value,height:u.value.height<0?0:u.value.height,onClick:()=>qt(o),onMouseenter:()=>Jt(o),onMouseleave:()=>Yt(o),fill:o===G.value||o===at.value?e.value.style.chart.highlighter.color:"transparent",style:ue({opacity:e.value.style.chart.highlighter.opacity/100})},null,44,sr))),256)):g("",!0),T.value.showTooltip&&e.value.orientation==="horizontal"?(r(!0),n(k,{key:18},z(v.value.end-v.value.start,(a,o)=>(r(),n("rect",{x:u.value.left,y:u.value.top+o*p.value,width:u.value.width<0?0:u.value.width,height:p.value,onClick:()=>qt(o),onMouseenter:()=>Jt(o),onMouseleave:()=>Yt(o),fill:o===G.value||o===at.value?e.value.style.chart.highlighter.color:"transparent",style:ue({opacity:e.value.style.chart.highlighter.opacity/100})},null,44,ir))),256)):g("",!0),Ot.value?(r(),n("rect",Ie({key:19},Qa.value,{"data-start":v.value.start,"data-end":v.value.end}),null,16,nr)):g("",!0),A(t.$slots,"svg",{svg:{drawingArea:u.value,data:S.value}},void 0,!0)],14,ko)),t.$slots.watermark?(r(),n("div",ur,[A(t.$slots,"watermark",j(q({isPrinting:m(Ft)||m(It)})),void 0,!0)])):g("",!0),e.value.style.chart.zoom.show&&E.value>6&&pe.value&&oa.value?(r(),te(fo,{key:4,ref_key:"chartSlicer",ref:xe,allMinimaps:tl.value,background:e.value.style.chart.zoom.color,borderColor:e.value.style.chart.backgroundColor,customFormat:e.value.style.chart.zoom.customFormat,cutNullValues:!1,enableRangeHandles:e.value.style.chart.zoom.enableRangeHandles,enableSelectionDrag:e.value.style.chart.zoom.enableSelectionDrag,end:v.value.end,focusOnDrag:e.value.style.chart.zoom.focusOnDrag,focusRangeRatio:e.value.style.chart.zoom.focusRangeRatio,fontSize:e.value.style.chart.zoom.fontSize,immediate:!e.value.style.chart.zoom.preview.enable,inputColor:e.value.style.chart.zoom.color,isPreview:Ot.value,labelLeft:e.value.style.chart.grid.x.timeLabels.values[v.value.start]?V.value[0].text:"",labelRight:e.value.style.chart.grid.x.timeLabels.values[v.value.end-1]?V.value.at(-1).text:"",max:Math.max(...We.dataset.map(a=>a.series.length)),min:0,minimap:ne.value,minimapCompact:e.value.style.chart.zoom.minimap.compact,minimapFrameColor:e.value.style.chart.zoom.minimap.frameColor,minimapIndicatorColor:e.value.style.chart.zoom.minimap.indicatorColor,minimapMerged:!1,minimapSelectedColor:e.value.style.chart.zoom.minimap.selectedColor,minimapSelectedColorOpacity:e.value.style.chart.zoom.minimap.selectedColorOpacity,minimapSelectedIndex:G.value,minimapSelectionRadius:1,preciseLabels:Ut.value.length?Ut.value:ze.value,refreshEndPoint:e.value.style.chart.zoom.endIndex!==null?e.value.style.chart.zoom.endIndex+1:Math.max(...We.dataset.map(a=>a.series.length)),refreshStartPoint:e.value.style.chart.zoom.startIndex!==null?e.value.style.chart.zoom.startIndex:0,selectColor:e.value.style.chart.zoom.highlightColor,selectedSeries:ol.value,smoothMinimap:!1,start:v.value.start,textColor:e.value.style.chart.color,timeLabels:ze.value,usePreciseLabels:e.value.style.chart.grid.x.timeLabels.datetimeFormatter.enable&&!e.value.style.chart.zoom.useDefaultFormat,valueEnd:v.value.end,valueStart:v.value.start,verticalHandles:e.value.style.chart.zoom.minimap.verticalHandles,"onUpdate:end":pl,"onUpdate:start":fl,onTrapMouse:Za,onReset:Rt,onFutureEnd:l[0]||(l[0]=a=>Pt("end",a)),onFutureStart:l[1]||(l[1]=a=>Pt("start",a))},{"reset-action":$(({reset:a})=>[A(t.$slots,"reset-action",j(q({reset:a})),void 0,!0)]),slotMap:$(({width:a,height:o,unitW:c})=>[(r(!0),n(k,null,z(S.value,s=>(r(),n("g",{key:s.id},[(r(!0),n(k,null,z(s.xMinimap({left:0,unitW:c}),(x,f)=>(r(),n("rect",{key:f,x:f===0?x-c*(e.value.style.chart.bars.gapRatio/4):x-c/2,y:Math.max(0,Math.min(o,s.yMinimap({minimapH:o})[f])),height:s.heightMinimap({minimapH:o})[f],width:[0,E.value-1].includes(f)?c*(1-e.value.style.chart.bars.gapRatio/2)/2:c*(1-e.value.style.chart.bars.gapRatio/2),fill:e.value.style.chart.bars.gradient.show?"url(#gradient_".concat(s.id,")"):s.color,stroke:e.value.style.chart.backgroundColor,"stroke-width":.5,rx:"0","stroke-linecap":"round","stroke-linejoin":"round",style:ue({opacity:f>=B.value.start&&f<=B.value.end?1:.62})},null,12,cr))),128))]))),128))]),_:3},8,["allMinimaps","background","borderColor","customFormat","enableRangeHandles","enableSelectionDrag","end","focusOnDrag","focusRangeRatio","fontSize","immediate","inputColor","isPreview","labelLeft","labelRight","max","minimap","minimapCompact","minimapFrameColor","minimapIndicatorColor","minimapSelectedColor","minimapSelectedColorOpacity","minimapSelectedIndex","preciseLabels","refreshEndPoint","refreshStartPoint","selectColor","selectedSeries","start","textColor","timeLabels","usePreciseLabels","valueEnd","valueStart","verticalHandles"])):g("",!0),Fe(m(_a),{show:T.value.showTooltip&&Ge.value,backgroundColor:e.value.style.chart.tooltip.backgroundColor,color:e.value.style.chart.tooltip.color,fontSize:e.value.style.chart.tooltip.fontSize,borderRadius:e.value.style.chart.tooltip.borderRadius,borderColor:e.value.style.chart.tooltip.borderColor,borderWidth:e.value.style.chart.tooltip.borderWidth,backgroundOpacity:e.value.style.chart.tooltip.backgroundOpacity,position:e.value.style.chart.tooltip.position,offsetY:e.value.style.chart.tooltip.offsetY,parent:X.value,content:Ke.value,isFullscreen:ke.value,isCustom:m(pa)(e.value.style.chart.tooltip.customFormat),smooth:e.value.style.chart.tooltip.smooth,backdropFilter:e.value.style.chart.tooltip.backdropFilter,smoothForce:e.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:e.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":$(()=>[A(t.$slots,"tooltip-before",j(q({...Xe.value})),void 0,!0)]),"tooltip-after":$(()=>[A(t.$slots,"tooltip-after",j(q({...Xe.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),ae("div",{id:"legend-bottom-".concat(H.value)},null,8,vr),zt.value?(r(),te(Rl,{key:5,to:e.value.style.chart.legend.position==="top"?"#legend-top-".concat(H.value):"#legend-bottom-".concat(H.value)},[ae("div",{ref_key:"chartLegend",ref:wt},[e.value.style.chart.legend.show?(r(),te(mo,{key:0,legendSet:ht.value,config:cl.value,onClickMarker:l[2]||(l[2]=({legend:a})=>a.segregate())},ft({item:$(({legend:a})=>[m(we)?g("",!0):(r(),n("div",{key:0,onClick:o=>a.segregate(),style:ue("opacity:".concat(N.value.includes(a.id)?.5:1))},U(a.name),13,dr))]),_:2},[t.$slots.pattern?{name:"legend-pattern",fn:$(({legend:a,index:o})=>[Fe(go,{shape:a.shape,radius:30,stroke:"none",plot:{x:30,y:30},fill:"url(#pattern_".concat(H.value,"_").concat(o,")")},null,8,["shape","fill"])]),key:"0"}:void 0]),1032,["legendSet","config"])):A(t.$slots,"legend",{key:1,legend:ht.value},void 0,!0)],512)],8,["to"])):g("",!0),t.$slots.source?(r(),n("div",{key:6,ref_key:"source",ref:Lt,dir:"auto"},[A(t.$slots,"source",{},void 0,!0)],512)):g("",!0),pe.value&&e.value.userOptions.buttons.table?(r(),te(Vl($e.value.component),Ie({key:7},$e.value.props,{ref_key:"tableUnit",ref:Ce,onClose:ta}),ft({content:$(()=>[Fe(m(Ta),{colNames:Ve.value.colNames,head:Ve.value.head,body:Ve.value.body,config:Ve.value.config,title:e.value.table.useDialog?"":$e.value.title,withCloseButton:!e.value.table.useDialog,onClose:ta},{th:$(({th:a})=>[ae("div",{innerHTML:a},null,8,hr)]),td:$(({td:a})=>[da(U(isNaN(Number(a))?a:m(oe)({p:e.value.style.chart.bars.dataLabels.prefix,v:a,s:e.value.style.chart.bars.dataLabels.suffix,r:e.value.table.td.roundingValue})),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"])]),_:2},[e.value.table.useDialog?{name:"title",fn:$(()=>[da(U($e.value.title),1)]),key:"0"}:void 0,e.value.table.useDialog?{name:"actions",fn:$(()=>[ae("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:l[3]||(l[3]=a=>vt(e.value.userOptions.callbacks.csv))},[Fe(m(Fa),{name:"excel",stroke:$e.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):g("",!0),m(we)?(r(),te(ro,{key:8})):g("",!0)],46,po))}},yr=Ul(br,[["__scopeId","data-v-9cdb5942"]]),Er=Object.freeze(Object.defineProperty({__proto__:null,default:yr},Symbol.toStringTag,{value:"Module"}));export{Nr as a,Er as b,yr as v};
