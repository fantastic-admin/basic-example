
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./UserOptions-Cy-iNhZU-CnpDVImt.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./vClickOutside-C6WiFswA-B2BXHGcD.js","./vue-data-ui-8Gmf-dDN.js","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js"])))=>i.map(i=>d[i]);
import{c0 as ce,J as p,e as g,ac as de,E as N,K as ve,c as n,o as s,z as pe,A as m,f as b,u as i,c3 as me,h,r as u,j as B,k as j,O as C,c1 as fe,F as k,R as I,m as f,g as ge,n as G,aa as be,c4 as he}from"./index-CJB5jCfL.js";import{s as ye,J as D,E as Ce,A as ke,ak as _e,m as xe,a6 as we,e as Ie,f as $e}from"./vue-data-ui-8Gmf-dDN.js";import{s as Ae,i as $}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{m as Fe}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{i as Oe}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as Ee}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{b as Pe}from"./Shape-12_eh8zD-Cy1mu6XW.js";import"./alert-I_0TAljB.js";const U={style:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},table:{head:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}}},H={style:{backgroundColor:"#FFF8E1",color:"#424242",heatmapColors:{min:"#FFECB3",max:"#D32F2F"}},table:{head:{backgroundColor:"#FFF8E1",color:"#424242"}}},J={style:{backgroundColor:"#1A1A1A",color:"#99AA99",heatmapColors:{min:"#333333",max:"#66CC66"}},table:{head:{backgroundColor:"#1A1A1A",color:"#99AA99"}}},L={style:{backgroundColor:"#fbfafa",color:"#8A9892",heatmapColors:{max:"#C09E85",min:"#DCDFE7"}},table:{head:{backgroundColor:"#fbfafa",color:"#8A9892"}}},X={style:{backgroundColor:"#f6f6fb",color:"#50606C",heatmapColors:{max:"#4A6A75",min:"#EFECEC"}},table:{head:{backgroundColor:"#f6f6fb",color:"#50606C"}}},W={default:{},dark:U,celebration:H,hack:J,zen:L,concrete:X},Ke=Object.freeze(Object.defineProperty({__proto__:null,celebration:H,concrete:X,dark:U,default:W,hack:J,zen:L},Symbol.toStringTag,{value:"Module"})),Se=["id"],Ve={role:"cell"},ze={role:"row"},Te=["data-cell"],Me={key:0,style:{display:"flex","flex-direction":"row",gap:"2px","align-items":"center"}},Re=["height","width"],Ne={key:0,role:"cell","data-cell":"sum"},Be={key:1,role:"cell","data-cell":"average"},je={key:2,role:"cell","data-cell":"median"},Ge={key:1,ref:"source",dir:"auto"},De={__name:"vue-ui-table-heatmap",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},setup(Y,{expose:Z}){ce(e=>({v7bb1d4dc:ue.value,v4b487b6d:ne.value}));const q=fe(()=>he(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),{vue_ui_table_heatmap:K}=Ae(),{isThemeValid:Q,warnInvalidTheme:ee}=Oe(),v=Y,_=g(D()),c=g(!1),y=g(null),x=g(!1),A=g(0),ae=de();N(()=>{ae["chart-background"]&&console.warn("VueUiTableHeatmap does not support the #chart-background slot.")});const a=p({get:()=>E(),set:e=>e}),{userOptionsVisible:w,setUserOptionsVisibility:F,keepUserOptionState:O}=Ee({config:a.value});function E(){const e=$({userConfig:v.config,defaultConfig:K}),t=e.theme;if(!t)return e;if(!Q.value(e))return ee(e),e;const o=$({userConfig:W[t]||v.config,defaultConfig:e});return $({userConfig:v.config,defaultConfig:o})}ve(()=>v.config,e=>{a.value=E(),w.value=!a.value.userOptions.showOnChartHover,V()},{deep:!0});const{isPrinting:oe,isImaging:te,generatePdf:P,generateImage:S}=Fe({elementId:"table_heatmap_".concat(_.value),fileName:"vue-ui-table-heatmap",options:a.value.userOptions.print}),le=p(()=>a.value.table.responsiveBreakpoint),se=p(()=>!!v.dataset&&v.dataset.length);N(()=>{V()});function V(){Ce(v.dataset)&&ke({componentName:"VueUiTableHeatmap",type:"dataset"});const e=new ResizeObserver(t=>{t.forEach(o=>{c.value=o.contentRect.width<le.value})});y.value&&e.observe(y.value)}const z=p(()=>v.dataset.map(e=>{const t=e.values.map(l=>isNaN(l)?0:l),o=t.reduce((l,r)=>l+r,0);return{...e,values:t,serieExtremes:{max:Math.max(...t),min:Math.min(...t)},sum:o,average:o/t.length,median:_e(t),displayValues:[e.name,...e.values],id:D()}})),T=p(()=>{const e=z.value.flatMap(t=>t.values);return{min:Math.min(...e),max:Math.max(...e)}});function re(e,t){const o=a.value.style.heatmapColors.useIndividualScale;return we(a.value.style.heatmapColors.min,a.value.style.heatmapColors.max,o?t.min:T.value.min,o?t.max:T.value.max,e)}const M=p(()=>z.value.map(e=>({...e,colors:e.displayValues.map(t=>isNaN(t)?a.value.style.backgroundColor:re(t,e.serieExtremes))}))),ne=p(()=>a.value.style.backgroundColor),ue=p(()=>"".concat(a.value.table.borderWidth,"px"));function R(e=null){be(()=>{const t=M.value.map(r=>[[r.name],r.displayValues,[r.sum],[r.average],[r.median]]),o=[[[""],a.value.table.head.values,["sum"],["average"],["median"]]].concat(t),l=Ie(o);e?e(l):$e({csvContent:l,title:"vue-ui-table-heatmap"})})}function ie(e){x.value=e,A.value+=1}return Z({generatePdf:P,generateCsv:R,generateImage:S}),(e,t)=>(s(),n("div",{ref_key:"tableContainer",ref:y,style:C("width:100%; overflow-x:auto; container-type: inline-size;padding-top:".concat(a.value.userOptions.show?"36px":"","; ").concat(x.value?"vue-data-ui-wrapper-fullscreen":"","; position:relative;")),class:G({"vue-data-ui-component":!0,"vue-ui-responsive":c.value}),id:"table_heatmap_".concat(_.value),onMouseenter:t[0]||(t[0]=()=>i(F)(!0)),onMouseleave:t[1]||(t[1]=()=>i(F)(!1))},[a.value.userOptions.show&&se.value&&(i(O)||i(w))?(s(),pe(i(q),{ref:"details",key:"user_option_".concat(A.value),backgroundColor:a.value.style.backgroundColor,color:a.value.style.color,isPrinting:i(oe),isImaging:i(te),uid:_.value,hasPdf:a.value.userOptions.buttons.pdf,hasXls:a.value.userOptions.buttons.csv,hasImg:a.value.userOptions.buttons.img,hasFullscreen:a.value.userOptions.buttons.fullscreen,isFullscreen:x.value,titles:{...a.value.userOptions.buttonTitles},chartElement:y.value,position:a.value.userOptions.position,callbacks:a.value.userOptions.callbacks,printScale:a.value.userOptions.print.scale,onToggleFullscreen:ie,onGeneratePdf:i(P),onGenerateCsv:R,onGenerateImage:i(S),style:C({visibility:i(O)?i(w)?"visible":"hidden":"visible"})},me({_:2},[e.$slots.menuIcon?{name:"menuIcon",fn:h(({isOpen:o,color:l})=>[u(e.$slots,"menuIcon",B(j({isOpen:o,color:l})),void 0,!0)]),key:"0"}:void 0,e.$slots.optionPdf?{name:"optionPdf",fn:h(()=>[u(e.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,e.$slots.optionCsv?{name:"optionCsv",fn:h(()=>[u(e.$slots,"optionCsv",{},void 0,!0)]),key:"2"}:void 0,e.$slots.optionImg?{name:"optionImg",fn:h(()=>[u(e.$slots,"optionImg",{},void 0,!0)]),key:"3"}:void 0,e.$slots.optionFullscreen?{name:"optionFullscreen",fn:h(({toggleFullscreen:o,isFullscreen:l})=>[u(e.$slots,"optionFullscreen",B(j({toggleFullscreen:o,isFullscreen:l})),void 0,!0)]),key:"4"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasXls","hasImg","hasFullscreen","isFullscreen","titles","chartElement","position","callbacks","printScale","onGeneratePdf","onGenerateImage","style"])):m("",!0),b("table",{class:G({"vue-ui-table-heatmap":!0}),style:C("width:100%;font-family:".concat(a.value.style.fontFamily,";background:").concat(a.value.style.backgroundColor,";"))},[b("caption",null,[u(e.$slots,"caption",{},void 0,!0)]),b("thead",null,[b("tr",{role:"row",style:C("background:".concat(a.value.table.head.backgroundColor,";color:").concat(a.value.table.head.color))},[(s(!0),n(k,null,I(a.value.table.head.values,(o,l)=>(s(),n("th",Ve,[u(e.$slots,"head",f({ref_for:!0},{value:o,rowIndex:l,type:typeof o,isResponsive:c.value}),void 0,!0)]))),256))],4)]),b("tbody",null,[(s(!0),n(k,null,I(M.value,(o,l)=>(s(),n("tr",ze,[(s(!0),n(k,null,I(o.displayValues,(r,d)=>(s(),n("td",{role:"cell","data-cell":a.value.table.head.values[d]},[o.color&&d===0?(s(),n("div",Me,[o.color?(s(),n("svg",{key:0,height:a.value.style.shapeSize,width:a.value.style.shapeSize,viewBox:"0 0 20 20",style:{background:"none",overflow:"visible"}},[ge(Pe,{plot:{x:10,y:10},color:o.color,radius:9,shape:o.shape||"circle"},null,8,["color","shape"])],8,Re)):m("",!0),u(e.$slots,"rowTitle",f({ref_for:!0},{value:r,rowIndex:l,colIndex:d,type:typeof r,isResponsive:c.value}),void 0,!0)])):(s(),n(k,{key:1},[d===0?u(e.$slots,"rowTitle",f({key:0,ref_for:!0},{value:r,rowIndex:l,colIndex:d,type:typeof r,isResponsive:c.value}),void 0,!0):m("",!0),d>0?u(e.$slots,"cell",f({key:1,ref_for:!0},{value:r,rowIndex:l,colIndex:d,type:typeof r,isResponsive:c.value,color:o.colors[d],textColor:i(xe)(o.colors[d])}),void 0,!0):m("",!0)],64))],8,Te))),256)),a.value.table.showSum?(s(),n("td",Ne,[u(e.$slots,"sum",f({ref_for:!0},{value:o.sum,rowIndex:l,isResponsive:c.value}),void 0,!0)])):m("",!0),a.value.table.showAverage?(s(),n("td",Be,[u(e.$slots,"average",f({ref_for:!0},{value:o.average,rowIndex:l,isResponsive:c.value}),void 0,!0)])):m("",!0),a.value.table.showMedian?(s(),n("td",je,[u(e.$slots,"median",f({ref_for:!0},{value:o.median,rowIndex:l,isResponsive:c.value}),void 0,!0)])):m("",!0)]))),256))])],4),e.$slots.source?(s(),n("div",Ge,[u(e.$slots,"source",{},void 0,!0)],512)):m("",!0)],46,Se))}},Ue=ye(De,[["__scopeId","data-v-9de1ab93"]]),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"}));export{Ke as a,Qe as b,Ue as v};
