
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PackageVersion-TgflyMpU-q2MkeeNq.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./PenAndPaper-DSvu9dwa-B6YjX2xm.js","./vue-data-ui-BN9YfUec.js","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js"])))=>i.map(i=>d[i]);
import{c4 as Le,e as c,J as h,E as qe,a7 as Ve,K as Ne,c as u,o as r,z as E,A as n,u as i,b_ as j,c0 as Ge,h as O,r as y,j as R,k as W,O as ge,n as U,g as He,f as d,F as Y,R as ye,t as Be,c1 as J}from"./index-DXZKKOp8.js";import{s as De,Q as je,A as Je,g as Qe,p as me,b as Ke,v as Xe,m as C,C as Ze,c as m,a as L,y as et,O as tt,I as at,f as lt}from"./vue-data-ui-BN9YfUec.js";import{E as ot,M as rt}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as st,o as fe}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{S as ut,T as it}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{m as nt}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{O as vt}from"./useSvgExport-DrjCWun4-CbW14PXm.js";import{a as ht}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as ct}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import{v as dt}from"./useAutoSizeLabelsInsideViewbox-BhzfwQ_k-BVRzd4un.js";import{J as gt}from"./themes-AUNCOb2G-RAhReTPj.js";import yt from"./Title-BWp-37K_-BMUMQpSO.js";import mt from"./img-BecE5qXd-CsL1o-EN.js";import"./alert-l5XlVwCh.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";const ft=["id"],pt={key:1,ref:"noTitle",class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},kt=["xmlns","viewBox"],bt=["width","height"],xt=["id"],wt=["x","y","width","height","rx","ry"],$t=["id"],_t=["stop-color"],At=["stop-color"],Ot=["stop-color"],Ct=["clip-path"],It=["x","y","height","width"],Ft=["x","y","height","width","fill"],Pt=["x1","x2","y1","y2","stroke-width","stroke"],St=["x1","x2","y1","y2","stroke-width","stroke"],Mt=["x1","x2","y1","y2","stroke-width","stroke"],Tt=["x1","x2","y1","y2","stroke-width","stroke"],zt=["x1","x2","y1","y2","stroke-width","stroke"],Et=["x1","x2","y1","y2","stroke-width","stroke"],Rt=["x1","x2","y1","y2","stroke-width","stroke"],Wt=["x1","x2","y1","y2","stroke-width","stroke"],Ut=["x","y","height","width"],Yt={key:1},Lt=["x","y","height"],qt=["y","x","fill","font-size","font-weight"],Vt={key:4,class:"vue-data-ui-watermark"},Nt={__name:"vue-ui-thermometer",props:{dataset:{type:Object,default(){return{}}},config:{type:Object,default(){return{}}}},setup(I,{expose:pe}){Le(a=>({v37fa8dda:Fe.value,ee141c4a:Ie.value,e9077cf0:Ce.value}));const ke=j(()=>J(()=>import("./PackageVersion-TgflyMpU-q2MkeeNq.js"),__vite__mapDeps([0,1,2]),import.meta.url)),be=j(()=>J(()=>import("./PenAndPaper-DSvu9dwa-B6YjX2xm.js"),__vite__mapDeps([3,1,2,4,5,6,7,8]),import.meta.url)),xe=j(()=>J(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([9,1,2,8,4,5,6,10,11]),import.meta.url)),{vue_ui_thermometer:we}=st(),f=I,p=c(je()),k=c(null),Q=c(0),K=c(0),X=c(null),Z=c(null),x=c(null),F=c(null),$e=h(()=>!!f.dataset&&Object.keys(f.dataset).length);qe(()=>{ae()});const e=c(G()),_e=c(e.value.style.chart.thermometer.width),q=c(e.value.style.chart.height),V=c(e.value.style.chart.width),{loading:ee,FINAL_DATASET:v}=ut({...Ve(f),FINAL_CONFIG:e,prepareConfig:G,skeletonDataset:{value:0,from:-100,to:100,steps:20,colors:{from:"#A1A1A1",to:"#CACACA"}},skeletonConfig:Je({defaultConfig:e.value,userConfig:{userOptions:{show:!1},style:{chart:{animation:{use:!1},backgroundColor:"#99999930",graduations:{stroke:"#6A6A6A"}}}}})}),te=h(()=>!!e.value.debug);function ae(){if(Qe(f.dataset)?me({componentName:"VueUiThermometer",type:"dataset",debug:te.value}):Ke({datasetObject:f.dataset,requiredAttributes:["value","from","to"]}).forEach(a=>{me({componentName:"VueUiThermometer",type:"datasetAttribute",property:a,debug:te.value})}),e.value.responsive){const a=ot(()=>{const{width:o,height:t}=rt({chart:k.value,title:e.value.style.title.text?X.value:null,source:Z.value});requestAnimationFrame(()=>{q.value=Math.max(.1,t-12),V.value=o,ce()})});x.value&&(F.value&&x.value.unobserve(F.value),x.value.disconnect()),x.value=new ResizeObserver(a),F.value=k.value,x.value.observe(F.value)}ce()}const{userOptionsVisible:N,setUserOptionsVisibility:le,keepUserOptionState:oe}=ht({config:e.value}),{svgRef:P}=ct({config:e.value.style.title});function G(){const a=fe({userConfig:f.config,defaultConfig:we});return a.theme?{...fe({userConfig:gt.vue_ui_thermometer[a.theme]||f.config,defaultConfig:a}),customPalette:Xe[a.theme]||C}:a}Ne(()=>f.config,a=>{e.value=G(),N.value=!e.value.userOptions.showOnChartHover,_e.value=e.value.style.chart.thermometer.width,q.value=e.value.style.chart.height,V.value=e.value.style.chart.width,ae(),K.value+=1},{deep:!0});const{isPrinting:re,isImaging:se,generatePdf:ue,generateImage:ie}=nt({elementId:"thermometer__".concat(p.value),fileName:e.value.style.title.text||"vue-ui-thermometer",options:e.value.userOptions.print}),Ae=h(()=>e.value.userOptions.show&&!e.value.style.title.text),S=h(()=>Ze(e.value.customPalette)),g=h(()=>v.value.steps||10);function M(a,o,t){const s=[],b=ne(a),_=ne(o);for(let A=0;A<t;A++){const Re=H(b.red,_.red,A,t),We=H(b.green,_.green,A,t),Ue=H(b.blue,_.blue,A,t),Ye="#".concat(B(Re)).concat(B(We)).concat(B(Ue));s.push(Ye)}return s}function ne(a){const o=a.slice(1);return{red:parseInt(o.slice(0,2),16),green:parseInt(o.slice(2,4),16),blue:parseInt(o.slice(4,6),16)}}function H(a,o,t,s){return Math.round(a+(o-a)*t/s)}function B(a){return a.toString(16).padStart(2,"0")}const l=h(()=>{const a=Math.max(.1,V.value),o=Math.max(.1,q.value),t=e.value.style.chart.padding;return{width:a,left:a/2-e.value.style.chart.thermometer.width/2,right:a/2+e.value.style.chart.thermometer.width/2,top:t.top,bottom:o-t.bottom-t.top,height:o,thermoHeight:o-t.top-t.bottom,thermoWidth:e.value.style.chart.thermometer.width}}),Oe=h(()=>l.value),T=h(()=>{const a=m(v.value.from)<0?Math.abs(m(v.value.from)):m(v.value.from),o=m(v.value.to)<0?Math.abs(m(v.value.to)):m(v.value.to);let t=0;return m(v.value.to)>0?t=a+o:a>o?t=a-o:t=o-a,(1-(Math.abs(m(v.value.from))+m(v.value.value))/t)*l.value.thermoHeight}),Ce=h(()=>"".concat(T.value,"px")),Ie=h(()=>"".concat(l.value.thermoHeight,"px")),Fe=h(()=>"".concat(e.value.style.chart.animation.speedMs,"ms")),Pe=h(()=>{if(v.value.colors){if(!v.value.colors.from)return M(S.value[0]||C[0],L(v.value.colors.to),g.value||10);if(!v.value.colors.to)return M(L(v.value.colors.from),S.value[1]||C[1],g.value||10)}else return M(S.value[1]||C[1],S.value[0]||C[0],g.value||10);return M(L(v.value.colors.from),L(v.value.colors.to),g.value||10)}),ve=h(()=>{const a=[];let o=0;const t=l.value.thermoHeight;for(let s=0;s<t-1;s+=t/g.value)a.push({x:l.value.left,y:l.value.top+s,qYLess:l.value.top+s+t/g.value/4,halfY:l.value.top+s+t/g.value/2,qYMore:l.value.top+s+t/g.value/4*3,color:Pe.value[o],height:Math.max(.1,t/g.value)}),o+=1;return a}),w=c(!1);function he(a){w.value=a,Q.value+=1}const z=c(!1);function D(){z.value=!z.value}async function Se({scale:a=2}={}){if(!k.value)return;const{width:o,height:t}=k.value.getBoundingClientRect(),s=o/t,{imageUri:b,base64:_}=await mt({domElement:k.value,base64:!0,img:!0,scale:a});return{imageUri:b,base64:_,title:e.value.style.title.text,width:o,height:t,aspectRatio:s}}const $=h({get:()=>e.value.style.chart.label.fontSize,set:a=>a}),{autoSizeLabels:ce}=dt({svgRef:P,fontSize:e.value.style.chart.label.fontSize,minFontSize:e.value.style.chart.label.minFontSize,sizeRef:$,labelClass:".vue-ui-thermometer-label"}),Me=h(()=>e.value.style.chart.backgroundColor),Te=h(()=>e.value.style.title),{exportSvg:ze,getSvg:Ee}=vt({svg:P,title:Te,backgroundColor:Me});async function de({isCb:a}){if(a){const{blob:o,url:t,text:s,dataUrl:b}=await Ee();e.value.userOptions.callbacks.svg({blob:o,url:t,text:s,dataUrl:b})}else ze()}return pe({getImage:Se,generatePdf:ue,generateImage:ie,generateSvg:de,toggleAnnotator:D,toggleFullscreen:he}),(a,o)=>(r(),u("div",{ref_key:"thermoChart",ref:k,class:U("vue-data-ui-component vue-ui-thermometer ".concat(w.value?"vue-data-ui-wrapper-fullscreen":"")),style:ge("width:100%;background:".concat(e.value.style.chart.backgroundColor,";color:").concat(e.value.style.chart.color,";font-family:").concat(e.value.style.fontFamily)),id:"thermometer__".concat(p.value),onMouseenter:o[0]||(o[0]=()=>i(le)(!0)),onMouseleave:o[1]||(o[1]=()=>i(le)(!1))},[e.value.userOptions.buttons.annotator?(r(),E(i(be),{key:0,svgRef:i(P),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:z.value,onClose:D},null,8,["svgRef","backgroundColor","color","active"])):n("",!0),Ae.value?(r(),u("div",pt,null,512)):n("",!0),e.value.style.title.text?(r(),u("div",{key:2,ref_key:"chartTitle",ref:X,style:"width:100%"},[(r(),E(yt,{key:"title_".concat(K.value),config:{title:{cy:"thermometer-div-title",...e.value.style.title},subtitle:{cy:"thermometer-div-subtitle",...e.value.style.title.subtitle}}},null,8,["config"]))],512)):n("",!0),e.value.userOptions.show&&$e.value&&(i(oe)||i(N))?(r(),E(i(xe),{ref:"details",key:"user_options_".concat(Q.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isImaging:i(se),isPrinting:i(re),uid:p.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasFullscreen:e.value.userOptions.buttons.fullscreen,hasXls:!1,isFullscreen:w.value,titles:{...e.value.userOptions.buttonTitles},chartElement:k.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:z.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,onToggleFullscreen:he,onGeneratePdf:i(ue),onGenerateImage:i(ie),onGenerateSvg:de,onToggleAnnotator:D,style:ge({visibility:i(oe)?i(N)?"visible":"hidden":"visible"})},Ge({_:2},[a.$slots.menuIcon?{name:"menuIcon",fn:O(({isOpen:t,color:s})=>[y(a.$slots,"menuIcon",R(W({isOpen:t,color:s})),void 0,!0)]),key:"0"}:void 0,a.$slots.optionPdf?{name:"optionPdf",fn:O(()=>[y(a.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:O(()=>[y(a.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:O(({toggleFullscreen:t,isFullscreen:s})=>[y(a.$slots,"optionFullscreen",R(W({toggleFullscreen:t,isFullscreen:s})),void 0,!0)]),key:"3"}:void 0,a.$slots.optionAnnotator?{name:"optionAnnotator",fn:O(({toggleAnnotator:t,isAnnotator:s})=>[y(a.$slots,"optionAnnotator",R(W({toggleAnnotator:t,isAnnotator:s})),void 0,!0)]),key:"4"}:void 0]),1032,["backgroundColor","color","isImaging","isPrinting","uid","hasPdf","hasImg","hasSvg","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","onGeneratePdf","onGenerateImage","style"])):n("",!0),(r(),u("svg",{ref_key:"svgRef",ref:P,xmlns:i(et),class:U({"vue-data-ui-fullscreen--on":w.value,"vue-data-ui-fulscreen--off":!w.value}),width:"100%",viewBox:"0 0 ".concat(l.value.width," ").concat(l.value.height),style:"background:transparent"},[He(i(ke)),a.$slots["chart-background"]?(r(),u("foreignObject",{key:0,x:0,y:0,width:l.value.width,height:l.value.height,style:{pointerEvents:"none"}},[y(a.$slots,"chart-background",{},void 0,!0)],8,bt)):n("",!0),d("defs",null,[d("clipPath",{id:"vueUiPill-".concat(p.value),clipPathUnits:"userSpaceOnUse"},[d("rect",{x:l.value.left,y:l.value.top,width:l.value.thermoWidth,height:l.value.thermoHeight,rx:l.value.thermoWidth/2,ry:l.value.thermoWidth/2},null,8,wt)],8,xt),(r(!0),u(Y,null,ye(ve.value,(t,s)=>(r(),u("linearGradient",{id:"vueUiThermometerGradient_".concat(s,"_").concat(p.value),x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[d("stop",{offset:"0%","stop-color":t.color},null,8,_t),d("stop",{offset:"50%","stop-color":i(tt)(t.color,100-e.value.style.chart.graduations.gradient.intensity)},null,8,At),d("stop",{offset:"100%","stop-color":t.color},null,8,Ot)],8,$t))),256))]),d("g",{"clip-path":"url(#vueUiPill-".concat(p.value,")")},[d("rect",{x:l.value.left,y:l.value.top,height:l.value.thermoHeight,width:l.value.thermoWidth,fill:"#FFFFFF"},null,8,It),(r(!0),u(Y,null,ye(ve.value,(t,s)=>(r(),u("g",{key:"graduation_".concat(s)},[d("rect",{x:t.x,y:t.y,height:t.height,width:l.value.thermoWidth,fill:e.value.style.chart.graduations.gradient.show?"url(#vueUiThermometerGradient_".concat(s,"_").concat(p.value,")"):t.color,"shape-rendering":"crispEdges"},null,8,Ft),e.value.style.chart.graduations.show&&["both","left"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:0,x1:t.x,x2:t.x+10,y1:t.y,y2:t.y,"stroke-width":e.value.style.chart.graduations.strokeWidth,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,Pt)):n("",!0),e.value.style.chart.graduations.showIntermediate?(r(),u(Y,{key:1},[e.value.style.chart.graduations.show&&["both","left"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:0,x1:t.x,x2:t.x+5,y1:t.halfY,y2:t.halfY,"stroke-width":e.value.style.chart.graduations.strokeWidth/2,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,St)):n("",!0),e.value.style.chart.graduations.show&&["both","left"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:1,x1:t.x,x2:t.x+2.5,y1:t.qYLess,y2:t.qYLess,"stroke-width":e.value.style.chart.graduations.strokeWidth/2,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,Mt)):n("",!0),e.value.style.chart.graduations.show&&["both","left"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:2,x1:t.x,x2:t.x+2.5,y1:t.qYMore,y2:t.qYMore,"stroke-width":e.value.style.chart.graduations.strokeWidth/2,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,Tt)):n("",!0)],64)):n("",!0),e.value.style.chart.graduations.show&&["both","right"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:2,x1:l.value.right,x2:l.value.right-10,y1:t.y,y2:t.y,"stroke-width":e.value.style.chart.graduations.strokeWidth,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,zt)):n("",!0),e.value.style.chart.graduations.showIntermediate?(r(),u(Y,{key:3},[e.value.style.chart.graduations.show&&["both","right"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:0,x1:l.value.right,x2:l.value.right-5,y1:t.halfY,y2:t.halfY,"stroke-width":e.value.style.chart.graduations.strokeWidth/2,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,Et)):n("",!0),e.value.style.chart.graduations.show&&["both","right"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:1,x1:l.value.right,x2:l.value.right-2.5,y1:t.qYLess,y2:t.qYLess,"stroke-width":e.value.style.chart.graduations.strokeWidth/2,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,Rt)):n("",!0),e.value.style.chart.graduations.show&&["both","right"].includes(e.value.style.chart.graduations.sides)?(r(),u("line",{key:2,x1:l.value.right,x2:l.value.right-2.5,y1:t.qYMore,y2:t.qYMore,"stroke-width":e.value.style.chart.graduations.strokeWidth/2,stroke:e.value.style.chart.graduations.stroke,"stroke-linecap":"round"},null,8,Wt)):n("",!0)],64)):n("",!0)]))),128)),d("rect",{class:U({"vue-ui-thermometer-temperature":e.value.style.chart.animation.use}),x:l.value.left,y:l.value.top,height:T.value,width:l.value.thermoWidth,fill:"#FFFFFF66"},null,10,Ut)],8,Ct),e.value.style.chart.label.show?(r(),u("g",Yt,[i(ee)?(r(),u("rect",{key:0,x:l.value.left-60,y:T.value+l.value.top-$.value/2,width:50,height:$.value,fill:"#6A6A6A40",rx:"3"},null,8,Lt)):(r(),u("text",{key:1,class:U({"vue-ui-thermometer-temperature-value":e.value.style.chart.animation.use,"vue-ui-thermometer-label":!0}),y:T.value+l.value.top+$.value/3,x:l.value.left-10,"text-anchor":"end",fill:e.value.style.chart.label.color,"font-size":$.value,"font-weight":e.value.style.chart.label.bold?"bold":"normal"},Be(i(at)(e.value.style.chart.label.formatter,I.dataset.value,i(lt)({p:e.value.style.chart.label.prefix,v:I.dataset.value,s:e.value.style.chart.label.suffix,r:e.value.style.chart.label.rounding}),{datapoint:I.dataset})),11,qt))])):n("",!0),y(a.$slots,"svg",{svg:Oe.value},void 0,!0)],10,kt)),a.$slots.watermark?(r(),u("div",Vt,[y(a.$slots,"watermark",R(W({isPrinting:i(re)||i(se)})),void 0,!0)])):n("",!0),a.$slots.source?(r(),u("div",{key:5,ref_key:"source",ref:Z,dir:"auto"},[y(a.$slots,"source",{},void 0,!0)],512)):n("",!0),i(ee)?(r(),E(it,{key:6})):n("",!0)],46,ft))}},ra=De(Nt,[["__scopeId","data-v-181d4751"]]);export{ra as default};
