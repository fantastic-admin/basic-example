
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PenAndPaper--ADXtx65-ugytqLuo.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./vue-data-ui-8Gmf-dDN.js","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"])))=>i.map(i=>d[i]);
import{J as g,e as h,a8 as je,K as ve,E as Ne,c as s,o as i,z as T,A as b,h as y,r as u,j as k,k as C,u as r,c1 as V,c3 as He,O as U,n as G,g as Le,F as he,R as de,t as Ve,c4 as X}from"./index-CJB5jCfL.js";import{s as Ue,J as Ge,x as Xe,c as Je,E as qe,A as Ye,X as ge,d as Ke,L as Qe,F as We}from"./vue-data-ui-8Gmf-dDN.js";import{E as Ze,M as et}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{s as tt,i as J}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as at,j as ot}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{m as lt}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{O as rt}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import{i as nt}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as it}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as st}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import ut from"./Title-D0nD-PMs-DAiwElB_.js";import ct from"./img-CqYIrJ8I-E54QgU9o.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";const ye={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",layout:{inactiveColor:"#4A4A4A"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}}}}},fe={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",layout:{crescendo:!1,inactiveColor:"#5D403760",activeColor:"#D32F2F",ticks:{gradient:{shiftHueIntensity:0}}},title:{color:"#424242",subtitle:{color:"#757575"}}}}},pe={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",layout:{crescendo:!1,inactiveColor:"#5D403760",activeColor:"#D32F2F",ticks:{gradient:{shiftHueIntensity:0}}},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}}}}},me={style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",layout:{crescendo:!1,inactiveColor:"#333333",activeColor:"#66CC66",ticks:{gradient:{shiftHueIntensity:15}}},title:{color:"#66CC66",subtitle:{color:"#99AA99"}}}}},be={style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",layout:{crescendo:!0,curved:!0,curveAngleX:5,curveAngleY:5,inactiveColor:"#F7EDE2",activeColor:"#B1A7AD",ticks:{gradient:{shiftHueIntensity:15}}},title:{color:"#8A9892",subtitle:{color:"#99AA99"}}}}},ke={style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",layout:{crescendo:!1,inactiveColor:"#BBCBC7",activeColor:"#6C94A0",ticks:{gradient:{shiftHueIntensity:10}}},title:{color:"#50606C",subtitle:{color:"#718890"}}}}},Ce={default:{},dark:ye,celebration:fe,celebrationNight:pe,hack:me,zen:be,concrete:ke},Rt=Object.freeze(Object.defineProperty({__proto__:null,celebration:fe,celebrationNight:pe,concrete:ke,dark:ye,default:Ce,hack:me,zen:be},Symbol.toStringTag,{value:"Module"})),vt=["id"],ht=["xmlns","viewBox"],dt=["width","height"],gt={key:1},yt=["d","stroke-width","stroke"],ft={key:2},pt=["x1","y1","x2","y2","stroke-width","stroke"],mt={key:3},bt=["x","y","height"],kt=["x","y","font-size","fill","font-weight","text-anchor"],Ct={key:4,class:"vue-data-ui-watermark"},At={__name:"vue-ui-tiremarks",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},setup(Ae,{expose:$e}){const we=V(()=>X(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),xe=V(()=>X(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([8,1,2,7,3,4,5,9,10]),import.meta.url)),_e=V(()=>X(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([11,1,2]),import.meta.url)),{vue_ui_tiremarks:Oe}=tt(),{isThemeValid:Fe,warnInvalidTheme:Ie}=nt(),A=Ae,Pe=g(()=>!!A.dataset&&Object.keys(A.dataset).length),M=h(Ge()),x=h(null),Se=h(null),q=h(null),Y=h(null),K=h(0),Q=h(0),_=h(null),I=h(null),e=h(H()),{loading:W,FINAL_DATASET:R}=at({...je(A),FINAL_CONFIG:e,prepareConfig:H,skeletonDataset:{percentage:50},skeletonConfig:Xe({defaultConfig:e.value,userConfig:{userOptions:{show:!1},style:{chart:{backgroundColor:"#99999930",animation:{use:!1},layout:{activeColor:"#6A6A6A80",inactiveColor:"#CACACA80",ticks:{gradient:{show:!1}}}}}}})}),{userOptionsVisible:j,setUserOptionsVisibility:Z,keepUserOptionState:ee}=it({config:e.value}),{svgRef:N}=st({config:e.value.style.chart.title});function H(){const t=J({userConfig:A.config,defaultConfig:Oe}),o=t.theme;if(!o)return t;if(!Fe.value(t))return Ie(t),t;const a=J({userConfig:Ce[o]||A.config,defaultConfig:t});return J({userConfig:A.config,defaultConfig:a})}ve(()=>A.config,t=>{e.value=H(),j.value=!e.value.userOptions.showOnChartHover,z.value=e.value.style.chart.width,E.value=e.value.style.chart.height,ne(),Q.value+=1},{deep:!0});const{isPrinting:te,isImaging:ae,generatePdf:oe,generateImage:le}=lt({elementId:M.value,fileName:e.value.style.chart.title.text||"vue-ui-tiremarks",options:e.value.userOptions.print}),ze=g(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),c=h(e.value.style.chart.animation.use?0:Je(R.value.percentage));ve(()=>R.value,t=>{e.value.style.chart.animation.use?re(t.percentage):c.value=t.percentage||0},{deep:!0}),Ne(()=>{ne()});function re(t){let o=e.value.style.chart.animation.speed;const a=Math.abs(t-c.value)/(o*120);function l(){c.value<t?c.value=Math.min(c.value+a,t):c.value>t&&(c.value=Math.max(c.value-a,t)),c.value!==t&&requestAnimationFrame(l)}l()}const Ee=g(()=>!!e.value.debug);function ne(){if(qe(A.dataset)&&Ye({componentName:"VueUiTiremarks",type:"dataset",debug:Ee.value}),e.value.responsive){const t=Ze(()=>{const{width:o,height:a}=et({chart:x.value,title:e.value.style.chart.title.text?q.value:null,source:Y.value});requestAnimationFrame(()=>{z.value=Math.max(.1,o),E.value=Math.max(.1,a-12)})});_.value&&(I.value&&_.value.unobserve(I.value),_.value.disconnect()),_.value=new ResizeObserver(t),I.value=x.value.parentNode,_.value.observe(I.value)}re(R.value.percentage||0)}const P=g(()=>e.value.style.chart.layout.display==="vertical"),v=g(()=>{const t=e.value.style.chart.percentage.show,o={top:t?48:12,left:t?64:16,right:t?64:16,bottom:t?48:12};return P.value?{top:e.value.style.chart.percentage.verticalPosition==="top"?o.top:3,left:3,right:3,bottom:e.value.style.chart.percentage.verticalPosition==="bottom"?o.bottom:3}:{top:0,bottom:0,left:e.value.style.chart.percentage.horizontalPosition==="left"?o.left:16,right:e.value.style.chart.percentage.horizontalPosition==="right"?o.right:10}}),S=g(()=>Object.values(v.value).reduce((t,o)=>t+o,0)),z=h(e.value.style.chart.width),E=h(e.value.style.chart.height),n=g(()=>({height:E.value,width:z.value})),ie=g(()=>({horizontal:{x:p.value.x+(e.value.style.chart.percentage.horizontalPosition==="left"?6:3),y:n.value.height/2-p.value.fontSize/2},vertical:{x:n.value.width/2-20,y:p.value.y-p.value.fontSize/2}})[e.value.style.chart.layout.display]),f=g(()=>P.value?{mark:(n.value.height-S.value)/100*.5,space:(n.value.height-S.value)/100*.5}:{mark:(n.value.width-S.value)/100*.5,space:(n.value.width-S.value)/100*.5}),se=g(()=>{const t=[];for(let o=0;o<100;o+=1){const a=e.value.style.chart.layout.ticks.gradient.show?ge(e.value.style.chart.layout.activeColor,o/100*(e.value.style.chart.layout.ticks.gradient.shiftHueIntensity/100)):e.value.style.chart.layout.activeColor;if(P.value){const l=e.value.style.chart.layout.crescendo?(100-o)*(n.value.width-v.value.left-v.value.right)/100/3:0,d=v.value.left+4+l,m=n.value.width-v.value.right-4-l,$=n.value.height-v.value.bottom-o*f.value.mark-o*f.value.space-f.value.mark,w=n.value.height-v.value.bottom-o*f.value.mark-o*f.value.space-f.value.mark,O=(m-d)/e.value.style.chart.layout.curveAngleX,F=e.value.style.chart.layout.curveAngleY*((1+o)/100);t.push({x1:d,x2:m,y1:$,y2:w,curve:"M ".concat(d," ").concat($," C ").concat(d+O," ").concat($-F,", ").concat(m-O," ").concat(w-F,", ").concat(m," ").concat(w),color:a})}else{const l=e.value.style.chart.layout.crescendo?(100-o)*(n.value.height-v.value.top-v.value.bottom)/100/3:0,d=v.value.left+o*f.value.mark+o*f.value.space-f.value.mark,m=d,$=v.value.top+4+l,w=n.value.height-v.value.bottom-4-l,O=e.value.style.chart.layout.curveAngleY*((1+o)/100),F=(w-$)/e.value.style.chart.layout.curveAngleX;t.push({x1:d,x2:m,y1:$,y2:w,curve:"M ".concat(d," ").concat($," C ").concat(d+O," ").concat($+F,", ").concat(m+O," ").concat(w-F,", ").concat(m," ").concat(w),color:a})}}return t}),p=g(()=>{let t,o,a;const l=e.value.style.chart.percentage.fontSize/3;return P.value?e.value.style.chart.percentage.verticalPosition==="top"?(t=n.value.width/2,o=v.value.top/2,a="middle"):e.value.style.chart.percentage.verticalPosition==="bottom"&&(t=n.value.width/2,o=n.value.height-v.value.bottom/2+l,a="middle"):e.value.style.chart.percentage.horizontalPosition==="left"?(t=4,o=n.value.height/2+l,a="start"):e.value.style.chart.percentage.horizontalPosition==="right"&&(t=n.value.width-v.value.right+8,o=n.value.height/2+l,a="start"),{x:t,y:o,textAnchor:a,bold:e.value.style.chart.percentage.bold,fontSize:e.value.style.chart.percentage.fontSize,fill:e.value.style.chart.percentage.color}}),D=h(!1);function ue(t){D.value=t,K.value+=1}const B=h(!1);function L(){B.value=!B.value}async function De({scale:t=2}={}){if(!x.value)return;const{width:o,height:a}=x.value.getBoundingClientRect(),l=o/a,{imageUri:d,base64:m}=await ct({domElement:x.value,base64:!0,img:!0,scale:t});return{imageUri:d,base64:m,title:e.value.style.chart.title.text,width:o,height:a,aspectRatio:l}}const Be=g(()=>e.value.style.chart.backgroundColor),Te=g(()=>e.value.style.chart.title),{exportSvg:Me,getSvg:Re}=rt({svg:N,title:Te,backgroundColor:Be});async function ce({isCb:t}){if(t){const{blob:o,url:a,text:l,dataUrl:d}=await Re();e.value.userOptions.callbacks.svg({blob:o,url:a,text:l,dataUrl:d})}else Me()}return $e({getImage:De,generatePdf:oe,generateImage:le,generateSvg:ce,toggleAnnotator:L,toggleFullscreen:ue}),(t,o)=>(i(),s("div",{ref_key:"tiremarksChart",ref:x,class:G("vue-data-ui-component vue-ui-tiremarks ".concat(e.value.useCssAnimation?"":"vue-ui-dna")),style:U("font-family:".concat(e.value.style.fontFamily,";width:100%; text-align:center;background:").concat(e.value.style.chart.backgroundColor)),id:M.value,onMouseenter:o[0]||(o[0]=()=>r(Z)(!0)),onMouseleave:o[1]||(o[1]=()=>r(Z)(!1))},[e.value.userOptions.buttons.annotator?(i(),T(r(we),{key:0,svgRef:r(N),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:B.value,onClose:L},{"annotator-action-close":y(()=>[u(t.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":y(({color:a})=>[u(t.$slots,"annotator-action-color",k(C({color:a})),void 0,!0)]),"annotator-action-draw":y(({mode:a})=>[u(t.$slots,"annotator-action-draw",k(C({mode:a})),void 0,!0)]),"annotator-action-undo":y(({disabled:a})=>[u(t.$slots,"annotator-action-undo",k(C({disabled:a})),void 0,!0)]),"annotator-action-redo":y(({disabled:a})=>[u(t.$slots,"annotator-action-redo",k(C({disabled:a})),void 0,!0)]),"annotator-action-delete":y(({disabled:a})=>[u(t.$slots,"annotator-action-delete",k(C({disabled:a})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):b("",!0),ze.value?(i(),s("div",{key:1,ref_key:"noTitle",ref:Se,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):b("",!0),e.value.style.chart.title.text?(i(),s("div",{key:2,ref_key:"chartTitle",ref:q,style:"width:100%;background:transparent;padding-bottom:12px"},[(i(),T(ut,{key:"title_".concat(Q.value),config:{title:{cy:"wheel-title",...e.value.style.chart.title},subtitle:{cy:"wheel-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],512)):b("",!0),e.value.userOptions.show&&Pe.value&&(r(ee)||r(j))?(i(),T(r(xe),{ref:"details",key:"user_options_".concat(K.value),backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:r(te),isImaging:r(ae),uid:M.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasSvg:e.value.userOptions.buttons.svg,hasFullscreen:e.value.userOptions.buttons.fullscreen,hasXls:!1,isFullscreen:D.value,titles:{...e.value.userOptions.buttonTitles},chartElement:x.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:B.value,callbacks:e.value.userOptions.callbacks,printScale:e.value.userOptions.print.scale,onToggleFullscreen:ue,onGeneratePdf:r(oe),onGenerateImage:r(le),onGenerateSvg:ce,onToggleAnnotator:L,style:U({visibility:r(ee)?r(j)?"visible":"hidden":"visible"})},He({_:2},[t.$slots.menuIcon?{name:"menuIcon",fn:y(({isOpen:a,color:l})=>[u(t.$slots,"menuIcon",k(C({isOpen:a,color:l})),void 0,!0)]),key:"0"}:void 0,t.$slots.optionPdf?{name:"optionPdf",fn:y(()=>[u(t.$slots,"optionPdf",{},void 0,!0)]),key:"1"}:void 0,t.$slots.optionImg?{name:"optionImg",fn:y(()=>[u(t.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,t.$slots.optionSvg?{name:"optionSvg",fn:y(()=>[u(t.$slots,"optionSvg",{},void 0,!0)]),key:"3"}:void 0,t.$slots.optionFullscreen?{name:"optionFullscreen",fn:y(({toggleFullscreen:a,isFullscreen:l})=>[u(t.$slots,"optionFullscreen",k(C({toggleFullscreen:a,isFullscreen:l})),void 0,!0)]),key:"4"}:void 0,t.$slots.optionAnnotator?{name:"optionAnnotator",fn:y(({toggleAnnotator:a,isAnnotator:l})=>[u(t.$slots,"optionAnnotator",k(C({toggleAnnotator:a,isAnnotator:l})),void 0,!0)]),key:"5"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasSvg","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","onGeneratePdf","onGenerateImage","style"])):b("",!0),(i(),s("svg",{ref_key:"svgRef",ref:N,xmlns:r(Ke),class:G({"vue-data-ui-fullscreen--on":D.value,"vue-data-ui-fulscreen--off":!D.value}),viewBox:"0 0 ".concat(z.value," ").concat(E.value),style:U("max-width:100%; overflow: visible; background:transparent;color:".concat(e.value.style.chart.color))},[Le(r(_e)),t.$slots["chart-background"]?(i(),s("foreignObject",{key:0,x:0,y:0,width:n.value.width,height:n.value.height,style:{pointerEvents:"none"}},[u(t.$slots,"chart-background",{},void 0,!0)],8,dt)):b("",!0),e.value.style.chart.layout.curved?(i(),s("g",gt,[(i(!0),s(he,null,de(se.value,(a,l)=>(i(),s("path",{d:a.curve,"stroke-width":f.value.mark,stroke:c.value>=l?a.color:e.value.style.chart.layout.inactiveColor,"stroke-linecap":"round",fill:"none",class:G({"vue-ui-tick-animated":e.value.style.chart.animation.use&&l<=c.value})},null,10,yt))),256))])):(i(),s("g",ft,[(i(!0),s(he,null,de(se.value,(a,l)=>(i(),s("line",{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,"stroke-width":f.value.mark,stroke:c.value>=l?a.color:e.value.style.chart.layout.inactiveColor,"stroke-linecap":"round"},null,8,pt))),256))])),e.value.style.chart.percentage.show?(i(),s("g",mt,[r(W)?(i(),s("rect",{key:0,x:ie.value.x,y:ie.value.y,width:40,height:p.value.fontSize,fill:"#6A6A6A80",rx:3},null,8,bt)):(i(),s("text",{key:1,x:p.value.x,y:p.value.y,"font-size":p.value.fontSize,fill:e.value.style.chart.layout.ticks.gradient.show&&e.value.style.chart.percentage.useGradientColor?r(ge)(e.value.style.chart.layout.activeColor,c.value/100*(e.value.style.chart.layout.ticks.gradient.shiftHueIntensity/100)):e.value.style.chart.percentage.color,"font-weight":p.value.bold?"bold":"normal","text-anchor":p.value.textAnchor},Ve(r(Qe)(e.value.style.chart.percentage.formatter,c.value,r(We)({v:c.value,s:"%",r:e.value.style.chart.percentage.rounding}))),9,kt))])):b("",!0),u(t.$slots,"svg",{svg:n.value},void 0,!0)],14,ht)),t.$slots.watermark?(i(),s("div",Ct,[u(t.$slots,"watermark",k(C({isPrinting:r(te)||r(ae)})),void 0,!0)])):b("",!0),t.$slots.source?(i(),s("div",{key:5,ref_key:"source",ref:Y,dir:"auto"},[u(t.$slots,"source",{},void 0,!0)],512)):b("",!0),r(W)?(i(),T(ot,{key:6})):b("",!0)],46,vt))}},$t=Ue(At,[["__scopeId","data-v-f47e75c9"]]),jt=Object.freeze(Object.defineProperty({__proto__:null,default:$t},Symbol.toStringTag,{value:"Module"}));export{Rt as a,jt as b,$t as v};
