
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DataTable-BfEbVwm4-B-GxLkq-.js","./index-CJB5jCfL.js","./index-D6D_bXIl.css","./Shape-12_eh8zD-Cy1mu6XW.js","./vue-data-ui-8Gmf-dDN.js","./alert-I_0TAljB.js","./vue-data-ui-C46fMXq5.css","./PenAndPaper--ADXtx65-ugytqLuo.js","./ColorPicker-BYn8PF2Z-DkxHqz9_.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js","./useNestedProp-DaR1dBmj-yWXLkJlG.js","./Tooltip-D0pGX8qz-BS2YwyOE.js","./UserOptions-Cy-iNhZU-CnpDVImt.js","./img-CqYIrJ8I-E54QgU9o.js","./dom-to-png-WXGPkYro-BQsfl1t5.js","./PackageVersion-By5ZZJ0U-Cc8IPeAX.js","./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"])))=>i.map(i=>d[i]);
import{ac as xo,E as Al,J as x,e as $,av as ye,a8 as wo,K as Oe,aw as Ao,c1 as Me,c as _,o as d,z as $e,A as P,f as H,g as ut,h as T,r as w,j as Q,k as X,u as y,O as be,c3 as $l,F as Ue,R as st,Y as _l,Z as Rt,l as it,t as ct,m as dt,n as Yt,bq as $o,N as _o,c4 as Ee,aa as To}from"./index-CJB5jCfL.js";import{s as Fo,J as vt,x as Oo,v as Mo,o as j,$ as Eo,E as Tl,A as Io,u as Ge,L as ht,F as qe,O as Fl,d as Ht,b as pt,m as gt,g as Ol,e as So,f as Bo,aq as ft,ar as jt,p as Do}from"./vue-data-ui-8Gmf-dDN.js";import{E as Po,M as No}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{s as Lo,i as Wt}from"./useNestedProp-DaR1dBmj-yWXLkJlG.js";import{T as Vo,j as zo}from"./BaseScanner-BMpwQAfz-mc47WWxo.js";import{m as Ro}from"./usePrinter-ChVMpU2f-B27PF0nl.js";import{i as Yo}from"./useThemeCheck-DGJ31Vi5-GRZcYzX8.js";import{a as Ho}from"./useUserOptionState-BIvW1Kz7-D70wY835.js";import{o as jo}from"./useChartAccessibility-9icAAmYg-CuAxjhEs.js";import Wo from"./img-CqYIrJ8I-E54QgU9o.js";import Uo from"./Title-D0nD-PMs-DAiwElB_.js";import Go from"./Legend-D2xmnFPH-CItLelVI.js";import{O as qo}from"./useSvgExport-ByUukOZt-XO0OK7cR.js";import"./alert-I_0TAljB.js";import"./dom-to-png-WXGPkYro-BQsfl1t5.js";import"./Shape-12_eh8zD-Cy1mu6XW.js";function Ml(i,v){const c=i.length;if(c===0)throw new Error("Max aspect ratio cannot be computed: ".concat(i," is an empty array"));{let h=1/0,p=-1/0,g=0;for(let f=0;f<c;f+=1){const A=i[f].normalizedValue;A<h&&(h=A),A>p&&(p=A),g+=A}return Math.max(v**2*p/g**2,g**2/(v**2*h))}}function El(i){const{xOffset:v,yOffset:c,width:h,height:p}=i;return{x0:v,y0:c,x1:v+h,y1:c+p}}function Ko(i,v,c){if(i.length===0)return!0;{const h=i.concat(v),p=Ml(i,c),g=Ml(h,c);return p>=g}}function Jo(i){const v=[],c=i.length;for(let h=0;h<c;h+=1){const p=i[h],g=p.length;for(let f=0;f<g;f+=1)v.push(p[f])}return v}function Il(i,v){const c={...v,children:i};return Bl(c)}function Qo(i){return(i.x1-i.x0)*(i.y1-i.y0)}function Sl(i,v){const{width:c,height:h,xOffset:p,yOffset:g}=Ut(v),f=i.length,A=i.map(k=>k.normalizedValue||0).reduce((k,N)=>k+N,0),E=A/h,Z=A/c;let oe=p,ce=g;const W=[];if(c>=h){for(let k=0;k<f;k+=1){const N=i[k],de=ce+N.normalizedValue/E,me={x0:oe,y0:ce,x1:oe+E,y1:de},ve=Object.assign({},N,me);ce=de,W.push(ve)}return W}else{for(let k=0;k<f;k+=1){const N=i[k],de=oe+N.normalizedValue/Z,me={x0:oe,y0:ce,x1:de,y1:ce+Z},ve=Object.assign({},N,me);oe=de,W.push(ve)}return W}}function Xo(i){const v=Ut(i),c=v.width,h=v.height;return Math.min(c,h)}function Zo(i,v){const c=i.length,h=i.map(E=>{var Z;return(Z=E.value)!=null?Z:0}).reduce((E,Z)=>E+Z,0),p=v/h,g=[];let f,A;for(let E=0;E<c;E+=1)A=i[E],f=Object.assign({},A,{normalizedValue:A.value*(p||0)}),g.push(f);return g}function Ut(i){const{x0:v,y0:c,x1:h,y1:p}=i;return{xOffset:v,yOffset:c,width:h-v,height:p-c}}function ea(i,v,c,h){let p=i,g=v,f=c,A=h;for(;;){const E=p.length;if(E===0){const W=Sl(g,f);return A.concat(W)}const Z=Xo(f),oe=p[0],ce=p.slice(1,E);if(Ko(g,oe,Z)){const W=g.concat(oe);p=ce,g=W,f=f,A=A}else{const W=g.length;let k=0;for(let ve=0;ve<W;ve+=1)k+=g[ve].normalizedValue;const N=ta(f,k),de=Sl(g,f),me=A.concat(de);p=p,g=[],f=N,A=me}}}function Bl(i){if(typeof i.children>"u"||!i.children.length)return[i];{const v=Zo(i.children,Qo(i)),c=ea(v,[],i,[]),h=c.length,p=[];for(let g=0;g<h;g+=1)p.push(Bl(c[g]));return Jo(p)}}function ta(i,v){const{width:c,height:h,xOffset:p,yOffset:g}=Ut(i);if(c>=h){const f=v/h,A=c-f,E={xOffset:p+f,yOffset:g,width:A,height:h};return El(E)}else{const f=v/c,A=h-f,E={xOffset:p,yOffset:g+f,width:c,height:A};return El(E)}}const Dl={style:{chart:{backgroundColor:"#1A1A1A",color:"#CCCCCC",layout:{rects:{stroke:"#1A1A1A",selected:{stroke:"#5A5A5A"},group:{stroke:"#8A8A8A",label:{adaptColorToBackground:!1,color:"#CCCCCC"}}}},legend:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},title:{color:"#CCCCCC",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#1A1A1A",backgroundOpacity:70,color:"#CCCCCC",borderColor:"#5A5A5A"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#CCCCCC"},td:{backgroundColor:"#1A1A1A",color:"#CCCCCC"}}},Pl={style:{chart:{backgroundColor:"#FFF8E1",color:"#424242",layout:{rects:{stroke:"#FFF8E1",selected:{stroke:"#FFF8E1"},group:{stroke:"#424242",label:{adaptColorToBackground:!1,color:"#424242"}}}},legend:{backgroundColor:"#FFF8E1",color:"#424242"},title:{color:"#424242",subtitle:{color:"#757575"}},tooltip:{backgroundColor:"#FFECB3",backgroundOpacity:30,color:"#424242",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#FFF8E1",color:"#424242"},td:{backgroundColor:"#FFF8E1",color:"#424242"}}},Nl={style:{chart:{backgroundColor:"#1E1E1E",color:"#BDBDBD",layout:{rects:{stroke:"#1E1E1E",selected:{stroke:"#1E1E1E"},group:{stroke:"#8A8A8A",label:{adaptColorToBackground:!1,color:"#BDBDBD"}}}},legend:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},title:{color:"#FFF8E1",subtitle:{color:"#BDBDBD"}},tooltip:{backgroundColor:"#1E1E1E",backgroundOpacity:30,color:"#FFF8E1",borderColor:"#FF8A65"}}},table:{th:{backgroundColor:"#1E1E1E",color:"#BDBDBD"},td:{backgroundColor:"#1E1E1E",color:"#BDBDBD"}}},Ll={style:{chart:{backgroundColor:"#1A1A1A",color:"#99AA99",layout:{rects:{stroke:"#1A1A1A",selected:{stroke:"#1A1A1A"},group:{stroke:"#99AA99",label:{adaptColorToBackground:!1,color:"#99AA99"}}}},legend:{backgroundColor:"#1A1A1A",color:"#99AA99"},title:{color:"#66CC66",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#2A2F2A",color:"#AACCAA",borderColor:"#66CC66"}}},table:{th:{backgroundColor:"#1A1A1A",color:"#99AA99"},td:{backgroundColor:"#1A1A1A",color:"#AACCAA"}}},Vl={style:{chart:{backgroundColor:"#fbfafa",color:"#8A9892",layout:{rects:{stroke:"#fbfafa",strokeWidth:2,borderRadius:12,selected:{stroke:"#fbfafa"}}},legend:{backgroundColor:"#fbfafa",color:"#99AA99"},title:{color:"#8A9892",subtitle:{color:"#99AA99"}},tooltip:{backgroundColor:"#fbfafa",color:"#8A9892"}}},table:{th:{backgroundColor:"#fbfafa",color:"#8F837A"},td:{backgroundColor:"#fbfafa",color:"#8F837A"}}},zl={style:{chart:{backgroundColor:"#f6f6fb",color:"#50606C",layout:{rects:{stroke:"#1A1A1A",selected:{stroke:"#1A1A1A"},group:{stroke:"#50606C",label:{adaptColorToBackground:!1,color:"#50606C"}}}},legend:{backgroundColor:"#f6f6fb",color:"#61747E"},title:{color:"#50606C",subtitle:{color:"#718890"}},tooltip:{backgroundColor:"#f6f6fb",color:"#50606C"}}},table:{th:{backgroundColor:"#f6f6fb",color:"#50606C"},td:{backgroundColor:"#f6f6fb",color:"#50606C"}}},Rl={default:{},dark:Dl,celebration:Pl,celebrationNight:Nl,hack:Ll,zen:Vl,concrete:zl},Ya=Object.freeze(Object.defineProperty({__proto__:null,celebration:Pl,celebrationNight:Nl,concrete:zl,dark:Dl,default:Rl,hack:Ll,zen:Vl},Symbol.toStringTag,{value:"Module"})),la=["id"],oa=["id"],aa=["tabindex","onClick","onKeydown","data-last-crumb","onMouseenter","onFocus"],ra={class:"vue-ui-treemap-crumb-unit"},na={class:"vue-ui-treemap-crumb-unit-label"},ua={key:0,style:{width:"24px",display:"flex","align-items":"center"}},sa={key:0,class:"vue-ui-treemap-crumb-unit-arrow"},ia=["xmlns","viewBox"],ca={key:0},da=["id"],va=["stop-color"],ha=["stop-color"],pa=["x","y","height","width","fill","stroke","stroke-width"],ga=["width","height","x","y"],fa=["innerHTML"],ya=["x","y","height","width","fill","rx","stroke","stroke-width","onClick","onMouseenter","onMouseleave"],ba=["innerHTML"],ma=["x","y","height","width"],ka={key:5,class:"vue-data-ui-watermark"},Ca=["id"],xa=["onClick"],wa=["innerHTML"],Aa={__name:"vue-ui-treemap",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend","selectDatapoint"],setup(i,{expose:v,emit:c}){const h=Me(()=>Ee(()=>import("./DataTable-BfEbVwm4-B-GxLkq-.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),p=Me(()=>Ee(()=>import("./PenAndPaper--ADXtx65-ugytqLuo.js"),__vite__mapDeps([7,1,2,4,5,6,8,9]),import.meta.url)),g=Me(()=>Ee(()=>import("./vue-ui-accordion-DNRtKVZI-Cfsr7GT0.js"),__vite__mapDeps([10,1,2,4,5,6,11]),import.meta.url)),f=Me(()=>Ee(()=>import("./Tooltip-D0pGX8qz-BS2YwyOE.js"),__vite__mapDeps([12,4,1,2,5,6]),import.meta.url)),A=Me(()=>Ee(()=>import("./UserOptions-Cy-iNhZU-CnpDVImt.js"),__vite__mapDeps([13,1,2,9,4,5,6,14,15]),import.meta.url)),E=Me(()=>Ee(()=>import("./PackageVersion-By5ZZJ0U-Cc8IPeAX.js"),__vite__mapDeps([16,1,2]),import.meta.url)),Z=Me(()=>Ee(()=>import("./BaseDraggableDialog-BFDTrOH0-Bty23wRr.js"),__vite__mapDeps([17,1,2,4,5,6]),import.meta.url)),{vue_ui_treemap:oe}=Lo(),{isThemeValid:ce,warnInvalidTheme:W}=Yo(),k=i,N=c,de=xo();Al(()=>{de["chart-background"]&&console.warn("VueUiTreemap does not support the #chart-background slot.")});const me=x(()=>!!k.dataset&&k.dataset.length),ve=x(()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),ke=$(vt()),yt=$(!1),bt=$(""),_e=$(!1),Gt=$(0),R=$([]),ae=ye(null),qt=ye(null),Kt=ye(null),Jt=ye(null),Qt=ye(null),Xt=$(0),mt=$(0),kt=$(0),M=$([]),Ct=$(null),Zt=$(!1),Ve=$(null),xt=$(null),ze=$(null),Y=$(new Map),t=$(_t()),{loading:Te,FINAL_DATASET:wt,manualLoading:Yl}=Vo({...wo(k),FINAL_CONFIG:t,prepareConfig:_t,skeletonDataset:[{name:"_",value:53,color:"#CACACA90",children:[{name:"_",value:21},{name:"_",value:13},{name:"_",value:8},{name:"_",value:5},{name:"_",value:3},{name:"_",value:2},{name:"_",value:1}]}],skeletonConfig:Oo({defaultConfig:t.value,userConfig:{userOptions:{show:!1},style:{chart:{backgroundColor:"#999999",layout:{labels:{showDefaultLabels:!1},rects:{stroke:"#6A6A6A"}},legend:{backgroundColor:"transparent"}}}}})}),{userOptionsVisible:At,setUserOptionsVisibility:el,keepUserOptionState:tl}=Ho({config:t.value}),{svgRef:$t}=jo({config:t.value.style.chart.title});function _t(){const e=Wt({userConfig:k.config,defaultConfig:oe}),o=e.theme;if(!o)return e;if(!ce.value(e))return W(e),e;const l=Wt({userConfig:Rl[o]||k.config,defaultConfig:e}),a=Wt({userConfig:k.config,defaultConfig:l});return{...a,customPalette:a.customPalette.length?a.customPalette:Mo[o]||j}}Oe(()=>k.config,e=>{Te.value||(t.value=_t()),At.value=!t.value.userOptions.showOnChartHover,Xt.value+=1,mt.value+=1,kt.value+=1,U.value.showTable=t.value.table.show,U.value.showTooltip=t.value.style.chart.tooltip.show},{deep:!0});const{isPrinting:ll,isImaging:ol,generatePdf:al,generateImage:rl}=Ro({elementId:"treemap_".concat(ke.value),fileName:t.value.style.chart.title.text||"vue-ui-treemap",options:t.value.userOptions.print}),Hl=x(()=>t.value.userOptions.show&&!t.value.style.chart.title.text),Ke=x(()=>Eo(t.value.customPalette)),U=$({showTable:t.value.table.show,showTooltip:t.value.style.chart.tooltip.show});Oe(t,()=>{U.value={showTable:t.value.table.show,showTooltip:t.value.style.chart.tooltip.show}},{immediate:!0});const Fe=$({height:t.value.style.chart.height,width:t.value.style.chart.width});function jl(e){const o=ae.value,l=Fe.value.height;if(!o||!l)return e;const a=o.getBoundingClientRect();return e*(l/a.height)}function Wl(){if(!Ct.value||pe.value.length<=1)return 0;const e=Ct.value,o=getComputedStyle(e),l=e.offsetHeight+parseFloat(o.marginTop||"0")+parseFloat(o.marginBottom||"0")+parseFloat(o.paddingTop||"0")+parseFloat(o.paddingBottom||"0");return jl(l)}const B=x(()=>{const e=t.value.style.chart.padding,o=Fe.value.width,l=Fe.value.height,a=Wl(),r=e.left,u=o-e.right,n=e.top,b=l-e.bottom-a;return{left:r,top:n,right:u,bottom:b,width:u-r,height:Math.max(0,b-n),vbWidth:o,vbHeight:l-a,offsetY:a}}),z=$(wt.value),Ce=$(z.value),nl=ye(new Map);Oe([z,()=>t.value],()=>{ze.value=null,Y.value=new Map},{deep:!0}),Oe(()=>R.value,()=>{ze.value=null,Y.value=new Map},{deep:!0}),Oe([()=>Fe.value.width,()=>Fe.value.height],()=>{Y.value=new Map});function ul(e){Array.isArray(e)&&e.forEach((o,l)=>{o.id||(o.id=vt());let a=Ge(o.color)||nl.value.get(o.id)||Ke.value[l]||j[l]||j[l%j.length];a=Ge(a),nl.value.set(o.id,a),o.color=a,sl(o,a)})}function sl(e,o){Array.isArray(e.children)&&e.children.forEach(l=>{l.id||(l.id=vt()),l.parentId=e.id,l.color=o,sl(l,o)})}function Ul(){var e;if(!M.value.length)Ce.value=z.value.slice();else{const o=M.value[M.value.length-1],l=G(o);Ce.value=((e=l==null?void 0:l.children)==null?void 0:e.slice())||[]}}Oe(()=>wt.value,()=>{z.value=wt.value,ul(z.value),Ul(),kt.value+=1,mt.value+=1},{deep:!0,immediate:!0,flush:"post"});const xe=ye(null),Ie=ye(null);Al(()=>{Zt.value=!0,ql()});const Gl=x(()=>t.value.debug);function ql(){if(Tl(k.dataset)&&Io({componentName:"VueUiTreemap",type:"dataset",debug:Gl.value}),ul(z.value),Tl(k.dataset)||(Yl.value=t.value.loading),t.value.responsive){const e=Po(()=>{const{width:o,height:l}=No({chart:ae.value,title:t.value.style.chart.title.text?qt.value:null,legend:t.value.style.chart.legend.show?Kt.value:null,source:Jt.value,noTitle:Qt.value});requestAnimationFrame(()=>{Fe.value.width=o,Fe.value.height=l-12})});xe.value&&(Ie.value&&xe.value.unobserve(Ie.value),xe.value.disconnect()),xe.value=new ResizeObserver(e),Ie.value=ae.value.parentNode,xe.value.observe(Ie.value)}}Ao(()=>{xe.value&&(Ie.value&&xe.value.unobserve(Ie.value),xe.value.disconnect())});const Re=x(()=>Ce.value.map((e,o)=>({...e,color:Ge(e.color)||Ke.value[o]||j[o]||j[o%j.length]})).filter(e=>!R.value.includes(e.id))),Se=x(()=>z.value.filter(e=>!R.value.includes(e.id)).map(e=>e.value||0).reduce((e,o)=>e+o,0)),Tt=x({get(){let e=[...Re.value];return t.value.style.chart.layout.sorted&&(e=[...Re.value].sort((o,l)=>l.value-o.value)),e.map(o=>({...o}))},set(e){return e}});function il(e,o){return e.value/o}function Kl(e,o,l){const a=t.value.style.chart.layout.rects.colorRatio-il(o,l);return pt(e,a<0?0:a)}function cl(e){return Array.isArray(e.children)&&e.children.length>0}function Jl(e){return[...e].sort((o,l)=>{const a=cl(o),r=cl(l);if(a!==r)return a-r;const u=Number(o.value)||0;return(Number(l.value)||0)-u})}function dl(e,o,l,a,r){return Jl(e).map((u,n)=>{var I;const b=Kl(Ge(o)||Ke.value[n]||j[n]||j[n%j.length],u,a),s=il(u,a),m=(I=r!=null?r:u.parentId)!=null?I:u.id;return{...u,color:b,proportion:s,parentName:l,rootId:m,children:Array.isArray(u.children)&&u.children.length?dl(u.children,b,u.name,a,m):void 0}})}const vl=x(()=>{const e=Tt.value.map(a=>Number(a.value)||0).reduce((a,r)=>a+r,0)||1,o=Tt.value.map(a=>{const r=a.children?a.children.reduce((u,n)=>u+(Number(n.value)||0),0):a.value;return{value:a.value,id:a.id||vt(),proportion:(Number(a.value)||0)/e,children:a.children?dl(a.children,a.color,a.name,r||1):void 0,color:a.color,name:a.name}});if(M.value.length===0){if(!ze.value){const n={x0:0,y0:0,x1:1,y1:1};ze.value=Il(o,n)}const a={x0:B.value.left,y0:B.value.top,x1:B.value.left+B.value.width,y1:B.value.top+B.value.height},r=a.x1-a.x0,u=a.y1-a.y0;return ze.value.map(n=>({...n,x0:a.x0+n.x0*r,x1:a.x0+n.x1*r,y0:a.y0+n.y0*u,y1:a.y0+n.y1*u}))}const l={x0:B.value.left,y0:B.value.top,x1:B.value.left+B.value.width,y1:B.value.top+B.value.height};return Il(o,l)});function Ql(e){const o=M.value.length?M.value[M.value.length-1]:null,l=new Map,a=new Map,r=new Map,u=new Map;for(const n of e){let b=to(n.id);if(o){const s=b.indexOf(o);if(s>=0)b=b.slice(s);else continue}b=b.filter(s=>{const m=G(s);return m&&Array.isArray(m.children)&&m.children.length}),b.length&&(b.forEach((s,m)=>{const I=G(s);if(!I)return;let C=l.get(s);C?(C.x0=Math.min(C.x0,n.x0),C.y0=Math.min(C.y0,n.y0),C.x1=Math.max(C.x1,n.x1),C.y1=Math.max(C.y1,n.y1),C.depth=Math.min(C.depth,m)):(C={id:s,name:I.name,value:I.value,color:I.color,x0:n.x0,y0:n.y0,x1:n.x1,y1:n.y1,depth:m},l.set(s,C));let D=r.get(s);D||(D=new Set,r.set(s,D)),D.add(n.id);const K=u.get(s);(K==null||m<K)&&u.set(s,m)}),a.set(n.id,b))}return{wrappers:Array.from(l.values()).map(n=>{var b,s;return{...n,depth:(s=(b=u.get(n.id))!=null?b:n.depth)!=null?s:0,childrenIds:Array.from(r.get(n.id)||[])}}),ancestorsByLeaf:a}}const Ft=x(()=>Ql(vl.value)),Xl=x(()=>{const e=Ft.value.wrappers;return e.length?e.filter(o=>Zl(o)):[]});function Ot(e){return he(e)*1.2}function Zl(e){const o=Ot(e);return re(e)<o*1.1?!1:(e.labelY0=e.y0,!0)}const Ye=x(()=>eo({rects:vl.value,wrappers:Ft.value.wrappers,ancestorsByLeaf:Ft.value.ancestorsByLeaf}));function eo({rects:e,wrappers:o,ancestorsByLeaf:l}){if(!o.length||!l)return e;const a=new Map(o.map(r=>[r.id,r]));return e.map(r=>{const u=l.get(r.id);if(!u||!u.length)return r;let n={...r};for(const b of u){const s=a.get(b);if(!s)continue;const m=re(s),I=Ot(s);if(m<I*1.1)continue;const C=he(s),D=C*1.2,K=C*.5,we=C*.5,Pe=D*.5,tt=ne(s)/3,Ne=Math.min(K,tt),lt=m*.25,Ae=Math.min(we,lt),Bt=(typeof s.labelY0=="number"?s.labelY0:s.y0)+I,je=Math.max(n.x0,s.x0+Ne),ot=Math.min(n.x1,s.x1-Ne),ue=Math.max(n.y0,Bt+Pe),fe=Math.min(n.y1,s.y1-Ae);if(ot<=je||fe<=ue)break;n={...n,x0:je,y0:ue,x1:ot,y1:fe}}return n})}function re({y0:e,y1:o}){return o-e<=0?1e-4:o-e}function ne({x0:e,x1:o}){return o-e<=0?1e-4:o-e}function he(e){const o=t.value.style.chart.layout.labels,l=o.fontSize,a=o.minFontSize,r=o.fontSize*2,u=.5,n=.6,b=1,s=.9;let m=e.proportion;if(!(typeof m=="number"&&isFinite(m))){const we=Math.max(1e-6,ne(e)*re(e)),Pe=Math.max(1e-6,B.value.width*B.value.height);m=we/Pe}const I=Math.pow(Math.min(1,Math.max(0,m)),u),C=n+(b-n)*I;let D=l*C;const K=Math.max(1e-4,Math.min(ne(e),re(e)));return D=Math.min(D,K*s),D=Math.max(a,Math.min(r,D)),D}function hl(e){_e.value=e,Gt.value+=1}const Be=x(()=>({startX:0,startY:0,width:B.value.vbWidth,height:B.value.vbHeight}));function G(e,o=z.value){for(const l of o){if(l.id===e)return l;if(l.children){const a=G(e,l.children);if(a)return a}}return null}function to(e){const o=[];let l=G(e);for(;l&&l.parentId;){const a=G(l.parentId);if(!a)break;o.unshift(a.id),l=a}return o}const De=x(()=>M.value.length>0);function Je(e,o){var a;if(!e){Ce.value=z.value.slice(),N("selectDatapoint",void 0),M.value=[];return}t.value.events.datapointClick&&t.value.events.datapointClick({datapoint:e,seriesIndex:o});const l=G(e.id);if(l&&((a=l.children)!=null&&a.length))M.value.push(l.id),Ce.value=l.children.slice(),N("selectDatapoint",e);else if(e.parentId){M.value.push(e.parentId);const r=G(e.parentId);Ce.value=r.children.slice(),N("selectDatapoint",e)}else if(M.value.length>0){M.value.pop();const r=M.value[M.value.length-1];if(r){const u=G(r);Ce.value=u.children.slice()}else Ce.value=z.value.slice(),M.value=[],N("selectDatapoint",void 0)}}function lo(e){var o,l;return!!((l=(o=G(e.id))==null?void 0:o.children)!=null&&l.length||e.parentId)}const pe=x(()=>{const e=[{id:null,label:"All"}];if(M.value.length>0){let o=G(M.value[M.value.length-1]);const l=[];for(;o;)l.unshift(o),o=o.parentId?G(o.parentId):null;for(const a of l)e.push({id:a.id,label:a.name,node:a})}return e}),q=ye(null),Mt=x(()=>z.value.map((e,o)=>({...e,color:Ge(e.color)||Ke.value[o]||j[o]||j[o%j.length],shape:"square"})).sort((e,o)=>o.value-e.value).map((e,o)=>{const l=e.value/z.value.map(a=>a.value).reduce((a,r)=>a+r,0);return{...e,proportion:l,opacity:R.value.includes(e.id)?.5:1,display:"".concat(e.name).concat(t.value.style.chart.legend.showPercentage||t.value.style.chart.legend.showValue?": ":"").concat(t.value.style.chart.legend.showValue?ht(t.value.style.chart.layout.labels.formatter,e.value,qe({p:t.value.style.chart.layout.labels.prefix,v:e.value,s:t.value.style.chart.layout.labels.suffix,r:t.value.style.chart.legend.roundingValue}),{datapoint:e}):"").concat(t.value.style.chart.legend.showPercentage?R.value.includes(e.id)?"".concat(t.value.style.chart.legend.showValue?" (":"","- %").concat(t.value.style.chart.legend.showValue?")":""):"".concat(t.value.style.chart.legend.showValue?" (":"").concat(isNaN(e.value/Se.value)?"-":(e.value/Se.value*100).toFixed(t.value.style.chart.legend.roundingPercentage),"%").concat(t.value.style.chart.legend.showValue?")":""):"")}})),oo=x(()=>({cy:"treemap-div-legend",backgroundColor:t.value.style.chart.legend.backgroundColor,color:t.value.style.chart.legend.color,fontSize:t.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:t.value.style.chart.legend.bold?"bold":""}));function Qe(e){q.value=null,R.value.includes(e.id)?R.value=R.value.filter(o=>o!==e.id):R.value.length<k.dataset.length-1&&R.value.push(e.id),N("selectLegend",Tt.value)}function pl(e){return z.value.length?z.value.find(l=>l.name===e)||(t.value.debug&&console.warn('VueUiTreemap - Series name not found "'.concat(e,'"')),null):(t.value.debug&&console.warn("VueUiTreemap - There are no series to show."),null)}function ao(e){const o=pl(e);o!==null&&R.value.includes(o.id)&&Qe({id:o.id})}function ro(e){const o=pl(e);o!==null&&(R.value.includes(o.id)||Qe({id:o.id}))}function no({datapoint:e,seriesIndex:o}){q.value=null,yt.value=!1,t.value.events.datapointLeave&&t.value.events.datapointLeave({datapoint:e,seriesIndex:o})}const Et=$(null);function uo({datapoint:e,seriesIndex:o}){t.value.events.datapointEnter&&t.value.events.datapointEnter({datapoint:e,seriesIndex:o}),q.value=e,Et.value={datapoint:e,seriesIndex:o,config:t.value,series:Re.value};const l=t.value.style.chart.tooltip.customFormat;if(Ol(l)&&Do(()=>l({seriesIndex:o,datapoint:e,series:Re.value,config:t.value})))bt.value=l({seriesIndex:o,datapoint:e,series:Re.value,config:t.value});else{let a="";a+='<div style="width:100%;text-align:center;border-bottom:1px solid '.concat(t.value.style.chart.tooltip.borderColor,';padding-bottom:6px;margin-bottom:3px;">').concat(e.name,"</div>"),a+='<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><rect x="0" y="0" height="12" width="12" stroke="none" fill="'.concat(e.color,'"/></svg>'),a+="<b>".concat(ht(t.value.style.chart.layout.labels.formatter,e.value,qe({p:t.value.style.chart.layout.labels.prefix,v:e.value,s:t.value.style.chart.layout.labels.suffix,r:t.value.style.chart.tooltip.roundingValue}),{datapoint:e,seriesIndex:o}),"</b>"),bt.value="<div>".concat(a,"</div>")}yt.value=!0}const ge=x(()=>{const e=Ye.value.map(l=>({name:l.name,color:l.color})),o=Ye.value.map(l=>l.value);return{head:e,body:o}});function It(e=null){To(()=>{const o=ge.value.head.map((r,u)=>[[r.name],[ge.value.body[u]],[isNaN(ge.value.body[u]/Se.value)?"-":ge.value.body[u]/Se.value*100]]),l=[[t.value.style.chart.title.text],[t.value.style.chart.title.subtitle.text],[[""],["val"],["%"]]].concat(o),a=So(l);e?e(a):Bo({csvContent:a,title:t.value.style.chart.title.text||"vue-ui-treemap"})})}const Xe=x(()=>{const e=[t.value.table.columnNames.series,t.value.table.columnNames.value,t.value.table.columnNames.percentage],o=ge.value.head.map((a,r)=>{const u=ht(t.value.style.chart.layout.labels.formatter,ge.value.body[r],qe({p:t.value.style.chart.layout.labels.prefix,v:ge.value.body[r],s:t.value.style.chart.layout.labels.suffix,r:t.value.table.td.roundingValue}));return[{color:a.color,name:a.name,shape:"square"},u,isNaN(ge.value.body[r]/Se.value)?"-":qe({v:ge.value.body[r]/Se.value*100,s:"%",r:t.value.table.td.roundingPercentage})]}),l={th:{backgroundColor:t.value.table.th.backgroundColor,color:t.value.table.th.color,outline:t.value.table.th.outline},td:{backgroundColor:t.value.table.td.backgroundColor,color:t.value.table.td.color,outline:t.value.table.td.outline},breakpoint:t.value.table.responsiveBreakpoint};return{colNames:[t.value.table.columnNames.series,t.value.table.columnNames.value],head:e,body:o,config:l}});function so(){return Ye.value}function gl(){U.value.showTable=!U.value.showTable}function fl(){U.value.showTooltip=!U.value.showTooltip}const Ze=$(!1);function St(){Ze.value=!Ze.value}const et=$(null);function yl(e){et.value=e}function bl(){et.value=null}async function io({scale:e=2}={}){if(!ae.value)return;const{width:o,height:l}=ae.value.getBoundingClientRect(),a=o/l,{imageUri:r,base64:u}=await Wo({domElement:ae.value,base64:!0,img:!0,scale:e});return{imageUri:r,base64:u,title:t.value.style.chart.title.text,width:o,height:l,aspectRatio:a}}const He=x(()=>{const e=t.value.table.useDialog&&!t.value.table.show,o=U.value.showTable;return{component:e?Z:g,title:"".concat(t.value.style.chart.title.text).concat(t.value.style.chart.title.subtitle.text?": ".concat(t.value.style.chart.title.subtitle.text):""),props:e?{backgroundColor:t.value.table.th.backgroundColor,color:t.value.table.th.color,headerColor:t.value.table.th.color,headerBg:t.value.table.th.backgroundColor,isFullscreen:_e.value,fullscreenParent:ae.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:o,maxHeight:1e4,body:{backgroundColor:t.value.style.chart.backgroundColor,color:t.value.style.chart.color},head:{backgroundColor:t.value.style.chart.backgroundColor,color:t.value.style.chart.color}}}}});Oe(()=>U.value.showTable,e=>{t.value.table.show||(e&&t.value.table.useDialog&&Ve.value?Ve.value.open():"close"in Ve.value&&Ve.value.close())});function ml(){U.value.showTable=!1,xt.value&&xt.value.setTableIconState(!1)}const co=x(()=>Mt.value.map(e=>({...e,name:e.display}))),vo=x(()=>t.value.style.chart.backgroundColor),ho=x(()=>t.value.style.chart.legend),po=x(()=>t.value.style.chart.title),{exportSvg:go,getSvg:fo}=qo({svg:$t,title:po,legend:ho,legendItems:co,backgroundColor:vo});async function kl({isCb:e}){if(e){const{blob:o,url:l,text:a,dataUrl:r}=await fo();t.value.userOptions.callbacks.svg({blob:o,url:l,text:a,dataUrl:r})}else go()}function yo(e){const o=he(e)*.6;return Math.max(0,ne(e)-2*o)}function Cl({rect:e,seriesIndex:o,isTitle:l=!1}){var wl;const a=t.value.style.chart.layout.labels.name.show,r=t.value.style.chart.layout.labels.value.show;if(!a&&!r)return"";const u=M.value.length===0,n=u?"".concat(e.id,":").concat(l?"title":"rect"):null;if(u&&Y.value.has(n))return Y.value.get(n);const b=Math.max(2,he(e)/3),s=Math.max(8,he(e)),m=s*1.2,I=Math.max(0,ne(e)-b*2),C=Math.max(0,re(e)-b*2);if(I<=2||C<=s*.8)return u&&n&&Y.value.set(n,""),"";const D=t.value.style.fontFamily,K=t.value.style.chart.layout.labels.name.bold?"600":"400",we=t.value.style.chart.layout.labels.value.bold?"600":"400",Pe=l?t.value.style.chart.layout.rects.group.label.adaptColorToBackground?t.value.style.chart.layout.rects.group.useSeriesBackgroundColor?gt(pt(e.color,.4)):gt(t.value.style.chart.backgroundColor):t.value.style.chart.layout.rects.group.label.color:gt(e.color),tt=a?String((wl=e.name)!=null?wl:""):"",Ne=r?ht(t.value.style.chart.layout.labels.formatter,e.value,qe({p:t.value.style.chart.layout.labels.prefix,v:e.value,s:t.value.style.chart.layout.labels.suffix,r:t.value.style.chart.layout.labels.rounding}),{datapoint:e,seriesIndex:o}):"",lt=l?yo(e):I;function Ae(S,ee=s,We="400"){const J=document.createElementNS(Ht,"svg");J.setAttribute("width","0"),J.setAttribute("height","0"),J.style.position="absolute",J.style.visibility="hidden",J.style.pointerEvents="none";const te=document.createElementNS(Ht,"text");te.setAttribute("font-size",String(ee)),te.setAttribute("font-family",D),te.setAttribute("font-weight",String(We)),te.textContent=S||"",J.appendChild(te),document.body.appendChild(J);const at=te.getComputedTextLength();return document.body.removeChild(J),at}if(l){let S="";if(a&&(S=tt),r&&(S=S?"".concat(S," (").concat(Ne,")"):Ne),!S)return u&&n&&Y.value.set(n,""),"";let ee=S;if(Ae(ee,s,K)>lt){let V=ee;for(;V.length&&Ae(V+"…",s,K)>lt;)V=V.slice(0,-1);ee=V?V+"…":""}if(!ee)return u&&n&&Y.value.set(n,""),"";const We=Ot(e),J=typeof e.depth=="number"?e.depth:0,te=We*1.4,at=typeof e.labelY0=="number"?e.labelY0:e.y0+J*te,Nt=e.x0+b+s/2,L=at+b+s,le='<text\n            x="'.concat(Nt,'"\n            y="').concat(L,'"\n            font-size="').concat(s,'"\n            font-family="').concat(ft(D),'"\n            font-weight="').concat(K,'"\n            fill="').concat(ft(Pe),'"\n            paint-order="stroke"\n            stroke="transparent"\n            stroke-width="0"\n            style="transition: all 0.2s ease-in-out;"\n        >\n            ').concat(jt(ee),"\n        </text>");return u&&n&&Y.value.set(n,le),le}const Bt=r?1:0,je=Math.max(0,Math.floor(C/m)-Bt);if(je<=0&&!r)return u&&n&&Y.value.set(n,""),"";function ot(S,ee,We,J,te,at){const Nt=String(S).split(/\s+/).filter(Boolean),L=[];let le="";function V(O){return Ae(O,We,J)<=ee}function ko(O){if(V(O))return[O];const se=[];let F=0;for(;F<O.length;){let ie=1,Vt=O.length-F,zt=1;for(;ie<=Vt;){const nt=ie+Vt>>1,Co=O.slice(F,F+nt);V(Co)?(zt=nt,ie=nt+1):Vt=nt-1}se.push(O.slice(F,F+zt)),F+=zt}return se}const rt=Nt.flatMap(O=>ko(O));let Lt=!1;for(let O=0;O<rt.length;O+=1){const se=rt[O],F=le?le+" "+se:se;if(V(F))le=F;else{if(le)L.push(le);else{let ie=se;for(;ie.length&&!V(ie);)ie=ie.slice(0,-1);ie&&L.push(ie)}if(le="",L.length===te){Lt=!0;break}}O===rt.length-1&&le&&L.length<te&&L.push(le)}if(L.length&&L.join(" ")!==rt.join(" ")&&(Lt=!0),Lt&&L.length>0){let O=L[L.length-1];if(!V(O)){let F=O;for(;F.length&&!V(F);)F=F.slice(0,-1);O=F}let se=O+"…";if(!V(se)){let F=O;for(;F.length&&!V(F+"…");)F=F.slice(0,-1);se=F+"…"}L[L.length-1]=se}return L}const ue=a?ot(tt,I,s,K,je):[];let fe=s,Le=String(Ne);if(r){for(;Ae(Le,fe,we)>I&&fe>Math.max(8,s*.75);)fe-=1;if(Ae(Le,fe,we)>I){let S=Le;for(;S.length&&Ae(S+"…",fe,we)>I;)S=S.slice(0,-1);if(Le=S?S+"…":"",!Le.length)return u&&n&&Y.value.set(n,""),""}}if(ue.length*m+(r?m:0)>C){for(;ue.length&&ue.length*m+(r?m:0)>C;)ue.pop();if(!ue.length&&(!r||m>C))return u&&n&&Y.value.set(n,""),""}const Dt=e.x0+b,mo=e.y0+b+s,Pt=[];a&&ue.forEach((S,ee)=>{Pt.push('\n            <tspan \n                x="'.concat(Dt,'" \n                dy="').concat(ee===0?0:m,'" \n                font-weight="').concat(K,'"\n            >\n                ').concat(jt(S),"\n            </tspan>"))}),r&&Pt.push('\n        <tspan \n            x="'.concat(Dt,'" \n            dy="').concat(ue.length?m:0,'"\n            font-weight="').concat(we,'" \n            font-size="').concat(fe,'"\n        >\n            ').concat(jt(Le),"\n        </tspan>"));const xl='<text \n        x="'.concat(Dt,'" \n        y="').concat(mo,'" \n        font-size="').concat(s,'" \n        font-family="').concat(ft(D),'" \n        fill="').concat(ft(Pe),'" \n        paint-order="stroke" \n        stroke="transparent" \n        stroke-width="0"\n        style="transition: all 0.2s ease-in-out;"\n    >\n        ').concat(Pt.join(""),"\n    </text>");return u&&n&&Y.value.set(n,xl),xl}function bo(e){const o=t.value.style.chart.layout.rects.borderRadius,l=ne(e),a=re(e);return Math.min(o,Math.min(l,a)/6)}return v({getData:so,getImage:io,generateCsv:It,generateImage:rl,generateSvg:kl,generatePdf:al,hideSeries:ro,showSeries:ao,toggleTable:gl,toggleTooltip:fl,toggleAnnotator:St,toggleFullscreen:hl}),(e,o)=>(d(),_("div",{ref_key:"treemapChart",ref:ae,class:Yt("vue-data-ui-component vue-ui-treemap ".concat(_e.value?"vue-data-ui-wrapper-fullscreen":""," ").concat(t.value.useCssAnimation?"":"vue-ui-dna")),style:be("font-family:".concat(t.value.style.fontFamily,";width:100%; ").concat(t.value.responsive?"height: 100%;":""," text-align:center;background:").concat(t.value.style.chart.backgroundColor)),id:"treemap_".concat(ke.value),onMouseenter:o[2]||(o[2]=()=>y(el)(!0)),onMouseleave:o[3]||(o[3]=()=>y(el)(!1))},[t.value.userOptions.buttons.annotator?(d(),$e(y(p),{key:0,svgRef:y($t),backgroundColor:t.value.style.chart.backgroundColor,color:t.value.style.chart.color,active:Ze.value,onClose:St},{"annotator-action-close":T(()=>[w(e.$slots,"annotator-action-close",{},void 0,!0)]),"annotator-action-color":T(({color:l})=>[w(e.$slots,"annotator-action-color",Q(X({color:l})),void 0,!0)]),"annotator-action-draw":T(({mode:l})=>[w(e.$slots,"annotator-action-draw",Q(X({mode:l})),void 0,!0)]),"annotator-action-undo":T(({disabled:l})=>[w(e.$slots,"annotator-action-undo",Q(X({disabled:l})),void 0,!0)]),"annotator-action-redo":T(({disabled:l})=>[w(e.$slots,"annotator-action-redo",Q(X({disabled:l})),void 0,!0)]),"annotator-action-delete":T(({disabled:l})=>[w(e.$slots,"annotator-action-delete",Q(X({disabled:l})),void 0,!0)]),_:3},8,["svgRef","backgroundColor","color","active"])):P("",!0),Hl.value?(d(),_("div",{key:1,ref_key:"noTitle",ref:Qt,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):P("",!0),t.value.style.chart.title.text?(d(),_("div",{key:2,ref_key:"chartTitle",ref:qt,style:be("width:100%;background:".concat(t.value.style.chart.backgroundColor,";padding-bottom:6px"))},[(d(),$e(Uo,{key:"title_".concat(Xt.value),config:{title:{cy:"treemap-div-title",...t.value.style.chart.title},subtitle:{cy:"treemap-div-subtitle",...t.value.style.chart.title.subtitle}}},null,8,["config"]))],4)):P("",!0),H("div",{id:"legend-top-".concat(ke.value)},null,8,oa),t.value.userOptions.show&&me.value&&(y(tl)||y(At))?(d(),$e(y(A),{ref_key:"userOptionsRef",ref:xt,key:"user_option_".concat(Gt.value),backgroundColor:t.value.style.chart.backgroundColor,color:t.value.style.chart.color,isPrinting:y(ll),isImaging:y(ol),uid:ke.value,hasTooltip:t.value.userOptions.buttons.tooltip&&t.value.style.chart.tooltip.show,hasPdf:t.value.userOptions.buttons.pdf,hasXls:t.value.userOptions.buttons.csv,hasImg:t.value.userOptions.buttons.img,hasSvg:t.value.userOptions.buttons.svg,hasTable:t.value.userOptions.buttons.table,hasFullscreen:t.value.userOptions.buttons.fullscreen,isFullscreen:_e.value,isTooltip:U.value.showTooltip,titles:{...t.value.userOptions.buttonTitles},chartElement:ae.value,position:t.value.userOptions.position,hasAnnotator:t.value.userOptions.buttons.annotator,isAnnotation:Ze.value,callbacks:t.value.userOptions.callbacks,printScale:t.value.userOptions.print.scale,tableDialog:t.value.table.useDialog,onToggleFullscreen:hl,onGeneratePdf:y(al),onGenerateCsv:It,onGenerateImage:y(rl),onGenerateSvg:kl,onToggleTable:gl,onToggleTooltip:fl,onToggleAnnotator:St,style:be({visibility:y(tl)?y(At)?"visible":"hidden":"visible"})},$l({_:2},[e.$slots.menuIcon?{name:"menuIcon",fn:T(({isOpen:l,color:a})=>[w(e.$slots,"menuIcon",Q(X({isOpen:l,color:a})),void 0,!0)]),key:"0"}:void 0,e.$slots.optionTooltip?{name:"optionTooltip",fn:T(()=>[w(e.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,e.$slots.optionPdf?{name:"optionPdf",fn:T(()=>[w(e.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,e.$slots.optionCsv?{name:"optionCsv",fn:T(()=>[w(e.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,e.$slots.optionImg?{name:"optionImg",fn:T(()=>[w(e.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,e.$slots.optionSvg?{name:"optionSvg",fn:T(()=>[w(e.$slots,"optionSvg",{},void 0,!0)]),key:"5"}:void 0,e.$slots.optionTable?{name:"optionTable",fn:T(()=>[w(e.$slots,"optionTable",{},void 0,!0)]),key:"6"}:void 0,e.$slots.optionFullscreen?{name:"optionFullscreen",fn:T(({toggleFullscreen:l,isFullscreen:a})=>[w(e.$slots,"optionFullscreen",Q(X({toggleFullscreen:l,isFullscreen:a})),void 0,!0)]),key:"7"}:void 0,e.$slots.optionAnnotator?{name:"optionAnnotator",fn:T(({toggleAnnotator:l,isAnnotator:a})=>[w(e.$slots,"optionAnnotator",Q(X({toggleAnnotator:l,isAnnotator:a})),void 0,!0)]),key:"8"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasXls","hasImg","hasSvg","hasTable","hasFullscreen","isFullscreen","isTooltip","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):P("",!0),pe.value.length>1?(d(),_("nav",{key:4,class:"vue-ui-treemap-breadcrumbs","data-dom-to-png-ignore":"",ref_key:"breadcrumbsNav",ref:Ct},[(d(!0),_(Ue,null,st(pe.value,(l,a)=>(d(),_("span",{role:"button",tabindex:a<pe.value.length-1?0:void 0,key:l.id||"root",onClick:r=>a===pe.value.length-1?()=>{}:Je(l.node),onKeydown:[_l(Rt(r=>a===pe.value.length-1?void 0:Je(l.node),["prevent"]),["enter"]),_l(Rt(r=>a===pe.value.length-1?void 0:Je(l.node),["prevent"]),["space"])],class:"vue-ui-treemap-crumb","data-last-crumb":a===pe.value.length-1,style:be({color:t.value.style.chart.color}),onMouseenter:r=>yl(a),onMouseleave:bl,onFocus:r=>yl(a),onBlur:bl},[H("span",ra,[H("span",na,[w(e.$slots,"breadcrumb-label",dt({ref_for:!0},{crumb:l,isRoot:a===0,isFocus:et.value===a}),()=>[a===0?(d(),_("div",ua,[ut(Fl,{name:et.value===0?"homeFilled":"home",stroke:t.value.style.chart.color},null,8,["name","stroke"])])):(d(),_(Ue,{key:1},[it(ct(l.label),1)],64))],!0)]),a<pe.value.length-1?(d(),_("span",sa,[w(e.$slots,"breadcrumb-arrow",{},()=>[o[4]||(o[4]=it(" › ",-1))],!0)])):P("",!0)])],44,aa))),128))],512)):P("",!0),(d(),_("svg",{ref_key:"svgRef",ref:$t,xmlns:y(Ht),class:Yt({"vue-data-ui-fullscreen--on":_e.value,"vue-data-ui-fulscreen--off":!_e.value,"vue-data-ui-zoom-plus":!De.value,"vue-data-ui-zoom-minus":De.value,loading:y(Te)}),viewBox:"".concat(Be.value.startX," ").concat(Be.value.startY," ").concat(Be.value.width<=0?10:Be.value.width," ").concat(Be.value.height<=0?10:Be.value.height),style:be("max-width:100%; overflow: hidden; background:transparent;color:".concat(t.value.style.chart.color))},[ut(y(E)),(d(!0),_(Ue,null,st(Ye.value,(l,a)=>(d(),_("g",{key:"tgrad_".concat(l.id)},[t.value.style.chart.layout.rects.gradient.show?(d(),_("defs",ca,[H("radialGradient",{id:"tgrad_".concat(l.id),gradientTransform:"translate(-1, -1.000001) scale(2, 2)"},[H("stop",{offset:"18%","stop-color":l.color},null,8,va),H("stop",{offset:"100%","stop-color":y(pt)(l.color,t.value.style.chart.layout.rects.gradient.intensity/100)},null,8,ha)],8,da)])):P("",!0)]))),128)),(d(!0),_(Ue,null,st(Xl.value,(l,a)=>(d(),_("g",{key:"parent_".concat(l.id),class:"vue-ui-treemap-parent-wrapper"},[H("rect",{x:l.x0,y:l.y0,height:re(l),width:ne(l),fill:t.value.style.chart.layout.rects.group.useSeriesBackgroundColor?y(pt)(l.color,t.value.style.chart.layout.rects.group.backgroundLighterRatio):t.value.style.chart.backgroundColor,rx:0,stroke:t.value.style.chart.layout.rects.group.stroke,"stroke-width":t.value.style.chart.layout.rects.group.strokeWidth,class:"vue-data-ui-cursor-default vue-ui-treemap-rect"},null,8,pa),e.$slots["group-label"]?(d(),_("foreignObject",{key:0,width:ne(l),height:re(l),x:l.x0,y:l.y0},[w(e.$slots,"group-label",dt({ref_for:!0},{group:l}),void 0,!0)],8,ga)):!y(Te)&&t.value.style.chart.layout.labels.showDefaultLabels?(d(),_("g",{key:1,style:{"pointer-events":"none"},innerHTML:Cl({rect:l,seriesIndex:0,isTitle:!0}),class:"vue-data-ui-cursor-default"},null,8,fa)):P("",!0)]))),128)),(d(!0),_(Ue,null,st(Ye.value,(l,a)=>(d(),_("g",{key:"k_".concat(l.id)},[H("rect",{x:l.x0,y:l.y0,height:re(l),width:ne(l),fill:ve.value?l.color:t.value.style.chart.layout.rects.gradient.show?"url(#tgrad_".concat(l.id,")"):l.color,rx:bo(l),stroke:q.value&&q.value.id===l.id?t.value.style.chart.layout.rects.selected.stroke:t.value.style.chart.layout.rects.stroke,"stroke-width":q.value&&q.value.id===l.id?t.value.style.chart.layout.rects.selected.strokeWidth:t.value.style.chart.layout.rects.strokeWidth,onClick:Rt(r=>Je(l,a),["stop"]),onMouseenter:()=>uo({datapoint:l,seriesIndex:a}),onMouseleave:r=>no({datapoint:l,seriesIndex:a}),style:be("opacity:".concat(q.value?q.value.id===l.id?1:t.value.style.chart.layout.rects.selected.unselectedOpacity:1)),class:Yt(["vue-ui-treemap-rect",lo(l)?"vue-data-ui-zoom-plus":De.value?"vue-data-ui-zoom-minus":""])},null,46,ya),!e.$slots.rect&&!y(Te)&&t.value.style.chart.layout.labels.showDefaultLabels?(d(),_("g",{key:0,style:be("pointer-events:none; opacity:".concat(q.value?q.value.id===l.id?1:t.value.style.chart.layout.rects.selected.unselectedOpacity:1)),innerHTML:Cl({rect:l,seriesIndex:a})},null,12,ba)):P("",!0),(d(),_("foreignObject",{x:l.x0,y:l.y0,height:re(l),width:ne(l),class:"vue-ui-treemap-cell-foreignObject"},[H("div",{style:be({width:"calc(100% - ".concat(he(l)/1.5,"px)"),height:"calc(100% - ".concat(he(l)/1.5,"px)"),padding:"".concat(he(l)/3,"px")}),class:"vue-ui-treemap-cell"},[y(Te)?P("",!0):w(e.$slots,"rect",dt({key:0,ref_for:!0},{rect:l,shouldShow:l.proportion>t.value.style.chart.layout.labels.hideUnderProportion||De.value,fontSize:he(l),isZoom:De.value,textColor:y(gt)(l.color)}),void 0,!0)],4)],8,ma))]))),128)),w(e.$slots,"svg",Q(X({svg:B.value,isZoom:De.value,rect:q.value,config:t.value})),void 0,!0)],14,ia)),e.$slots.watermark?(d(),_("div",ka,[w(e.$slots,"watermark",Q(X({isPrinting:y(ll)||y(ol)})),void 0,!0)])):P("",!0),H("div",{id:"legend-bottom-".concat(ke.value)},null,8,Ca),Zt.value?(d(),$e($o,{key:6,to:t.value.style.chart.legend.position==="top"?"#legend-top-".concat(ke.value):"#legend-bottom-".concat(ke.value)},[H("div",{ref_key:"chartLegend",ref:Kt},[t.value.style.chart.legend.show?(d(),$e(Go,{key:"legend_".concat(kt.value),legendSet:Mt.value,config:oo.value,id:"treemap_legend_".concat(ke.value),onClickMarker:o[0]||(o[0]=({legend:l})=>Qe(l))},{item:T(({legend:l,index:a})=>[y(Te)?P("",!0):(d(),_("div",{key:0,onClick:r=>Qe(l),style:be("opacity:".concat(R.value.includes(l.id)?.5:1))},ct(l.display),13,xa))]),_:1},8,["legendSet","config","id"])):w(e.$slots,"legend",{key:1,legend:Mt.value},void 0,!0)],512)],8,["to"])):P("",!0),e.$slots.source?(d(),_("div",{key:7,ref_key:"source",ref:Jt,dir:"auto"},[w(e.$slots,"source",{},void 0,!0)],512)):P("",!0),ut(y(f),{show:U.value.showTooltip&&yt.value,backgroundColor:t.value.style.chart.tooltip.backgroundColor,color:t.value.style.chart.tooltip.color,fontSize:t.value.style.chart.tooltip.fontSize,borderRadius:t.value.style.chart.tooltip.borderRadius,borderColor:t.value.style.chart.tooltip.borderColor,borderWidth:t.value.style.chart.tooltip.borderWidth,backgroundOpacity:t.value.style.chart.tooltip.backgroundOpacity,position:t.value.style.chart.tooltip.position,offsetY:t.value.style.chart.tooltip.offsetY,parent:ae.value,content:bt.value,isFullscreen:_e.value,isCustom:y(Ol)(t.value.style.chart.tooltip.customFormat),smooth:t.value.style.chart.tooltip.smooth,backdropFilter:t.value.style.chart.tooltip.backdropFilter,smoothForce:t.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:t.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":T(()=>[w(e.$slots,"tooltip-before",Q(X({...Et.value})),void 0,!0)]),"tooltip-after":T(()=>[w(e.$slots,"tooltip-after",Q(X({...Et.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","backgroundOpacity","position","offsetY","parent","content","isFullscreen","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"]),me.value&&t.value.userOptions.buttons.table?(d(),$e(_o(He.value.component),dt({key:8},He.value.props,{ref_key:"tableUnit",ref:Ve,onClose:ml}),$l({content:T(()=>[(d(),$e(y(h),{key:"table_".concat(mt.value),colNames:Xe.value.colNames,head:Xe.value.head,body:Xe.value.body,config:Xe.value.config,title:t.value.table.useDialog?"":He.value.title,withCloseButton:!t.value.table.useDialog,onClose:ml},{th:T(({th:l})=>[H("div",{innerHTML:l,style:{display:"flex","align-items":"center"}},null,8,wa)]),td:T(({td:l})=>[it(ct(l.name||l),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[t.value.table.useDialog?{name:"title",fn:T(()=>[it(ct(He.value.title),1)]),key:"0"}:void 0,t.value.table.useDialog?{name:"actions",fn:T(()=>[H("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:o[1]||(o[1]=l=>It(t.value.userOptions.callbacks.csv))},[ut(Fl,{name:"excel",stroke:He.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):P("",!0),y(Te)?(d(),$e(zo,{key:9})):P("",!0)],46,la))}},$a=Fo(Aa,[["__scopeId","data-v-176708ac"]]),Ha=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"}));export{Ya as a,Ha as b,$a as v};
