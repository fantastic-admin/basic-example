
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Tooltip-68Yi_FFl-CRPaJsgv.js","./vue-data-ui-BN9YfUec.js","./index-DXZKKOp8.js","./index-B7kifsnL.css","./alert-l5XlVwCh.js","./vue-data-ui-D1HaM8UR.css","./DataTable-BT7VF2ua-Cw2NNXsE.js","./Shape-CNXKB8O0-BJGuTKHC.js","./UserOptions-1OZ3jcm6-BbpzMig3.js","./vClickOutside-C6WiFswA-B2BXHGcD.js","./img-BecE5qXd-CsL1o-EN.js","./dom-to-png--BNgrTZV-DTUrW_sQ.js","./NonSvgPenAndPaper-C7TRn0_3-BAGJMRmj.js","./ColorPicker-J5wOPCeB-sgb_Bfch.js","./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"])))=>i.map(i=>d[i]);
import{e as d,J as g,ab as Il,E as Fa,a7 as Ml,K as T,a9 as pe,av as _a,au as Ye,b_ as be,c as _e,o as F,A as U,f as J,z as Y,O as xe,u as L,c0 as Oa,h as x,r as $,j as ee,k as ae,g as Ta,t as qe,bn as Al,l as Ra,m as Fl,N as _l,n as Ol,c1 as Le}from"./index-DXZKKOp8.js";import{s as Tl,Q as Rl,A as Dl,v as El,m as le,L as ke,C as Pl,j as Ze,I as ie,f as ne,a as Da,af as Nl,N as Hl,ag as Vl,g as Wl,p as Xl,F as Ea,u as Bl,O as Ce,o as Ul,e as Yl,r as ql,h as Zl}from"./vue-data-ui-BN9YfUec.js";import{k as Gl,m as Ge,S as jl,E as Ql,M as Jl,L as k,O as Oe,A as q,I as Pa}from"./useResponsive-DfdjqQps-DzVAt69W.js";import{t as Kl,o as je}from"./useNestedProp-dJX_8vvZ-BzBW50KN.js";import{S as et,T as at}from"./BaseScanner-BgWxam9d-B19ueoDW.js";import{m as lt}from"./usePrinter-DTzqpYKF-D5mkxXp9.js";import{F as tt,V as ot,O as st}from"./useTimeLabels-BGFjWgrv-C_AB8TRS.js";import{a as ut}from"./useUserOptionState-BIvW1Kz7-D6llU1BK.js";import{o as rt}from"./useChartAccessibility-9icAAmYg-BcUQIUvr.js";import it from"./img-BecE5qXd-CsL1o-EN.js";import{J as nt}from"./themes-AUNCOb2G-RAhReTPj.js";import vt from"./Legend-G6GMcdAc-7HaGLNN7.js";import ct from"./Title-BWp-37K_-BMUMQpSO.js";import dt from"./vue-ui-accordion-UpZ765hd-DndPzmcD.js";import{u as ht}from"./SlicerPreview-ij72TAs6-Cxp5eJgP.js";import"./alert-l5XlVwCh.js";import"./dom-to-png--BNgrTZV-DTUrW_sQ.js";import"./Shape-CNXKB8O0-BJGuTKHC.js";const yt=["id"],mt=["id"],ft=["id"],gt=["onClick"],pt={key:4,class:"vue-data-ui-watermark"},bt=["innerHTML"],xt={__name:"vue-ui-xy-canvas",props:{dataset:{type:Array,default(){return[]}},config:{type:Object,default(){return{}}},selectedXIndex:{type:Number,default:void 0}},emits:["selectLegend","selectX"],setup(Qe,{expose:Na,emit:Ha}){const Va=be(()=>Le(()=>import("./Tooltip-68Yi_FFl-CRPaJsgv.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),Wa=be(()=>Le(()=>import("./DataTable-BT7VF2ua-Cw2NNXsE.js"),__vite__mapDeps([6,2,3,7,1,4,5]),import.meta.url)),Xa=be(()=>Le(()=>import("./UserOptions-1OZ3jcm6-BbpzMig3.js"),__vite__mapDeps([8,2,3,9,1,4,5,10,11]),import.meta.url)),Ba=be(()=>Le(()=>import("./NonSvgPenAndPaper-C7TRn0_3-BAGJMRmj.js"),__vite__mapDeps([12,2,3,1,4,5,13,9]),import.meta.url)),Ua=be(()=>Le(()=>import("./BaseDraggableDialog-ymf2sfB8-Deu3K0kd.js"),__vite__mapDeps([14,2,3,1,4,5]),import.meta.url)),{vue_ui_xy_canvas:Ya}=Kl(),p=Qe,K=d(Rl()),V=d(null),te=d(null),v=d(null),f=d(1),Z=d(1),ve=d(!1),h=d(null),we=d(""),Je=d(null),M=d([]),oe=d(1),P=d(!0),W=d(!0),ze=d(null),Ke=d(0),ce=d(!1),ea=d(null),aa=d(null),G=d(null),la=d(null),Te=d(0),Re=d(0),De=d(0),N=d(null),ta=d(!1),de=d(null),Ee=d(null),he=d(!1),oa=d(!1),$e=d(!1),C=d(null),X=g(()=>Array.isArray(He.value)&&He.value.length>0),Pe=Ha,qa=Il();Fa(()=>{qa["chart-background"]&&console.warn("VueUiXyCanvas does not support the #chart-background slot.")});const a=d(We()),Za=g(()=>!!a.value.debug),{loading:Ne,FINAL_DATASET:He}=et({...Ml(p),FINAL_CONFIG:a,prepareConfig:We,skeletonDataset:[{name:"",series:[0,1,2,3,5,8,13,21,34,55,89,134],type:"line",smooth:!0,color:"#BABABA"},{name:"",series:[0,.5,1,1.5,2.5,4,6.5,10.5,17,27.5,44.5,67],type:"bar",color:"#AAAAAA"}],skeletonConfig:Dl({defaultConfig:a.value,userConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:"#99999930",grid:{x:{axisColor:"#6A6A6A",timeLabels:{show:!1},axisName:"",horizontalLines:{color:"#6A6A6A"}},y:{axisColor:"#6A6A6A",axisLabels:{show:!1},axisName:"",verticalLines:{color:"#6A6A6A"}},zeroLine:{color:"#6A6A6A"}},legend:{backgroundColor:"#99999930"},paddingProportions:{left:.05}}}}})}),{userOptionsVisible:Ve,setUserOptionsVisibility:sa,keepUserOptionState:ua}=ut({config:a.value}),{svgRef:w}=rt({config:a.value.style.chart.title});function Ga(){sa(!0)}function ja(){sa(!1),Pe("selectX",{seriesIndex:null,datapoint:null}),h.value=null}function We(){const e=je({userConfig:p.config,defaultConfig:Ya});let l={};return e.theme?l={...je({userConfig:nt.vue_ui_xy_canvas[e.theme]||p.config,defaultConfig:e}),customPalette:El[e.theme]||le}:l=e,p.config&&ke(p.config,"style.chart.scale.min")?l.style.chart.scale.min=p.config.style.chart.scale.min:l.style.chart.scale.min=null,p.config&&ke(p.config,"style.chart.scale.max")?l.style.chart.scale.max=p.config.style.chart.scale.max:l.style.chart.scale.max=null,p.config&&ke(p.config,"style.chart.zoom.startIndex")?l.style.chart.zoom.startIndex=p.config.style.chart.zoom.startIndex:l.style.chart.zoom.startIndex=null,p.config&&ke(p.config,"style.chart.zoom.endIndex")?l.style.chart.zoom.endIndex=p.config.style.chart.zoom.endIndex:l.style.chart.zoom.endIndex=null,p.config&&ke(p.config,"style.chart.grid.y.timeLabels")&&(console.warn("VueUiXyCanvas: you are using the deprecated config.style.chart.grid.y.timeLabels. It is recommended to move this configuration to config.style.chart.grid.x.timeLabels."),l.style.chart.grid.x.timeLabels=je({defaultConfig:l.style.chart.grid.x.timeLabels,userConfig:p.config.style.chart.grid.y.timeLabels})),l}T(()=>p.config,e=>{Ne.value||(a.value=We()),Ve.value=!a.value.userOptions.showOnChartHover,ka(),Te.value+=1,Re.value+=1,De.value+=1,c.value.showTable=a.value.table.show,c.value.showDataLabels=a.value.style.chart.dataLabels.show,c.value.stacked=a.value.style.chart.stacked,c.value.showTooltip=a.value.style.chart.tooltip.show},{deep:!0}),T(()=>p.dataset,async e=>{!Array.isArray(e)||e.length===0||(await pe(),w.value&&!v.value&&(v.value=w.value.getContext("2d",{willReadFrequently:!0})),P.value=!0,W.value=!0,await me(),Ie(),Te.value+=1,Re.value+=1,De.value+=1)},{deep:!0});const ra=d(a.value.style.chart.aspectRatio),{isPrinting:ia,isImaging:na,generatePdf:va,generateImage:ca}=lt({elementId:"xy_canvas_".concat(K.value),fileName:a.value.style.chart.title.text||"vue-ui-xy-canvas",options:a.value.userOptions.print}),c=d({showTable:a.value.table.show,showDataLabels:a.value.style.chart.dataLabels.show,stacked:a.value.style.chart.stacked,showTooltip:a.value.style.chart.tooltip.show});function da(e){ce.value=e,Ke.value+=1}const ha=g(()=>Pl(a.value.customPalette)),_=g(()=>R.value?Math.max(...R.value.filter((e,l)=>!M.value.includes(e.absoluteIndex)).map(e=>e.series.length)):0);function Qa(e){C.value=e,j()}const o=g(()=>{const e=f.value-f.value*(a.value.style.chart.paddingProportions.left+a.value.style.chart.paddingProportions.right);return{canvasWidth:f.value,canvasHeight:Z.value,left:f.value*a.value.style.chart.paddingProportions.left,top:Z.value*a.value.style.chart.paddingProportions.top,right:f.value-f.value*a.value.style.chart.paddingProportions.right,bottom:Z.value-Z.value*a.value.style.chart.paddingProportions.bottom,width:e,height:Z.value-Z.value*(a.value.style.chart.paddingProportions.top+a.value.style.chart.paddingProportions.bottom),slot:e/(s.value.end-s.value.start)}});function ya(e,l){return e/l}function Ja({hasAutoScale:e,series:l,min:t,max:u,scale:r,yOffset:i,individualHeight:n,stackIndex:y=null}){return l.map((A,b)=>{const O=r.min<0?Math.abs(r.min):0,B=ya(A+O,O+r.max);let D,re;e&&(D=r.min,re=ya(A-D,r.max-D));let E=0;return y===null?E=o.value.bottom-o.value.height*(e?re:B):E=o.value.bottom-i-n*(e?re:B),{x:o.value.left+o.value.slot*b+o.value.slot/2,y:E,value:A}})}const z=g(()=>{const e=a.value.style.chart.scale.min!==null?a.value.style.chart.scale.min:Math.min(...R.value.filter((n,y)=>!M.value.includes(n.absoluteIndex)).flatMap(n=>n.series.slice(s.value.start,s.value.end))),l=a.value.style.chart.scale.max!==null?a.value.style.chart.scale.max:Math.max(...R.value.filter((n,y)=>!M.value.includes(n.absoluteIndex)).flatMap(n=>n.series.slice(s.value.start,s.value.end))),t=Ze(e<0?e:0,l===e?e+1<0?0:e+1:l<0?0:l,a.value.style.chart.scale.ticks),u=t.min<0?Math.abs(t.min):0,r=o.value.bottom-o.value.height*(u/(t.max+u)),i=t.ticks.map(n=>({y:o.value.bottom-o.value.height*((n+u)/(t.max+u)),x:o.value.left-8,value:n}));return{absoluteMin:u,max:l,min:e,scale:t,yLabels:i,zero:r}}),Ka=g(()=>m.value.map(e=>{var l,t;return'\n            <div style="display:flex;flex-direction:row;gap:6px;align-items:center;">\n                <svg viewBox="0 0 10 10" height="12" width="12">\n                    <circle cx="5" cy="5" r="5" fill="'.concat(e.color,'"/>\n                </svg>\n                <span>').concat(e.name?e.name+": ":"","</span>\n                <span>").concat(ie(a.value.style.chart.dataLabels.formatter,(l=e.series[h.value])!=null?l:"-",ne({p:e.prefix||"",v:(t=e.series[h.value])!=null?t:"-",s:e.suffix||"",r:e.rounding||0}),{datapoint:e,seriesIndex:h.value}),"</span>\n            </div>\n        ")})),Se=g(()=>a.value.style.chart.line.cutNullValues),R=g(()=>He.value.map((e,l)=>({...e,series:Nl({data:Hl(e.series,[],Se.value),threshold:a.value.downsample.threshold}),absoluteIndex:l,color:Da(e.color||ha.value[l]||le[l]||le[l%le.length])}))),el=g(()=>{if(!a.value.style.chart.zoom.minimap.show)return[];const e=R.value.filter(r=>!M.value.includes(r.absoluteIndex)),l=Math.max(...e.map(r=>r.series.length)),t=[];for(let r=0;r<l;r+=1)t.push(e.map(i=>i.series[r]||0).reduce((i,n)=>(i||0)+(n||0),0));const u=Math.min(...t);return t.map(r=>r+(u<0?Math.abs(u):0))}),al=g(()=>a.value.style.chart.zoom.minimap.show?R.value.map(e=>({...e,isVisible:!M.value.includes(e.absoluteIndex)})):[]);T(_,e=>{e&&me()});const m=g(()=>Vl(R.value.filter((e,l)=>!M.value.includes(e.absoluteIndex))).map((e,l)=>({...e,series:e.series.slice(s.value.start,s.value.end)})).map((e,l)=>{let t=[null,void 0].includes(e.scaleMin)?Math.min(...e.series)||0:e.scaleMin,u=[null,void 0].includes(e.scaleMax)?Math.max(...e.series)||1:e.scaleMax;t===u&&(t=t>=0?u-1:t,u=u>=0?u:t+1),e.series.filter(E=>![null,void 0].includes(E)).map(E=>(E-t)/(u-t));const r={valueMin:t,valueMax:u},i=e.scaleSteps||a.value.style.chart.scale.ticks;let n;e.autoScaling?n=Ze(r.valueMin,r.valueMax,i):n=Ze(r.valueMin<0?r.valueMin:0,r.valueMax<=0?0:r.valueMax,i);const y=c.value.stacked?o.value.height*(1-e.cumulatedStackRatio):0,A=c.value.stacked?o.value.height/a.value.style.chart.stackGap:0,b=c.value.stacked?o.value.height*e.stackRatio-A:o.value.height,O=n.min<0?Math.abs(n.min):0;let B;e.autoScaling&&c.value.stacked&&u<=0?B=o.value.bottom-y-b:B=o.value.bottom-y-b*(O/(n.max+O));const D=n.ticks.map((E,Sl)=>({y:o.value.bottom-y-b*(Sl/(n.ticks.length-1)),x:o.value.left-8,value:E})),re=Ja({hasAutoScale:c.value.stacked&&e.autoScaling,series:e.series,min:c.value.stacked?t:z.value.min,max:c.value.stacked?u:z.value.max,scale:c.value.stacked?n:z.value.scale,yOffset:y,individualHeight:b,stackIndex:c.value.stacked?l:null});return{...e,coordinatesLine:re,min:t,max:u,localScale:n,localZero:B,localMin:O,localYLabels:D,yOffset:y,individualHeight:b}})),s=d({start:0,end:_.value}),S=d({start:0,end:_.value}),ye=d(null);function ll(){return new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(()=>e())))}_a(()=>{ye.value&&cancelAnimationFrame(ye.value)});async function me(){fa(),await pe(),ye.value&&cancelAnimationFrame(ye.value),ye.value=requestAnimationFrame(async()=>{await ll(),fa()})}const tl=g(()=>a.value.style.chart.zoom.preview.enable&&(S.value.start!==s.value.start||S.value.end!==s.value.end));function ma(e,l){S.value[e]=l}async function fa(){if(!he.value){he.value=!0;try{const{startIndex:e,endIndex:l}=a.value.style.chart.zoom,t=Math.max(...R.value.map(i=>i.series.length)),u=e!=null?e:0,r=l!=null?Math.min(ga(l+1),t):t;$e.value=!0,s.value.start=u,s.value.end=r,S.value.start=u,S.value.end=r,Xe(),oa.value=!0,await pe(),G.value&&(G.value.setStartValue(s.value.start),G.value.setEndValue(s.value.end))}finally{queueMicrotask(()=>{$e.value=!1}),he.value=!1}}}function ol(e){he.value||$e.value||e!==s.value.start&&(s.value.start=e,S.value.start=e,Xe())}function sl(e){if(he.value||$e.value)return;const l=ga(e);l!==s.value.end&&(s.value.end=l,S.value.end=l,Xe())}function ga(e){const l=_.value;return e>l?l:e<0||e<s.value.start?a.value.style.chart.zoom.startIndex!==null?a.value.style.chart.zoom.startIndex+1:1:e}function Xe(){var u,r;const e=Math.max(1,Math.max(...R.value.map(i=>i.series.length)));let l=Math.max(0,Math.min((u=s.value.start)!=null?u:0,e-1)),t=Math.max(l+1,Math.min((r=s.value.end)!=null?r:e,e));(!Number.isFinite(l)||!Number.isFinite(t)||t<=l)&&(l=0,t=e),s.value={start:l,end:t},S.value.start=l,S.value.end=t,G.value&&(G.value.setStartValue(l),G.value.setEndValue(t))}const ul=g(()=>m.value.filter(e=>["line","plot",void 0].includes(e.type))),I=g(()=>m.value.filter(e=>e.type==="bar"));function Ie(){var t;if(!w.value||!te.value)return;const e=te.value.offsetWidth,l=te.value.offsetHeight;w.value.width=e*oe.value*2,w.value.height=l*oe.value*2,f.value=e*oe.value*2,Z.value=l*oe.value*2,(t=v.value)==null||t.scale(oe.value,oe.value),j()}T(X,async e=>{if(!e){ze.value=null,ve.value=!1,h.value=null,N.value=null;return}await pe(),w.value&&!v.value&&(v.value=w.value.getContext("2d",{willReadFrequently:!0})),P.value=!0,W.value=!0,await me(),Ie(),j()});function rl(){if(v.value&&(v.value.clearRect(0,0,1e4,1e4),v.value.fillStyle=a.value.style.chart.backgroundColor,v.value.fillRect(0,0,o.value.canvasWidth,o.value.canvasHeight),!!X.value)){if(c.value.stacked)a.value.style.chart.grid.y.verticalLines.show&&s.value.end-s.value.start<a.value.style.chart.grid.y.verticalLines.hideUnderXLength?m.value.forEach(e=>{for(let l=0;l<s.value.end-s.value.start+1;l+=1)k(v.value,[{x:o.value.left+o.value.slot*l,y:o.value.bottom-e.yOffset-e.individualHeight},{x:o.value.left+o.value.slot*l,y:o.value.bottom-e.yOffset}],{color:a.value.style.chart.grid.y.verticalLines.color})}):a.value.style.chart.grid.y.verticalLines.show&&s.value.end-s.value.start>=a.value.style.chart.grid.y.verticalLines.hideUnderXLength&&m.value.forEach(e=>{for(let l=s.value.start;l<s.value.end;l+=1)l%Math.floor((s.value.end-s.value.start)/a.value.style.chart.grid.x.timeLabels.modulo)===0&&k(v.value,[{x:o.value.left+o.value.slot*(l-s.value.start)+o.value.slot/2,y:o.value.bottom-e.yOffset-e.individualHeight},{x:o.value.left+o.value.slot*(l-s.value.start)+o.value.slot/2,y:o.value.bottom-e.yOffset}],{color:a.value.style.chart.grid.y.verticalLines.color})}),a.value.style.chart.grid.x.horizontalLines.show&&(a.value.style.chart.grid.x.horizontalLines.alternate?m.value.forEach(e=>{e.localYLabels.forEach((l,t)=>{t<e.localYLabels.length-1&&Oe(v.value,[{x:o.value.left,y:l.y},{x:o.value.right,y:l.y},{x:o.value.right,y:e.localYLabels[t+1].y},{x:o.value.left,y:e.localYLabels[t+1].y}],{fillColor:t%2===0?"transparent":Ce(a.value.style.chart.grid.x.horizontalLines.color,a.value.style.chart.grid.x.horizontalLines.opacity),strokeColor:"transparent"})})}):m.value.forEach(e=>{e.localYLabels.slice(s.value.start,s.value.end).forEach(l=>{k(v.value,[{x:o.value.left,y:l.y},{x:o.value.right,y:l.y}],{color:a.value.style.chart.grid.x.horizontalLines.color})})})),a.value.style.chart.grid.zeroLine.show&&m.value.forEach(e=>{k(v.value,[{x:o.value.left,y:e.localZero},{x:o.value.right,y:e.localZero}],{color:a.value.style.chart.grid.zeroLine.color,lineDash:a.value.style.chart.grid.zeroLine.dashed?[10,10]:[0,0]})}),a.value.style.chart.grid.y.axisLabels.show&&m.value.forEach(e=>{k(v.value,[{x:o.value.left,y:o.value.bottom-e.yOffset},{x:o.value.left,y:o.value.bottom-e.yOffset-e.individualHeight}],{color:e.color}),k(v.value,[{x:o.value.right,y:o.value.bottom-e.yOffset},{x:o.value.right,y:o.value.bottom-e.yOffset-e.individualHeight}],{color:e.color})}),m.value.forEach(e=>{q(v.value,e.name,f.value/35,o.value.bottom-e.yOffset-e.individualHeight/2,{align:"center",rotation:-90,color:e.color,font:"".concat(Math.round(f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily)})});else{if(a.value.style.chart.grid.y.verticalLines.show&&s.value.end-s.value.start<a.value.style.chart.grid.y.verticalLines.hideUnderXLength)for(let e=0;e<s.value.end-s.value.start+1;e+=1)k(v.value,[{x:o.value.left+o.value.slot*e,y:o.value.top},{x:o.value.left+o.value.slot*e,y:o.value.bottom}],{color:a.value.style.chart.grid.y.verticalLines.color});else if(a.value.style.chart.grid.y.verticalLines.show&&s.value.end-s.value.start>=a.value.style.chart.grid.y.verticalLines.hideUnderXLength)for(let e=s.value.start;e<s.value.end;e+=1)e%Math.floor((s.value.end-s.value.start)/a.value.style.chart.grid.x.timeLabels.modulo)===0&&k(v.value,[{x:o.value.left+o.value.slot*(e-s.value.start)+o.value.slot/2,y:o.value.top},{x:o.value.left+o.value.slot*(e-s.value.start)+o.value.slot/2,y:o.value.bottom}],{color:a.value.style.chart.grid.y.verticalLines.color});a.value.style.chart.grid.x.horizontalLines.show&&(a.value.style.chart.grid.x.horizontalLines.alternate?z.value.yLabels.forEach((e,l)=>{l<z.value.yLabels.length-1&&Oe(v.value,[{x:o.value.left,y:e.y},{x:o.value.right,y:e.y},{x:o.value.right,y:z.value.yLabels[l+1].y},{x:o.value.left,y:z.value.yLabels[l+1].y}],{fillColor:l%2===0?"transparent":Ce(a.value.style.chart.grid.x.horizontalLines.color,a.value.style.chart.grid.x.horizontalLines.opacity),strokeColor:"transparent"})}):z.value.yLabels.forEach(e=>{k(v.value,[{x:o.value.left,y:e.y},{x:o.value.right,y:e.y}],{color:a.value.style.chart.grid.x.horizontalLines.color})})),a.value.style.chart.grid.y.showAxis&&k(v.value,[{x:o.value.left,y:o.value.top},{x:o.value.left,y:o.value.bottom}],{color:a.value.style.chart.grid.y.axisColor,lineWidth:a.value.style.chart.grid.y.axisThickness}),a.value.style.chart.grid.x.showAxis&&k(v.value,[{x:o.value.left,y:o.value.bottom},{x:o.value.right,y:o.value.bottom}],{color:a.value.style.chart.grid.x.axisColor,lineWidth:a.value.style.chart.grid.x.axisThickness}),a.value.style.chart.grid.zeroLine.show&&k(v.value,[{x:o.value.left,y:z.value.zero},{x:o.value.right,y:z.value.zero}],{color:a.value.style.chart.grid.zeroLine.color,lineDash:a.value.style.chart.grid.zeroLine.dashed?[10,10]:[0,0]})}a.value.style.chart.grid.y.axisName&&q(v.value,a.value.style.chart.grid.y.axisName,f.value-f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio*1.2,o.value.bottom-o.value.height/2,{font:"".concat(a.value.style.chart.grid.y.axisLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:a.value.style.chart.color,align:"center",rotation:90}),a.value.style.chart.grid.x.axisName&&q(v.value,a.value.style.chart.grid.x.axisName,f.value/2,Z.value,{font:"".concat(a.value.style.chart.grid.y.axisLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:a.value.style.chart.color,align:"center"})}}function il(e){for(let l=0;l<e.coordinatesLine.length;l+=1){const t=(h.value===l||C.value===l?f.value/150:a.value.style.chart.line.plots.show||e.type==="plot"?f.value/200:0)*a.value.style.chart.line.plots.radiusRatio;Ge(v.value,{x:e.coordinatesLine[l].x,y:e.coordinatesLine[l].y},t,{color:a.value.style.chart.backgroundColor,fillStyle:e.color})}}function nl(){m.value.forEach(e=>{e.showYMarker&&fe(e)&&q(v.value,ie(a.value.style.chart.dataLabels.formatter,fe(e).value,ne({p:e.prefix||a.value.style.chart.grid.y.axisLabels.prefix||"",v:fe(e).value,s:e.suffix||a.value.style.chart.grid.y.axisLabels.suffix||"",r:e.rounding||a.value.style.chart.grid.y.axisLabels.rounding||0}),{datapoint:fe(e),seriesIndex:null}),o.value.left-8+a.value.style.chart.grid.y.axisLabels.offsetX,fe(e).y,{align:"right",font:"".concat(a.value.style.chart.grid.y.axisLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:e.color})})}function vl(){a.value.style.chart.grid.y.axisLabels.show&&(c.value.stacked?m.value.forEach(e=>{e.localYLabels.forEach((l,t)=>{var u;q(v.value,ie(a.value.style.chart.dataLabels.formatter,l.value,ne({p:e.prefix||a.value.style.chart.grid.y.axisLabels.prefix||"",v:l.value,s:e.suffix||a.value.style.chart.grid.y.axisLabels.suffix||"",r:e.rounding||a.value.style.chart.grid.y.axisLabels.rounding||0}),{datapoint:l,seriesIndex:t}),l.x+a.value.style.chart.grid.y.axisLabels.offsetX,l.y,{align:"right",font:"".concat(a.value.style.chart.grid.y.axisLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:e.color,globalAlpha:e.showYMarker&&![null,void 0].includes((u=h.value)!=null?u:C.value)?.2:1})})}):z.value.yLabels.forEach((e,l)=>{var t;q(v.value,ie(a.value.style.chart.dataLabels.formatter,e.value,ne({p:a.value.style.chart.grid.y.axisLabels.prefix||"",v:e.value,s:a.value.style.chart.grid.y.axisLabels.suffix||"",r:a.value.style.chart.grid.y.axisLabels.rounding||0}),{datapoint:e,seriesIndex:l}),e.x+a.value.style.chart.grid.y.axisLabels.offsetX,e.y,{align:"right",font:"".concat(a.value.style.chart.grid.y.axisLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.grid.y.axisLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:a.value.style.chart.grid.y.axisLabels.color,globalAlpha:m.value.some(u=>u.showYMarker)&&![null,void 0].includes((t=h.value)!=null?t:C.value)?.2:1})}))}function cl(e){for(let l=0;l<e.coordinatesLine.length;l+=1)q(v.value,ie(a.value.style.chart.dataLabels.formatter,e.coordinatesLine[l].value,ne({p:e.prefix||"",v:e.coordinatesLine[l].value,s:e.suffix||"",r:e.rounding||0}),{datapoint:e.coordinatesLine[l],seriesIndex:l}),e.coordinatesLine[l].x,e.coordinatesLine[l].y+a.value.style.chart.dataLabels.offsetY,{align:"center",font:"".concat(a.value.style.chart.dataLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.dataLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:a.value.style.chart.dataLabels.useSerieColor?e.color:a.value.style.chart.dataLabels.color,strokeColor:a.value.style.chart.backgroundColor,lineWidth:.5})}const H=g(()=>tt({values:a.value.style.chart.grid.x.timeLabels.values,maxDatapoints:_.value,formatter:a.value.style.chart.grid.x.timeLabels.datetimeFormatter,start:0,end:_.value})),pa=g(()=>{const e=a.value.style.chart.grid.x.timeLabels.datetimeFormatter,l=ot({useUTC:e.useUTC,locale:st[e.locale]||{months:[],shortMonths:[],days:[],shortDays:[]},januaryAsYear:e.januaryAsYear});return(t,u)=>{var i;const r=(i=a.value.style.chart.grid.x.timeLabels.values)==null?void 0:i[t];return r==null?"":l.formatDate(new Date(r),u)}}),ba=g(()=>(a.value.style.chart.grid.x.timeLabels.values||[]).map((e,l)=>({text:pa.value(l,a.value.style.chart.zoom.timeFormat),absoluteIndex:l}))),dl=g(()=>(a.value.style.chart.grid.x.timeLabels.values||[]).map((e,l)=>({text:pa.value(l,a.value.style.chart.tooltip.timeFormat),absoluteIndex:l})));function hl(){for(let e=s.value.start;e<s.value.end;e+=1)(s.value.end-s.value.start<a.value.style.chart.grid.x.timeLabels.modulo||s.value.end-s.value.start>=a.value.style.chart.grid.x.timeLabels.modulo&&(e%Math.floor((s.value.end-s.value.start)/a.value.style.chart.grid.x.timeLabels.modulo)===0||(e===h.value+s.value.start||e===C.value)&&a.value.style.chart.grid.x.timeLabels.showMarker))&&q(v.value,H.value[e]?H.value[e].text:e+1,o.value.left+o.value.slot*(e-s.value.start)+o.value.slot/2,o.value.bottom+f.value/a.value.style.chart.grid.x.timeLabels.offsetY,{align:a.value.style.chart.grid.x.timeLabels.rotation===0?"center":a.value.style.chart.grid.x.timeLabels.rotation>0?"left":"right",font:"".concat(a.value.style.chart.grid.x.timeLabels.bold?"bold ":"").concat(Math.round(f.value/40*a.value.style.chart.grid.x.timeLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:a.value.style.chart.grid.x.timeLabels.showMarker?Ce(a.value.style.chart.grid.x.timeLabels.color,h.value!==null||C.value!==null?h.value+s.value.start===e||C.value===e?100:20:100):a.value.style.chart.grid.x.timeLabels.color,rotation:a.value.style.chart.grid.x.timeLabels.rotation})}function xa(){var e,l;k(v.value,[{x:o.value.left+o.value.slot*((e=h.value)!=null?e:C.value)+o.value.slot/2,y:o.value.top},{x:o.value.left+o.value.slot*((l=h.value)!=null?l:C.value)+o.value.slot/2,y:o.value.bottom}],{color:a.value.style.chart.selector.color,lineDash:a.value.style.chart.selector.dashed?[8,8]:[0,0],lineWidth:2})}function yl(){N.value&&k(v.value,[{x:o.value.left,y:N.value},{x:o.value.right,y:N.value}],{color:a.value.style.chart.selector.color,lineDash:a.value.style.chart.selector.dashed?[8,8]:[0,0],lineWidth:2})}function ml(){I.value.forEach((e,l)=>{for(let t=0;t<e.coordinatesLine.length;t+=1)Oe(v.value,[{x:o.value.left+o.value.slot*t+o.value.slot/10+(c.value.stacked?0:o.value.slot/I.value.length*l-(l===0?0:o.value.slot/(5*I.value.length)*l)),y:c.value.stacked?e.localZero:z.value.zero},{x:o.value.left+o.value.slot*t+o.value.slot/10+(c.value.stacked?0:o.value.slot/I.value.length*l-(l===0?0:o.value.slot/(5*I.value.length)*l))+o.value.slot*.8/(c.value.stacked?1:I.value.length),y:c.value.stacked?e.localZero:z.value.zero},{x:o.value.left+o.value.slot*t+o.value.slot/10+(c.value.stacked?0:o.value.slot/I.value.length*l-(l===0?0:o.value.slot/(5*I.value.length)*l))+o.value.slot*.8/(c.value.stacked?1:I.value.length),y:e.coordinatesLine[t].y},{x:o.value.left+o.value.slot*t+o.value.slot/10+(c.value.stacked?0:o.value.slot/I.value.length*l-(l===0?0:o.value.slot/(5*I.value.length)*l)),y:e.coordinatesLine[t].y}],{strokeColor:a.value.style.chart.backgroundColor,gradient:{type:"linear",start:{x:e.coordinatesLine[t].x,y:e.coordinatesLine[t].y},end:{x:e.coordinatesLine[t].x,y:c.value.stacked?e.localZero:z.value.zero},stops:[{offset:0,color:e.color},{offset:1,color:a.value.style.chart.bar.gradient.show?Ul(e.color,.5):e.color}]}}),c.value.showDataLabels&&[!0,void 0].includes(e.dataLabels)&&q(v.value,ie(a.value.style.chart.dataLabels.formatter,e.coordinatesLine[t].value,ne({p:e.prefix||"",v:e.coordinatesLine[t].value,s:e.suffix||"",r:e.rounding||0}),{datapoint:e.coordinatesLine[t],seriesIndex:t}),o.value.left+o.value.slot*t+o.value.slot/10+(c.value.stacked?0:o.value.slot/I.value.length*l-(l===0?0:o.value.slot/(5*I.value.length)*l))+o.value.slot*.4/(c.value.stacked?1:I.value.length),(e.coordinatesLine[t].value<0?c.value.stacked?e.localZero:z.value.zero:e.coordinatesLine[t].y)+a.value.style.chart.dataLabels.offsetY,{align:"center",font:"".concat(Math.round(f.value/40*a.value.style.chart.dataLabels.fontSizeRatio),"px ").concat(a.value.style.fontFamily),color:a.value.style.chart.dataLabels.useSerieColor?e.color:a.value.style.chart.dataLabels.color,strokeColor:a.value.style.chart.backgroundColor,lineWidth:.8})})}function fl(e,l){const t=e.coordinatesLine.map((n,y)=>e.series[y]!=null&&Number.isFinite(n==null?void 0:n.y)?n:null),u=[],r=[];let i=[];for(let n=0;n<t.length;n+=1){const y=t[n];if(y)i.push(y);else{if(i.length>=2){const A=i[0],b=i[i.length-1];u.push([{x:A.x,y:l},...i,{x:b.x,y:l}])}else i.length===1&&r.push(i[0]);i=[]}}if(i.length>=2){const n=i[0],y=i[i.length-1];u.push([{x:n.x,y:l},...i,{x:y.x,y:l}])}else i.length===1&&r.push(i[0]);return{polygons:u,singles:r}}function gl(e){const l=e.coordinatesLine.map((r,i)=>e.series[i]!=null&&Number.isFinite(r==null?void 0:r.y)?r:null),t=[];let u=[];for(let r=0;r<l.length;r+=1){const i=l[r];i?u.push(i):(u.length>=2&&t.push(u),u=[])}return u.length>=2&&t.push(u),t}function La(e){if(Se.value){const l=gl(e);for(const t of l)k(v.value,t,{color:e.color,lineWidth:3})}else k(v.value,e.coordinatesLine,{color:e.color,lineWidth:3})}function pl(e){const l=!!Se.value;if(e.useArea){const t=c.value.stacked?e.localZero:z.value.zero;if(l){const{polygons:u,singles:r}=fl(e,t);for(const n of u)Pa(v.value,n,{fillColor:Ce(e.color,a.value.style.chart.area.opacity),strokeColor:"transparent"});const i=f.value/200*a.value.style.chart.line.plots.radiusRatio;for(const n of r)Ge(v.value,{x:n.x,y:n.y},i,{color:a.value.style.chart.backgroundColor,fillStyle:e.color})}else{const u={x:e.coordinatesLine[0].x,y:t},r={x:e.coordinatesLine.at(-1).x,y:t};Pa(v.value,[u,...e.coordinatesLine,r],{fillColor:Ce(e.color,a.value.style.chart.area.opacity),strokeColor:"transparent"})}La(e);return}La(e)}function bl(){m.value.forEach((e,l)=>{k(v.value,[{x:o.value.left,y:o.value.bottom-e.yOffset},{x:o.value.right,y:o.value.bottom-e.yOffset}],{color:a.value.style.chart.grid.x.horizontalLines.color,lineWidth:1})})}function xl(){const{left:e,top:l,width:t,height:u}=o.value,r=s.value.start,i=s.value.end-r,n=t/i,y=S.value.start-r,A=S.value.end-r,b=Math.max(0,Math.min(i,y)),O=Math.max(0,Math.min(i,A));Oe(v.value,[{x:e+b*n,y:l},{x:e+b*n+(O-b)*n,y:l},{x:e+b*n+(O-b)*n,y:l+u},{x:e+b*n,y:l+u}],{fillColor:a.value.style.chart.zoom.preview.fill,strokeColor:a.value.style.chart.zoom.preview.stroke,lineDash:Array(4).fill(a.value.style.chart.zoom.preview.strokeDasharray),lineWidth:a.value.style.chart.zoom.preview.strokeWidth})}function j(){!X.value||!w.value||!v.value||(rl(),P.value?((h.value!==null||C.value!==null)&&a.value.style.chart.selector.show&&xa(),ml(),c.value.stacked&&a.value.style.chart.grid.x.showAxis&&bl(),ul.value.forEach(e=>{(e.type==="line"||!e.type)&&pl(e),W.value&&(il(e),c.value.showDataLabels&&[!0,void 0].includes(e.dataLabels)&&cl(e))}),w.value&&(ze.value=Gl(w.value))):(ze.value&&(v.value.clearRect(0,0,1e4,1e4),v.value.drawImage(ze.value,0,0)),(h.value!==null||C.value!==null)&&a.value.style.chart.selector.show&&xa(),(h.value!==null||C.value!==null)&&m.value.forEach(e=>{var u;const l=(u=h.value)!=null?u:C.value,t=e.coordinatesLine[l];(e.type==="line"||!e.type||e.type==="plot")&&t&&Number.isFinite(t.x)&&Number.isFinite(t.y)&&Ge(v.value,{x:t.x,y:t.y},f.value/150*a.value.style.chart.line.plots.radiusRatio,{color:a.value.style.chart.backgroundColor,fillStyle:e.color})})),a.value.style.chart.grid.x.timeLabels.show&&hl(),a.value.style.chart.selector.show&&a.value.style.chart.selector.showHorizontalSelector&&yl(),vl(),nl(),a.value.style.chart.zoom.preview.enable&&(s.value.start!==S.value.start||s.value.end!==S.value.end)&&xl(),P.value=!1)}const Me=jl(()=>{W.value=!0,Ie()},_.value>200?10:1,!W.value);function fe(e){var u,r,i;if([null,void 0].includes((u=h.value)!=null?u:C.value)||!e.coordinatesLine[(r=h.value)!=null?r:C.value])return!1;const{y:l,value:t}=e.coordinatesLine[(i=h.value)!=null?i:C.value];return{y:l,value:t}}function Ll(e){var A,b,O,B;if(!X.value||!w.value)return;const{left:l,top:t}=w.value.getBoundingClientRect(),u=e.clientX-l;if(N.value=(e.clientY-t)*2,(N.value<o.value.top||N.value>o.value.bottom)&&(N.value=null),u*2<o.value.left||u*2>o.value.right){ve.value=!1,h.value=null;return}const r=u*2-o.value.left;if(h.value=Math.floor(r/o.value.slot),ve.value=!0,!W.value)return;let i="";const n=a.value.style.chart.tooltip.customFormat,y=m.value.map(D=>({shape:D.shape||null,name:D.name,color:D.color,type:D.type||"line",value:D.series.find((re,E)=>E===h.value)}));kl({seriesIndex:h.value,datapoint:y}),Ea(n)&&Zl(()=>n({seriesIndex:h.value,datapoint:y,series:m.value,config:a.value}))?we.value=n({seriesIndex:h.value,datapoint:y,series:m.value,config:a.value}):(a.value.style.chart.grid.x.timeLabels.values.slice(s.value.start,s.value.end)[h.value]?i+='<div style="padding-bottom: 6px; margin-bottom: 4px; border-bottom: 1px solid '.concat(a.value.style.chart.tooltip.borderColor,'; width:100%">').concat(a.value.style.chart.tooltip.useDefaultTimeFormat?(A=H.value.slice(s.value.start,s.value.end)[h.value])==null?void 0:A.text:(b=dl.value[h.value])==null?void 0:b.text,"</div>"):i+='<div style="padding-bottom: 6px; margin-bottom: 4px; border-bottom: 1px solid '.concat(a.value.style.chart.tooltip.borderColor,'; width:100%">').concat((B=(O=H.value[h.value+s.value.start])==null?void 0:O.text)!=null?B:"","</div>"),i+=Ka.value.join(""),we.value=i),W.value=!1}function kl({seriesIndex:e,datapoint:l}){const t=s.value.start+e;Pe("selectX",{dataset:l,index:t,indexLabel:""})}T(()=>p.selectedXIndex,e=>{if([null,void 0].includes(p.selectedXIndex)){h.value=null;return}const l=e-s.value.start;l<0||e>=s.value.end?h.value=null:h.value=l!=null?l:null},{immediate:!0}),T(()=>h.value,e=>{Me()}),T(()=>s.value,e=>{P.value=!0,j()},{deep:!0}),T(()=>S.value,e=>{j()},{deep:!0}),T(()=>c.value.showDataLabels,e=>{P.value=!0,j()}),T(()=>N.value,e=>{e&&j()}),T(()=>c.value.stacked,e=>{P.value=!0,W.value=!0,Me()});function Cl(){ve.value=!1,h.value=null,we.value="",N.value=null,j()}const Q=Ye(null),se=Ye(null),ue=Ye(null);Fa(()=>{ta.value=!0,ka()});function ka(){if(Wl(p.dataset)&&Za.value&&Xl({componentName:"VueUiXyCanvas",type:"dataset"}),pe(()=>{w.value&&!v.value&&(v.value=w.value.getContext("2d",{willReadFrequently:!0})),v.value&&X.value&&(P.value=!0,W.value=!0,Ie())}),a.value.responsive){const e=Ql(()=>{var u;const{width:l,height:t}=Jl({chart:V.value,title:a.value.style.chart.title.text?ea.value:null,legend:a.value.style.chart.legend.show?aa.value:null,slicer:a.value.style.chart.zoom.show&&_.value>6?(u=G.value)==null?void 0:u.$el:null,source:la.value});requestAnimationFrame(()=>{ra.value="".concat(l," / ").concat(t)})});Q.value&&(se.value&&Q.value.unobserve(se.value),Q.value.disconnect()),Q.value=new ResizeObserver(e),se.value=V.value.parentNode,Q.value.observe(se.value)}ue.value&&ue.value.disconnect(),ue.value=new ResizeObserver(e=>{for(const l of e)l.contentBoxSize&&te.value&&(P.value=!0,Me())}),ue.value.observe(te.value),me()}_a(()=>{ue.value&&ue.value.disconnect(),Q.value&&(se.value&&Q.value.unobserve(se.value),Q.value.disconnect())});function Ca(e){Pe("selectLegend",m.value.find(l=>l.absoluteIndex===e)),M.value.includes(e)?M.value=M.value.filter(l=>l!==e):M.value.push(e),P.value=!0,Me()}const wa=g(()=>R.value.map((e,l)=>({...e,name:e.name,color:Da(e.color)||ha.value[l]||le[l]||le[l%le.length],shape:e.shape||"circle",prefix:e.prefix||"",suffix:e.suffix||"",rounding:e.rounding||0})).map(e=>({...e,opacity:M.value.includes(e.absoluteIndex)?.5:1,segregate:()=>Ca(e.absoluteIndex),isSegregated:M.value.includes(e.absoluteIndex)}))),wl=g(()=>({cy:"donut-div-legend",backgroundColor:a.value.style.chart.legend.backgroundColor,color:a.value.style.chart.legend.color,fontSize:a.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:a.value.style.chart.legend.bold?"bold":""})),Ae=g(()=>{const e=[""].concat(m.value.map(r=>r.name)).concat(' <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>');let l=[];for(let r=0;r<_.value;r+=1){const i=m.value.map(n=>{var y;return(y=n.series[r])!=null?y:0}).reduce((n,y)=>n+y,0);l.push([a.value.style.chart.grid.x.timeLabels.values.slice(s.value.start,s.value.end)[r]?H.value.slice(s.value.start,s.value.end)[r].text:r+1].concat(m.value.map(n=>{var y;return((y=n.series[r])!=null?y:0).toFixed(a.value.table.rounding)})).concat((i!=null?i:0).toFixed(a.value.table.rounding)))}const t={th:{backgroundColor:a.value.table.th.backgroundColor,color:a.value.table.th.color,outline:a.value.table.th.outline},td:{backgroundColor:a.value.table.td.backgroundColor,color:a.value.table.td.color,outline:a.value.table.td.outline},breakpoint:a.value.table.responsiveBreakpoint},u=[a.value.table.columnNames.period].concat(m.value.map(r=>r.name)).concat(a.value.table.columnNames.total);return{head:e,body:l.slice(0,s.value.end-s.value.start),config:t,colNames:u}}),za=g(()=>{if(m.value.length===0)return{head:[],body:[],config:{},columnNames:[]};const e=m.value.map(t=>({label:t.name,color:t.color,type:t.type})),l=[];for(let t=s.value.start;t<s.value.end;t+=1){const u=[a.value.style.chart.grid.x.timeLabels.values[t]?H.value[t].text:t+1];m.value.forEach(r=>{u.push(Number((r.series[t]||0).toFixed(a.value.table.rounding)))}),l.push(u)}return{head:e,body:l}});function Be(e=null){const l=[[a.value.style.chart.title.text],[a.value.style.chart.title.subtitle.text],[""]],t=["",...za.value.head.map(n=>n.label)],u=za.value.body,r=l.concat([t]).concat(u),i=Yl(r);e?e(i):ql({csvContent:i,title:a.value.style.chart.title.text||"vue-ui-xy-canvas"})}function zl(){return m.value}function $a(){c.value.showTable=!c.value.showTable}function Sa(){c.value.showDataLabels=!c.value.showDataLabels}function Ia(){c.value.stacked=!c.value.stacked}function Ma(){c.value.showTooltip=!c.value.showTooltip}const Fe=d(!1);function Ue(){Fe.value=!Fe.value}async function $l({scale:e=2}={}){if(!V.value)return;const{width:l,height:t}=V.value.getBoundingClientRect(),u=l/t,{imageUri:r,base64:i}=await it({domElement:V.value,base64:!0,img:!0,scale:e});return{imageUri:r,base64:i,title:a.value.style.chart.title.text,width:l,height:t,aspectRatio:u}}const ge=g(()=>{const e=a.value.table.useDialog&&!a.value.table.show,l=c.value.showTable;return{component:e?Ua:dt,title:"".concat(a.value.style.chart.title.text).concat(a.value.style.chart.title.subtitle.text?": ".concat(a.value.style.chart.title.subtitle.text):""),props:e?{backgroundColor:a.value.table.th.backgroundColor,color:a.value.table.th.color,headerColor:a.value.table.th.color,headerBg:a.value.table.th.backgroundColor,isFullscreen:ce.value,fullscreenParent:V.value,forcedWidth:Math.min(800,window.innerWidth*.8)}:{hideDetails:!0,config:{open:l,maxHeight:1e4,body:{backgroundColor:a.value.style.chart.backgroundColor,color:a.value.style.chart.color},head:{backgroundColor:a.value.style.chart.backgroundColor,color:a.value.style.chart.color}}}}});T(()=>c.value.showTable,e=>{a.value.table.show||(e&&a.value.table.useDialog&&de.value?de.value.open():"close"in de.value&&de.value.close())});function Aa(){c.value.showTable=!1,Ee.value&&Ee.value.setTableIconState(!1)}return Na({getData:zl,getImage:$l,generateCsv:Be,generatePdf:va,generateImage:ca,toggleTable:$a,toggleLabels:Sa,toggleStack:Ia,toggleTooltip:Ma,toggleAnnotator:Ue,toggleFullscreen:da}),(e,l)=>(F(),_e("div",{style:xe("width:100%; position:relative; ".concat(a.value.responsive?"height: 100%":"","; background:").concat(a.value.style.chart.backgroundColor,";")),ref_key:"xy",ref:V,id:"xy_canvas_".concat(K.value),class:Ol("vue-data-ui-component vue-ui-xy-canvas ".concat(ce.value?"vue-data-ui-wrapper-fullscreen":"")),onMouseenter:Ga,onMouseleave:ja},[a.value.style.chart.title.text?(F(),_e("div",{key:0,ref_key:"chartTitle",ref:ea,style:xe("width:100%;background:".concat(a.value.style.chart.backgroundColor,";"))},[(F(),Y(ct,{key:"title_".concat(Te.value),config:{title:{cy:"xy-canvas-title",...a.value.style.chart.title},subtitle:{cy:"xy-canvas-subtitle",...a.value.style.chart.title.subtitle}}},null,8,["config"]))],4)):U("",!0),J("div",{id:"legend-top-".concat(K.value)},null,8,mt),a.value.userOptions.show&&X.value&&(L(ua)||L(Ve))?(F(),Y(L(Xa),{ref_key:"userOptionsRef",ref:Ee,key:"user_option_".concat(Ke.value),backgroundColor:a.value.style.chart.backgroundColor,color:a.value.style.chart.color,isPrinting:L(ia),isImaging:L(na),uid:K.value,hasTooltip:a.value.userOptions.buttons.tooltip&&a.value.style.chart.tooltip.show,hasPdf:a.value.userOptions.buttons.pdf,hasImg:a.value.userOptions.buttons.img,hasXls:a.value.userOptions.buttons.csv,hasLabel:a.value.userOptions.buttons.labels,hasStack:Qe.dataset.length>1&&a.value.userOptions.buttons.stack,hasFullscreen:a.value.userOptions.buttons.fullscreen,hasTable:s.value.end-s.value.start<=730&&a.value.userOptions.buttons.table,isFullscreen:ce.value,isTooltip:c.value.showTooltip,isStacked:c.value.stacked,titles:{...a.value.userOptions.buttonTitles},chartElement:V.value,position:a.value.userOptions.position,hasAnnotator:a.value.userOptions.buttons.annotator,isAnnotation:Fe.value,callbacks:a.value.userOptions.callbacks,printScale:a.value.userOptions.print.scale,tableDialog:a.value.table.useDialog,onToggleFullscreen:da,onGeneratePdf:L(va),onGenerateCsv:Be,onGenerateImage:L(ca),onToggleTable:$a,onToggleLabels:Sa,onToggleStack:Ia,onToggleTooltip:Ma,onToggleAnnotator:Ue,style:xe({visibility:L(ua)?L(Ve)?"visible":"hidden":"visible"})},Oa({_:2},[e.$slots.menuIcon?{name:"menuIcon",fn:x(({isOpen:t,color:u})=>[$(e.$slots,"menuIcon",ee(ae({isOpen:t,color:u})),void 0,!0)]),key:"0"}:void 0,e.$slots.optionTooltip?{name:"optionTooltip",fn:x(()=>[$(e.$slots,"optionTooltip",{},void 0,!0)]),key:"1"}:void 0,e.$slots.optionPdf?{name:"optionPdf",fn:x(()=>[$(e.$slots,"optionPdf",{},void 0,!0)]),key:"2"}:void 0,e.$slots.optionCsv?{name:"optionCsv",fn:x(()=>[$(e.$slots,"optionCsv",{},void 0,!0)]),key:"3"}:void 0,e.$slots.optionImg?{name:"optionImg",fn:x(()=>[$(e.$slots,"optionImg",{},void 0,!0)]),key:"4"}:void 0,e.$slots.optionTable?{name:"optionTable",fn:x(()=>[$(e.$slots,"optionTable",{},void 0,!0)]),key:"5"}:void 0,e.$slots.optionLabels?{name:"optionLabels",fn:x(()=>[$(e.$slots,"optionLabels",{},void 0,!0)]),key:"6"}:void 0,e.$slots.optionStack?{name:"optionStack",fn:x(()=>[$(e.$slots,"optionStack",{},void 0,!0)]),key:"7"}:void 0,e.$slots.optionFullscreen?{name:"optionFullscreen",fn:x(({toggleFullscreen:t,isFullscreen:u})=>[$(e.$slots,"optionFullscreen",ee(ae({toggleFullscreen:t,isFullscreen:u})),void 0,!0)]),key:"8"}:void 0,e.$slots.optionAnnotator?{name:"optionAnnotator",fn:x(({toggleAnnotator:t,isAnnotator:u})=>[$(e.$slots,"optionAnnotator",ee(ae({toggleAnnotator:t,isAnnotator:u})),void 0,!0)]),key:"9"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasTooltip","hasPdf","hasImg","hasXls","hasLabel","hasStack","hasFullscreen","hasTable","isFullscreen","isTooltip","isStacked","titles","chartElement","position","hasAnnotator","isAnnotation","callbacks","printScale","tableDialog","onGeneratePdf","onGenerateImage","style"])):U("",!0),J("div",{class:"vue-ui-xy-canvas",style:xe("position: relative; aspect-ratio: ".concat(ra.value)),ref_key:"container",ref:te},[J("canvas",{ref_key:"canvas",ref:w,style:{width:"100%",height:"100%"},onMousemove:l[0]||(l[0]=t=>Ll(t)),onMouseleave:Cl},null,544),L(Ne)?(F(),Y(at,{key:0})):U("",!0),Ta(L(Va),{show:c.value.showTooltip&&ve.value,backgroundColor:a.value.style.chart.tooltip.backgroundColor,color:a.value.style.chart.tooltip.color,fontSize:a.value.style.chart.tooltip.fontSize,borderRadius:a.value.style.chart.tooltip.borderRadius,borderColor:a.value.style.chart.tooltip.borderColor,borderWidth:a.value.style.chart.tooltip.borderWidth,position:a.value.style.chart.tooltip.position,offsetY:a.value.style.chart.tooltip.offsetY,parent:L(w),content:we.value,isFullscreen:ce.value,backgroundOpacity:a.value.style.chart.tooltip.backgroundOpacity,isCustom:L(Ea)(a.value.style.chart.tooltip.customFormat),smooth:a.value.style.chart.tooltip.smooth,backdropFilter:a.value.style.chart.tooltip.backdropFilter,smoothForce:a.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:a.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":x(()=>[$(e.$slots,"tooltip-before",ee(ae({...Je.value})),void 0,!0)]),"tooltip-after":x(()=>[$(e.$slots,"tooltip-after",ee(ae({...Je.value})),void 0,!0)]),_:3},8,["show","backgroundColor","color","fontSize","borderRadius","borderColor","borderWidth","position","offsetY","parent","content","isFullscreen","backgroundOpacity","isCustom","smooth","backdropFilter","smoothForce","smoothSnapThreshold"])],4),a.value.style.chart.zoom.show&&_.value>6&&X.value&&oa.value&&!L(Ne)?(F(),Y(ht,{key:2,ref_key:"chartSlicer",ref:G,allMinimaps:al.value,background:a.value.style.chart.zoom.color,borderColor:a.value.style.chart.backgroundColor,customFormat:a.value.style.chart.zoom.customFormat,cutNullValues:Se.value,enableRangeHandles:a.value.style.chart.zoom.enableRangeHandles,enableSelectionDrag:a.value.style.chart.zoom.enableSelectionDrag,end:s.value.end,focusOnDrag:a.value.style.chart.zoom.focusOnDrag,focusRangeRatio:a.value.style.chart.zoom.focusRangeRatio,fontSize:a.value.style.chart.zoom.fontSize,immediate:!a.value.style.chart.zoom.preview.enable,inputColor:a.value.style.chart.zoom.color,isPreview:tl.value,labelLeft:a.value.style.chart.grid.x.timeLabels.values[s.value.start]?H.value[s.value.start].text:"",labelRight:a.value.style.chart.grid.x.timeLabels.values[s.value.end-1]?H.value[s.value.end-1].text:"",max:_.value,min:0,minimap:el.value,minimapCompact:a.value.style.chart.zoom.minimap.compact,minimapFrameColor:a.value.style.chart.zoom.minimap.frameColor,minimapIndicatorColor:a.value.style.chart.zoom.minimap.indicatorColor,minimapLineColor:a.value.style.chart.zoom.minimap.lineColor,minimapMerged:a.value.style.chart.zoom.minimap.merged,minimapSelectedColor:a.value.style.chart.zoom.minimap.selectedColor,minimapSelectedColorOpacity:a.value.style.chart.zoom.minimap.selectedColorOpacity,minimapSelectedIndex:h.value,minimapSelectionRadius:a.value.style.chart.zoom.minimap.selectionRadius,preciseLabels:ba.value.length?ba.value:H.value,refreshEndPoint:a.value.style.chart.zoom.endIndex!==null?a.value.style.chart.zoom.endIndex+1:_.value,refreshStartPoint:a.value.style.chart.zoom.startIndex!==null?a.value.style.chart.zoom.startIndex:0,selectColor:a.value.style.chart.zoom.highlightColor,selectedSeries:R.value,smoothMinimap:a.value.style.chart.zoom.minimap.smooth,start:s.value.start,timeLabels:H.value,usePreciseLabels:a.value.style.chart.grid.x.timeLabels.datetimeFormatter.enable&&!a.value.style.chart.zoom.useDefaultFormat,textColor:a.value.style.chart.color,useResetSlot:a.value.style.chart.zoom.useResetSlot,valueEnd:s.value.end,valueStart:s.value.start,verticalHandles:a.value.style.chart.zoom.minimap.verticalHandles,onFutureEnd:l[1]||(l[1]=t=>ma("end",t)),onFutureStart:l[2]||(l[2]=t=>ma("start",t)),onReset:me,onTrapMouse:Qa,"onUpdate:end":sl,"onUpdate:start":ol},{"reset-action":x(({reset:t})=>[$(e.$slots,"reset-action",ee(ae({reset:t})),void 0,!0)]),_:3},8,["allMinimaps","background","borderColor","customFormat","cutNullValues","enableRangeHandles","enableSelectionDrag","end","focusOnDrag","focusRangeRatio","fontSize","immediate","inputColor","isPreview","labelLeft","labelRight","max","minimap","minimapCompact","minimapFrameColor","minimapIndicatorColor","minimapLineColor","minimapMerged","minimapSelectedColor","minimapSelectedColorOpacity","minimapSelectedIndex","minimapSelectionRadius","preciseLabels","refreshEndPoint","refreshStartPoint","selectColor","selectedSeries","smoothMinimap","start","timeLabels","usePreciseLabels","textColor","useResetSlot","valueEnd","valueStart","verticalHandles"])):U("",!0),J("div",{id:"legend-bottom-".concat(K.value)},null,8,ft),ta.value?(F(),Y(Al,{key:3,to:a.value.style.chart.legend.position==="top"?"#legend-top-".concat(K.value):"#legend-bottom-".concat(K.value)},[J("div",{ref_key:"chartLegend",ref:aa},[a.value.style.chart.legend.show&&X.value?(F(),Y(vt,{legendSet:wa.value,config:wl.value,key:"legend_".concat(De.value),onClickMarker:l[3]||(l[3]=({i:t})=>Ca(t))},{item:x(({legend:t,index:u})=>[J("div",{onClick:r=>t.segregate(),style:xe("opacity:".concat(M.value.includes(u)?.5:1))},qe(t.name),13,gt)]),_:1},8,["legendSet","config"])):$(e.$slots,"legend",{key:1,legend:wa.value},void 0,!0)],512)],8,["to"])):U("",!0),e.$slots.watermark?(F(),_e("div",pt,[$(e.$slots,"watermark",ee(ae({isPrinting:L(ia)||L(na)})),void 0,!0)])):U("",!0),e.$slots.source?(F(),_e("div",{key:5,ref_key:"source",ref:la,dir:"auto"},[$(e.$slots,"source",{},void 0,!0)],512)):U("",!0),X.value&&a.value.userOptions.buttons.table?(F(),Y(_l(ge.value.component),Fl({key:6},ge.value.props,{ref_key:"tableUnit",ref:de,onClose:Aa}),Oa({content:x(()=>[(F(),Y(L(Wa),{key:"table_".concat(Re.value),colNames:Ae.value.colNames,head:Ae.value.head,body:Ae.value.body,config:Ae.value.config,title:a.value.table.useDialog?"":ge.value.title,withCloseButton:!a.value.table.useDialog,onClose:Aa},{th:x(({th:t})=>[J("div",{innerHTML:t},null,8,bt)]),td:x(({td:t})=>[Ra(qe(t),1)]),_:1},8,["colNames","head","body","config","title","withCloseButton"]))]),_:2},[a.value.table.useDialog?{name:"title",fn:x(()=>[Ra(qe(ge.value.title),1)]),key:"0"}:void 0,a.value.table.useDialog?{name:"actions",fn:x(()=>[J("button",{tabindex:"0",class:"vue-ui-user-options-button",onClick:l[4]||(l[4]=t=>Be(a.value.userOptions.callbacks.csv))},[Ta(Bl,{name:"excel",stroke:ge.value.props.color},null,8,["stroke"])])]),key:"1"}:void 0]),1040)):U("",!0),a.value.userOptions.buttons.annotator&&m.value.length?(F(),Y(L(Ba),{key:7,parent:V.value,backgroundColor:a.value.style.chart.backgroundColor,color:a.value.style.chart.color,active:Fe.value,onClose:Ue},null,8,["parent","backgroundColor","color","active"])):U("",!0)],46,yt))}},Nt=Tl(xt,[["__scopeId","data-v-8c17f74b"]]);export{Nt as default};
